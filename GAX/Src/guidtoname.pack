<?xml version="1.0" encoding="utf-8"?>
<jjpack>
  <VERSION>1</VERSION>
  <SDPORT>tkpagsd.partners.extranet.microsoft.com:4044</SDPORT>
  <CHANGES>
    <CHANGE>
      <NameValueCollection>
        <Change>default</Change>
      </NameValueCollection>
      <Files>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>10</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/GuidancePackages/MetaGuidancePackage/Microsoft.Practices.RecipeFramework.MetaGuidancePackage.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIgDQoJCQkJCQkJCSB4bWxuczp4aT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YSW5jbHVkZSINCgkJCQkJCQkJIENhcHRpb249Ikd1aWRhbmNlIFBhY2thZ2UgRGV2ZWxvcG1lbnQiDQoJCQkJCQkJCSBHdWlkPSIyM0ZDMjlDOS1GQUZFLTQ3ZjEtQjYzMy1CNTQ4RTc4OEREREYiDQoJCQkJCQkJCSBUcmFjZUxldmVsPSJJbmZvIg0KCQkJCQkJCQkgU29ydFByaW9yaXR5PSIyMDAiDQoJCQkJCQkJCSBCaW5kaW5nUmVjaXBlPSJCaW5kUmVnaXN0cmF0aW9uUmVjaXBlcyINCgkJCQkJCQkJIFNjaGVtYVZlcnNpb249IjEuMCI+DQoJPFJlY2lwZXM+DQoJCTx4aTppbmNsdWRlIHBhcnNlPSJ4bWwiDQoJCQkJCQkJCWhyZWY9IlBhY2thZ2VSZWdpc3RyYXRpb24ueG1sIg0KCQkJCQkJCQl4cG9pbnRlcj0ieG1sbnMoZ2F4PWh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlKSB4cG9pbnRlcigvL2dheDpSZWNpcGUpIiAvPg0KCQk8UmVjaXBlIE5hbWU9IkJpbmRSZWdpc3RyYXRpb25SZWNpcGVzIj4NCgkJCTxDYXB0aW9uPlBhY2thZ2UgYmluZGluZyByZWNpcGUuPC9DYXB0aW9uPg0KCQkJPERlc2NyaXB0aW9uPkNyZWF0ZXMgdW5ib3VuZCByZWZlcmVuY2VzIGZvciBwYWNrYWdlIHJlZ2lzdHJhdGlvbiByZWNpcGVzLjwvRGVzY3JpcHRpb24+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkNyZWF0ZVJlZ2lzdGVyUmVmZXJlbmNlIiANCgkJCQkJCVR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5DcmVhdGVVbmJvdW5kUmVmZXJlbmNlQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiANCgkJCQkJCUFzc2V0TmFtZT0iUmVnaXN0ZXIiDQoJCQkJCQlSZWZlcmVuY2VUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlLlJlZ2lzdHJhdGlvbi5VbmJvdW5kUGFja2FnZVJlZmVyZW5jZSwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTWV0YUd1aWRhbmNlUGFja2FnZSIgLz4NCgkJCQk8QWN0aW9uIE5hbWU9IkNyZWF0ZVVucmVnaXN0ZXJSZWZlcmVuY2UiIA0KCQkJCQkJVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkNyZWF0ZVVuYm91bmRSZWZlcmVuY2VBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIA0KCQkJCQkJQXNzZXROYW1lPSJVbnJlZ2lzdGVyIg0KCQkJCQkJUmVmZXJlbmNlVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTWV0YUd1aWRhbmNlUGFja2FnZS5SZWdpc3RyYXRpb24uVW5ib3VuZFBhY2thZ2VSZWZlcmVuY2UsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLk1ldGFHdWlkYW5jZVBhY2thZ2UiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkNyZWF0ZUd1aWRhbmNlUGFja2FnZSI+DQoJCQk8VHlwZXM+DQoJCQkJPFR5cGVBbGlhcyBOYW1lPSJFeHByZXNzaW9uRXZhbHVhdG9yVmFsdWVQcm92aWRlciIgDQogICAgICAgICAgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5WYWx1ZVByb3ZpZGVycy5FeHByZXNzaW9uRXZhbHVhdG9yVmFsdWVQcm92aWRlcixNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQoJCQkJPFR5cGVBbGlhcyBOYW1lPSJEZWZhdWx0QXV0aG9yVmFsdWVQcm92aWRlciIgDQogICAgICAgICAgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5WYWx1ZVByb3ZpZGVycy5EZWZhdWx0QXV0aG9yVmFsdWVQcm92aWRlcixNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQoJCQk8L1R5cGVzPg0KCQkJPENhcHRpb24+Q3JlYXRlIE5ldyBHdWlkYW5jZSBQYWNrYWdlPC9DYXB0aW9uPg0KCQkJPERlc2NyaXB0aW9uPkNyZWF0ZXMgYSBuZXcgR3VpZGFuY2UgUGFja2FnZTwvRGVzY3JpcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJQYWNrYWdlTmFtZSI+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IkV4cHJlc3Npb25FdmFsdWF0b3JWYWx1ZVByb3ZpZGVyIiBFeHByZXNzaW9uPSIkKHNhZmVwcm9qZWN0bmFtZSkiLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJQYWNrYWdlQ2FwdGlvbiI+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IkV4cHJlc3Npb25FdmFsdWF0b3JWYWx1ZVByb3ZpZGVyIiBFeHByZXNzaW9uPSIkKHNhZmVwcm9qZWN0bmFtZSkiLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJQYWNrYWdlTmFtZXNwYWNlIj4NCgkJCQkJPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuTmFtZXNwYWNlU3RyaW5nQ29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCQk8QXJndW1lbnQgTmFtZT0iUGFja2FnZURlc2NyaXB0aW9uIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJQYWNrYWdlUHJvamVjdCIgVHlwZT0iRW52RFRFLlByb2plY3QsIEVudkRURSI+DQoJCQkJCTxDb252ZXJ0ZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5Db252ZXJ0ZXJzLlByb2plY3RDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IkV4cHJlc3Npb25FdmFsdWF0b3JWYWx1ZVByb3ZpZGVyIiBFeHByZXNzaW9uPSIkKFBhY2thZ2VOYW1lKSIgU3RhZ2U9Ik9uQmVmb3JlQWN0aW9ucyIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJQYWNrYWdlSW5zdGFsbGVyUHJvamVjdCIgVHlwZT0iRW52RFRFLlByb2plY3QsIEVudkRURSI+DQoJCQkJCTxDb252ZXJ0ZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5Db252ZXJ0ZXJzLlByb2plY3RDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IkV4cHJlc3Npb25FdmFsdWF0b3JWYWx1ZVByb3ZpZGVyIiBFeHByZXNzaW9uPSIkKFBhY2thZ2VOYW1lKUluc3RhbGxlciIgU3RhZ2U9Ik9uQmVmb3JlQWN0aW9ucyIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBdXRob3IiIFR5cGU9IlN5c3RlbS5TdHJpbmciPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJEZWZhdWx0QXV0aG9yVmFsdWVQcm92aWRlciIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIFNjaGVtYVZlcnNpb249IjEuMCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5OZXcgR3VpZGFuY2UgUGFja2FnZTwvVGl0bGU+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iUGFja2FnZU5hbWUiIExhYmVsPSJQYWNrYWdlIE5hbWUiIFJlYWRPbmx5PSJ0cnVlIi8+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlBhY2thZ2VDYXB0aW9uIiBMYWJlbD0iUGFja2FnZSBDYXB0aW9uIiAvPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJQYWNrYWdlRGVzY3JpcHRpb24iIExhYmVsPSJQYWNrYWdlIERlc2NyaXB0aW9uIiAvPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJQYWNrYWdlTmFtZXNwYWNlIiBMYWJlbD0iUGFja2FnZSBOYW1lc3BhY2UiIC8+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkF1dGhvciIgTGFiZWw9IkF1dGhvciIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTwhLS08QWN0aW9uIE5hbWU9IlJlbmFtZUNTaGFycFByb2plY3RzVG1wIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlLkFjdGlvbnMuUmVuYW1lQ1NoYXJwUHJvamVjdHMsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLk1ldGFHdWlkYW5jZVBhY2thZ2UiIC8+LS0+DQoJCQkJPEFjdGlvbiBOYW1lPSJHZXRQcm9qZWN0IiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuR2V0UHJvamVjdEFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSI+DQoJCQkJCTxJbnB1dCBOYW1lPSJQcm9qZWN0TmFtZSIgUmVjaXBlQXJndW1lbnQ9IlBhY2thZ2VOYW1lIi8+DQoJCQkJCTxPdXRwdXQgTmFtZT0iUHJvamVjdCIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iQ3JlYXRlU2V0dXBQcm9qZWN0IiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlLkFjdGlvbnMuQ3JlYXRlU2V0dXBQcm9qZWN0QWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlIj4NCgkJCQkJPElucHV0IE5hbWU9IlBhY2thZ2VOYW1lIiBSZWNpcGVBcmd1bWVudD0iUGFja2FnZU5hbWUiLz4NCgkJCQkJPE91dHB1dCBOYW1lPSJQcm9qZWN0TmFtZSIvPg0KCQkJCQk8T3V0cHV0IE5hbWU9IlByb2plY3RGb2xkZXIiLz4NCgkJCQkJPE91dHB1dCBOYW1lPSJUZW1wbGF0ZSIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iR2V0SW5zdGFsbGVyUHJvamVjdCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkdldFByb2plY3RBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiPg0KCQkJCQk8SW5wdXQgTmFtZT0iUHJvamVjdE5hbWUiIEFjdGlvbk91dHB1dD0iQ3JlYXRlU2V0dXBQcm9qZWN0Lkluc3RhbGxlclByb2plY3ROYW1lIi8+DQoJCQkJCTxPdXRwdXQgTmFtZT0iUHJvamVjdCIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iQ3JlYXRlUHJvamVjdEFjdGlvbiIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkNyZWF0ZVByb2plY3RBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiPg0KCQkJCQk8SW5wdXQgTmFtZT0iUHJvamVjdE5hbWUiIEFjdGlvbk91dHB1dD0iQ3JlYXRlU2V0dXBQcm9qZWN0LlByb2plY3ROYW1lIi8+DQoJCQkJCTxJbnB1dCBOYW1lPSJQcm9qZWN0Rm9sZGVyIiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVNldHVwUHJvamVjdC5Qcm9qZWN0Rm9sZGVyIi8+DQoJCQkJCTxJbnB1dCBOYW1lPSJUZW1wbGF0ZSIgQWN0aW9uT3V0cHV0PSJDcmVhdGVTZXR1cFByb2plY3QuVGVtcGxhdGUiLz4NCgkJCQkJPE91dHB1dCBOYW1lID0iUHJvamVjdCIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iQWRkVlNSZWdpc3RyeVNlYXJjaCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLlZzZC5BZGRSZWdpc3RyeUxvY2F0b3JBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIA0KICAgICAgICAgICAgICAgIExvY2F0b3JOYW1lPSJWUyINCiAgICAgICAgICAgICAgICBSZWdpc3RyeUtleT0iU09GVFdBUkVcTWljcm9zb2Z0XFZpc3VhbFN0dWRpb1w4LjBcU2V0dXBcVlMiDQogICAgICAgICAgICAgICAgUHJvcGVydHk9IlZTIg0KICAgICAgICAgICAgICAgIFZhbHVlPSJQcm9kdWN0RGlyIj4NCgkJCQkJPElucHV0IE5hbWU9IlNldHVwUHJvamVjdCIgQWN0aW9uT3V0cHV0PSJDcmVhdGVQcm9qZWN0QWN0aW9uLlByb2plY3QiLz4NCgkJCQk8L0FjdGlvbj4NCgkJCQk8QWN0aW9uIE5hbWU9IkFkZFJ1bnRpbWVSZWdpc3RyeVNlYXJjaCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLlZzZC5BZGRSZWdpc3RyeUxvY2F0b3JBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIA0KICAgICAgICAgICAgICAgIExvY2F0b3JOYW1lPSJSVU5USU1FIg0KICAgICAgICAgICAgICAgIFJlZ2lzdHJ5S2V5PSJTT0ZUV0FSRVxNaWNyb3NvZnRcVmlzdWFsU3R1ZGlvXDguMFxJbnN0YWxsZWRQcm9kdWN0c1xSZWNpcGVNYW5hZ2VyUGFja2FnZSINCiAgICAgICAgICAgICAgICBQcm9wZXJ0eT0iUlVOVElNRSINCiAgICAgICAgICAgICAgICBWYWx1ZT0iUGFja2FnZSI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRDU2hhcnBSZWdpc3RyeVNlYXJjaCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLlZzZC5BZGRSZWdpc3RyeUxvY2F0b3JBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIA0KICAgICAgICAgICAgICAgIExvY2F0b3JOYW1lPSJDU0hBUlAiDQogICAgICAgICAgICAgICAgUmVnaXN0cnlLZXk9IlNPRlRXQVJFXE1pY3Jvc29mdFxWaXN1YWxTdHVkaW9cOC4wXEluc3RhbGxlZFByb2R1Y3RzXE1pY3Jvc29mdCBWaXN1YWwgQyMiDQogICAgICAgICAgICAgICAgUHJvcGVydHk9IkNTSEFSUCINCiAgICAgICAgICAgICAgICBWYWx1ZT0iUGFja2FnZSI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRWU0xhdW5jaENvbmRpdGlvbiIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLlZzZC5BZGRMYXVuY2hDb25kaXRpb25BY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIA0KICAgICAgICAgICAgICAgIExhdW5jaENvbmRpdGlvbk5hbWU9IlZTLk5FVCINCiAgICAgICAgICAgICAgICBDb25kaXRpb249IlZTIg0KICAgICAgICAgICAgICAgIE1lc3NhZ2U9IlZpc3VhbCBTdHVkaW8gLk5FVCA4LjAgaXMgbm90IGluc3RhbGxlZC4gRG8geW91IHdhbnQgdG8gc2VlIGluZm9ybWF0aW9uIG9mIHRoZSBwcm9kdWN0PyBDbGljayBZZXMgdG8gYmUgZGlyZWN0ZWQgdG8gYSB3ZWIgcGFnZSwgY2xpY2sgTm8gdG8gZXhpdC4iDQogICAgICAgICAgICAgICAgSW5zdGFsbFVybD0iaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS92c3R1ZGlvLyI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRDU2hhcnBMYXVuY2hDb25kaXRpb24iIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Wc2QuQWRkTGF1bmNoQ29uZGl0aW9uQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiANCiAgICAgICAgICAgICAgICBMYXVuY2hDb25kaXRpb25OYW1lPSJDIyBMYW5ndWFnZSINCiAgICAgICAgICAgICAgICBDb25kaXRpb249IkNTSEFSUCINCiAgICAgICAgICAgICAgICBNZXNzYWdlPSJDIyBMYW5ndWFnZSBpcyBub3QgaW5zdGFsbGVkLiAgRG8geW91IHdhbnQgdG8gc2VlIGluZm9ybWF0aW9uIG9mIHRoZSBwcm9kdWN0PyBDbGljayBZZXMgdG8gYmUgZGlyZWN0ZWQgdG8gYSB3ZWIgcGFnZSwgY2xpY2sgTm8gdG8gZXhpdC4iDQogICAgICAgICAgICAgICAgSW5zdGFsbFVybD0iaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS92Y3NoYXJwL3Byb2R1Y3RpbmZvLyI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRSdW50aW1lTGF1bmNoQ29uZGl0aW9uIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuVnNkLkFkZExhdW5jaENvbmRpdGlvbkFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgDQogICAgICAgICAgICAgICAgTGF1bmNoQ29uZGl0aW9uTmFtZT0iR3VpZGFuY2UgQXV0b21hdGlvbiBFeHRlbnNpb25zIg0KICAgICAgICAgICAgICAgIENvbmRpdGlvbj0iUlVOVElNRSINCiAgICAgICAgICAgICAgICBNZXNzYWdlPSJHdWlkYW5jZSBBdXRvbWF0aW9uIEV4dGVuc2lvbnMgaXMgbm90IGluc3RhbGxlZC4gQ2xpY2sgWWVzIHRvIGJlIGRpcmVjdGVkIHRvIGEgd2ViIHBhZ2Ugd2l0aCB0aGUgZXh0ZW5zaW9ucyBNU0kuIENsaWNrIE5vIHRvIEV4aXQuIg0KICAgICAgICAgICAgICAgIEluc3RhbGxVcmw9Imh0dHA6Ly93d3cubWljcm9zb2Z0LmNvbS9yZXNvdXJjZXMvcHJhY3RpY2VzL2FwcGxpY2F0aW9uL3NlcnZpY2VzLm1zcHgiPg0KCQkJCQk8SW5wdXQgTmFtZT0iU2V0dXBQcm9qZWN0IiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVByb2plY3RBY3Rpb24uUHJvamVjdCIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iQWRkUHVibGljQXNzZW1ibGllc0ZvbGRlciIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLlZzZC5BZGRGb2xkZXJBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiDQogICAgICAgICAgICAgICAgRGVmYXVsdExvY2F0aW9uPSJbVlNdQ29tbW9uN1xJREVcUHVibGljQXNzZW1ibGllcyINCiAgICAgICAgICAgICAgICBQcm9wZXJ0eT0iUFVCTElDQVNTRU1CTElFUyINCiAgICAgICAgICAgICAgICBGb2xkZXJOYW1lPSJQdWJsaWNBc3NlbWJsaWVzIj4NCgkJCQkJPElucHV0IE5hbWU9IlNldHVwUHJvamVjdCIgQWN0aW9uT3V0cHV0PSJDcmVhdGVQcm9qZWN0QWN0aW9uLlByb2plY3QiLz4NCgkJCQk8L0FjdGlvbj4NCgkJCQk8QWN0aW9uIE5hbWU9IkFkZE91dHB1dEJ1aWx0IiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuVnNkLkFkZFByb2plY3RPdXRwdXRBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiPg0KCQkJCQk8SW5wdXQgTmFtZT0iU2V0dXBQcm9qZWN0IiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVByb2plY3RBY3Rpb24uUHJvamVjdCIvPg0KCQkJCQk8SW5wdXQgTmFtZT0iSW5wdXRQcm9qZWN0IiBBY3Rpb25PdXRwdXQ9IkdldFByb2plY3QuUHJvamVjdCIvPg0KCQkJCQk8SW5wdXQgTmFtZT0iUHJvamVjdE91dHB1dEtpbmQiIEFjdGlvbk91dHB1dD0iQ3JlYXRlU2V0dXBQcm9qZWN0LkJ1aWx0Ii8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRJbnN0YWxsZXJPdXRwdXRCdWlsdCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLlZzZC5BZGRQcm9qZWN0T3V0cHV0QWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ij4NCgkJCQkJPElucHV0IE5hbWU9IlNldHVwUHJvamVjdCIgQWN0aW9uT3V0cHV0PSJDcmVhdGVQcm9qZWN0QWN0aW9uLlByb2plY3QiLz4NCgkJCQkJPElucHV0IE5hbWU9IklucHV0UHJvamVjdCIgQWN0aW9uT3V0cHV0PSJHZXRJbnN0YWxsZXJQcm9qZWN0LlByb2plY3QiLz4NCgkJCQkJPElucHV0IE5hbWU9IkZvbGRlciIgQWN0aW9uT3V0cHV0PSJBZGRQdWJsaWNBc3NlbWJsaWVzRm9sZGVyLkZvbGRlciIvPg0KCQkJCQk8SW5wdXQgTmFtZT0iUHJvamVjdE91dHB1dEtpbmQiIEFjdGlvbk91dHB1dD0iQ3JlYXRlU2V0dXBQcm9qZWN0LkJ1aWx0Ii8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRPdXRwdXRDb250ZW50RmlsZXMiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Wc2QuQWRkUHJvamVjdE91dHB1dEFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJJbnB1dFByb2plY3QiIEFjdGlvbk91dHB1dD0iR2V0UHJvamVjdC5Qcm9qZWN0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJQcm9qZWN0T3V0cHV0S2luZCIgQWN0aW9uT3V0cHV0PSJDcmVhdGVTZXR1cFByb2plY3QuQ29udGVudEZpbGVzIi8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRDdXN0b21BY3Rpb25JbnN0YWxsIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuVnNkLkFkZEN1c3RvbUFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgQWN0aW9uTmFtZT0iR3VpZGFuY2VQYWNrYWdlSW5zdGFsbCIgSW5zdGFsbEFjdGlvbj0iSW5zdGFsbCI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJBc3NlbWJseSIgQWN0aW9uT3V0cHV0PSJBZGRJbnN0YWxsZXJPdXRwdXRCdWlsdC5Qcm9qZWN0T3V0cHV0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJDdXN0b21BY3Rpb25EYXRhIiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVNldHVwUHJvamVjdC5DdXN0b21BY3Rpb25EYXRhIi8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRDdXN0b21BY3Rpb25Db21taXQiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Wc2QuQWRkQ3VzdG9tQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiBBY3Rpb25OYW1lPSJHdWlkYW5jZVBhY2thZ2VDb21taXQiIEluc3RhbGxBY3Rpb249IkNvbW1pdCI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJBc3NlbWJseSIgQWN0aW9uT3V0cHV0PSJBZGRJbnN0YWxsZXJPdXRwdXRCdWlsdC5Qcm9qZWN0T3V0cHV0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJDdXN0b21BY3Rpb25EYXRhIiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVNldHVwUHJvamVjdC5DdXN0b21BY3Rpb25EYXRhIi8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRDdXN0b21BY3Rpb25Vbmluc3RhbGwiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Wc2QuQWRkQ3VzdG9tQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiBBY3Rpb25OYW1lPSJHdWlkYW5jZVBhY2thZ2VVbmluc3RhbGwiIEluc3RhbGxBY3Rpb249IlVuaW5zdGFsbCI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJBc3NlbWJseSIgQWN0aW9uT3V0cHV0PSJBZGRJbnN0YWxsZXJPdXRwdXRCdWlsdC5Qcm9qZWN0T3V0cHV0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJDdXN0b21BY3Rpb25EYXRhIiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVNldHVwUHJvamVjdC5DdXN0b21BY3Rpb25EYXRhIi8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRDdXN0b21BY3Rpb25Sb2xsYmFjayIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLlZzZC5BZGRDdXN0b21BY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIEFjdGlvbk5hbWU9Ikd1aWRhbmNlUGFja2FnZVJvbGxiYWNrIiBJbnN0YWxsQWN0aW9uPSJSb2xsYmFjayI+DQoJCQkJCTxJbnB1dCBOYW1lPSJTZXR1cFByb2plY3QiIEFjdGlvbk91dHB1dD0iQ3JlYXRlUHJvamVjdEFjdGlvbi5Qcm9qZWN0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJBc3NlbWJseSIgQWN0aW9uT3V0cHV0PSJBZGRJbnN0YWxsZXJPdXRwdXRCdWlsdC5Qcm9qZWN0T3V0cHV0Ii8+DQoJCQkJCTxJbnB1dCBOYW1lPSJDdXN0b21BY3Rpb25EYXRhIiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVNldHVwUHJvamVjdC5DdXN0b21BY3Rpb25EYXRhIi8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJTZXRJbnN0YWxsQWxsVXNlcnMiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Wc2QuU2V0UHJvZHVjdFByb3BlcnRpZXNBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiDQogICAgICAgICAgSW5zdGFsbEFsbFVzZXJzPSJ0cnVlIj4NCgkJCQkJPElucHV0IE5hbWU9IkF1dGhvciIgUmVjaXBlQXJndW1lbnQ9IkF1dGhvciIvPg0KCQkJCQk8SW5wdXQgTmFtZT0iU2V0dXBQcm9qZWN0IiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVByb2plY3RBY3Rpb24uUHJvamVjdCIvPg0KCQkJCQk8SW5wdXQgTmFtZT0iRGVzY3JpcHRpb24iIFJlY2lwZUFyZ3VtZW50PSJQYWNrYWdlRGVzY3JpcHRpb24iLz4NCgkJCQk8L0FjdGlvbj4NCgkJCQk8QWN0aW9uIE5hbWU9IkV4Y2x1ZGVBbGxEZXBlbmRlbmNpZXMiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Wc2QuRXhjbHVkZUFsbERlcGVuZGVuY2llc0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgQWN0aW9uTmFtZT0iR3VpZGFuY2VQYWNrYWdlVW5pbnN0YWxsIiBJbnN0YWxsQWN0aW9uPSJVbmluc3RhbGwiPg0KCQkJCQk8SW5wdXQgTmFtZT0iU2V0dXBQcm9qZWN0IiBBY3Rpb25PdXRwdXQ9IkNyZWF0ZVByb2plY3RBY3Rpb24uUHJvamVjdCIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iU2V0RGVwZW5kZW5jeSIgDQogICAgICAgICAgICAgICAgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkFkZFByb2plY3REZXBlbmRlbmN5QWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiBBY3Rpb25OYW1lPSJHdWlkYW5jZVBhY2thZ2VVbmluc3RhbGwiIEluc3RhbGxBY3Rpb249IlVuaW5zdGFsbCI+DQoJCQkJCTxJbnB1dCBOYW1lPSJQcm9qZWN0IiBSZWNpcGVBcmd1bWVudD0iUGFja2FnZVByb2plY3QiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJEZXBlbmRlbmN5UHJvamVjdCIgUmVjaXBlQXJndW1lbnQ9IlBhY2thZ2VJbnN0YWxsZXJQcm9qZWN0IiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iRW5hYmxlQnVpbGRQcm9qZWN0c0FjdGlvbiIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTWV0YUd1aWRhbmNlUGFja2FnZS5BY3Rpb25zLkVuYWJsZUJ1aWxkUHJvamVjdHNBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLk1ldGFHdWlkYW5jZVBhY2thZ2UiIC8+DQoJCQkJPEFjdGlvbiBOYW1lPSJDbG9zZURvY3VtZW50V2luZG93cyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTWV0YUd1aWRhbmNlUGFja2FnZS5BY3Rpb25zLkNsb3NlRG9jdW1lbnRXaW5kb3dzLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlIiAvPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJDcmVhdGVOZXdBY3Rpb24iPg0KCQkJPFR5cGVzPg0KCQkJCTxUeXBlQWxpYXMgTmFtZT0iRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIiIA0KICAgICAgICAgIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIvPg0KCQkJPC9UeXBlcz4NCgkJCTxDYXB0aW9uPkNyZWF0ZSBOZXcgQWN0aW9uPC9DYXB0aW9uPg0KCQkJPERlc2NyaXB0aW9uPkNyZWF0ZXMgYSBuZXcgYWN0aW9uIGNsYXNzPC9EZXNjcmlwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkFjdGlvbk5hbWUiIFR5cGUgPSJTeXN0ZW0uU3RyaW5nIj4NCgkJCQkJPFZhbHVlUHJvdmlkZXIgVHlwZT0iRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIiIEV4cHJlc3Npb249IiQoc2FmZWl0ZW1yb290bmFtZSkiLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIFNjaGVtYVZlcnNpb249IjEuMCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5OZXcgQWN0aW9uPC9UaXRsZT4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBY3Rpb25OYW1lIiBMYWJlbD0iV2hhdCBpcyB0aGUgbmFtZSBvZiB0aGUgQWN0aW9uPyIgLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iQWRkQWN0aW9uUGFyYW1ldGVyIj4NCgkJCTxDYXB0aW9uPkFkZCBuZXcgYWN0aW9uIHBhcmFtZXRlcjwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj5BZGRzIGEgbmV3IHBhcmFtZXRlciBpbiB0aGUgc2VsZWN0ZWQgQWN0aW9uIGNsYXNzPC9EZXNjcmlwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iMjk2Ii8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iSXRlbSIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlBhcmFtZXRlck5hbWUiIFR5cGUgPSJTeXN0ZW0uU3RyaW5nIi8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlBhcmFtZXRlcklzT3V0cHV0IiBUeXBlID0iU3lzdGVtLkJvb2xlYW4iLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iUGFyYW1ldGVyVHlwZSIgVHlwZSA9IlN5c3RlbS5TdHJpbmciLz4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KCQkJCQk8UGFnZXM+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+TmV3IEFjdGlvbiBQYXJhbWV0ZXI8L1RpdGxlPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlBhcmFtZXRlck5hbWUiIExhYmVsPSJXaGF0IGlzIHRoZSBuYW1lIG9mIHRoZSBQYXJhbWV0ZXI/IiAvPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJQYXJhbWV0ZXJUeXBlIiBMYWJlbD0iV2hhdCBpcyB0aGUgdHlwZSBvZiB0aGUgUGFyYW1ldGVyPyIgLz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iUGFyYW1ldGVySXNPdXRwdXQiIExhYmVsPSJJcyB0aGUgcGFyYW1ldGVyIGFuIG91dHB1dCBwYXJhbWV0ZXI/IiAvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iQWRkQWN0aW9uUGFyYW1ldGVyIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlLkFjdGlvbnMuQWRkQWN0aW9uUGFyYW1ldGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlIiA+DQoJCQkJCTxJbnB1dCBOYW1lPSJQYXJhbWV0ZXJOYW1lIiBSZWNpcGVBcmd1bWVudD0iUGFyYW1ldGVyTmFtZSIvPg0KCQkJCQk8SW5wdXQgTmFtZT0iUGFyYW1ldGVyVHlwZSIgUmVjaXBlQXJndW1lbnQ9IlBhcmFtZXRlclR5cGUiLz4NCgkJCQkJPElucHV0IE5hbWU9IlBhcmFtZXRlcklzT3V0cHV0IiBSZWNpcGVBcmd1bWVudD0iUGFyYW1ldGVySXNPdXRwdXQiLz4NCgkJCQk8L0FjdGlvbj4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iU2V0SXRlbXNCdWlsZFByb3BlcnRpZXMiPg0KCQkJPENhcHRpb24+U2V0IENvbnRlbnQgRmlsZXMgQnVpbGQgUHJvcGVydGllczwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj4NCgkJCQlTZXQgQnVpbGQgUHJvcGVydGllcyB0byBhbGwgc3ViIGl0ZW1zIGluc2lkZSB0aGUgZm9sZGVyIFRlbXBsYXRlcy4gVGhlIHNldHRpbmdzIHRvIGNoYW5nZSBpbiBlYWNoIGZpbGUgYXJlOg0KCQkJCUNvcHkgdG8gT3V0cHV0IERpcmVjdG9yeSB0byB0aGUgdmFsdWUgIkNvcHkgaWYgbmV3ZXIiIGFuZCBCdWlsZEFjdGlvbiB0byAiQ29udGVudCINCgkJCTwvRGVzY3JpcHRpb24+DQoJCQk8SG9zdERhdGE+DQoJCQkJPEljb24gSUQ9IjMwMSIvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IkZvbGRlciIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTWV0YUd1aWRhbmNlUGFja2FnZS5BY3Rpb25zLlNldEl0ZW1zQnVpbGRQcm9wZXJ0aWVzLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5NZXRhR3VpZGFuY2VQYWNrYWdlIg0KICAgICAgICAgICAgICAgIE5hbWU9IlNldEl0ZW1zQnVpbGRQcm9wZXJ0aWVzIi8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCTwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>8</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/GuidancePackages/MetaGuidancePackage/Templates/Solutions/GuidancePackageSolution.vstemplate</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PFZTVGVtcGxhdGUgDQoJVmVyc2lvbj0iMi4wIiANCglUeXBlPSJQcm9qZWN0R3JvdXAiDQoJeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vZGV2ZWxvcGVyL3ZzdGVtcGxhdGUvMjAwNSI+DQoJPFRlbXBsYXRlRGF0YT4NCgkJPE5hbWU+R3VpZGFuY2UgUGFja2FnZTwvTmFtZT4NCgkJPERlc2NyaXB0aW9uPkNyZWF0ZXMgYSBzb2x1dGlvbiB0byBkZXZlbG9wIGEgR3VpZGFuY2UgUGFja2FnZTwvRGVzY3JpcHRpb24+DQoJCTxQcm9qZWN0VHlwZT5DU2hhcnA8L1Byb2plY3RUeXBlPg0KCQk8U29ydE9yZGVyPjkwPC9Tb3J0T3JkZXI+DQoJCTxDcmVhdGVOZXdGb2xkZXI+dHJ1ZTwvQ3JlYXRlTmV3Rm9sZGVyPg0KCQk8RGVmYXVsdE5hbWU+R3VpZGFuY2VQYWNrYWdlPC9EZWZhdWx0TmFtZT4NCgkJPFByb3ZpZGVEZWZhdWx0TmFtZT50cnVlPC9Qcm92aWRlRGVmYXVsdE5hbWU+DQoJCTxJY29uPkd1aWRhbmNlUGFja2FnZVNvbHV0aW9uLmljbzwvSWNvbj4NCgk8L1RlbXBsYXRlRGF0YT4NCgk8VGVtcGxhdGVDb250ZW50Pg0KCQk8UHJvamVjdENvbGxlY3Rpb24+DQoJCQk8UHJvamVjdFRlbXBsYXRlTGluayBQcm9qZWN0TmFtZT0iJFBhY2thZ2VDYXB0aW9uJEluc3RhbGxlciI+UHJvamVjdHNcR3VpZGFuY2VQYWNrYWdlSW5zdGFsbGVyXEd1aWRhbmNlUGFja2FnZUluc3RhbGxlci52c3RlbXBsYXRlPC9Qcm9qZWN0VGVtcGxhdGVMaW5rPg0KCQkJPFByb2plY3RUZW1wbGF0ZUxpbmsgUHJvamVjdE5hbWU9IiRQYWNrYWdlQ2FwdGlvbiQiPlByb2plY3RzXEd1aWRhbmNlUGFja2FnZVxHdWlkYW5jZVBhY2thZ2UudnN0ZW1wbGF0ZTwvUHJvamVjdFRlbXBsYXRlTGluaz4NCgkJPC9Qcm9qZWN0Q29sbGVjdGlvbj4NCgk8L1RlbXBsYXRlQ29udGVudD4NCgk8V2l6YXJkRXh0ZW5zaW9uPg0KCQk8QXNzZW1ibHk+TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLCBWZXJzaW9uPTEuMC41MDUwNS4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWIwM2Y1ZjdmMTFkNTBhM2E8L0Fzc2VtYmx5Pg0KCQk8RnVsbENsYXNzTmFtZT5NaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVtcGxhdGVzLlVuZm9sZFRlbXBsYXRlPC9GdWxsQ2xhc3NOYW1lPg0KCTwvV2l6YXJkRXh0ZW5zaW9uPg0KCTxXaXphcmREYXRhPg0KCQk8VGVtcGxhdGUgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC10ZW1wbGF0ZSINCiAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIg0KICAgICAgICAgICAgICBSZWNpcGU9IkNyZWF0ZUd1aWRhbmNlUGFja2FnZSI+DQoJCTwvVGVtcGxhdGU+DQoJPC9XaXphcmREYXRhPg0KPC9WU1RlbXBsYXRlPg0K</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>14</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/GuidancePackages/MetaGuidancePackage/Templates/Solutions/Projects/GuidancePackage/GuidancePackage.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSINCiAgICBHdWlkPSIkZ3VpZDEkIiANCiAgICBDYXB0aW9uPSIkUGFja2FnZUNhcHRpb24kIg0KICAgIERlc2NyaXB0aW9uPSIkUGFja2FnZURlc2NyaXB0aW9uJCINCiAgICBCaW5kaW5nUmVjaXBlPSJCaW5kaW5nUmVjaXBlIg0KICAgIFNjaGVtYVZlcnNpb249IjEuMCI+DQoJPFJlY2lwZXM+DQoJCTxSZWNpcGUgTmFtZT0iQmluZGluZ1JlY2lwZSI+DQoJCQk8VHlwZXM+DQoJCQkJPFR5cGVBbGlhcyBOYW1lPSJSZWZDcmVhdG9yIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuQ3JlYXRlVW5ib3VuZFJlZmVyZW5jZUFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIvPg0KCQkJPC9UeXBlcz4NCgkJCTxDYXB0aW9uPkNyZWF0ZXMgdW5ib3VuZCByZWZlcmVuY2VzIHRvIHRoZSBndWlkYW5jZSBwYWNrYWdlPC9DYXB0aW9uPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJVbmJvdW5kVDRUZW1wbGF0ZSIgVHlwZT0iUmVmQ3JlYXRvciIgQXNzZXROYW1lPSJHZW5lcmF0ZVJlcGVhdGluZ0NsYXNzVDQiDQoJCQkJCQlSZWZlcmVuY2VUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFzc2V0UmVmZXJlbmNlcy5VbmJvdW5kUmVmZXJlbmNlcy5DU2hhcnBQcm9qZWN0UmVjaXBlUmVmZXJlbmNlLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KCQkJCTxBY3Rpb24gTmFtZT0iQ3JlYXRlU2FtcGxlVW5ib3VuZFRlbXBsYXRlUmVmIiBUeXBlPSJSZWZDcmVhdG9yIiBBc3NldE5hbWU9IlByb2plY3RzXFNhbXBsZUxpYnJhcnlcU2FtcGxlTGlicmFyeS52c3RlbXBsYXRlIg0KCQkJCQkJUmVmZXJlbmNlVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLlJlZmVyZW5jZXMuU29sdXRpb25Gb2xkZXJBUmVmZXJlbmNlLCAkUGFja2FnZU5hbWUkIiAvPg0KCQkJCTxBY3Rpb24gTmFtZT0iQ3JlYXRlU2FtcGxlVW5ib3VuZEl0ZW1UZW1wbGF0ZVJlZiIgVHlwZT0iUmVmQ3JlYXRvciIgQXNzZXROYW1lPSJJdGVtc1xDbGFzcy52c3RlbXBsYXRlIg0KCQkJCQkJUmVmZXJlbmNlVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLlJlZmVyZW5jZXMuQ2xhc3NMaWJyYXJ5UmVmZXJlbmNlLCAkUGFja2FnZU5hbWUkIiAvPg0KCQkJCTxBY3Rpb24gTmFtZT0iQ3JlYXRlVW5ib3VuZEl0ZW1UZW1wbGF0ZVJlZiIgVHlwZT0iUmVmQ3JlYXRvciIgQXNzZXROYW1lPSJBZGRJdGVtVGVtcGxhdGVSZWZlcmVuY2UiDQoJCQkJCQlSZWZlcmVuY2VUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFzc2V0UmVmZXJlbmNlcy5VbmJvdW5kUmVmZXJlbmNlcy5DU2hhcnBQcm9qZWN0UmVjaXBlUmVmZXJlbmNlLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KCQkJCTxBY3Rpb24gTmFtZT0iQ3JlYXRlVW5ib3VuZFByb2plY3RUZW1wbGF0ZVJlZiIgVHlwZT0iUmVmQ3JlYXRvciIgQXNzZXROYW1lPSJBZGRQcm9qZWN0VGVtcGxhdGVSZWZlcmVuY2UiDQoJCQkJCQlSZWZlcmVuY2VUeXBlPSIkUGFja2FnZU5hbWVzcGFjZSQuUmVmZXJlbmNlcy5Tb2x1dGlvbkZvbGRlclJlY2lwZVJlZmVyZW5jZSwgJFBhY2thZ2VOYW1lJCIgLz4NCgkJCQk8QWN0aW9uIE5hbWU9IkNyZWF0ZVVuYm91bmRSZWNpcGVSZWYiIFR5cGU9IlJlZkNyZWF0b3IiIEFzc2V0TmFtZT0iQWRkUmVjaXBlUmVmZXJlbmNlIg0KCQkJCQkJUmVmZXJlbmNlVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLlJlZmVyZW5jZXMuQW55RWxlbWVudFJlZmVyZW5jZSwgJFBhY2thZ2VOYW1lJCIgLz4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iQ3JlYXRlU29sdXRpb24iPg0KCQkJPENhcHRpb24+Q29sbGVjdHMgaW5mb3JtYXRpb24gZm9yIHRoZSBuZXcgc2FtcGxlIHNvbHV0aW9uLjwvQ2FwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlByb2plY3ROYW1lIj4NCgkJCQkJPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuTmFtZXNwYWNlU3RyaW5nQ29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCQk8QXJndW1lbnQgTmFtZT0iV2ViU2l0ZU5hbWUiPg0KCQkJCQk8Q29udmVydGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQ29udmVydGVycy5OYW1lc3BhY2VTdHJpbmdDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIFNjaGVtYVZlcnNpb249IjEuMCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5Jbml0aWFsIHZhbHVlcyBmb3IgdGhlIG5ldyBzb2x1dGlvbjwvVGl0bGU+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIExhYmVsPSJQcm9qZWN0IE5hbWUiIFZhbHVlTmFtZT0iUHJvamVjdE5hbWUiIC8+DQoJCQkJCQkJCTxGaWVsZCBMYWJlbD0iV2ViU2l0ZSBOYW1lIiBWYWx1ZU5hbWU9IldlYlNpdGVOYW1lIiAvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iR2VuZXJhdGVSZXBlYXRpbmdDbGFzc1Q0IiBCb3VuZD0iZmFsc2UiPg0KCQkJPHhpOmluY2x1ZGUgaHJlZj0iVHlwZUFsaWFzLnhtbCIgeG1sbnM6eGk9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWEluY2x1ZGUiIC8+DQoJCQk8Q2FwdGlvbj5BZGQgY2xhc3Mgd2l0aCBUNCBnZW5lcmF0ZWQgY29udGVudDwvQ2FwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iNjg5IiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlByb2plY3QiIC8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQ3VycmVudFByb2plY3QiIFR5cGU9IkVudkRURS5Qcm9qZWN0LCBFbnZEVEUsIFZlcnNpb249OC4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhIj4NCgkJCQkJPFZhbHVlUHJvdmlkZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5WYWx1ZVByb3ZpZGVycy5GaXJzdFNlbGVjdGVkUHJvamVjdCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJDbGFzc05hbWUiPg0KCQkJCQk8Q29udmVydGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQ29udmVydGVycy5Db2RlSWRlbnRpZmllclN0cmluZ0NvbnZlcnRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIvPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlRhcmdldEZpbGUiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJFdmFsdWF0b3IiDQoJCQkJCQkJCQkgRXhwcmVzc2lvbj0iJChDbGFzc05hbWUpLmNzIj4NCgkJCQkJCTxNb25pdG9yQXJndW1lbnQgTmFtZT0iQ2xhc3NOYW1lIiAvPg0KCQkJCQk8L1ZhbHVlUHJvdmlkZXI+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCQk8QXJndW1lbnQgTmFtZT0iVGFyZ2V0TmFtZXNwYWNlIj4NCgkJCQkJPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuTmFtZXNwYWNlU3RyaW5nQ29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IkV2YWx1YXRvciINCgkJCQkJCQkJCSBFeHByZXNzaW9uPSIkKEN1cnJlbnRQcm9qZWN0LlByb3BlcnRpZXMuSXRlbSgnRGVmYXVsdE5hbWVzcGFjZScpLlZhbHVlKSIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTwhLS0gU2hvdyB0aGF0IFQzIHJlY2VpdmVzIHR5cGVkIHZhbHVlcyBpbiB0aGUgZGljdGlvbmFyeSAtLT4NCgkJCQk8QXJndW1lbnQgTmFtZT0iSXRlcmF0aW9ucyIgVHlwZT0iU3lzdGVtLkludDMyIiAvPg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIFNjaGVtYVZlcnNpb249IjEuMCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5DbGFzcyBpbmZvcm1hdGlvbjwvVGl0bGU+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQ2xhc3NOYW1lIiBMYWJlbD0iQ2xhc3MgTmFtZSIgLz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iVGFyZ2V0TmFtZXNwYWNlIiBMYWJlbD0iTmFtZXNwYWNlIiAvPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJJdGVyYXRpb25zIiBMYWJlbD0iSXRlcmF0aW9ucyINCgkJCQkJCQkJCUludmFsaWRWYWx1ZU1lc3NhZ2U9Ik11c3QgZW50ZXIgYSB2YWxpZCBpbnRlZ2VyIHZhbHVlIHRvIHVzZSBmb3IgdGhlIG51bWJlciBvZiBpdGVyYXRpb25zLiIgLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkdlbmVyYXRlQ2xhc3MiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5UZW1wbGF0ZXMuVGV4dFRlbXBsYXRlQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ig0KCQkJCQkJVGVtcGxhdGU9IlRleHRcUmVwZWF0aW5nLmNzLnQ0IiANCgkJCQkJCUlucHV0VmFsdWU9IkNvbmZpZ3VyZWQgU3RhdGljIFZhbHVlIj4NCgkJCQkJPCEtLSBJbnB1dFZhbHVlIHNob3dzIGEgY29uZmlndXJlZCBhdHRyaWJ1dGUgaW4gVDQgdGVtcGxhdGUgdGhhdCBkb2Vzbid0IG5lZWQgYSBwcm9wZXJ0eSBvbiB0aGUgY2xhc3MgLS0+DQoJCQkJCTxJbnB1dCBOYW1lPSJDbGFzc05hbWUiIFJlY2lwZUFyZ3VtZW50PSJDbGFzc05hbWUiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJUYXJnZXROYW1lc3BhY2UiIFJlY2lwZUFyZ3VtZW50PSJUYXJnZXROYW1lc3BhY2UiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJJdGVyYXRpb25zIiBSZWNpcGVBcmd1bWVudD0iSXRlcmF0aW9ucyIgLz4NCgkJCQkJPE91dHB1dCBOYW1lPSJDb250ZW50IiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iQWRkQ2xhc3MiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5BZGRJdGVtRnJvbVN0cmluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSINCgkJCQkJCU9wZW49InRydWUiPg0KCQkJCQk8IS0tU2hvd3MgaG93IHRvIHNwZWNpZnkgYSBwcm9wZXJ0eSBhcyBhIGZpeGVkIHZhbHVlIGluIGNvbmZpZy0tPg0KCQkJCQk8SW5wdXQgTmFtZT0iQ29udGVudCIgQWN0aW9uT3V0cHV0PSJHZW5lcmF0ZUNsYXNzLkNvbnRlbnQiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJUYXJnZXRGaWxlTmFtZSIgUmVjaXBlQXJndW1lbnQ9IlRhcmdldEZpbGUiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJQcm9qZWN0IiBSZWNpcGVBcmd1bWVudD0iQ3VycmVudFByb2plY3QiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9Ik5ld0l0ZW1DbGFzcyIgUmVjdXJyZW50PSJ0cnVlIj4NCgkJCTx4aTppbmNsdWRlIGhyZWY9IlR5cGVBbGlhcy54bWwiIHhtbG5zOnhpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hJbmNsdWRlIiAvPg0KCQkJPENhcHRpb24+Q29sbGVjdHMgaW5mb3JtYXRpb24gZnJvbSB0aGUgdXNlcjwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj4NCgkJCQlUaGlzIHJlY2lwZSBkb2Vzbid0IHBlcmZvcm0gYW55IGFjdGlvbnMsIGJ1dCBzaG93Y2FzZXMgdGhlIGZlYXR1cmVzDQoJCQkJYXZhaWxhYmxlIHRvIGJ1aWxkIGhpZ2hseSBmdW5jdGlvbmFsIHdpemFyZHMgYnkgdGFraW5nIGFkdmFudGFnZSBvZg0KCQkJCXR5cGUgY29udmVydGVycyBhbmQgZWRpdG9ycy4NCgkJCTwvRGVzY3JpcHRpb24+DQoJCQk8SG9zdERhdGE+DQoJCQkJPEljb24gSUQ9IjE0MjkiLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJQcm9qZWN0IiAvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkRldmVsb3BlciIgLz4NCgkJCQk8IS0tIEV4YW1wbGUgb2YgYXV0b21hdGljIFVJVHlwZUVkaXRvciBwcm92aWRlZCBieSAuTkVULCBhbmQgYSBjdXN0b20gdmFsdWUgcHJvdmlkZXIgLS0+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkRhdGUiIFR5cGU9IlN5c3RlbS5EYXRlVGltZSI+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5WYWx1ZVByb3ZpZGVycy5EYXRlTm93VmFsdWVQcm92aWRlciwgJFBhY2thZ2VOYW1lJCIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTwhLS0gRXhhbXBsZSBvZiBhdXRvbWF0aWMgY29udmVydGVyIHByb3ZpZGVkIGJ5IC5ORVQgLS0+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlBsYXRmb3JtIiBUeXBlPSJTeXN0ZW0uUGxhdGZvcm1JRCIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iSXRlcmF0aW9ucyIgVHlwZT0iU3lzdGVtLkludDMyIj4NCgkJCQkJPCEtLSBTaG93cyBob3cgdG8gdXNlIHRoZSBleHByZXNzaW9uIGV2YWx1YXRvciB0byBhc3NpZ24gc2ltcGxlIGRlZmF1bHQgdmFsdWVzLCB3aGljaCBhcmUgdHlwZWQgbmV2ZXJ0aGVsZXNzIC0tPg0KCQkJCQk8IS0tIFRoZSBmdWxsIHR5cGUgb2YgdGhlIGV2YWx1YXRvciBpcyBpbmNsdWRlZCB1c2luZyBYSW5jbHVkZSBmcm9tIGEgcmV1c2FibGUgZmlsZSAtLT4NCgkJCQkJPFZhbHVlUHJvdmlkZXIgVHlwZT0iRXZhbHVhdG9yIiBFeHByZXNzaW9uPSI1IiAvPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQkJPCEtLSBUaGUgZm9sbG93aW5nIHR3byBhcmd1bWVudHMgYXJlIG5vdCBzaG93biB0byB0aGUgdXNlciwgYnV0IGNvbGxhYm9yYXRlIHRvIHJldHJpZXZlIGEgdmFsdWUgLS0+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkN1cnJlbnRQcm9qZWN0IiBUeXBlPSJFbnZEVEUuUHJvamVjdCwgRW52RFRFLCBWZXJzaW9uPTguMC4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSI+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRmlyc3RTZWxlY3RlZFByb2plY3QsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCQk8QXJndW1lbnQgTmFtZT0iVGFyZ2V0TmFtZXNwYWNlIj4NCgkJCQkJPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuTmFtZXNwYWNlU3RyaW5nQ29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQoJCQkJCTwhLS0gU2hvd3MgYW4gYXJndW1lbnQgd2l0aCBhIGN1c3RvbSB0eXBlIGRlZmluZWQgaW4tcGxhY2UsIGFuZCBub3QgY29sbGVjdGVkIGJ5IHRoZSB3aXphcmQgLS0+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IkV2YWx1YXRvciIgRXhwcmVzc2lvbj0iJChDdXJyZW50UHJvamVjdC5Qcm9wZXJ0aWVzLkl0ZW0oJ0RlZmF1bHROYW1lc3BhY2UnKS5WYWx1ZSkuR2VuZXJhdGVkIiAvPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlByb2plY3QiIFR5cGU9IkVudkRURS5Qcm9qZWN0LCBFbnZEVEUiIFJlcXVpcmVkPSJmYWxzZSI+DQoJCQkJCTwhLS0gQ29udmVydGVyIGVuc3VyZXMgdGhhdCBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHByb2plY3QgaXMgdmFsaWQsIGFuZCBhbHNvIGFsbG93cyBjb252ZXJzaW9uIHRvL2Zyb20gaXQgdG8gdGhlIFByb2plY3QgaW5zdGFuY2UuIC0tPg0KCQkJCQk8Q29udmVydGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQ29udmVydGVycy5Qcm9qZWN0Q29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPkNvbGxlY3QgaW5mb3JtYXRpb24gdXNpbmcgZWRpdG9ycywgY29udmVydGVycyBhbmQgdmFsdWUgcHJvdmlkZXJzLjwvVGl0bGU+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iRGV2ZWxvcGVyIiBMYWJlbD0iWW91ciBuYW1lIj4NCgkJCQkJCQkJCTxUb29sdGlwPkN1c3RvbSBlZGl0b3IgcHJvdmlkZWQgYnkgdGhlIGd1aWRhbmNlIHBhY2thZ2UsIHRoZSBNZXNzYWdlRWRpdG9yLCBhbHNvIHVzZWQgaW4gdGhlICJTYXkgYSBtZXNzYWdlIiByZWNpcGUuPC9Ub29sdGlwPg0KCQkJCQkJCQkJPEVkaXRvciBUeXBlPSIkUGFja2FnZU5hbWVzcGFjZSQuRWRpdG9ycy5NZXNzYWdlRWRpdG9yLCAkUGFja2FnZU5hbWUkIiAvPg0KCQkJCQkJCQk8L0ZpZWxkPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJEYXRlIiBMYWJlbD0iRGF0ZSI+DQoJCQkJCQkJCQk8VG9vbHRpcD5BdXRvbWF0aWMgZWRpdG9yIHByb3ZpZGVkIGJ5IC5ORVQuPC9Ub29sdGlwPg0KCQkJCQkJCQk8L0ZpZWxkPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJJdGVyYXRpb25zIiBMYWJlbD0iSXRlcmF0aW9ucyINCgkJCQkJCQkJCUludmFsaWRWYWx1ZU1lc3NhZ2U9Ik11c3QgZW50ZXIgYSB2YWxpZCBpbnRlZ2VyIHZhbHVlIHRvIHVzZSBmb3IgdGhlIG51bWJlciBvZiBpdGVyYXRpb25zLiI+DQoJCQkJCQkJCQk8VG9vbHRpcD5WYWx1ZSByZXRyaWV2ZWQgdXNpbmcgdGhlIHZhbHVlIGVkaXRvciwgd2l0aCBhIGZpeGVkIHZhbHVlIGJ1dCBjb252ZXJ0ZWQgdG8gdGhlIHByb3BlciB0eXBlIGF1dG9tYXRpY2FsbHkuPC9Ub29sdGlwPg0KCQkJCQkJCQk8L0ZpZWxkPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJQbGF0Zm9ybSIgTGFiZWw9IlBsYXRmb3JtIj4NCgkJCQkJCQkJCTxUb29sdGlwPkF1dG9tYXRpYyBjb252ZXJ0ZXIgYW5kIHZhbHVlcyBwcm92aWRlZCBieSAuTkVUIHRvIGFsbCBFbnVtIHR5cGVzLjwvVG9vbHRpcD4NCgkJCQkJCQkJPC9GaWVsZD4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iVGFyZ2V0TmFtZXNwYWNlIiBMYWJlbD0iVGFyZ2V0IE5hbWVzcGFjZSI+DQoJCQkJCQkJCQk8VG9vbHRpcD5UaGlzIHZhbHVlIHdhcyBjYWxjdWxhdGVkIHVzaW5nIHRoZSBFeHByZXNzaW9uRXZhbHVhdG9yVmFsdWVQcm92aWRlciwgYW5kIHJlZmVycmluZyB0byBvdGhlciByZWNpcGUgYXJndW1lbnRzIChvbmUgY29udGFpbmluZyB0aGUgY3VycmVudCBwcm9qZWN0IGluIHRoaXMgY2FzZSkuPC9Ub29sdGlwPg0KCQkJCQkJCQk8L0ZpZWxkPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJQcm9qZWN0IiBMYWJlbD0iUmVmZXJlbmNlIFByb2plY3QiPg0KCQkJCQkJCQkJPFRvb2x0aXA+U2hvd3MgYSBjb21wbGV4IGVkaXRvciBmb3Igc2VsZWN0aW5nIGEgcHJvamVjdCBpbiB0aGUgY3VycmVudCBzb2x1dGlvbiwgcHJvdmlkZWQgd2l0aCB0aGUgTGlicmFyeS48L1Rvb2x0aXA+DQoJCQkJCQkJCQk8RWRpdG9yIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuRWRpdG9ycy5Tb2x1dGlvblBpY2tlckVkaXRvciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCgkJCQkJCQkJPC9GaWVsZD4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkhlbGxvV29ybGRSZWNpcGUiIEJvdW5kPSJ0cnVlIj4NCgkJCTxDYXB0aW9uPlNheSBhIG1lc3NhZ2U8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+QWNjZXB0cyBhIG1lc3NhZ2UgYXMgaW5wdXQgYW5kIHNob3dzIGEgbWVzc2FnZSBib3ggd2l0aCBpdC48L0Rlc2NyaXB0aW9uPg0KCQkJPEhvc3REYXRhPg0KCQkJCTxJY29uIElEPSIxMDQ2Ii8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24gRm9sZGVyIi8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iUHJvamVjdCIvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IldlYiBQcm9qZWN0Ii8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iV2ViIEl0ZW0iLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJXZWIgRm9sZGVyIi8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iTWVzc2FnZSIgLz4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KCQkJCQk8UGFnZXM+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+Q29sbGVjdCBtZXNzYWdlIHRvIHNob3c8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UHJvdmlkZSBhIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIHVzZWQgYnkgdGhlIEhlbGxvV29ybGRBY3Rpb24uPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+WW91IHNob3VsZG4ndCBuZWVkIGEgbG90IG9mIGhlbHAhPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9Ik1lc3NhZ2UiIExhYmVsPSJNZXNzYWdlIj4NCgkJCQkJCQkJCTxFZGl0b3IgVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLkVkaXRvcnMuTWVzc2FnZUVkaXRvciwgJFBhY2thZ2VOYW1lJCIgLz4NCgkJCQkJCQkJPC9GaWVsZD4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkhlbGxvV29ybGQiIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5BY3Rpb25zLkhlbGxvV29ybGRBY3Rpb24sICRQYWNrYWdlTmFtZSQiPg0KCQkJCQk8SW5wdXQgTmFtZT0iSGVsbG9NZXNzYWdlIiBSZWNpcGVBcmd1bWVudD0iTWVzc2FnZSIgLz4NCgkJCQk8L0FjdGlvbj4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iQ3VzdG9tV2l6YXJkUGFnZXMiPg0KCQkJPENhcHRpb24+RXhhbXBsZSBvZiBDdXN0b20gV2l6YXJkIFBhZ2VzPC9DYXB0aW9uPg0KCQkJPERlc2NyaXB0aW9uPlRoaXMgcmVjdXJyZW50IHJlY2lwZSBkZW1vbnN0cmF0ZXMgdXNlIG9mIGN1c3RvbSB3aXphcmQgcGFnZXM8L0Rlc2NyaXB0aW9uPg0KCQkJPEhvc3REYXRhPg0KCQkJCTxJY29uIElEPSIxMDQ3Ii8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24gRm9sZGVyIi8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQxIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDIiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50MyIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuRm9udCwgU3lzdGVtLkRyYXdpbmcsIFZlcnNpb249Mi4wLjM2MDAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhIi8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2UgVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLkN1c3RvbVdpemFyZFBhZ2VzLkN1c3RvbVdpelBhZ2UxLCAkUGFja2FnZU5hbWUkIiBXaWR0aD0iODAwIiBIZWlnaHQ9IjUwMCIgLz4NCgkJCQkJCTxQYWdlIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5DdXN0b21XaXphcmRQYWdlcy5DdXN0b21XaXpQYWdlMiwgJFBhY2thZ2VOYW1lJCIgLz4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkhlbGxvV29ybGQiIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5BY3Rpb25zLkhlbGxvV29ybGRBY3Rpb24sICRQYWNrYWdlTmFtZSQiPg0KCQkJCQk8SW5wdXQgTmFtZT0iSGVsbG9NZXNzYWdlIiBSZWNpcGVBcmd1bWVudD0iQXJndW1lbnQxIiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJCTxBY3Rpb24gTmFtZT0iSGVsbG9Xb3JsZDIiIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5BY3Rpb25zLkhlbGxvV29ybGRBY3Rpb24sICRQYWNrYWdlTmFtZSQiPg0KCQkJCQk8SW5wdXQgTmFtZT0iSGVsbG9NZXNzYWdlIiBSZWNpcGVBcmd1bWVudD0iQXJndW1lbnQyIiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJBZGRJdGVtVGVtcGxhdGVSZWZlcmVuY2UiIEJvdW5kPSJmYWxzZSI+DQoJCQk8Q2FwdGlvbj5BZGQgYW4gaXRlbSB0ZW1wbGF0ZSByZWZlcmVuY2UgdG8gYSBQcm9qZWN0PC9DYXB0aW9uPg0KCQkJPEhvc3REYXRhPg0KCQkJCTxJY29uIElEPSI1MjUiIC8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iUHJvamVjdCIgLz4NCgkJCTwvSG9zdERhdGE+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJUZW1wbGF0ZUZpbGVuYW1lIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIi8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPk5ldyBUZW1wbGF0ZSBSZWZlcmVuY2U8L1RpdGxlPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlRlbXBsYXRlRmlsZW5hbWUiIExhYmVsPSJUZW1wbGF0ZSBmaWxlbmFtZSI+DQoJCQkJCQkJCQk8RWRpdG9yIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5FZGl0b3JzLkl0ZW1UZW1wbGF0ZUNob29zZXIsICRQYWNrYWdlTmFtZSQiIC8+DQoJCQkJCQkJCTwvRmllbGQ+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBUeXBlPSIkUGFja2FnZU5hbWVzcGFjZSQuQWN0aW9ucy5BZGRUZW1wbGF0ZVJlZmVyZW5jZSwgJFBhY2thZ2VOYW1lJCINCgkJCQkJCU5hbWU9IkFkZEl0ZW1UZW1wbGF0ZVJlZmVyZW5jZSI+DQoJCQkJCTxJbnB1dCBOYW1lPSJUZW1wbGF0ZUZpbGVuYW1lIiBSZWNpcGVBcmd1bWVudD0iVGVtcGxhdGVGaWxlbmFtZSIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJBZGRQcm9qZWN0VGVtcGxhdGVSZWZlcmVuY2UiIEJvdW5kPSJmYWxzZSI+DQoJCQk8Q2FwdGlvbj5BZGQgYSBwcm9qZWN0IHRlbXBsYXRlIHJlZmVyZW5jZSB0byBhIFNvbHV0aW9uIEZvbGRlciBvciBTb2x1dGlvbjwvQ2FwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iNjgwIiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIEZvbGRlciIgLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJTb2x1dGlvbiIgLz4NCgkJCTwvSG9zdERhdGE+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJUZW1wbGF0ZUZpbGVuYW1lIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIi8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPk5ldyBUZW1wbGF0ZSBSZWZlcmVuY2U8L1RpdGxlPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlRlbXBsYXRlRmlsZW5hbWUiIExhYmVsPSJUZW1wbGF0ZSBmaWxlbmFtZSI+DQoJCQkJCQkJCQk8RWRpdG9yIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5FZGl0b3JzLlByb2plY3RUZW1wbGF0ZUNob29zZXIsICRQYWNrYWdlTmFtZSQiIC8+DQoJCQkJCQkJCTwvRmllbGQ+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBUeXBlPSIkUGFja2FnZU5hbWVzcGFjZSQuQWN0aW9ucy5BZGRUZW1wbGF0ZVJlZmVyZW5jZSwgJFBhY2thZ2VOYW1lJCINCgkJCQkJCU5hbWU9IkFkZEl0ZW1UZW1wbGF0ZVJlZmVyZW5jZSI+DQoJCQkJCTxJbnB1dCBOYW1lPSJUZW1wbGF0ZUZpbGVuYW1lIiBSZWNpcGVBcmd1bWVudD0iVGVtcGxhdGVGaWxlbmFtZSIvPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJSZWNpcGVXaXRoSW5pdGlhbFN0YXRlIj4NCgkJCTxDYXB0aW9uPlJlY2lwZSB0aGF0IGlzIGxvYWRlZCB3aXRoIHByZXNldCB2YWx1ZXMgaW4gdGhlIGludm9raW5nIC52c3RlbXBsYXRlIGZpbGU8L0NhcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJTdHJpbmdQYXJhbWV0ZXIiIFR5cGU9IlN5c3RlbS5TdHJpbmciLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iSW50UGFyYW1ldGVyIiBUeXBlPSJTeXN0ZW0uSW50MzIiLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iRG91YmxlUGFyYW1ldGVyIiBUeXBlPSJTeXN0ZW0uRG91YmxlIi8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPldpemFyZCB3aXRoIGluaXRpYWwgc3RhdGU8L1RpdGxlPg0KCQkJCQkJCTxIZWxwPldpemFyZCB2YWx1ZXMgYXJlIHNldCBpbiB0aGUgLnZzdGVtcGxhdGU8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iU3RyaW5nUGFyYW1ldGVyIiBMYWJlbD0iU3RyaW5nIHBhcmFtZXRlciI+DQoJCQkJCQkJCQk8SGVscD5TdHJpbmcgcGFyYW1ldGVyIHdpdGggaW5pdGlhbCBzdGF0ZSBzcGVjaWZpZWQ8L0hlbHA+DQoJCQkJCQkJCTwvRmllbGQ+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkludFBhcmFtZXRlciIgTGFiZWw9IkludGVnZXIgcGFyYW1ldGVyIj4NCgkJCQkJCQkJCTxIZWxwPkludGVnZXIgcGFyYW1ldGVyIHdpdGggaW5pdGlhbCBzdGF0ZSBzcGVjaWZpZWQ8L0hlbHA+DQoJCQkJCQkJCTwvRmllbGQ+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkRvdWJsZVBhcmFtZXRlciIgTGFiZWw9IkRvdWJsZSBwYXJhbWV0ZXIiPg0KCQkJCQkJCQkJPEhlbHA+RG91YmxlIHBhcmFtZXRlciB3aXRoIGluaXRpYWwgc3RhdGUgc3BlY2lmaWVkPC9IZWxwPg0KCQkJCQkJCQk8L0ZpZWxkPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iSGVsbG9Xb3JsZCIgVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLkFjdGlvbnMuSGVsbG9Xb3JsZEFjdGlvbiwgJFBhY2thZ2VOYW1lJCI+DQoJCQkJCTxJbnB1dCBOYW1lPSJIZWxsb01lc3NhZ2UiIFJlY2lwZUFyZ3VtZW50PSJTdHJpbmdQYXJhbWV0ZXIiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkluaXRpYWxTdGF0ZVNlcmlhbGl6YWJsZUNsYXNzIj4NCgkJCTxDYXB0aW9uPlJlY2lwZSBjYWxsZWQgZnJvbSB0aGUgdW5mb2xkaW5nIG9mIGEgLnZzdGVtcGxhdGUgZmlsZTwvQ2FwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlNlcmlhbGl6YWJsZUZpZWxkIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIi8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlNlcmlhbGl6YWJsZVR5cGUiIFR5cGU9IlN5c3RlbS5TdHJpbmciLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iTm9uU2VyaWFsaXphYmxlRmllbGQiIFR5cGU9IlN5c3RlbS5TdHJpbmciLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iTm9uU2VyaWFsaXphYmxlVHlwZSIgVHlwZT0iU3lzdGVtLlN0cmluZyIvPg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIFNjaGVtYVZlcnNpb249IjEuMCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5XaXphcmQgd2l0aCBpbml0aWFsIHN0YXRlIGZyb20gdW5mb2xkaW5nPC9UaXRsZT4NCgkJCQkJCQk8SGVscD5XaXphcmQgdmFsdWVzIGFyZSBzZXQgaW4gdGhlIC52c3RlbXBsYXRlPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlNlcmlhbGl6YWJsZUZpZWxkIiBMYWJlbD0iU2VyaWFsaXphYmxlIGZpZWxkIj4NCgkJCQkJCQkJCTxIZWxwPk5hbWUgb2YgYSBzZXJpYWxpemFibGUgZmllbGQgb2YgdGhlIG5ldyBjbGFzczwvSGVscD4NCgkJCQkJCQkJPC9GaWVsZD4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iU2VyaWFsaXphYmxlVHlwZSIgTGFiZWw9IlNlcmlhbGl6YWJsZSB0eXBlIj4NCgkJCQkJCQkJCTxIZWxwPlR5cGUgb2YgdGhlIHByZXZpb3VzIHNlcmlhbGl6YWJsZSBmaWVsZDwvSGVscD4NCgkJCQkJCQkJPC9GaWVsZD4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iTm9uU2VyaWFsaXphYmxlRmllbGQiIExhYmVsPSJOb24gU2VyaWFsaXphYmxlIGZpZWxkIj4NCgkJCQkJCQkJCTxIZWxwPk5hbWUgb2YgYSBub24gc2VyaWFsaXphYmxlIGZpZWxkIG9mIHRoZSBuZXcgY2xhc3M8L0hlbHA+DQoJCQkJCQkJCTwvRmllbGQ+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9Ik5vblNlcmlhbGl6YWJsZVR5cGUiIExhYmVsPSJOb24gU2VyaWFsaXphYmxlIGZpZWxkIj4NCgkJCQkJCQkJCTxIZWxwPlR5cGUgb2YgdGhlIHByZXZpb3VzIG5vbiBzZXJpYWxpemFibGUgZmllbGQ8L0hlbHA+DQoJCQkJCQkJCTwvRmllbGQ+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJBZGRSZWNpcGVSZWZlcmVuY2UiIEJvdW5kPSJmYWxzZSI+DQoJCQk8Q2FwdGlvbj5BZGQgYSByZWNpcGUgcmVmZXJlbmNlIHRvIGEgc29sdXRpb24gZWxlbWVudDwvQ2FwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iNTI1IiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIEZvbGRlciIgLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJQcm9qZWN0IiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IkZvbGRlciIgLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJJdGVtIiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IldlYiBQcm9qZWN0IiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IldlYiBGb2xkZXIiIC8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iV2ViIEl0ZW0iIC8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iUmVjaXBlTmFtZSIgVHlwZT0iU3lzdGVtLlN0cmluZyI+DQoJCQkJCTxDb252ZXJ0ZXIgVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLkNvbnZlcnRlcnMuUmVjaXBlTmFtZUNvbnZlcnRlciwgJFBhY2thZ2VOYW1lJCIvPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPk5ldyBUZW1wbGF0ZSBSZWZlcmVuY2U8L1RpdGxlPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlJlY2lwZU5hbWUiIExhYmVsPSJSZWNpcGUiIC8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBUeXBlPSIkUGFja2FnZU5hbWVzcGFjZSQuQWN0aW9ucy5BZGRSZWNpcGVSZWZlcmVuY2UsICRQYWNrYWdlTmFtZSQiDQoJCQkJCQlOYW1lPSJBZGRSZWNpcGVSZWZlcmVuY2UiPg0KCQkJCQk8SW5wdXQgTmFtZT0iUmVjaXBlTmFtZSIgUmVjaXBlQXJndW1lbnQ9IlJlY2lwZU5hbWUiLz4NCgkJCQk8L0FjdGlvbj4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iU2hvd0N1cnJlbnRTZWxlY3Rpb24iPg0KCQkJPENhcHRpb24+U2hvdyBjdXJyZW50IHNlbGVjdGlvbjwvQ2FwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iMTcyIiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIEZvbGRlciIgLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJQcm9qZWN0IiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IkZvbGRlciIgLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJJdGVtIiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IldlYiBQcm9qZWN0IiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IldlYiBGb2xkZXIiIC8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iV2ViIEl0ZW0iIC8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJTaG93Q3VycmVudCIgVHlwZT0iJFBhY2thZ2VOYW1lc3BhY2UkLkFjdGlvbnMuU2hvd0N1cnJlbnRTZWxlY3Rpb24sICRQYWNrYWdlTmFtZSQiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkFkZE1haW5DbGFzcyIgUmVjdXJyZW50PSJmYWxzZSI+DQoJCQk8VHlwZXM+DQoJCQkJPFR5cGVBbGlhcyBOYW1lPSJFdmFsdWF0b3IiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCgkJCTwvVHlwZXM+DQoJCQk8Q2FwdGlvbj5BZGQgY2xhc3Mgd2l0aCBNYWluIG1ldGhvZDwvQ2FwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iNjMwIiAvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlByb2plY3QiIC8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQ3VycmVudFByb2plY3QiIFR5cGU9IkVudkRURS5Qcm9qZWN0LCBFbnZEVEUsIFZlcnNpb249OC4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhIj4NCgkJCQkJPFZhbHVlUHJvdmlkZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5WYWx1ZVByb3ZpZGVycy5GaXJzdFNlbGVjdGVkUHJvamVjdCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJDbGFzc05hbWUiPg0KCQkJCQk8Q29udmVydGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQ29udmVydGVycy5Db2RlSWRlbnRpZmllclN0cmluZ0NvbnZlcnRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIvPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlRhcmdldEZpbGUiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJFdmFsdWF0b3IiDQoJCQkJCQkJCQkgRXhwcmVzc2lvbj0iJChDbGFzc05hbWUpLmNzIj4NCgkJCQkJCTxNb25pdG9yQXJndW1lbnQgTmFtZT0iQ2xhc3NOYW1lIiAvPg0KCQkJCQk8L1ZhbHVlUHJvdmlkZXI+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCQk8QXJndW1lbnQgTmFtZT0iVGFyZ2V0TmFtZXNwYWNlIj4NCgkJCQkJPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuTmFtZXNwYWNlU3RyaW5nQ29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IkV2YWx1YXRvciINCgkJCQkJCQkJCSBFeHByZXNzaW9uPSIkKEN1cnJlbnRQcm9qZWN0LlByb3BlcnRpZXMuSXRlbSgnRGVmYXVsdE5hbWVzcGFjZScpLlZhbHVlKSIgLz4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJIZWxsb01lc3NhZ2UiPg0KCQkJCQk8Q29udmVydGVyIFR5cGU9IiRQYWNrYWdlTmFtZXNwYWNlJC5Db252ZXJ0ZXJzLkhlbGxvV29ybGRDb252ZXJ0ZXIsICRQYWNrYWdlTmFtZSQiIC8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KCQkJCQk8UGFnZXM+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+SGVsbG8gV29ybGQ8L1RpdGxlPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkNsYXNzTmFtZSIgTGFiZWw9IkNsYXNzIE5hbWUiIC8+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlRhcmdldE5hbWVzcGFjZSIgTGFiZWw9Ik5hbWVzcGFjZSIgLz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iSGVsbG9NZXNzYWdlIiBMYWJlbD0iTWVzc2FnZSIgLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkdlbmVyYXRlTWFpbkNsYXNzIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuVGVtcGxhdGVzLlRleHRUZW1wbGF0ZUFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSINCgkJCQkJCVRlbXBsYXRlPSJUZXh0XFByb2dyYW0uY3MudDQiPg0KCQkJCQk8SW5wdXQgTmFtZT0iSGVsbG8iIFJlY2lwZUFyZ3VtZW50PSJIZWxsb01lc3NhZ2UiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJDbGFzc05hbWUiIFJlY2lwZUFyZ3VtZW50PSJDbGFzc05hbWUiLz4NCgkJCQkJPElucHV0IE5hbWU9IlRhcmdldE5hbWVzcGFjZSIgUmVjaXBlQXJndW1lbnQ9IlRhcmdldE5hbWVzcGFjZSIvPg0KCQkJCQk8T3V0cHV0IE5hbWU9IkNvbnRlbnQiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRNYWluQ2xhc3MiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5BZGRJdGVtRnJvbVN0cmluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSINCgkJCQkJCU9wZW49InRydWUiPg0KCQkJCQk8IS0tU2hvd3MgaG93IHRvIHNwZWNpZnkgYSBwcm9wZXJ0eSBhcyBhIGZpeGVkIHZhbHVlIGluIGNvbmZpZy0tPg0KCQkJCQk8SW5wdXQgTmFtZT0iQ29udGVudCIgQWN0aW9uT3V0cHV0PSJHZW5lcmF0ZU1haW5DbGFzcy5Db250ZW50IiAvPg0KCQkJCQk8SW5wdXQgTmFtZT0iVGFyZ2V0RmlsZU5hbWUiIFJlY2lwZUFyZ3VtZW50PSJUYXJnZXRGaWxlIiAvPg0KCQkJCQk8SW5wdXQgTmFtZT0iUHJvamVjdCIgUmVjaXBlQXJndW1lbnQ9IkN1cnJlbnRQcm9qZWN0IiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgk8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4NCg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>11</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/GuidancePackages/Shadowfax/Microsoft.Practices.Shadowfax.GuidancePackage.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIgDQogIENhcHRpb249IlNlcnZpY2VzIEFwcGxpY2F0aW9uIg0KICBHdWlkPSJFMEUzNjdFMy0wRjRDLTQ3NGUtOUFCNS0wRUM5NDkyNDc1MUMiDQogIFNvcnRQcmlvcml0eT0iMTAiIA0KICBUcmFjZUxldmVsPSJJbmZvIg0KICBTY2hlbWFWZXJzaW9uPSIxLjAiID4NCgk8SG9zdERhdGE+DQoJCTxJY29uIElEPSIzNDYiLz4NCgkJPE1lbnUgTmFtZT0iQWRkUHJvamVjdE1lbnUiIFRleHQ9IlNoYWRvd2ZheCI+DQoJCQk8Q29tbWFuZEJhciBOYW1lPSJTb2x1dGlvbiBGb2xkZXIgQWRkIi8+DQoJCTwvTWVudT4NCgkJPE1lbnUgTmFtZT0iQWRkUHJvamVjdEl0ZW1NZW51IiBUZXh0PSJTaGFkb3dmYXgiPg0KCQkJPENvbW1hbmRCYXIgTmFtZT0iUHJvamVjdCBBZGQiLz4NCgkJPC9NZW51Pg0KCQk8TWVudSBOYW1lPSJTbG5NZW51IiBUZXh0PSJNeSBDb250ZXh0IE1lbnUiIFByaW9yaXR5PSI5MDAiPg0KCQkJPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24iLz4NCgkJPC9NZW51Pg0KCQk8TWVudSBOYW1lPSJTbG5NZW51MiIgVGV4dD0iTXkgQ29udGV4dCBNZW51IiBQcmlvcml0eT0iOTAwIj4NCgkJCTxDb21tYW5kQmFyIE1lbnU9IlNsbk1lbnUiLz4NCgkJPC9NZW51Pg0KCTwvSG9zdERhdGE+DQoJPFJlY2lwZXM+DQoJCTxSZWNpcGUgTmFtZT0iVmFsaWRhdGVTb2x1dGlvbiI+DQoJCQk8Q2FwdGlvbj5WYWxpZGF0ZSBTb2x1dGlvbiBTdHJ1Y3R1cmU8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+VmFsaWRhdGVzIGlmIHNvbHV0aW9uIHN0cnVjdHVyZSBmb2xsb3dzIGd1aWRsaW5lcyBvZiB0aGlzIHBhY2thZ2UuPC9EZXNjcmlwdGlvbj4NCgkJCTxIb3N0RGF0YSBQcmlvcml0eT0iMTAwMCI+DQoJCQkJPEljb24gRmlsZT0iSWNvbnNcMzQ2LmljbyIvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIi8+DQoJCQkJPCEtLSANCgkJCQk8Q29tbWFuZEJhciBNZW51PSJTbG5NZW51MiIvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlByb2plY3QiLz4NCgkJCQk8Q29tbWFuZEJhciBHdWlkPSIyMzk0OTEyMy02MDhjLTRkN2UtOTM5OC1lMDFhNGUxNzZiZWUiIElEPSI1MTIiLz4NCgkJCQk8Q29tbWFuZEJhciBHdWlkPSJkMzA5Zjc5MS05MDNmLTExZDAtOWVmYy0wMGEwYzkxMTAwNGYiIElEPSIxMzMiLz4NCgkJCQktLT4NCgkJCTwvSG9zdERhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IlZhbGlkYXRlQWN0aW9uIiBUeXBlPSJTaGFkb3dmYXguVmFsaWRhdGVBY3Rpb24sIFNoYWRvd2ZheCIgLz4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iQWRkU2VydmljZUFnZW50Ij4NCgkJCTxDYXB0aW9uPlNlcnZpY2UgQWdlbnQuLi48L0NhcHRpb24+DQoJCQk8SG9zdERhdGE+DQoJCQkJPENvbW1hbmRCYXIgTWVudT0iQWRkUHJvamVjdE1lbnUiLz4NCgkJCTwvSG9zdERhdGE+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkFkZEJ1c2luZXNzU2VydmljZSI+DQoJCQk8Q2FwdGlvbj5BZGQgQnVzaW5lc3MgU2VydmljZTwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj5BZGRzIG5ldyBidXNpbmVzcyBzZXJ2aWNlIHByb2plY3RzIHRvIHRoZSBzb2x1dGlvbi48L0Rlc2NyaXB0aW9uPg0KCQkJPEhvc3REYXRhPg0KCQkJCTwhLS0gDQoJCQkJPENvbW1hbmRCYXIgTWVudT0iU2xuTWVudSIvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIEZvbGRlciIvPg0KCQkJCS0tPg0KCQkJCTxDb21tYW5kQmFyIE1lbnU9IkFkZFByb2plY3RNZW51Ii8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iUHJvamVjdE5hbWUiIC8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiDQoJCQkJCQlOYW1lPSJBZGRTZXJ2aWNlV2l6YXJkIj4NCgkJCQkJPFR5cGVzPg0KCQkJCQkJPFR5cGVBbGlhcyBOYW1lPSJYc2QiIFR5cGU9IlNoYWRvd2ZheC5Yc2RGaWxlRWRpdG9yLCBTaGFkb3dmYXgiIC8+DQoJCQkJCTwvVHlwZXM+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5CdXNpbmVzcyBTZXJ2aWNlIEFjdGlvbiBQcm9qZWN0IERlZmluaXRpb248L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UHJvdmlkZSBpbmZvcm1hdGlvbiBmb3IgY3JlYXRpbmcgYnVzaW5lc3Mgc2VydmljZSBwcm9qZWN0cy48L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5FbnRlciB0aGUgcmVxdWlyZWQgaW5mb3JtYXRpb24gaW4gb3JkZXIgdG8gYWRkIGEgYnVzaW5lc3Mgc2VydmljZSBwcm9qZWN0cyB0byB0aGUgY3VycmVudCBzb2x1dGlvbi48L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iUHJvamVjdE5hbWUiIExhYmVsPSJCdXNpbmVzcyBTZXJ2aWNlIE5hbWUiIC8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJBZGRTZXJ2aWNlQWN0aW9uIiBUeXBlPSJTaGFkb3dmYXguQWRkU2VydmljZUFjdGlvbiwgU2hhZG93ZmF4Ij4NCgkJCQkJPElucHV0IE5hbWU9IlByb2plY3ROYW1lIiBSZWNpcGVBcmd1bWVudD0iUHJvamVjdE5hbWUiLz4NCgkJCQk8L0FjdGlvbj4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iQWRkQnVzaW5lc3NBY3Rpb24iPg0KCQkJPENhcHRpb24+QWRkIE5ldyBCdXNpbmVzcyBBY3Rpb248L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+QWRkIG5ldyBidXNpbmVzcyBhY3Rpb24gdG8gdGhlIHByb2plY3QuPC9EZXNjcmlwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iNjMwIi8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iUHJvamVjdCIvPg0KCQkJCTxDb21tYW5kQmFyIE1lbnU9IkFkZFByb2plY3RJdGVtTWVudSIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkNsYXNzTmFtZSIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iTWV0aG9kTmFtZSIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iUmVxdWVzdFhzZCIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJSZXNwb25zZVhzZCIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJNZXNzYWdlc1Byb2plY3QiIFR5cGU9IkVudkRURS5Qcm9qZWN0LCBFbnZEVEUiIFJlcXVpcmVkPSJmYWxzZSIgLz4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCgkJCQkJCVNjaGVtYVZlcnNpb249IjEuMCINCgkJCQkJCU5hbWU9IkFkZEJ1c2luZXNzQWN0aW9uV2l6YXJkIj4NCgkJCQkJPFR5cGVzPg0KCQkJCQkJPFR5cGVBbGlhcyBOYW1lPSJYc2QiIFR5cGU9IlNoYWRvd2ZheC5Yc2RGaWxlRWRpdG9yLCBTaGFkb3dmYXgiIC8+DQoJCQkJCQk8VHlwZUFsaWFzIE5hbWU9IlByaiIgVHlwZT0iU2hhZG93ZmF4LlByb2plY3RTZWxlY3RvckVkaXRvciwgU2hhZG93ZmF4IiAvPg0KCQkJCQk8L1R5cGVzPg0KCQkJCQk8UGFnZXM+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+QWRkIEJ1c2luZXNzIEFjdGlvbjwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5Qcm92aWRlIHRoZSBpbmZvcm1hdGlvbiBmb3IgdGhlIHNlcnZpY2UgYWN0aW9uIHRvIGNyZWF0ZS48L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5Zb3Ugc2hvdWxkbid0IG5lZWQgYSBsb3Qgb2YgaGVscCE8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQ2xhc3NOYW1lIiBMYWJlbD0iQnVzaW5lc3MgYWN0aW9uIGNsYXNzIiAvPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJNZXRob2ROYW1lIiBMYWJlbD0iQnVzaW5lc3MgYWN0aW9uIG1ldGhvZCIgLz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iUmVxdWVzdFhzZCIgTGFiZWw9IlJlcXVlc3Qgc2NoZW1hIiAvPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJSZXNwb25zZVhzZCIgTGFiZWw9IlJlc3BvbnNlIHNjaGVtYSIgLz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iTWVzc2FnZXNQcm9qZWN0IiBMYWJlbD0iTWVzc2FnZXMgUHJvamVjdCI+DQoJCQkJCQkJCQk8RWRpdG9yIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuRWRpdG9ycy5Tb2x1dGlvblBpY2tlckVkaXRvciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIvPg0KCQkJCQkJCQk8L0ZpZWxkPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iQWRkQnVzaW5lc3NBY3Rpb25DbGFzcyIgVHlwZT0iU2hhZG93ZmF4LkFkZEJ1c2luZXNzQWN0aW9uLCBTaGFkb3dmYXgiPg0KCQkJCQk8SW5wdXQgTmFtZT0iQ2xhc3MiIFJlY2lwZUFyZ3VtZW50PSJDbGFzc05hbWUiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJNZXRob2QiIFJlY2lwZUFyZ3VtZW50PSJNZXRob2ROYW1lIiAvPg0KCQkJCQk8SW5wdXQgTmFtZT0iUmVxdWVzdFhzZCIgUmVjaXBlQXJndW1lbnQ9IlJlcXVlc3RYc2QiIC8+DQoJCQkJCTxJbnB1dCBOYW1lPSJSZXNwb25zZVhzZCIgUmVjaXBlQXJndW1lbnQ9IlJlc3BvbnNlWHNkIiAvPg0KCQkJCQk8SW5wdXQgTmFtZT0iTWVzc2FnZXNQcm9qZWN0IiBSZWNpcGVBcmd1bWVudD0iTWVzc2FnZXNQcm9qZWN0IiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJHZW5lcmF0ZVRyYW5zcG9ydENvbmZpZ3VyYXRpb24iIFJlY3VycmVudD0iZmFsc2UiPg0KCQkJPENhcHRpb24+R2VuZXJhdGUgdHJhbnNwb3J0IGNvbmZpZ3VyYXRpb248L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+R2VuZXJhdGVzIGNvbmZpZ3VyYXRpb24gcmVxdWlyZWQgdG8gZXhwb3NlIHRoZSBidXNpbmVzcyBhY3Rpb24gb24gYSB0cmFuc3BvcnQuPC9EZXNjcmlwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iMjk2Ii8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iSXRlbSIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iRXhwb3NlQWN0aW9uIiBUeXBlPSJTaGFkb3dmYXguRXhwb3NlQWN0aW9uLCBTaGFkb3dmYXgiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkNyZWF0ZVNvbHV0aW9uIj4NCgkJCTxDYXB0aW9uPkRldmVsb3AgU2VydmljZXMgQXBwbGljYXRpb248L0NhcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJDcmVhdGVIZWxsb1dvcmxkU2VydmljZSIgVHlwZT0iU3lzdGVtLkJvb2xlYW4iIC8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiDQoJCQkJCQlOYW1lPSJDcmVhdGVTb2x1dGlvbiI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5EZXZlbG9wIFNlcnZpY2VzIEFwcGxpY2F0aW9uPC9UaXRsZT4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJDcmVhdGVIZWxsb1dvcmxkU2VydmljZSIgTGFiZWw9IkNyZWF0ZSBIZWxsbyBXb3JsZCBTZXJ2aWNlIiAvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iRG9Ob3RoaW5nIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuRG9Ob3RoaW5nQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJBZGRQcm94eSI+DQoJCQk8Q2FwdGlvbj5BZGQgUHJveHk8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+R2VuZXJhdGVzIHByb3h5IGNsYXNzPC9EZXNjcmlwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iMjk2Ii8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iSXRlbSIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IklucHV0Q2xhc3NuYW1lIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIj48L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJPdXRwdXRDbGFzc25hbWUiIFR5cGU9IlN5c3RlbS5TdHJpbmciPjwvQXJndW1lbnQ+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiDQoJCQkJCQlOYW1lPSJBZGRQcm94eVdpemFyZCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5BZGQgUHJveHkgV2l6YXJkPC9UaXRsZT4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgTGFiZWw9IldoYXQgaXMgdGhlIGlucHV0IGNsYXNzIG5hbWU/IiBWYWx1ZU5hbWU9IklucHV0Q2xhc3NuYW1lIi8+DQoJCQkJCQkJCTxGaWVsZCBMYWJlbD0iV2hhdCBpcyB0aGUgb3V0cHV0IGNsYXNzIG5hbWU/IiBWYWx1ZU5hbWU9Ik91dHB1dENsYXNzbmFtZSIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iQWRkUHJveHlBY3Rpb24iIFR5cGU9IlNoYWRvd2ZheC5BZGRQcm94eUFjdGlvbiwgU2hhZG93ZmF4IiAvPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJWZXJpZnkiPg0KCQkJPENhcHRpb24+VmVyaWZ5IGZpbGU8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+VmVyaWZpZXMgdGhhdCB0aGUgZmlsZSBpcyBjb3JyZWN0LjwvRGVzY3JpcHRpb24+DQoJCQk8SG9zdERhdGE+DQoJCQkJPEljb24gSUQ9Ijk5MCIvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9Ikl0ZW0iLz4NCgkJCTwvSG9zdERhdGE+DQoJCQk8IS0tIERvZXMgbm90aGluZy0tPg0KCQk8L1JlY2lwZT4NCgk8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4NCg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>8</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/Practices/Common/ReflectionHelper.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsJDQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7DQp1c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7DQp1c2luZyBTeXN0ZW0uSU87DQp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsNCnVzaW5nIFN5c3RlbS5TZWN1cml0eS5QZXJtaXNzaW9uczsNCnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7DQp1c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7DQp1c2luZyBTeXN0ZW0uV2ViOw0KdXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247DQp1c2luZyBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXM7DQoNCiNlbmRyZWdpb24gVXNpbmcgZGlyZWN0aXZlcw0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb24NCnsNCgkvLy8gPHN1bW1hcnk+DQoJLy8vIFByb3ZpZGVzIHV0aWxpdHkgbWV0aG9kcyBmb3IgcmVmbGVjdGlvbi1yZWxhdGVkIG9wZXJhdGlvbnMuDQoJLy8vIDwvc3VtbWFyeT4NCglwdWJsaWMgc2VhbGVkIGNsYXNzIFJlZmxlY3Rpb25IZWxwZXINCgl7DQoJCXN0YXRpYyByZWFkb25seSBSZWdleCBBc3NlbWJseU5hbWVSZWdFeCA9IG5ldyBSZWdleChAIl4oPzxhc3NlbWJseT5bXHdcLiBdKykoLFxzP1ZlcnNpb249KD88dmVyc2lvbj5cZCtcLlxkK1wuXGQrXC5cZCspKT8oLFxzP0N1bHR1cmU9KD88Y3VsdHVyZT5cdyspKT8oLFxzP1B1YmxpY0tleVRva2VuPSg/PHRva2VuPlx3KykpPyQiLCBSZWdleE9wdGlvbnMuQ29tcGlsZWQpOw0KDQoJCSNyZWdpb24gUHJpdmF0ZSBjdG9yDQoNCgkJLy8gU2luY2UgdGhpcyBjbGFzcyBwcm92aWRlcyBvbmx5IHN0YXRpYyBtZXRob2RzLCBtYWtlIHRoZSBkZWZhdWx0IGNvbnN0cnVjdG9yIHByaXZhdGUgdG8gcHJldmVudCANCgkJLy8gaW5zdGFuY2VzIGZyb20gYmVpbmcgY3JlYXRlZCB3aXRoICJuZXcgUmVmbGVjdGlvbkhlbHBlcigpIi4NCg0KCQlwcml2YXRlIFJlZmxlY3Rpb25IZWxwZXIoKQl7fQ0KDQoJCSNlbmRyZWdpb24gUHJpdmF0ZSBjdG9yDQoNCgkJI3JlZ2lvbiBNaXNjZWxhbmVvdXMNCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBFbnN1cmVzIHRoYXQgYW4gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgcGFzc2VkIGFzIHRoZSANCgkJLy8vIDxwYXJhbXJlZiBuYW1lPSJzb3VyY2UiLz4gY2FuIGJlIGFzc2lnbmVkIHRvIGEgdmFyaWFibGUgb2YgDQoJCS8vLyB0eXBlIDxwYXJhbXJlZiBuYW1lPSJhc3NpZ25hYmxlVG8iLz4uDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0ic291cmNlIj5UaGUgdHlwZSB0byBjaGVjay48L3BhcmFtPg0KCQkvLy8gPHBhcmFtIG5hbWU9ImFzc2lnbmFibGVUbyI+VGhlIHR5cGUgdGhlIDxwYXJhbXJlZiBuYW1lPSJzb3VyY2UiLz4gbXVzdCBiZSBhc3NpZ25hYmxlIHRvLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cmVtYXJrcz4NCiAgICAgICAgLy8vIFRoaXMgY2hlY2sgaXMgYmFzaWNhbGx5IGEgc2hvcnRjdXQgZm9yIDxzZWUgY3JlZj0iVHlwZS5Jc0Fzc2lnbmFibGVGcm9tIi8+LCB3aGljaCB3b3JrcyBvbmx5IA0KICAgICAgICAvLy8gZm9yIENMUiBvYmplY3RzLiBUbyBwZXJmb3JtIGEgbW9yZSBDT00tZnJpZW5kbHkgY2hlY2ssIHVzZSA8c2VlIGNyZWY9IklzQXNzaWduYWJsZVRvIi8+Lg0KICAgICAgICAvLy8gPC9yZW1hcmtzPg0KCQlwdWJsaWMgc3RhdGljIHZvaWQgRW5zdXJlQXNzaWduYWJsZVRvKFR5cGUgc291cmNlLCBUeXBlIGFzc2lnbmFibGVUbykNCgkJew0KICAgICAgICAgICAgaWYgKHNvdXJjZSA9PSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInNvdXJjZSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGFzc2lnbmFibGVUbyA9PSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImFzc2lnbmFibGVUbyIpOw0KICAgICAgICAgICAgfQ0KCQkJaWYgKCFhc3NpZ25hYmxlVG8uSXNBc3NpZ25hYmxlRnJvbShzb3VyY2UpKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuUmVmbGVjdGlvbkhlbHBlcl9DYW50QXNzaWduVG8sDQoJCQkJCXNvdXJjZSwgYXNzaWduYWJsZVRvKSk7DQoJCQl9DQoJCX0NCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBUZXN0cyB3aGV0aGVyIGFuIG9iamVjdCBjYW4gYmUgc3VjY2Vzc2Z1bGx5IGFzc2lnbmVkIHRvIHRoZSANCiAgICAgICAgLy8vIHNwZWNpZmllZCB0eXBlLg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9InRhcmdldFR5cGUiPlRoZSB0eXBlIHRoYXQgdGhlIDxwYXJhbXJlZiBuYW1lPSJ2YWx1ZSIvPiBzaG91bGQgYmUgY29tcGF0aWJsZSB3aXRoLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0idmFsdWUiPlRoZSB2YWx1ZSB0byBiZSBjaGVja2VkLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cmVtYXJrcz4NCiAgICAgICAgLy8vIFRoZSBydWxlcyBmb3IgY29tcGF0aWJpbGl0eSBhcmU6DQogICAgICAgIC8vLyA8bGlzdCB0eXBlPSJidWxsZXQiPg0KICAgICAgICAvLy8gPGl0ZW0+DQogICAgICAgIC8vLyA8dGVybT48cGFyYW1yZWYgbmFtZT0idmFsdWUiLz4gaXMgYSBDT00gb2JqZWN0OiANCiAgICAgICAgLy8vIHRoZSA8cGFyYW1yZWYgbmFtZT0idGFyZ2V0VHlwZSIvPiBtdXN0IGJlIGFuIGludGVyZmFjZSwgYW5kIA0KICAgICAgICAvLy8gYSBxdWVyeSBpbnRlcmZhY2Ugb24gdGhlIENPTSBvYmplY3QgbXVzdCByZXR1cm4gYSB2YWxpZCBwb2ludGVyIHRvIHRoYXQgaW50ZXJmYWNlLg0KICAgICAgICAvLy8gPC90ZXJtPg0KICAgICAgICAvLy8gPC9pdGVtPg0KICAgICAgICAvLy8gPGl0ZW0+DQogICAgICAgIC8vLyA8dGVybT48cGFyYW1yZWYgbmFtZT0idmFsdWUiLz4gaXMgYSBDTFIgb2JqZWN0OiANCiAgICAgICAgLy8vIDxwYXJhbXJlZiBuYW1lPSJ2YWx1ZSIvPiB0eXBlICh0aHJvdWdoIDxzZWUgY3JlZj0iT2JqZWN0LkdldFR5cGUiLz4gbXVzdCBiZSBlcXVhbCB0byANCiAgICAgICAgLy8vIDxwYXJhbXJlZiBuYW1lPSJ0YXJnZXRUeXBlIi8+LCBvciBzYXRpc2Z5IDxzZWUgY3JlZj0iVHlwZS5Jc0Fzc2lnbmFibGVGcm9tIi8+IG9uIGl0Lg0KICAgICAgICAvLy8gPC90ZXJtPg0KICAgICAgICAvLy8gPC9pdGVtPg0KICAgICAgICAvLy8gPC9saXN0Pg0KICAgICAgICAvLy8gPC9yZW1hcmtzPg0KICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNBc3NpZ25hYmxlVG8oVHlwZSB0YXJnZXRUeXBlLCBvYmplY3QgdmFsdWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGJvb2wgaXNpbnZhbGlkID0gZmFsc2U7DQogICAgICAgICAgICAvLyBXZSBjYW4gb25seSBRSSBpZiB0aGUgc2VydmljZSB0eXBlIGlzIGFuIGludGVyZmFjZS4NCiAgICAgICAgICAgIGlmICh2YWx1ZS5HZXRUeXBlKCkuSXNDT01PYmplY3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUuSXNJbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBUcnkgYSBRSS4NCiAgICAgICAgICAgICAgICAgICAgSW50UHRyIGl1bmsgPSBNYXJzaGFsLkdldElVbmtub3duRm9yT2JqZWN0KHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgR3VpZCB0eXBlZ3VpZCA9IHRhcmdldFR5cGUuR1VJRDsNCiAgICAgICAgICAgICAgICAgICAgSW50UHRyIGlmYWNlID0gSW50UHRyLlplcm87DQogICAgICAgICAgICAgICAgICAgIE1hcnNoYWwuUXVlcnlJbnRlcmZhY2UoaXVuaywgcmVmIHR5cGVndWlkLCBvdXQgaWZhY2UpOw0KICAgICAgICAgICAgICAgICAgICBpc2ludmFsaWQgPSAoaWZhY2UgPT0gSW50UHRyLlplcm8pOw0KCQkJCQlpZiAoIWlzaW52YWxpZCkNCgkJCQkJew0KCQkJCQkJTWFyc2hhbC5SZWxlYXNlKGlmYWNlKTsNCgkJCQkJfQ0KCQkJCQlpZiAoaXVuayAhPSBJbnRQdHIuWmVybykNCgkJCQkJew0KCQkJCQkJTWFyc2hhbC5SZWxlYXNlKGl1bmspOw0KCQkJCQl9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIENhbid0IFFJIGEgY2xhc3MgdHlwZS4gQXNzdW1lIGl0J3Mgbm90IGFzc2lnbmFibGUuDQogICAgICAgICAgICAgICAgICAgIGlzaW52YWxpZCA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUuR2V0VHlwZSgpICE9IHRhcmdldFR5cGUgJiYNCiAgICAgICAgICAgICAgICAhdGFyZ2V0VHlwZS5Jc0Fzc2lnbmFibGVGcm9tKHZhbHVlLkdldFR5cGUoKSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaXNpbnZhbGlkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAhaXNpbnZhbGlkOw0KICAgICAgICB9DQoNCgkJI2VuZHJlZ2lvbiBNaXNjZWxhbmVvdXMNCg0KCQkjcmVnaW9uIEFzc2VtYmx5IE1ldGhvZHMNCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBSZXR1cm5zIHRoZSBhc3NlbWJseSBwYXJ0IG9mIGEgZnVsbHkgcXVhbGlmaWVkIHR5cGUgbmFtZSAoRlFOKSwgDQoJCS8vLyB3aXRob3V0IHJlcXVpcmluZyA8c2VlIGNyZWY9IlN5c3RlbS5TZWN1cml0eS5QZXJtaXNzaW9ucy5GaWxlSU9QZXJtaXNzaW9uIi8+IG9uIHRoZSBjYWxsaW5nIGNvZGUuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0icXVhbGlmaWVkVHlwZU5hbWUiPkZ1bGx5IHF1YWxpZmllZCB0eXBlIG5hbWUuPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPlRoZSBhc3NlbWJseSBuYW1lLCBpbmNsdWRpbmcgdmVyc2lvbiwgY3VsdHVyZSBhbmQgcHVibGljIGtleSB0b2tlbiBpZiBwcmVzZW50IGluIHRoZSBGUU4uPC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRBc3NlbWJseVN0cmluZyhzdHJpbmcgcXVhbGlmaWVkVHlwZU5hbWUpDQoJCXsNCgkJCWlmIChxdWFsaWZpZWRUeXBlTmFtZSA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInF1YWxpZmllZFR5cGVOYW1lIik7DQoJCQl9DQoNCgkJCWlmIChxdWFsaWZpZWRUeXBlTmFtZS5JbmRleE9mKCcsJykgPT0gLTEpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZsZWN0aW9uSGVscGVyX0ludmFsaWRRTmFtZSwgcXVhbGlmaWVkVHlwZU5hbWUpKTsNCgkJCX0NCg0KCQkJcmV0dXJuIHF1YWxpZmllZFR5cGVOYW1lLlN1YnN0cmluZyhxdWFsaWZpZWRUeXBlTmFtZS5JbmRleE9mKCcsJykgKyAxKS5UcmltKCk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIHRoZSBzaW1wbGUgbmFtZSBvZiB0aGUgYXNzZW1ibHkgdG8gd2hpY2ggdGhlIHR5cGUgYmVsb25ncywgDQoJCS8vLyB3aXRob3V0IHJlcXVpcmluZyA8c2VlIGNyZWY9IlN5c3RlbS5TZWN1cml0eS5QZXJtaXNzaW9ucy5GaWxlSU9QZXJtaXNzaW9uIi8+IG9uIHRoZSBjYWxsaW5nIGNvZGUuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0idHlwZSI+VGhlIHR5cGUgd2hpY2ggYXNzZW1ibHkgbmFtZSBpcyB0byBiZSBkaXNjb3ZlcmVkLjwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz5UaGUgc2FtZSB2YWx1ZSBhcyAiQXNzZW1ibHkuR2V0TmFtZSgpLk5hbWUiLjwvcmV0dXJucz4NCgkJcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0QXNzZW1ibHlOYW1lKFR5cGUgdHlwZSkNCgkJew0KCQkJaWYgKHR5cGUgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJ0eXBlIik7DQoJCQl9DQoJCQlyZXR1cm4gR2V0QXNzZW1ibHlOYW1lKHR5cGUuQXNzZW1ibHkpOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gR2V0cyB0aGUgc2ltcGxlIG5hbWUgb2YgdGhlIGFzc2VtYmx5IHdpdGhvdXQgDQoJCS8vLyByZXF1aXJpbmcgPHNlZSBjcmVmPSJTeXN0ZW0uU2VjdXJpdHkuUGVybWlzc2lvbnMuRmlsZUlPUGVybWlzc2lvbiIvPiBvbiB0aGUgY2FsbGluZyBjb2RlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9ImFzc2VtYmx5Ij5UaGUgYXNzZW1ibHkgdG8gZXZhbHVhdGUuPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPlRoZSBzYW1lIHZhbHVlIGFzICJBc3NlbWJseS5HZXROYW1lKCkuTmFtZSIuPC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRBc3NlbWJseU5hbWUoQXNzZW1ibHkgYXNzZW1ibHkpDQoJCXsNCgkJCWlmIChhc3NlbWJseSA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImFzc2VtYmx5Iik7DQoJCQl9DQoNCgkJCXJldHVybiBhc3NlbWJseS5GdWxsTmFtZS5TdWJzdHJpbmcoMCwgYXNzZW1ibHkuRnVsbE5hbWUuSW5kZXhPZigiLCIpKS5UcmltKCk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBSZXR1cm5zIHRoZSBzaW1wbGUgYXNzZW1ibHkgbmFtZSBwYXJ0IG9mIGEgZnVsbHkgcXVhbGlmaWVkIHR5cGUgbmFtZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJxdWFsaWZpZWRUeXBlTmFtZSI+RnVsbHkgcXVhbGlmaWVkIHR5cGUgbmFtZS48L3BhcmFtPg0KCQkvLy8gPHJldHVybnM+VGhlIHNpbXBsZSBhc3NlbWJseSBuYW1lLCB3aXRob3V0IHRoZSB2ZXJzaW9uLCBjdWx0dXJlIGFuZCBwdWJsaWMga2V5IHRva2VuIGlmIHByZXNlbnQuPC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRBc3NlbWJseU5hbWUoc3RyaW5nIHF1YWxpZmllZFR5cGVOYW1lKQ0KCQl7DQoJCQlpZiAocXVhbGlmaWVkVHlwZU5hbWUgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJxdWFsaWZpZWRUeXBlTmFtZSIpOw0KCQkJfQ0KDQoJCQlzdHJpbmdbXSBuYW1lcyA9IHF1YWxpZmllZFR5cGVOYW1lLlNwbGl0KCcsJyk7DQoJCQlpZiAobmFtZXMuTGVuZ3RoIDwgMikNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmxlY3Rpb25IZWxwZXJfSW52YWxpZFFOYW1lLCBxdWFsaWZpZWRUeXBlTmFtZSkpOw0KCQkJfQ0KDQoJCQlyZXR1cm4gbmFtZXNbMV0uVHJpbSgpOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gQ3JlYXRlcyBhbiA8c2VlIGNyZWY9IkFzc2VtYmx5TmFtZSIvPiBmcm9tIGFuIGFzc2VtYmx5IGRpc3BsYXkgbmFtZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJhc3NlbWJseU5hbWUiPk5hbWUgb2YgdGhlIGFzc2VtYmx5IHRvIHBhcnNlLjwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz5UaGUgcGFyc2VkIG5hbWUuPC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIEFzc2VtYmx5TmFtZSBQYXJzZUFzc2VtYmx5TmFtZShzdHJpbmcgYXNzZW1ibHlOYW1lKQ0KCQl7DQoJCQlpZiAoYXNzZW1ibHlOYW1lID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigiYXNzZW1ibHlOYW1lIik7DQoJCQl9DQoJCQlpZiAoIUFzc2VtYmx5TmFtZVJlZ0V4LklzTWF0Y2goYXNzZW1ibHlOYW1lKSkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmxlY3Rpb25IZWxwZXJfSW52YWxpZEFzc2VtYmx5TmFtZSwNCgkJCQkJYXNzZW1ibHlOYW1lKSk7DQoJCQl9DQoNCgkJCU1hdGNoIG1hdGNoID0gQXNzZW1ibHlOYW1lUmVnRXguTWF0Y2goYXNzZW1ibHlOYW1lKTsNCg0KCQkJQXNzZW1ibHlOYW1lIG5hbWUgPSBuZXcgQXNzZW1ibHlOYW1lKCk7DQoJCQluYW1lLk5hbWUgPSBtYXRjaC5Hcm91cHNbImFzc2VtYmx5Il0uVmFsdWU7DQoNCgkJCWlmIChtYXRjaC5Hcm91cHNbInZlcnNpb24iXS5TdWNjZXNzKQ0KCQkJew0KCQkJCW5hbWUuVmVyc2lvbiA9IG5ldyBWZXJzaW9uKG1hdGNoLkdyb3Vwc1sidmVyc2lvbiJdLlZhbHVlKTsNCgkJCX0NCgkJCWlmIChtYXRjaC5Hcm91cHNbImN1bHR1cmUiXS5TdWNjZXNzKQ0KCQkJew0KCQkJCS8vIFRha2UgaW50byBhY2NvdW50IHNwZWNpYWwgY2FzZSB3aXRoIG5ldXRyYWwgY3VsdHVyZS4NCgkJCQlpZiAobWF0Y2guR3JvdXBzWyJjdWx0dXJlIl0uVmFsdWUgIT0gIm5ldXRyYWwiKQ0KCQkJCXsNCgkJCQkJbmFtZS5DdWx0dXJlSW5mbyA9IG5ldyBTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mbyhtYXRjaC5Hcm91cHNbImN1bHR1cmUiXS5WYWx1ZSk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCW5hbWUuQ3VsdHVyZUluZm8gPSBTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlOw0KCQkJCX0NCgkJCX0NCgkJCWlmIChtYXRjaC5Hcm91cHNbInRva2VuIl0uU3VjY2VzcykNCgkJCXsNCgkJCQlpZiAobWF0Y2guR3JvdXBzWyJ0b2tlbiJdLlZhbHVlICE9ICJudWxsIikNCgkJCQl7DQoJCQkJCW5hbWUuU2V0UHVibGljS2V5VG9rZW4oSGV4VG9CeXRlcyhtYXRjaC5Hcm91cHNbInRva2VuIl0uVmFsdWUpKTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJbmFtZS5TZXRQdWJsaWNLZXlUb2tlbihudWxsKTsNCgkJCQl9DQoJCQl9DQoNCgkJCXJldHVybiBuYW1lOw0KCQl9DQoNCgkJc3RhdGljIGJ5dGVbXSBIZXhUb0J5dGVzKHN0cmluZyBoZXgpDQoJCXsNCgkJCS8vIEV2ZXJ5IHR3byBzdHJpbmcgY2hhcnMgKDEgaGV4YSBjaGFyKSBtYWtlIHVwIG9uZSBieXRlLg0KCQkJYnl0ZVtdIHJlc3VsdCA9IG5ldyBieXRlW2hleC5MZW5ndGggLyAyXTsNCgkJCWludCBjaGFyaWR4ID0gMDsNCgkJCWZvciAoaW50IGkgPSAwOyBpIDwgcmVzdWx0Lkxlbmd0aDsgaSsrKQ0KCQkJew0KCQkJCXJlc3VsdFtpXSA9IENvbnZlcnQuVG9CeXRlKGhleC5TdWJzdHJpbmcoY2hhcmlkeCwgMiksIDE2KTsNCgkJCQljaGFyaWR4ID0gY2hhcmlkeCArIDI7DQoJCQl9DQoJCQlyZXR1cm4gcmVzdWx0Ow0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gR2V0cyB0aGUgc2ltcGxpZmllZCBuYW1lIG9mIHRoZSBUeXBlLCB3aGljaCBpbmNsdWRlcyBpdHMgZnVsbCBuYW1lc3BhY2UgcXVhbGlmaWVkIA0KCQkvLy8gbmFtZSBhbmQgdGhlIHRhcmdldEFzc2VtYmx5IG5hbWUsIHdpdGhvdXQgdGhlIG90aGVyIHZhbHVlcy4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJ0eXBlIj5UaGUgdHlwZSB3aG9zZSBuYW1lIGlzIHRvIGJlIGRpc2NvdmVyZWQuPC9wYXJhbT4NCgkJcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0U2ltcGxlVHlwZU5hbWUoVHlwZSB0eXBlKQ0KCQl7DQoJCQlpZiAodHlwZSA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJ0eXBlIik7DQoNCgkJCXJldHVybiBTdHJpbmcuQ29uY2F0KHR5cGUuRnVsbE5hbWUsICIsICIsIEdldEFzc2VtYmx5TmFtZSh0eXBlKSk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIHRoZSBzaW1wbGlmaWVkIG5hbWUgb2YgdGhlIG9iamVjdCdzIFR5cGUsIHdoaWNoIGluY2x1ZGVzIGl0cyBmdWxsIG5hbWVzcGFjZSBxdWFsaWZpZWQgDQoJCS8vLyBuYW1lIGFuZCB0aGUgdGFyZ2V0QXNzZW1ibHkgbmFtZSwgd2l0aG91dCB0aGUgb3RoZXIgdmFsdWVzLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InRhcmdldCI+VGhlIHR5cGUgd2hvc2UgbmFtZSBpcyB0byBiZSBkaXNjb3ZlcmVkLjwvcGFyYW0+DQoJCXB1YmxpYyBzdGF0aWMgc3RyaW5nIEdldFNpbXBsZVR5cGVOYW1lKG9iamVjdCB0YXJnZXQpDQoJCXsNCgkJCWlmICh0YXJnZXQgPT0gbnVsbCkgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigidGFyZ2V0Iik7DQoNCgkJCXJldHVybiBHZXRTaW1wbGVUeXBlTmFtZSh0YXJnZXQuR2V0VHlwZSgpKTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEdldHMgdGhlIEFzc2VtYmx5IFRpdGxlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InRhcmdldEFzc2VtYmx5Ij5Bc3NlbWJseSB0byBnZXQgdGl0bGUuPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPjwvcmV0dXJucz4NCgkJcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0QXNzZW1ibHlUaXRsZShBc3NlbWJseSB0YXJnZXRBc3NlbWJseSkgDQoJCXsNCgkJCWlmICh0YXJnZXRBc3NlbWJseSA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJ0YXJnZXRBc3NlbWJseSIpOw0KDQoJCQlvYmplY3RbXSBhdHQgPSB0YXJnZXRBc3NlbWJseS5HZXRDdXN0b21BdHRyaWJ1dGVzKHR5cGVvZihBc3NlbWJseVRpdGxlQXR0cmlidXRlKSwgZmFsc2UpOw0KCQkJcmV0dXJuICgoYXR0Lkxlbmd0aCA+IDApID8gKChBc3NlbWJseVRpdGxlQXR0cmlidXRlKSBhdHQgWzBdKS5UaXRsZSA6IFN0cmluZy5FbXB0eSk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBJbnN0cnVjdHMgYSBjb21waWxlciB0byB1c2UgYSBzcGVjaWZpYyB2ZXJzaW9uIG51bWJlciBmb3IgdGhlIFdpbjMyIGZpbGUgdmVyc2lvbiByZXNvdXJjZS4gDQoJCS8vLyBUaGUgV2luMzIgZmlsZSB2ZXJzaW9uIGlzIG5vdCByZXF1aXJlZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgdGFyZ2V0QXNzZW1ibHkncyB2ZXJzaW9uIG51bWJlci4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJ0YXJnZXRBc3NlbWJseSI+QXNzZW1ibHkgdG8gZ2V0IHZlcnNpb24uPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPjwvcmV0dXJucz4NCgkJcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0QXNzZW1ibHlGaWxlVmVyc2lvbihBc3NlbWJseSB0YXJnZXRBc3NlbWJseSkgDQoJCXsNCgkJCWlmICh0YXJnZXRBc3NlbWJseSA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJ0YXJnZXRBc3NlbWJseSIpOw0KCQkJDQoJCQlvYmplY3RbXSBhdHQgPSB0YXJnZXRBc3NlbWJseS5HZXRDdXN0b21BdHRyaWJ1dGVzKHR5cGVvZihBc3NlbWJseUZpbGVWZXJzaW9uQXR0cmlidXRlKSwgZmFsc2UpOw0KCQkJcmV0dXJuICgoYXR0Lkxlbmd0aCA+IDApID8gKChBc3NlbWJseUZpbGVWZXJzaW9uQXR0cmlidXRlKSBhdHQgWzBdKS5WZXJzaW9uIDogU3RyaW5nLkVtcHR5KTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEdldHMgdGhlIEFzc2VtYmx5IFByb2R1Y3QuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0idGFyZ2V0QXNzZW1ibHkiPkFzc2VtYmx5IHRvIGdldCBwcm9kdWN0LjwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz48L3JldHVybnM+DQoJCXB1YmxpYyBzdGF0aWMgc3RyaW5nIEdldEFzc2VtYmx5UHJvZHVjdChBc3NlbWJseSB0YXJnZXRBc3NlbWJseSkgDQoJCXsNCgkJCWlmICh0YXJnZXRBc3NlbWJseSA9PSBudWxsKSB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJ0YXJnZXRBc3NlbWJseSIpOw0KCQkJDQoJCQlvYmplY3RbXSBhdHQgPSB0YXJnZXRBc3NlbWJseS5HZXRDdXN0b21BdHRyaWJ1dGVzKHR5cGVvZihBc3NlbWJseVByb2R1Y3RBdHRyaWJ1dGUpLCBmYWxzZSk7DQoJCQlyZXR1cm4gKChhdHQuTGVuZ3RoID4gMCkgPyAoKEFzc2VtYmx5UHJvZHVjdEF0dHJpYnV0ZSkgYXR0IFswXSkuUHJvZHVjdCA6IFN0cmluZy5FbXB0eSk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIHRoZSBBc3NlbWJseSBDb25maWd1cmF0aW9uIEF0dHJpYnV0ZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJ0YXJnZXRBc3NlbWJseSI+QXNzZW1ibHkgdG8gZ2V0IGNvbmZpZ3VyYXRpb24uPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPjwvcmV0dXJucz4NCgkJcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0QXNzZW1ibHlDb25maWd1cmF0aW9uKEFzc2VtYmx5IHRhcmdldEFzc2VtYmx5KSANCgkJew0KCQkJaWYgKHRhcmdldEFzc2VtYmx5ID09IG51bGwpIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInRhcmdldEFzc2VtYmx5Iik7DQoJCQkNCgkJCW9iamVjdFtdIGF0dCA9IHRhcmdldEFzc2VtYmx5LkdldEN1c3RvbUF0dHJpYnV0ZXModHlwZW9mKEFzc2VtYmx5Q29uZmlndXJhdGlvbkF0dHJpYnV0ZSksIGZhbHNlKTsNCgkJCXJldHVybiAoKGF0dC5MZW5ndGggPiAwKSA/ICgoQXNzZW1ibHlDb25maWd1cmF0aW9uQXR0cmlidXRlKSBhdHQgWzBdKS5Db25maWd1cmF0aW9uIDogU3RyaW5nLkVtcHR5KTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEdldHMgYW4gdGFyZ2V0QXNzZW1ibHkgZnVsbCBwYXRoIGFuZCBmaWxlIG5hbWUuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0idGFyZ2V0QXNzZW1ibHkiPkFzc2VtYmx5IHRvIGdldCBwYXRoLjwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz48L3JldHVybnM+DQoJCXB1YmxpYyBzdGF0aWMgc3RyaW5nIEdldEFzc2VtYmx5UGF0aChBc3NlbWJseSB0YXJnZXRBc3NlbWJseSkNCgkJew0KCQkJaWYgKHRhcmdldEFzc2VtYmx5ID09IG51bGwpIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInRhcmdldEFzc2VtYmx5Iik7DQogICAgICAgICAgICBpZiAodGFyZ2V0QXNzZW1ibHkuQ29kZUJhc2UgPT0gbnVsbCB8fCB0YXJnZXRBc3NlbWJseS5Db2RlQmFzZS5MZW5ndGggPT0gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oUHJvcGVydGllcy5SZXNvdXJjZXMuR2VuZXJhbF9Bcmd1bWVudEVtcHR5LCAidGFyZ2V0QXNzZW1ibHkuQ29kZUJhc2UiKTsNCiAgICAgICAgICAgIH0NCgkJCQ0KCQkJVXJpIHVyaSA9IG5ldyBVcmkodGFyZ2V0QXNzZW1ibHkuQ29kZUJhc2UpOw0KCQkJcmV0dXJuIHVyaS5Mb2NhbFBhdGg7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIGFuIHRhcmdldEFzc2VtYmx5IGZ1bGwgcGF0aCBhbmQgZmlsZSBuYW1lLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InRhcmdldEFzc2VtYmx5Ij5Bc3NlbWJseSB0byBnZXQgcGF0aC48L3BhcmFtPg0KCQkvLy8gPHJldHVybnM+PC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRBc3NlbWJseUZvbGRlcihBc3NlbWJseSB0YXJnZXRBc3NlbWJseSkNCgkJew0KCQkJaWYgKHRhcmdldEFzc2VtYmx5ID09IG51bGwpIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInRhcmdldEFzc2VtYmx5Iik7DQoJCQkNCgkJCXN0cmluZyBwYXRoID0gR2V0QXNzZW1ibHlQYXRoKHRhcmdldEFzc2VtYmx5KTsNCiAgICAgICAgICAgIGlmIChwYXRoLkluZGV4T2YoJ1xcJykgIT0gLTEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcGF0aCA9IHBhdGguU3Vic3RyaW5nKDAsIHBhdGguTGFzdEluZGV4T2YoJ1xcJykpOw0KICAgICAgICAgICAgfQ0KCQkJcmV0dXJuIHBhdGg7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBDcmVhdGVzIHRoZSBuYW1lIG9mIGEgdHlwZSBxdWFsaWZpZWQgYnkgdGhlIGRpc3BsYXkgbmFtZSBvZiBpdHMgdGFyZ2V0QXNzZW1ibHkuDQoJCS8vLyBUaGUgZm9ybWF0IG9mIHRoZSByZXR1cm5lZCBzdHJpbmcgaXM6IEZ1bGxUeXBlTmFtZSwgQXNzZW1ibHlOYW1lLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InZhbHVlIj48L3BhcmFtPg0KCQkvLy8gPHJldHVybnM+PC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIHN0cmluZyBDcmVhdGVTaG9ydFF1YWxpZmllZE5hbWUoVHlwZSB2YWx1ZSkNCgkJew0KCQkJaWYgKHZhbHVlID09IG51bGwpIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInZhbHVlIik7DQoNCgkJCXJldHVybiBBc3NlbWJseS5DcmVhdGVRdWFsaWZpZWROYW1lKEdldEFzc2VtYmx5TmFtZSh2YWx1ZSksIHZhbHVlLkZ1bGxOYW1lKTsNCgkJfQ0KDQoJCSNlbmRyZWdpb24gQXNzZW1ibHkgTWV0aG9kcw0KDQoJCSNyZWdpb24gQ29udmVudGlvbmFsIHR5cGUgbG9hZGluZw0KCQkNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gCVJldHVybnMgYSA8c2VlIGNyZWY9IlR5cGUiLz4gZnJvbSB0aGUgbmFtZSByZWNlaXZlZCwgbG9hZGVkIGZyb20gdGhlIEdBQywgdGhlIGJhc2UgYXBwbGljYXRpb24gZm9sZGVyIG9yIHRoZSBjYWxsaW5nIHRhcmdldEFzc2VtYmx5LiANCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJjbGFzc05hbWUiPkZ1bGx5IHF1YWxpZmllZCBuYW1lIG9mIHRoZSBjbGFzcyB0byBsb2FkLjwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz5UaGUgbG9hZGVkIHR5cGUuPC9yZXR1cm5zPg0KCQkvLy8gPGV4Y2VwdGlvbiBjcmVmPSJUeXBlTG9hZEV4Y2VwdGlvbiI+VGhlIHR5cGUgY291bGRuJ3QgYmUgbG9hZGVkLjwvZXhjZXB0aW9uPg0KCQkvLy8gPHJlbWFya3M+DQoJCS8vLyBJZiB0aGUgY2xhc3MgbmFtZSBpcyBub3QgdGFyZ2V0QXNzZW1ibHktcXVhbGlmaWVkLCB0aGUgY2FsbGluZyB0YXJnZXRBc3NlbWJseSBpcyB1c2VkIHRvIHJlc29sdmUgdGhlIG5hbWUgDQoJCS8vLyBmaXJzdC4NCgkJLy8vIDwvcmVtYXJrcz4NCgkJcHVibGljIHN0YXRpYyBUeXBlIExvYWRUeXBlKHN0cmluZyBjbGFzc05hbWUpDQoJCXsNCgkJCWlmIChjbGFzc05hbWUgPT0gbnVsbCkgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigiY2xhc3NOYW1lIik7DQoNCgkJCXJldHVybiBMb2FkVHlwZShjbGFzc05hbWUsIGZhbHNlKTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIAlSZXR1cm5zIGEgPHNlZSBjcmVmPSJUeXBlIi8+IGZyb20gdGhlIG5hbWUgcmVjZWl2ZWQsIGxvYWRlZCBmcm9tIHRoZSBHQUMgb3IgdGhlIGJhc2UgYXBwbGljYXRpb24gZm9sZGVyLiANCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJjbGFzc05hbWUiPkZ1bGx5IHF1YWxpZmllZCBuYW1lIG9mIHRoZSBjbGFzcyB0byBsb2FkLjwvcGFyYW0+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY2FsbGluZ0Fzc2VtYmx5Ij5UcnVlIGlmIHRoZSB0eXBlIGlzIGluIHRoZSAiQ2FsbGluZ0Fzc2VtYmx5Ii48L3BhcmFtPg0KCQkvLy8gPHJldHVybnM+VGhlIGxvYWRlZCB0eXBlLjwvcmV0dXJucz4NCgkJLy8vIDxleGNlcHRpb24gY3JlZj0iVHlwZUxvYWRFeGNlcHRpb24iPlRoZSB0eXBlIGNvdWxkbid0IGJlIGxvYWRlZC48L2V4Y2VwdGlvbj4NCgkJcHVibGljIHN0YXRpYyBUeXBlIExvYWRUeXBlKHN0cmluZyBjbGFzc05hbWUsIGJvb2wgY2FsbGluZ0Fzc2VtYmx5KQ0KCQl7DQoJCQlpZiAoY2xhc3NOYW1lID09IG51bGwpIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImNsYXNzTmFtZSIpOw0KCQkJDQoJCQlUeXBlIHJlcXR5cGUgPSBudWxsOw0KDQoJCQlpZihjbGFzc05hbWUgIT0gbnVsbCAmJiBjbGFzc05hbWUuTGVuZ3RoID4gMCkNCgkJCXsNCgkJCQkvLyBNZXRob2QgMSAoZnVsbCBjbGFzcyBuYW1lIGluIHRoZSBHQUMpDQoJCQkJaWYoY2FsbGluZ0Fzc2VtYmx5KQ0KCQkJCQlyZXF0eXBlID0gQXNzZW1ibHkuR2V0Q2FsbGluZ0Fzc2VtYmx5KCkuR2V0VHlwZShjbGFzc05hbWUuVHJpbSgpLCBmYWxzZSwgdHJ1ZSk7DQoJCQkJZWxzZSANCgkJCQkJcmVxdHlwZSA9IFR5cGUuR2V0VHlwZShjbGFzc05hbWUuVHJpbSgpLCBmYWxzZSwgdHJ1ZSk7DQoNCgkJCQlpZiAocmVxdHlwZSA9PSBudWxsKQ0KCQkJCXsNCgkJCQkJLy8gTWV0aG9kIDIgKHBhcnRpYWwgY2xhc3MgbmFtZSBpbiB0aGUgR0FDKQ0KCQkJCQlzdHJpbmdbXSBuYW1lcyA9IGNsYXNzTmFtZS5TcGxpdCgnLCcpOw0KCQkJCQlBc3NlbWJseSBhc20gPSBBc3NlbWJseS5Mb2FkV2l0aFBhcnRpYWxOYW1lKEdldEFzc2VtYmx5TmFtZShjbGFzc05hbWUpKTsNCg0KCQkJCQlpZiAoYXNtID09IG51bGwpDQoJCQkJCXsNCgkJCQkJCXRocm93IG5ldyBUeXBlTG9hZEV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmxlY3Rpb25IZWxwZXJfQ2FudExvYWRBc3NlbWJseSwgDQoJCQkJCQkJbmFtZXNbMV0sIGNsYXNzTmFtZSkpOw0KCQkJCQl9DQoNCgkJCQkJcmVxdHlwZSA9IGFzbS5HZXRUeXBlKG5hbWVzWzBdLlRyaW0oKSwgdHJ1ZSwgdHJ1ZSk7DQoJCQkJfQ0KCQkJfQ0KCQkJcmV0dXJuIHJlcXR5cGU7CQkJDQoJCX0NCg0KCQkjZW5kcmVnaW9uIENvbnZlbnRpb25hbCB0eXBlIGxvYWRpbmcNCgl9DQp9</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>30</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Common.csproj</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PFByb2plY3QgRGVmYXVsdFRhcmdldHM9IkJ1aWxkIiB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9kZXZlbG9wZXIvbXNidWlsZC8yMDAzIj4NCiAgPFByb3BlcnR5R3JvdXA+DQogICAgPENvbmZpZ3VyYXRpb24gQ29uZGl0aW9uPSIgJyQoQ29uZmlndXJhdGlvbiknID09ICcnICI+RGVidWc8L0NvbmZpZ3VyYXRpb24+DQogICAgPFBsYXRmb3JtIENvbmRpdGlvbj0iICckKFBsYXRmb3JtKScgPT0gJycgIj5BbnlDUFU8L1BsYXRmb3JtPg0KICAgIDxQcm9kdWN0VmVyc2lvbj44LjAuNTA3Mjc8L1Byb2R1Y3RWZXJzaW9uPg0KICAgIDxTY2hlbWFWZXJzaW9uPjIuMDwvU2NoZW1hVmVyc2lvbj4NCiAgICA8UHJvamVjdEd1aWQ+e0NBQ0JBODZFLThFMTUtNDMxOC04MjJGLUU0RDc0RjMxMDdBMX08L1Byb2plY3RHdWlkPg0KICAgIDxPdXRwdXRUeXBlPkxpYnJhcnk8L091dHB1dFR5cGU+DQogICAgPEFwcERlc2lnbmVyRm9sZGVyPlByb3BlcnRpZXM8L0FwcERlc2lnbmVyRm9sZGVyPg0KICAgIDxSb290TmFtZXNwYWNlPk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrPC9Sb290TmFtZXNwYWNlPg0KICAgIDxBc3NlbWJseU5hbWU+TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29tbW9uPC9Bc3NlbWJseU5hbWU+DQogICAgPFNjY1Byb2plY3ROYW1lPg0KICAgIDwvU2NjUHJvamVjdE5hbWU+DQogICAgPFNjY0xvY2FsUGF0aD4NCiAgICA8L1NjY0xvY2FsUGF0aD4NCiAgICA8U2NjQXV4UGF0aD4NCiAgICA8L1NjY0F1eFBhdGg+DQogICAgPFNjY1Byb3ZpZGVyPg0KICAgIDwvU2NjUHJvdmlkZXI+DQogICAgPFNpZ25Bc3NlbWJseT50cnVlPC9TaWduQXNzZW1ibHk+DQogICAgPEFzc2VtYmx5T3JpZ2luYXRvcktleUZpbGU+Li5cLi5cU29sdXRpb24gSXRlbXNcSVBHLnNuazwvQXNzZW1ibHlPcmlnaW5hdG9yS2V5RmlsZT4NCiAgICA8RGVsYXlTaWduPnRydWU8L0RlbGF5U2lnbj4NCiAgPC9Qcm9wZXJ0eUdyb3VwPg0KICA8UHJvcGVydHlHcm91cCBDb25kaXRpb249IiAnJChDb25maWd1cmF0aW9uKXwkKFBsYXRmb3JtKScgPT0gJ0RlYnVnfEFueUNQVScgIj4NCiAgICA8RGVidWdTeW1ib2xzPnRydWU8L0RlYnVnU3ltYm9scz4NCiAgICA8RGVidWdUeXBlPmZ1bGw8L0RlYnVnVHlwZT4NCiAgICA8T3B0aW1pemU+ZmFsc2U8L09wdGltaXplPg0KICAgIDxPdXRwdXRQYXRoPi4uXC4uXC4uXC4uXC4uXFByb2dyYW0gRmlsZXNcTWljcm9zb2Z0IFZpc3VhbCBTdHVkaW8gOFxDb21tb243XElERVxQdWJsaWNBc3NlbWJsaWVzXDwvT3V0cHV0UGF0aD4NCiAgICA8RGVmaW5lQ29uc3RhbnRzPkRFQlVHO1RSQUNFPC9EZWZpbmVDb25zdGFudHM+DQogICAgPEVycm9yUmVwb3J0PnByb21wdDwvRXJyb3JSZXBvcnQ+DQogICAgPFdhcm5pbmdMZXZlbD40PC9XYXJuaW5nTGV2ZWw+DQogICAgPERvY3VtZW50YXRpb25GaWxlPiQoRGV2RW52RGlyKVB1YmxpY0Fzc2VtYmxpZXNcTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29tbW9uLnhtbDwvRG9jdW1lbnRhdGlvbkZpbGU+DQogICAgPFRyZWF0V2FybmluZ3NBc0Vycm9ycz50cnVlPC9UcmVhdFdhcm5pbmdzQXNFcnJvcnM+DQogIDwvUHJvcGVydHlHcm91cD4NCiAgPFByb3BlcnR5R3JvdXAgQ29uZGl0aW9uPSIgJyQoQ29uZmlndXJhdGlvbil8JChQbGF0Zm9ybSknID09ICdSZWxlYXNlfEFueUNQVScgIj4NCiAgICA8RGVidWdUeXBlPnBkYm9ubHk8L0RlYnVnVHlwZT4NCiAgICA8T3B0aW1pemU+dHJ1ZTwvT3B0aW1pemU+DQogICAgPE91dHB1dFBhdGg+Li5cLi5cLi5cLi5cLi5cUHJvZ3JhbSBGaWxlc1xNaWNyb3NvZnQgVmlzdWFsIFN0dWRpbyA4XENvbW1vbjdcSURFXFB1YmxpY0Fzc2VtYmxpZXNcPC9PdXRwdXRQYXRoPg0KICAgIDxEZWZpbmVDb25zdGFudHM+VFJBQ0U8L0RlZmluZUNvbnN0YW50cz4NCiAgICA8RXJyb3JSZXBvcnQ+cHJvbXB0PC9FcnJvclJlcG9ydD4NCiAgICA8V2FybmluZ0xldmVsPjQ8L1dhcm5pbmdMZXZlbD4NCiAgICA8RG9jdW1lbnRhdGlvbkZpbGU+JChEZXZFbnZEaXIpUHVibGljQXNzZW1ibGllc1xNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db21tb24ueG1sPC9Eb2N1bWVudGF0aW9uRmlsZT4NCiAgICA8VHJlYXRXYXJuaW5nc0FzRXJyb3JzPnRydWU8L1RyZWF0V2FybmluZ3NBc0Vycm9ycz4NCiAgPC9Qcm9wZXJ0eUdyb3VwPg0KICA8SXRlbUdyb3VwPg0KICAgIDxSZWZlcmVuY2UgSW5jbHVkZT0iU3lzdGVtIiAvPg0KICAgIDxSZWZlcmVuY2UgSW5jbHVkZT0iU3lzdGVtLmNvbmZpZ3VyYXRpb24iIC8+DQogICAgPFJlZmVyZW5jZSBJbmNsdWRlPSJTeXN0ZW0uRGF0YSIgLz4NCiAgICA8UmVmZXJlbmNlIEluY2x1ZGU9IlN5c3RlbS5YbWwiIC8+DQogIDwvSXRlbUdyb3VwPg0KICA8SXRlbUdyb3VwPg0KICAgIDxDb21waWxlIEluY2x1ZGU9Ii4uXC4uXFNvbHV0aW9uIEl0ZW1zXEFzc2VtYmx5VmVyc2lvbkluZm8uY3MiPg0KICAgICAgPExpbms+QXNzZW1ibHlWZXJzaW9uSW5mby5jczwvTGluaz4NCiAgICA8L0NvbXBpbGU+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iLi5cLi5cU29sdXRpb24gSXRlbXNcR2xvYmFsQXNzZW1ibHlJbmZvLmNzIj4NCiAgICAgIDxMaW5rPkdsb2JhbEFzc2VtYmx5SW5mby5jczwvTGluaz4NCiAgICA8L0NvbXBpbGU+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iQWN0aW9uLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IkFzc2V0UmVmZXJlbmNlLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IkNvbmZpZ3VyYWJsZUFjdGlvbi5jcyIgLz4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJDb25maWd1cmF0aW9uXEd1aWRhbmNlUGFja2FnZUNvbmZpZy5jcyI+DQogICAgICA8RGVwZW5kZW50VXBvbj5HdWlkYW5jZVBhY2thZ2VDb25maWcueHNkPC9EZXBlbmRlbnRVcG9uPg0KICAgICAgPEdlbmVyYXRvcj5NdnAuWG1sLlhHZW48L0dlbmVyYXRvcj4NCiAgICAgIDxMYXN0R2VuT3V0cHV0Pkd1aWRhbmNlUGFja2FnZUNvbmZpZy5TZXJpYWxpemF0aW9uLmNzPC9MYXN0R2VuT3V0cHV0Pg0KICAgICAgPEN1c3RvbVRvb2xOYW1lc3BhY2U+TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5TZXJpYWxpemF0aW9uPC9DdXN0b21Ub29sTmFtZXNwYWNlPg0KICAgICAgPEF1dG9HZW4+VHJ1ZTwvQXV0b0dlbj4NCiAgICAgIDxEZXNpZ25UaW1lPlRydWU8L0Rlc2lnblRpbWU+DQogICAgPC9Db21waWxlPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IkNvbmZpZ3VyYXRpb25cR3VpZGFuY2VQYWNrYWdlQ29uZmlnLkluaXRpYWxpemVyLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IkNvbmZpZ3VyYXRpb25cR3VpZGFuY2VQYWNrYWdlQ29uZmlnLlNlcmlhbGl6YXRpb24uY3MiPg0KICAgICAgPERlcGVuZGVudFVwb24+R3VpZGFuY2VQYWNrYWdlQ29uZmlnLmNzPC9EZXBlbmRlbnRVcG9uPg0KICAgICAgPEF1dG9HZW4+VHJ1ZTwvQXV0b0dlbj4NCiAgICAgIDxEZXNpZ25UaW1lPlRydWU8L0Rlc2lnblRpbWU+DQogICAgPC9Db21waWxlPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IkNvbmZpZ3VyYXRpb25cTWFuaWZlc3RDb25maWcuY3MiPg0KICAgICAgPERlcGVuZGVudFVwb24+TWFuaWZlc3RDb25maWcueHNkPC9EZXBlbmRlbnRVcG9uPg0KICAgICAgPEdlbmVyYXRvcj5NdnAuWG1sLlhHZW48L0dlbmVyYXRvcj4NCiAgICAgIDxMYXN0R2VuT3V0cHV0Pk1hbmlmZXN0Q29uZmlnLlNlcmlhbGl6YXRpb24uY3M8L0xhc3RHZW5PdXRwdXQ+DQogICAgICA8Q3VzdG9tVG9vbE5hbWVzcGFjZT5NaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0PC9DdXN0b21Ub29sTmFtZXNwYWNlPg0KICAgICAgPEF1dG9HZW4+VHJ1ZTwvQXV0b0dlbj4NCiAgICAgIDxEZXNpZ25UaW1lPlRydWU8L0Rlc2lnblRpbWU+DQogICAgPC9Db21waWxlPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IkNvbmZpZ3VyYXRpb25cTWFuaWZlc3RDb25maWcuU2VyaWFsaXphdGlvbi5jcyI+DQogICAgICA8RGVwZW5kZW50VXBvbj5NYW5pZmVzdENvbmZpZy5jczwvRGVwZW5kZW50VXBvbj4NCiAgICAgIDxBdXRvR2VuPlRydWU8L0F1dG9HZW4+DQogICAgICA8RGVzaWduVGltZT5UcnVlPC9EZXNpZ25UaW1lPg0KICAgIDwvQ29tcGlsZT4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJDb25maWd1cmF0aW9uXFJlY2lwZVZhbGlkYXRvci5jcyIgLz4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJDb25maWd1cmF0aW9uXFNjaGVtYUluZm8uY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iSUFjdGlvbi5jcyIgLz4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJJQXNzZXRSZWZlcmVuY2UuY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iSUJvdW5kQXNzZXRSZWZlcmVuY2UuY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iSW5wdXRBdHRyaWJ1dGUuY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iSVVuYm91bmRBc3NldFJlZmVyZW5jZS5jcyIgLz4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJJVmFsdWVQcm92aWRlci5jcyIgLz4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJPdXRwdXRBdHRyaWJ1dGUuY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iUHJvcGVydGllc1xBc3NlbWJseUluZm8uY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iUHJvcGVydGllc1xSZXNvdXJjZXMuRGVzaWduZXIuY3MiPg0KICAgICAgPERlcGVuZGVudFVwb24+UmVzb3VyY2VzLnJlc3g8L0RlcGVuZGVudFVwb24+DQogICAgICA8QXV0b0dlbj5UcnVlPC9BdXRvR2VuPg0KICAgICAgPERlc2lnblRpbWU+VHJ1ZTwvRGVzaWduVGltZT4NCiAgICA8L0NvbXBpbGU+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iUmVjaXBlRnJhbWV3b3JrRXhjZXB0aW9uLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IlJlY2lwZVJlZmVyZW5jZS5jcyIgLz4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJTZXJ2aWNlc1xJQXNzZXRSZWZlcmVuY2VJbmRleGVyLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IlNlcnZpY2VzXElBc3NldFJlZmVyZW5jZVNlcnZpY2UuY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iU2VydmljZXNcSUNvbmZpZ3VyYXRpb25TZXJ2aWNlLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IlNlcnZpY2VzXElFeGVjdXRpb25TZXJ2aWNlLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IlVuYm91bmRSZWNpcGVSZWZlcmVuY2UuY3MiIC8+DQogICAgPENvbXBpbGUgSW5jbHVkZT0iVmFsdWVQcm92aWRlci5jcyIgLz4NCiAgPC9JdGVtR3JvdXA+DQogIDxJdGVtR3JvdXA+DQogICAgPE5vbmUgSW5jbHVkZT0iLi5cLi5cU29sdXRpb24gSXRlbXNcSVBHLnNuayI+DQogICAgICA8TGluaz5JUEcuc25rPC9MaW5rPg0KICAgIDwvTm9uZT4NCiAgICA8Q29tcGlsZSBJbmNsdWRlPSJDb25maWd1cmF0aW9uXE1hbmlmZXN0Q29uZmlnLkluaXRpYWxpemVyLmNzIiAvPg0KICAgIDxDb21waWxlIEluY2x1ZGU9IklCb3VuZFJlZmVyZW5jZUxvY2F0b3JTdHJhdGVneS5jcyIgLz4NCiAgICA8RW1iZWRkZWRSZXNvdXJjZSBJbmNsdWRlPSJDb25maWd1cmF0aW9uXE1hbmlmZXN0Q29uZmlnLnhzZCI+DQogICAgICA8R2VuZXJhdG9yPk12cC5YbWwuWHNkR2VuPC9HZW5lcmF0b3I+DQogICAgICA8TGFzdEdlbk91dHB1dD5NYW5pZmVzdENvbmZpZy5jczwvTGFzdEdlbk91dHB1dD4NCiAgICAgIDxDdXN0b21Ub29sTmFtZXNwYWNlPk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3Q8L0N1c3RvbVRvb2xOYW1lc3BhY2U+DQogICAgICA8U3ViVHlwZT5EZXNpZ25lcjwvU3ViVHlwZT4NCiAgICA8L0VtYmVkZGVkUmVzb3VyY2U+DQogICAgPEVtYmVkZGVkUmVzb3VyY2UgSW5jbHVkZT0iQ29uZmlndXJhdGlvblxHdWlkYW5jZVBhY2thZ2VDb25maWcueHNkIj4NCiAgICAgIDxHZW5lcmF0b3I+TXZwLlhtbC5Yc2RHZW48L0dlbmVyYXRvcj4NCiAgICAgIDxMYXN0R2VuT3V0cHV0Pkd1aWRhbmNlUGFja2FnZUNvbmZpZy5jczwvTGFzdEdlbk91dHB1dD4NCiAgICAgIDxTdWJUeXBlPkRlc2lnbmVyPC9TdWJUeXBlPg0KICAgICAgPEN1c3RvbVRvb2xOYW1lc3BhY2U+TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbjwvQ3VzdG9tVG9vbE5hbWVzcGFjZT4NCiAgICA8L0VtYmVkZGVkUmVzb3VyY2U+DQogIDwvSXRlbUdyb3VwPg0KICA8SXRlbUdyb3VwPg0KICAgIDxFbWJlZGRlZFJlc291cmNlIEluY2x1ZGU9IklCb3VuZEFzc2V0UmVmZXJlbmNlLmJtcCIgLz4NCiAgPC9JdGVtR3JvdXA+DQogIDxJdGVtR3JvdXA+DQogICAgPEVtYmVkZGVkUmVzb3VyY2UgSW5jbHVkZT0iSVVuYm91bmRBc3NldFJlZmVyZW5jZS5ibXAiIC8+DQogICAgPEVtYmVkZGVkUmVzb3VyY2UgSW5jbHVkZT0iUHJvcGVydGllc1xSZXNvdXJjZXMucmVzeCI+DQogICAgICA8R2VuZXJhdG9yPlJlc1hGaWxlQ29kZUdlbmVyYXRvcjwvR2VuZXJhdG9yPg0KICAgICAgPExhc3RHZW5PdXRwdXQ+UmVzb3VyY2VzLkRlc2lnbmVyLmNzPC9MYXN0R2VuT3V0cHV0Pg0KICAgICAgPFN1YlR5cGU+RGVzaWduZXI8L1N1YlR5cGU+DQogICAgPC9FbWJlZGRlZFJlc291cmNlPg0KICA8L0l0ZW1Hcm91cD4NCiAgPEl0ZW1Hcm91cD4NCiAgICA8UHJvamVjdFJlZmVyZW5jZSBJbmNsdWRlPSIuLlwuLlxQcmFjdGljZXNcQ29tcG9uZW50TW9kZWxcQ29tcG9uZW50TW9kZWwuY3Nwcm9qIj4NCiAgICAgIDxQcm9qZWN0PnsyNEExNDc1MC01QkU3LTQ4NzItOTg5OS1BMEVFRjU0NUQxRkR9PC9Qcm9qZWN0Pg0KICAgICAgPE5hbWU+Q29tcG9uZW50TW9kZWwgKFByYWN0aWNlc1xDb21wb25lbnRNb2RlbCk8L05hbWU+DQogICAgPC9Qcm9qZWN0UmVmZXJlbmNlPg0KICAgIDxQcm9qZWN0UmVmZXJlbmNlIEluY2x1ZGU9Ii4uXC4uXFByYWN0aWNlc1xDb21tb25cQ29tbW9uLmNzcHJvaiI+DQogICAgICA8UHJvamVjdD57Q0QxQTI4QzUtMDI3OC00REE2LTgxQzQtQTNGRjk1RkYxMjcwfTwvUHJvamVjdD4NCiAgICAgIDxOYW1lPkNvbW1vbiAoUHJhY3RpY2VzXENvbW1vbik8L05hbWU+DQogICAgPC9Qcm9qZWN0UmVmZXJlbmNlPg0KICA8L0l0ZW1Hcm91cD4NCiAgPEl0ZW1Hcm91cD4NCiAgICA8Q29udGVudCBJbmNsdWRlPSJDb25maWd1cmF0aW9uXFJlY2lwZUZyYW1ld29yay54bWwiIC8+DQogIDwvSXRlbUdyb3VwPg0KICA8SW1wb3J0IFByb2plY3Q9IiQoTVNCdWlsZEJpblBhdGgpXE1pY3Jvc29mdC5DU0hBUlAuVGFyZ2V0cyIgLz4NCiAgPFByb2plY3RFeHRlbnNpb25zPg0KICAgIDxWaXN1YWxTdHVkaW8+DQogICAgICA8VXNlclByb3BlcnRpZXMgUmVjaXBlRnJhbWV3b3JrX19fQ29tbW9uX19fQ29uZmlndXJhdGlvbl9fX0d1aWRhbmNlUGFja2FnZUNvbmZpZ19feHNkX19fR3VpZGFuY2VQYWNrYWdlQ29uZmlnX19jcz0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2U7TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5TZXJpYWxpemF0aW9uIiBSZWNpcGVGcmFtZXdvcmtfX19Db21tb25fX19Db25maWd1cmF0aW9uX19fTWFuaWZlc3RDb25maWdfX3hzZF9fX01hbmlmZXN0Q29uZmlnX19jcz0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2U7TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdHxNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yaztNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0IiAvPg0KICAgIDwvVmlzdWFsU3R1ZGlvPg0KICA8L1Byb2plY3RFeHRlbnNpb25zPg0KICA8UHJvcGVydHlHcm91cD4NCiAgICA8UG9zdEJ1aWxkRXZlbnQ+eGNvcHkgL1kgL0QgIiQoUHJvamVjdERpcilDb25maWd1cmF0aW9uXCoueHNkIiAiJChEZXZFbnZEaXIpLi5cLi5cWG1sXFNjaGVtYXNcKi54bWwiDQp4Y29weSAvWSAvRCAiJChQcm9qZWN0RGlyKUNvbmZpZ3VyYXRpb25cUmVjaXBlRnJhbWV3b3JrLnhtbCIgIiUyNUFMTFVTRVJTUFJPRklMRSUyNVxBcHBsaWNhdGlvbiBEYXRhXE1pY3Jvc29mdFxSZWNpcGUgRnJhbWV3b3JrXCI8L1Bvc3RCdWlsZEV2ZW50Pg0KICA8L1Byb3BlcnR5R3JvdXA+DQo8L1Byb2plY3Q+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>7</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/GuidancePackageConfig.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIDxhdXRvZ2VuZXJhdGVkPg0KLy8gICAgIFRoaXMgY29kZSB3YXMgZ2VuZXJhdGVkIGJ5IHRoZSBNdnAuWG1sLlhzZEdlbiB0b29sLg0KLy8gICAgIFRvb2wgVmVyc2lvbjogICAgMS4xLjEuMA0KLy8gICAgIFJ1bnRpbWUgVmVyc2lvbjogMi4wLjUwNzI3LjQyDQovLw0KLy8gICAgIENoYW5nZXMgdG8gdGhpcyBmaWxlIG1heSBjYXVzZSBpbmNvcnJlY3QgYmVoYXZpb3IgYW5kIHdpbGwgYmUgbG9zdCBpZg0KLy8gICAgIHRoZSBjb2RlIGlzIHJlZ2VuZXJhdGVkLg0KLy8gPC9hdXRvZ2VuZXJhdGVkPg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIFdvcmthcm91bmQgZm9yIGJ1ZyBodHRwOi8vbGFiLm1zZG4ubWljcm9zb2Z0LmNvbS9wcm9kdWN0ZmVlZGJhY2svdmlld2ZlZWRiYWNrLmFzcHg/ZmVlZGJhY2tpZD1kNDU3YTM2ZS0wY2U4LTQzNjgtOWEyNy05Mjc2Mjg2MGQ4ZTENCiNwcmFnbWEgd2FybmluZyBkaXNhYmxlIDE1OTENCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uDQp7DQogICAgDQogICAgDQogICAgLy8vIDxyZW1hcmtzLz4NCiAgICBbU3lzdGVtLkNvZGVEb20uQ29tcGlsZXIuR2VuZXJhdGVkQ29kZUF0dHJpYnV0ZSgiU3lzdGVtLlhtbCIsICIyLjAuNTA3MjcuNDIiKV0NCiAgICBbU3lzdGVtLlNlcmlhbGl6YWJsZUF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWdnZXJTdGVwVGhyb3VnaEF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduZXJDYXRlZ29yeUF0dHJpYnV0ZSgiY29kZSIpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sVHlwZUF0dHJpYnV0ZShBbm9ueW1vdXNUeXBlPXRydWUpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sUm9vdEF0dHJpYnV0ZShOYW1lc3BhY2U9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgSXNOdWxsYWJsZT1mYWxzZSldDQogICAgcHVibGljIHBhcnRpYWwgY2xhc3MgR3VpZGFuY2VQYWNrYWdlDQogICAgew0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBHdWlkYW5jZVBhY2thZ2VIb3N0RGF0YSBob3N0RGF0YUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBSZWNpcGVbXSByZWNpcGVzRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBuYW1lRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBjYXB0aW9uRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBkZXNjcmlwdGlvbkZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgdmVyc2lvbkZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgZ3VpZEZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgc2NoZW1hVmVyc2lvbkZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgaG9zdEZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgYmluZGluZ1JlY2lwZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBUcmFjZUxldmVsIHRyYWNlTGV2ZWxGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgaW50IHNvcnRQcmlvcml0eUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHVibGljIEd1aWRhbmNlUGFja2FnZSgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMudmVyc2lvbkZpZWxkID0gIjEuMCI7DQogICAgICAgICAgICB0aGlzLnNjaGVtYVZlcnNpb25GaWVsZCA9ICIxLjAiOw0KICAgICAgICAgICAgdGhpcy5ob3N0RmllbGQgPSAiVmlzdWFsU3R1ZGlvIjsNCiAgICAgICAgICAgIHRoaXMudHJhY2VMZXZlbEZpZWxkID0gVHJhY2VMZXZlbC5FcnJvcjsNCiAgICAgICAgICAgIHRoaXMuc29ydFByaW9yaXR5RmllbGQgPSAxMDA7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBHdWlkYW5jZVBhY2thZ2VIb3N0RGF0YSBIb3N0RGF0YQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ob3N0RGF0YUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5ob3N0RGF0YUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXJyYXlJdGVtQXR0cmlidXRlKCJSZWNpcGUiLCBJc051bGxhYmxlPWZhbHNlKV0NCiAgICAgICAgcHVibGljIFJlY2lwZVtdIFJlY2lwZXMNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjaXBlc0ZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5yZWNpcGVzRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgQ2FwdGlvbg0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXB0aW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNhcHRpb25GaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZWZhdWx0VmFsdWVBdHRyaWJ1dGUoIjEuMCIpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIFZlcnNpb24NCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbkZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy52ZXJzaW9uRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBHdWlkDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmd1aWRGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuZ3VpZEZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgU2NoZW1hVmVyc2lvbg0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zY2hlbWFWZXJzaW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNjaGVtYVZlcnNpb25GaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSgiVmlzdWFsU3R1ZGlvIildDQogICAgICAgIHB1YmxpYyBzdHJpbmcgSG9zdA0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ob3N0RmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmhvc3RGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZShEYXRhVHlwZT0iTkNOYW1lIildDQogICAgICAgIHB1YmxpYyBzdHJpbmcgQmluZGluZ1JlY2lwZQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nUmVjaXBlRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdSZWNpcGVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlZmF1bHRWYWx1ZUF0dHJpYnV0ZShUcmFjZUxldmVsLkVycm9yKV0NCiAgICAgICAgcHVibGljIFRyYWNlTGV2ZWwgVHJhY2VMZXZlbA0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFjZUxldmVsRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRyYWNlTGV2ZWxGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSgxMDApXQ0KICAgICAgICBwdWJsaWMgaW50IFNvcnRQcmlvcml0eQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0UHJpb3JpdHlGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuc29ydFByaW9yaXR5RmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLy8gPHJlbWFya3MvPg0KICAgIFtTeXN0ZW0uQ29kZURvbS5Db21waWxlci5HZW5lcmF0ZWRDb2RlQXR0cmlidXRlKCJTeXN0ZW0uWG1sIiwgIjIuMC41MDcyNy40MiIpXQ0KICAgIFtTeXN0ZW0uU2VyaWFsaXphYmxlQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlclN0ZXBUaHJvdWdoQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ25lckNhdGVnb3J5QXR0cmlidXRlKCJjb2RlIildDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxUeXBlQXR0cmlidXRlKEFub255bW91c1R5cGU9dHJ1ZSldDQogICAgcHVibGljIHBhcnRpYWwgY2xhc3MgR3VpZGFuY2VQYWNrYWdlSG9zdERhdGENCiAgICB7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIEljb24gaWNvbkZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBNZW51W10gbWVudUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBTeXN0ZW0uWG1sLlhtbEVsZW1lbnQgYW55RmllbGQ7DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgSWNvbiBJY29uDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmljb25GaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuaWNvbkZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRWxlbWVudEF0dHJpYnV0ZSgiTWVudSIpXQ0KICAgICAgICBwdWJsaWMgTWVudVtdIE1lbnUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVudUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5tZW51RmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBbnlFbGVtZW50QXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBTeXN0ZW0uWG1sLlhtbEVsZW1lbnQgQW55DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFueUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5hbnlGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFJvb3RBdHRyaWJ1dGUoTmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIEljb24NCiAgICB7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBndWlkRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIGludCBpZEZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBib29sIGlkRmllbGRTcGVjaWZpZWQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBmaWxlRmllbGQ7DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIEd1aWQNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3VpZEZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5ndWlkRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIGludCBJRA0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pZEZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5pZEZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sSWdub3JlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBib29sIElEU3BlY2lmaWVkDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlkRmllbGRTcGVjaWZpZWQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlkRmllbGRTcGVjaWZpZWQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBGaWxlDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuZmlsZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLy8vIDxyZW1hcmtzLz4NCiAgICBbU3lzdGVtLkNvZGVEb20uQ29tcGlsZXIuR2VuZXJhdGVkQ29kZUF0dHJpYnV0ZSgiU3lzdGVtLlhtbCIsICIyLjAuNTA3MjcuNDIiKV0NCiAgICBbU3lzdGVtLlNlcmlhbGl6YWJsZUF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWdnZXJTdGVwVGhyb3VnaEF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduZXJDYXRlZ29yeUF0dHJpYnV0ZSgiY29kZSIpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sVHlwZUF0dHJpYnV0ZShBbm9ueW1vdXNUeXBlPXRydWUpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sUm9vdEF0dHJpYnV0ZShOYW1lc3BhY2U9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgSXNOdWxsYWJsZT1mYWxzZSldDQogICAgcHVibGljIHBhcnRpYWwgY2xhc3MgVHlwZUFsaWFzDQogICAgew0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgbmFtZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgdHlwZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgVHlwZQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnR5cGVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFJvb3RBdHRyaWJ1dGUoTmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIEFyZ3VtZW50DQogICAgew0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBDb252ZXJ0ZXIgY29udmVydGVyRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIFZhbHVlUHJvdmlkZXIgdmFsdWVQcm92aWRlckZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgbmFtZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgdHlwZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBib29sIHJlcXVpcmVkRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwdWJsaWMgQXJndW1lbnQoKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnR5cGVGaWVsZCA9ICJTeXN0ZW0uU3RyaW5nIjsNCiAgICAgICAgICAgIHRoaXMucmVxdWlyZWRGaWVsZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBDb252ZXJ0ZXIgQ29udmVydGVyDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRlckZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZXJGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgVmFsdWVQcm92aWRlciBWYWx1ZVByb3ZpZGVyDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlUHJvdmlkZXJGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMudmFsdWVQcm92aWRlckZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5hbWVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSgiU3lzdGVtLlN0cmluZyIpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIFR5cGUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy50eXBlRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZWZhdWx0VmFsdWVBdHRyaWJ1dGUodHJ1ZSldDQogICAgICAgIHB1YmxpYyBib29sIFJlcXVpcmVkDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVkRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlcXVpcmVkRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLy8gPHJlbWFya3MvPg0KICAgIFtTeXN0ZW0uQ29kZURvbS5Db21waWxlci5HZW5lcmF0ZWRDb2RlQXR0cmlidXRlKCJTeXN0ZW0uWG1sIiwgIjIuMC41MDcyNy40MiIpXQ0KICAgIFtTeXN0ZW0uU2VyaWFsaXphYmxlQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlclN0ZXBUaHJvdWdoQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ25lckNhdGVnb3J5QXR0cmlidXRlKCJjb2RlIildDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxUeXBlQXR0cmlidXRlKEFub255bW91c1R5cGU9dHJ1ZSldDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxSb290QXR0cmlidXRlKE5hbWVzcGFjZT0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCBJc051bGxhYmxlPWZhbHNlKV0NCiAgICBwdWJsaWMgcGFydGlhbCBjbGFzcyBDb252ZXJ0ZXINCiAgICB7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyB0eXBlRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIFN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gYW55QXR0ckZpZWxkOw0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBUeXBlDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMudHlwZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQW55QXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdIEFueUF0dHINCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW55QXR0ckZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5hbnlBdHRyRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLy8gPHJlbWFya3MvPg0KICAgIFtTeXN0ZW0uQ29kZURvbS5Db21waWxlci5HZW5lcmF0ZWRDb2RlQXR0cmlidXRlKCJTeXN0ZW0uWG1sIiwgIjIuMC41MDcyNy40MiIpXQ0KICAgIFtTeXN0ZW0uU2VyaWFsaXphYmxlQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlclN0ZXBUaHJvdWdoQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ25lckNhdGVnb3J5QXR0cmlidXRlKCJjb2RlIildDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxUeXBlQXR0cmlidXRlKEFub255bW91c1R5cGU9dHJ1ZSldDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxSb290QXR0cmlidXRlKE5hbWVzcGFjZT0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCBJc051bGxhYmxlPWZhbHNlKV0NCiAgICBwdWJsaWMgcGFydGlhbCBjbGFzcyBWYWx1ZVByb3ZpZGVyDQogICAgew0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBNb25pdG9yQXJndW1lbnRbXSBtb25pdG9yQXJndW1lbnRGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIHR5cGVGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgU3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSBhbnlBdHRyRmllbGQ7DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEVsZW1lbnRBdHRyaWJ1dGUoIk1vbml0b3JBcmd1bWVudCIpXQ0KICAgICAgICBwdWJsaWMgTW9uaXRvckFyZ3VtZW50W10gTW9uaXRvckFyZ3VtZW50DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1vbml0b3JBcmd1bWVudEZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5tb25pdG9yQXJndW1lbnRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIFR5cGUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy50eXBlRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBbnlBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIFN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gQW55QXR0cg0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbnlBdHRyRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFueUF0dHJGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFJvb3RBdHRyaWJ1dGUoTmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIE1vbml0b3JBcmd1bWVudA0KICAgIHsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIG5hbWVGaWVsZDsNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5hbWVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFJvb3RBdHRyaWJ1dGUoTmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIFJlY2lwZQ0KICAgIHsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgVHlwZUFsaWFzW10gdHlwZXNGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIGNhcHRpb25GaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIGRlc2NyaXB0aW9uRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIFJlY2lwZUhvc3REYXRhIGhvc3REYXRhRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIEFyZ3VtZW50W10gYXJndW1lbnRzRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIFJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhIGdhdGhlcmluZ1NlcnZpY2VEYXRhRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIFJlY2lwZUFjdGlvbnMgYWN0aW9uc0ZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgbmFtZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBib29sIHJlY3VycmVudEZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBib29sIGJvdW5kRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwdWJsaWMgUmVjaXBlKCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5yZWN1cnJlbnRGaWVsZCA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmJvdW5kRmllbGQgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEFycmF5SXRlbUF0dHJpYnV0ZSgiVHlwZUFsaWFzIiwgSXNOdWxsYWJsZT1mYWxzZSldDQogICAgICAgIHB1YmxpYyBUeXBlQWxpYXNbXSBUeXBlcw0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlc0ZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy50eXBlc0ZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBzdHJpbmcgQ2FwdGlvbg0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXB0aW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNhcHRpb25GaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIFJlY2lwZUhvc3REYXRhIEhvc3REYXRhDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhvc3REYXRhRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmhvc3REYXRhRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBcnJheUl0ZW1BdHRyaWJ1dGUoIkFyZ3VtZW50IiwgSXNOdWxsYWJsZT1mYWxzZSldDQogICAgICAgIHB1YmxpYyBBcmd1bWVudFtdIEFyZ3VtZW50cw0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcmd1bWVudHNGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuYXJndW1lbnRzRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIFJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhIEdhdGhlcmluZ1NlcnZpY2VEYXRhDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdhdGhlcmluZ1NlcnZpY2VEYXRhRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmdhdGhlcmluZ1NlcnZpY2VEYXRhRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIFJlY2lwZUFjdGlvbnMgQWN0aW9ucw0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25zRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZShEYXRhVHlwZT0iTkNOYW1lIildDQogICAgICAgIHB1YmxpYyBzdHJpbmcgTmFtZQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5hbWVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSh0cnVlKV0NCiAgICAgICAgcHVibGljIGJvb2wgUmVjdXJyZW50DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY3VycmVudEZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5yZWN1cnJlbnRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSh0cnVlKV0NCiAgICAgICAgcHVibGljIGJvb2wgQm91bmQNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm91bmRGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuYm91bmRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBwdWJsaWMgcGFydGlhbCBjbGFzcyBSZWNpcGVIb3N0RGF0YQ0KICAgIHsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgSWNvbiBpY29uRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIENvbW1hbmRCYXJbXSBjb21tYW5kQmFyRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIFN5c3RlbS5YbWwuWG1sRWxlbWVudCBhbnlGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgaW50IHByaW9yaXR5RmllbGQ7DQogICAgICAgIA0KICAgICAgICBwdWJsaWMgUmVjaXBlSG9zdERhdGEoKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnByaW9yaXR5RmllbGQgPSAxNTM2Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgSWNvbiBJY29uDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmljb25GaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuaWNvbkZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRWxlbWVudEF0dHJpYnV0ZSgiQ29tbWFuZEJhciIpXQ0KICAgICAgICBwdWJsaWMgQ29tbWFuZEJhcltdIENvbW1hbmRCYXINCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZEJhckZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQmFyRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBbnlFbGVtZW50QXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBTeXN0ZW0uWG1sLlhtbEVsZW1lbnQgQW55DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFueUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5hbnlGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSgxNTM2KV0NCiAgICAgICAgcHVibGljIGludCBQcmlvcml0eQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5wcmlvcml0eUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLy8vIDxyZW1hcmtzLz4NCiAgICBbU3lzdGVtLkNvZGVEb20uQ29tcGlsZXIuR2VuZXJhdGVkQ29kZUF0dHJpYnV0ZSgiU3lzdGVtLlhtbCIsICIyLjAuNTA3MjcuNDIiKV0NCiAgICBbU3lzdGVtLlNlcmlhbGl6YWJsZUF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWdnZXJTdGVwVGhyb3VnaEF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduZXJDYXRlZ29yeUF0dHJpYnV0ZSgiY29kZSIpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sVHlwZUF0dHJpYnV0ZShBbm9ueW1vdXNUeXBlPXRydWUpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sUm9vdEF0dHJpYnV0ZShOYW1lc3BhY2U9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgSXNOdWxsYWJsZT1mYWxzZSldDQogICAgcHVibGljIHBhcnRpYWwgY2xhc3MgQ29tbWFuZEJhcg0KICAgIHsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgQ29tbWFuZEJhck5hbWUgbmFtZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBib29sIG5hbWVGaWVsZFNwZWNpZmllZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIG1lbnVGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIGd1aWRGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgaW50IGlkRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIGJvb2wgaWRGaWVsZFNwZWNpZmllZDsNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBDb21tYW5kQmFyTmFtZSBOYW1lDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sSWdub3JlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBib29sIE5hbWVTcGVjaWZpZWQNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZUZpZWxkU3BlY2lmaWVkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5uYW1lRmllbGRTcGVjaWZpZWQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBNZW51DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbnVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMubWVudUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgR3VpZA0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ndWlkRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmd1aWRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgaW50IElEDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlkRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlkRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxJZ25vcmVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIGJvb2wgSURTcGVjaWZpZWQNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWRGaWVsZFNwZWNpZmllZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuaWRGaWVsZFNwZWNpZmllZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoTmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpXQ0KICAgIHB1YmxpYyBlbnVtIENvbW1hbmRCYXJOYW1lDQogICAgew0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgU29sdXRpb24sDQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBQcm9qZWN0LA0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxFbnVtQXR0cmlidXRlKCJXZWIgUHJvamVjdCIpXQ0KICAgICAgICBXZWJQcm9qZWN0LA0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgSXRlbSwNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRW51bUF0dHJpYnV0ZSgiV2ViIEl0ZW0iKV0NCiAgICAgICAgV2ViSXRlbSwNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIEZvbGRlciwNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRW51bUF0dHJpYnV0ZSgiV2ViIEZvbGRlciIpXQ0KICAgICAgICBXZWJGb2xkZXIsDQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEVudW1BdHRyaWJ1dGUoIlNvbHV0aW9uIEZvbGRlciIpXQ0KICAgICAgICBTb2x1dGlvbkZvbGRlciwNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRW51bUF0dHJpYnV0ZSgiUHJvamVjdCBBZGQiKV0NCiAgICAgICAgUHJvamVjdEFkZCwNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRW51bUF0dHJpYnV0ZSgiU29sdXRpb24gQWRkIildDQogICAgICAgIFNvbHV0aW9uQWRkLA0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxFbnVtQXR0cmlidXRlKCJTb2x1dGlvbiBGb2xkZXIgQWRkIildDQogICAgICAgIFNvbHV0aW9uRm9sZGVyQWRkLA0KICAgIH0NCiAgICANCiAgICAvLy8gPHJlbWFya3MvPg0KICAgIFtTeXN0ZW0uQ29kZURvbS5Db21waWxlci5HZW5lcmF0ZWRDb2RlQXR0cmlidXRlKCJTeXN0ZW0uWG1sIiwgIjIuMC41MDcyNy40MiIpXQ0KICAgIFtTeXN0ZW0uU2VyaWFsaXphYmxlQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlclN0ZXBUaHJvdWdoQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ25lckNhdGVnb3J5QXR0cmlidXRlKCJjb2RlIildDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxUeXBlQXR0cmlidXRlKEFub255bW91c1R5cGU9dHJ1ZSldDQogICAgcHVibGljIHBhcnRpYWwgY2xhc3MgUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGENCiAgICB7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIFN5c3RlbS5YbWwuWG1sRWxlbWVudCBhbnlGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIHNlcnZpY2VUeXBlRmllbGQ7DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEFueUVsZW1lbnRBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIFN5c3RlbS5YbWwuWG1sRWxlbWVudCBBbnkNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW55RmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFueUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgU2VydmljZVR5cGUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZVR5cGVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZVR5cGVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBwdWJsaWMgcGFydGlhbCBjbGFzcyBSZWNpcGVBY3Rpb25zDQogICAgew0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBBY3Rpb25bXSBhY3Rpb25GaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgU3lzdGVtLlhtbC5YbWxFbGVtZW50IGFueUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgY29vcmRpbmF0b3JTZXJ2aWNlVHlwZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgZXhlY3V0aW9uU2VydmljZVR5cGVGaWVsZDsNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRWxlbWVudEF0dHJpYnV0ZSgiQWN0aW9uIildDQogICAgICAgIHB1YmxpYyBBY3Rpb25bXSBBY3Rpb24NCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbkZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQW55RWxlbWVudEF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgU3lzdGVtLlhtbC5YbWxFbGVtZW50IEFueQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbnlGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuYW55RmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBDb29yZGluYXRvclNlcnZpY2VUeXBlDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvb3JkaW5hdG9yU2VydmljZVR5cGVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0b3JTZXJ2aWNlVHlwZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgRXhlY3V0aW9uU2VydmljZVR5cGUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY3V0aW9uU2VydmljZVR5cGVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0aW9uU2VydmljZVR5cGVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFJvb3RBdHRyaWJ1dGUoTmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIEFjdGlvbg0KICAgIHsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgSW5wdXRbXSBpbnB1dEZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBPdXRwdXRbXSBvdXRwdXRGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgU3lzdGVtLlhtbC5YbWxFbGVtZW50IGFueUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgdHlwZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgbmFtZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdIGFueUF0dHJGaWVsZDsNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sRWxlbWVudEF0dHJpYnV0ZSgiSW5wdXQiKV0NCiAgICAgICAgcHVibGljIElucHV0W10gSW5wdXQNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEVsZW1lbnRBdHRyaWJ1dGUoIk91dHB1dCIpXQ0KICAgICAgICBwdWJsaWMgT3V0cHV0W10gT3V0cHV0DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dEZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEFueUVsZW1lbnRBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIFN5c3RlbS5YbWwuWG1sRWxlbWVudCBBbnkNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW55RmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFueUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgVHlwZQ0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnR5cGVGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5uYW1lRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBbnlBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIFN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gQW55QXR0cg0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbnlBdHRyRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFueUF0dHJGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vLyA8cmVtYXJrcy8+DQogICAgW1N5c3RlbS5Db2RlRG9tLkNvbXBpbGVyLkdlbmVyYXRlZENvZGVBdHRyaWJ1dGUoIlN5c3RlbS5YbWwiLCAiMi4wLjUwNzI3LjQyIildDQogICAgW1N5c3RlbS5TZXJpYWxpemFibGVBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnZ2VyU3RlcFRocm91Z2hBdHRyaWJ1dGUoKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnlBdHRyaWJ1dGUoImNvZGUiKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFR5cGVBdHRyaWJ1dGUoQW5vbnltb3VzVHlwZT10cnVlKV0NCiAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFJvb3RBdHRyaWJ1dGUoTmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIElucHV0DQogICAgew0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgbmFtZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgcmVjaXBlQXJndW1lbnRGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIGFjdGlvbk91dHB1dEZpZWxkOw0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgUmVjaXBlQXJndW1lbnQNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjaXBlQXJndW1lbnRGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMucmVjaXBlQXJndW1lbnRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIEFjdGlvbk91dHB1dA0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25PdXRwdXRGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uT3V0cHV0RmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLy8gPHJlbWFya3MvPg0KICAgIFtTeXN0ZW0uQ29kZURvbS5Db21waWxlci5HZW5lcmF0ZWRDb2RlQXR0cmlidXRlKCJTeXN0ZW0uWG1sIiwgIjIuMC41MDcyNy40MiIpXQ0KICAgIFtTeXN0ZW0uU2VyaWFsaXphYmxlQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlclN0ZXBUaHJvdWdoQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ25lckNhdGVnb3J5QXR0cmlidXRlKCJjb2RlIildDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxUeXBlQXR0cmlidXRlKEFub255bW91c1R5cGU9dHJ1ZSldDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxSb290QXR0cmlidXRlKE5hbWVzcGFjZT0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCBJc051bGxhYmxlPWZhbHNlKV0NCiAgICBwdWJsaWMgcGFydGlhbCBjbGFzcyBPdXRwdXQNCiAgICB7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBuYW1lRmllbGQ7DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5uYW1lRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLy8gPHJlbWFya3MvPg0KICAgIFtTeXN0ZW0uQ29kZURvbS5Db21waWxlci5HZW5lcmF0ZWRDb2RlQXR0cmlidXRlKCJTeXN0ZW0uWG1sIiwgIjIuMC41MDcyNy40MiIpXQ0KICAgIFtTeXN0ZW0uU2VyaWFsaXphYmxlQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlclN0ZXBUaHJvdWdoQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ25lckNhdGVnb3J5QXR0cmlidXRlKCJjb2RlIildDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxUeXBlQXR0cmlidXRlKEFub255bW91c1R5cGU9dHJ1ZSldDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxSb290QXR0cmlidXRlKE5hbWVzcGFjZT0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCBJc051bGxhYmxlPWZhbHNlKV0NCiAgICBwdWJsaWMgcGFydGlhbCBjbGFzcyBNZW51DQogICAgew0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBDb21tYW5kQmFyIGNvbW1hbmRCYXJGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIG5hbWVGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIHRleHRGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgaW50IHByaW9yaXR5RmllbGQ7DQogICAgICAgIA0KICAgICAgICBwdWJsaWMgTWVudSgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMucHJpb3JpdHlGaWVsZCA9IDE1MzY7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBDb21tYW5kQmFyIENvbW1hbmRCYXINCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZEJhckZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQmFyRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoRGF0YVR5cGU9Ik5DTmFtZSIpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5uYW1lRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBUZXh0DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHRGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMudGV4dEZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVmYXVsdFZhbHVlQXR0cmlidXRlKDE1MzYpXQ0KICAgICAgICBwdWJsaWMgaW50IFByaW9yaXR5DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5RmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnByaW9yaXR5RmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLy8gPHJlbWFya3MvPg0KICAgIFtTeXN0ZW0uQ29kZURvbS5Db21waWxlci5HZW5lcmF0ZWRDb2RlQXR0cmlidXRlKCJTeXN0ZW0uWG1sIiwgIjIuMC41MDcyNy40MiIpXQ0KICAgIFtTeXN0ZW0uU2VyaWFsaXphYmxlQXR0cmlidXRlKCldDQogICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxUeXBlQXR0cmlidXRlKE5hbWVzcGFjZT0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKV0NCiAgICBwdWJsaWMgZW51bSBUcmFjZUxldmVsDQogICAgew0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgRXJyb3IsDQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBJbmZvLA0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgT2ZmLA0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgV2FybmluZywNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFZlcmJvc2UsDQogICAgfQ0KfQ0KDQojcHJhZ21hIHdhcm5pbmcgcmVzdG9yZSAxNTkx</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>3</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/GuidancePackageConfig.Initializer.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjsNCnVzaW5nIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbjsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCg0KbmFtZXNwYWNlIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24NCnsNCgkvLy8gPHN1bW1hcnk+DQoJLy8vIFJvb3Qgb2YgdGhlIGNvbmZpZ3VyYXRpb24gaGllcmFyY2h5IGZvciBndWlkYW5jZSBwYWNrYWdlcy4NCgkvLy8gPC9zdW1tYXJ5Pg0KCXB1YmxpYyBwYXJ0aWFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZQ0KCXsNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gTmFtZSBvZiB0aGUgZW1iZWRkZWQgcmVzb3VyY2UgdGhhdCBjb250YWlucyB0aGUgc2NoZW1hIGZvciBjb25maWd1cmF0aW9uIHZhbGlkYXRpb24uDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBjb25zdCBzdHJpbmcgU2NoZW1hUmVzb3VyY2VOYW1lID0gIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlQ29uZmlnLnhzZCI7DQoNCgkJW05vblNlcmlhbGl6ZWRdDQoJCURpY3Rpb25hcnk8c3RyaW5nLCBSZWNpcGU+IGluZGV4ZWRSZWNpcGVzOw0KDQoJCXByaXZhdGUgRGljdGlvbmFyeTxzdHJpbmcsIFJlY2lwZT4gSW5kZXhlZFJlY2lwZXMNCgkJew0KCQkJZ2V0DQoJCQl7DQoJCQkJaWYgKGluZGV4ZWRSZWNpcGVzID09IG51bGwpDQoJCQkJew0KCQkJCQlpbmRleGVkUmVjaXBlcyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgUmVjaXBlPigpOw0KCQkJCQlpZiAocmVjaXBlc0ZpZWxkICE9IG51bGwpDQoJCQkJCXsNCgkJCQkJCWZvcmVhY2ggKFJlY2lwZSByZWNpcGUgaW4gcmVjaXBlc0ZpZWxkKQ0KCQkJCQkJew0KCQkJCQkJCWluZGV4ZWRSZWNpcGVzLkFkZChyZWNpcGUuTmFtZSwgcmVjaXBlKTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCg0KCQkJCXJldHVybiBpbmRleGVkUmVjaXBlczsNCgkJCX0NCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEFjY2Vzc2VzIGEgcmVjaXBlIGNvbmZpZ3VyYXRpb24gZWxlbWVudCBieSBuYW1lLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InJlY2lwZU5hbWUiPk5hbWUgb2YgdGhlIHJlY2lwZSB0byByZXRyaWV2ZSBjb25maWd1cmF0aW9uIGZvci48L3BhcmFtPg0KCQkvLy8gPGV4Y2VwdGlvbiBjcmVmPSJLZXlOb3RGb3VuZEV4Y2VwdGlvbiI+VGhlIG5hbWUgb2YgdGhlIHJlY2lwZSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY29uZmlndXJhdGlvbiBmaWxlLjwvZXhjZXB0aW9uPg0KCQlwdWJsaWMgUmVjaXBlIHRoaXNbc3RyaW5nIHJlY2lwZU5hbWVdDQoJCXsNCgkJCWdldA0KCQkJew0KCQkJCWlmICghSW5kZXhlZFJlY2lwZXMuQ29udGFpbnNLZXkocmVjaXBlTmFtZSkpDQoJCQkJew0KCQkJCQl0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJCUN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuUmVjaXBlX1VuZGVmaW5lZCwNCgkJCQkJCXJlY2lwZU5hbWUsIHRoaXMuR3VpZCkpOw0KCQkJCX0NCgkJCQlyZXR1cm4gSW5kZXhlZFJlY2lwZXNbcmVjaXBlTmFtZV07DQoJCQl9DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBXaGV0aGVyIHRoZSBwYWNrYWdlIGNvbnRhaW5zIHRoZSBnaXZlbiByZWNpcGUuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBib29sIENvbnRhaW5zKHN0cmluZyByZWNpcGVOYW1lKQ0KCQl7DQoJCQlyZXR1cm4gSW5kZXhlZFJlY2lwZXMuQ29udGFpbnNLZXkocmVjaXBlTmFtZSk7DQoJCX0NCgl9DQoNCgkvLy8gPHJlbWFya3MvPg0KCXB1YmxpYyBwYXJ0aWFsIGNsYXNzIFJlY2lwZQ0KCXsNCgkJW05vblNlcmlhbGl6ZWRdDQoJCURpY3Rpb25hcnk8c3RyaW5nLCBBcmd1bWVudD4gaW5kZXhlZEFyZ3VtZW50czsNCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIHRoZSBhcmd1bWVudHMgaW5kZXhlZCBieSBuYW1lLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlbWG1sSWdub3JlXQ0KCQlwdWJsaWMgRGljdGlvbmFyeTxzdHJpbmcsIEFyZ3VtZW50PiBBcmd1bWVudHNCeU5hbWUNCgkJew0KCQkJZ2V0DQoJCQl7DQoJCQkJaWYgKGluZGV4ZWRBcmd1bWVudHMgPT0gbnVsbCkNCgkJCQl7DQoJCQkJCWluZGV4ZWRBcmd1bWVudHMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIEFyZ3VtZW50PigpOw0KCQkJCQlpZiAoYXJndW1lbnRzRmllbGQgIT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJZm9yZWFjaCAoQXJndW1lbnQgYXJnIGluIGFyZ3VtZW50c0ZpZWxkKQ0KCQkJCQkJew0KCQkJCQkJCWluZGV4ZWRBcmd1bWVudHMuQWRkKGFyZy5OYW1lLCBhcmcpOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJfQ0KDQoJCQkJcmV0dXJuIGluZGV4ZWRBcmd1bWVudHM7DQoJCQl9DQoJCX0NCg0KCQlbTm9uU2VyaWFsaXplZF0NCgkJSGFzaHRhYmxlIGluZGV4ZWRBbGlhc2VzOw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEdldHMgdGhlIHR5cGUgYWxpYXNlcyBpbmRleGVkIGJ5IG5hbWUuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCVtYbWxJZ25vcmVdDQoJCXB1YmxpYyBJRGljdGlvbmFyeSBUeXBlQWxpYXNlc0J5TmFtZQ0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlpZiAoaW5kZXhlZEFsaWFzZXMgPT0gbnVsbCkNCgkJCQl7DQoJCQkJCWluZGV4ZWRBbGlhc2VzID0gbmV3IEhhc2h0YWJsZSgpOw0KCQkJCQlpZiAodHlwZXNGaWVsZCAhPSBudWxsKQ0KCQkJCQl7DQoJCQkJCQlmb3JlYWNoIChUeXBlQWxpYXMgYWxpYXMgaW4gdHlwZXNGaWVsZCkNCgkJCQkJCXsNCgkJCQkJCQlpbmRleGVkQWxpYXNlcy5BZGQoYWxpYXMuTmFtZSwgYWxpYXMuVHlwZSk7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoNCgkJCQlyZXR1cm4gaW5kZXhlZEFsaWFzZXM7DQoJCQl9DQoJCX0NCgl9DQoNCgkvLy8gPHJlbWFya3MvPg0KCXB1YmxpYyBwYXJ0aWFsIGNsYXNzIFJlY2lwZUFjdGlvbnMNCgl7DQoJCVtOb25TZXJpYWxpemVkXQ0KCQlEaWN0aW9uYXJ5PHN0cmluZywgQWN0aW9uPiBpbmRleGVkQWN0aW9uczsNCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwdWJsaWMgUmVjaXBlQWN0aW9ucygpDQoJCXsNCgkJCWFjdGlvbkZpZWxkID0gbmV3IEFjdGlvblswXTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFJldHJpZXZlcyBhbGwgdGhlIGFjdGlvbnMgaW5kZXhlZCBieSB0aGVpciBuYW1lLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgRGljdGlvbmFyeTxzdHJpbmcsIEFjdGlvbj4gR2V0SW5kZXhlZEFjdGlvbnMoKQ0KCQl7DQoJCQlpZiAoaW5kZXhlZEFjdGlvbnMgPT0gbnVsbCkNCgkJCXsNCgkJCQlpbmRleGVkQWN0aW9ucyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgQWN0aW9uPigpOw0KCQkJCWlmIChhY3Rpb25GaWVsZCAhPSBudWxsKQ0KCQkJCXsNCgkJCQkJZm9yZWFjaCAoQWN0aW9uIGFjdGlvbiBpbiBhY3Rpb25GaWVsZCkNCgkJCQkJew0KCQkJCQkJaW5kZXhlZEFjdGlvbnMuQWRkKGFjdGlvbi5OYW1lLCBhY3Rpb24pOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KDQoJCQlyZXR1cm4gaW5kZXhlZEFjdGlvbnM7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBSZXRyaWV2ZXMgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBhY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gbmFtZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIEFjdGlvbiB0aGlzW3N0cmluZyBhY3Rpb25OYW1lXQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gR2V0SW5kZXhlZEFjdGlvbnMoKVthY3Rpb25OYW1lXTsgfQ0KCQl9DQoJfQ0KfQ0K</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>4</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/GuidancePackageConfig.Serialization.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">I3JlZ2lvbiBPcmlnaW5hbCBYbWxTZXJpYWxpemVyIGNvZGUNCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiNpZiBfRFlOQU1JQ19YTUxTRVJJQUxJWkVSX0NPTVBJTEFUSU9ODQpbYXNzZW1ibHk6U3lzdGVtLlNlY3VyaXR5LkFsbG93UGFydGlhbGx5VHJ1c3RlZENhbGxlcnMoKV0NClthc3NlbWJseTpTeXN0ZW0uU2VjdXJpdHkuU2VjdXJpdHlUcmFuc3BhcmVudCgpXQ0KI2VuZGlmDQpbYXNzZW1ibHk6U3lzdGVtLlJlZmxlY3Rpb24uQXNzZW1ibHlWZXJzaW9uQXR0cmlidXRlKCIxLjAuNTA1MDUuMCIpXQ0KbmFtZXNwYWNlIE1pY3Jvc29mdC5YbWwuU2VyaWFsaXphdGlvbi5HZW5lcmF0ZWRBc3NlbWJseSB7DQoNCiAgICBwdWJsaWMgY2xhc3MgWG1sU2VyaWFsaXphdGlvbldyaXRlckd1aWRhbmNlUGFja2FnZSA6IFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIHsNCg0KICAgICAgICBwdWJsaWMgdm9pZCBXcml0ZTIxX0d1aWRhbmNlUGFja2FnZShvYmplY3Qgbykgew0KICAgICAgICAgICAgV3JpdGVTdGFydERvY3VtZW50KCk7DQogICAgICAgICAgICBpZiAobyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgV3JpdGVFbXB0eVRhZyhAIkd1aWRhbmNlUGFja2FnZSIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBUb3BMZXZlbEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFdyaXRlMjBfR3VpZGFuY2VQYWNrYWdlKEAiR3VpZGFuY2VQYWNrYWdlIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSlvKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUyMF9HdWlkYW5jZVBhY2thZ2Uoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJDYXB0aW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBDYXB0aW9uKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkRlc2NyaXB0aW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBEZXNjcmlwdGlvbikpOw0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQFZlcnNpb24pICE9IEAiMS4wIikgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiVmVyc2lvbiIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVmVyc2lvbikpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJHdWlkIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBHdWlkKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlNjaGVtYVZlcnNpb24iLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQFNjaGVtYVZlcnNpb24pKTsNCiAgICAgICAgICAgIGlmICgoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBIb3N0KSAhPSBAIlZpc3VhbFN0dWRpbyIpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkhvc3QiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEhvc3QpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiQmluZGluZ1JlY2lwZSIsIEAiIiwgRnJvbVhtbE5DTmFtZSgoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBCaW5kaW5nUmVjaXBlKSkpOw0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwpby5AVHJhY2VMZXZlbCkgIT0gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwuQEVycm9yKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUcmFjZUxldmVsIiwgQCIiLCBXcml0ZTE5X1RyYWNlTGV2ZWwoKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbClvLkBUcmFjZUxldmVsKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpby5AU29ydFByaW9yaXR5KSAhPSAxMDApIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlNvcnRQcmlvcml0eSIsIEAiIiwgU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvU3RyaW5nKChnbG9iYWw6OlN5c3RlbS5JbnQzMikoKGdsb2JhbDo6U3lzdGVtLkludDMyKW8uQFNvcnRQcmlvcml0eSkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlNl9HdWlkYW5jZVBhY2thZ2VIb3N0RGF0YShAIkhvc3REYXRhIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZUhvc3REYXRhKW8uQEhvc3REYXRhKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlW10gYSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlW10pKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlW10pby5AUmVjaXBlcyk7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCl7DQogICAgICAgICAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KEAiUmVjaXBlcyIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCBudWxsLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUxOF9SZWNpcGUoQCJSZWNpcGUiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlKWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlMThfUmVjaXBlKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGUgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsIEZyb21YbWxOQ05hbWUoKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpKTsNCiAgICAgICAgICAgIGlmICgoKGdsb2JhbDo6U3lzdGVtLkJvb2xlYW4pby5AUmVjdXJyZW50KSAhPSB0cnVlKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJSZWN1cnJlbnQiLCBAIiIsIFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub1N0cmluZygoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbikoKGdsb2JhbDo6U3lzdGVtLkJvb2xlYW4pby5AUmVjdXJyZW50KSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbilvLkBCb3VuZCkgIT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiQm91bmQiLCBAIiIsIFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub1N0cmluZygoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbikoKGdsb2JhbDo6U3lzdGVtLkJvb2xlYW4pby5AQm91bmQpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhc1tdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhc1tdKSgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhc1tdKW8uQFR5cGVzKTsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQoQCJUeXBlcyIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCBudWxsLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGU3X1R5cGVBbGlhcyhAIlR5cGVBbGlhcyIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXMpYVtpYV0pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRWxlbWVudFN0cmluZyhAIkNhcHRpb24iLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AQ2FwdGlvbikpOw0KICAgICAgICAgICAgV3JpdGVFbGVtZW50U3RyaW5nKEAiRGVzY3JpcHRpb24iLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ARGVzY3JpcHRpb24pKTsNCiAgICAgICAgICAgIFdyaXRlOF9SZWNpcGVIb3N0RGF0YShAIkhvc3REYXRhIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhKW8uQEhvc3REYXRhKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnRbXSBhID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudFtdKSgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50W10pby5AQXJndW1lbnRzKTsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQoQCJBcmd1bWVudHMiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgbnVsbCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpYSA9IDA7IGlhIDwgYS5MZW5ndGg7IGlhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlMTJfQXJndW1lbnQoQCJBcmd1bWVudCIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudClhW2lhXSksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGUxM19SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YShAIkdhdGhlcmluZ1NlcnZpY2VEYXRhIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKW8uQEdhdGhlcmluZ1NlcnZpY2VEYXRhKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgIFdyaXRlMTdfUmVjaXBlQWN0aW9ucyhAIkFjdGlvbnMiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlQWN0aW9ucylvLkBBY3Rpb25zKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUxN19SZWNpcGVBY3Rpb25zKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVBY3Rpb25zIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVBY3Rpb25zKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiQ29vcmRpbmF0b3JTZXJ2aWNlVHlwZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AQ29vcmRpbmF0b3JTZXJ2aWNlVHlwZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJFeGVjdXRpb25TZXJ2aWNlVHlwZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ARXhlY3V0aW9uU2VydmljZVR5cGUpKTsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uW10gYSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uW10pby5AQWN0aW9uOw0KICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaWEgPSAwOyBpYSA8IGEuTGVuZ3RoOyBpYSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZTE2X0FjdGlvbihAIkFjdGlvbiIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24pYVtpYV0pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKChvLkBBbnkpIGlzIFN5c3RlbS5YbWwuWG1sTm9kZSB8fCBvLkBBbnkgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIFdyaXRlRWxlbWVudExpdGVyYWwoKFN5c3RlbS5YbWwuWG1sTm9kZSlvLkBBbnksIEAiIiwgbnVsbCwgZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlSW52YWxpZEFueVR5cGVFeGNlcHRpb24oby5AQW55KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUxNl9BY3Rpb24oc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbiBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiVHlwZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVHlwZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJOYW1lIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSk7DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdIGEgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKW8uQEFueUF0dHI7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGEuTGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUgYWkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSlhW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGVYbWxBdHRyaWJ1dGUoYWksIG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dFtdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0W10pby5ASW5wdXQ7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpYSA9IDA7IGlhIDwgYS5MZW5ndGg7IGlhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlMTRfSW5wdXQoQCJJbnB1dCIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dClhW2lhXSksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dFtdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dFtdKW8uQE91dHB1dDsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUxNV9PdXRwdXQoQCJPdXRwdXQiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0KWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgoby5AQW55KSBpcyBTeXN0ZW0uWG1sLlhtbE5vZGUgfHwgby5AQW55ID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUVsZW1lbnRMaXRlcmFsKChTeXN0ZW0uWG1sLlhtbE5vZGUpby5AQW55LCBAIiIsIG51bGwsIGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZUludmFsaWRBbnlUeXBlRXhjZXB0aW9uKG8uQEFueSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlMTVfT3V0cHV0KHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQE5hbWUpKTsNCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUxNF9JbnB1dChzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXQgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0KSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJSZWNpcGVBcmd1bWVudCIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AUmVjaXBlQXJndW1lbnQpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiQWN0aW9uT3V0cHV0IiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBBY3Rpb25PdXRwdXQpKTsNCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUxM19SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YShzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGEgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiU2VydmljZVR5cGUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQFNlcnZpY2VUeXBlKSk7DQogICAgICAgICAgICBpZiAoKG8uQEFueSkgaXMgU3lzdGVtLlhtbC5YbWxOb2RlIHx8IG8uQEFueSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgV3JpdGVFbGVtZW50TGl0ZXJhbCgoU3lzdGVtLlhtbC5YbWxOb2RlKW8uQEFueSwgQCIiLCBudWxsLCBmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVJbnZhbGlkQW55VHlwZUV4Y2VwdGlvbihvLkBBbnkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTEyX0FyZ3VtZW50KHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudCBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnQpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJOYW1lIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSk7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVHlwZSkgIT0gQCJTeXN0ZW0uU3RyaW5nIikgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiVHlwZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVHlwZSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbilvLkBSZXF1aXJlZCkgIT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiUmVxdWlyZWQiLCBAIiIsIFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub1N0cmluZygoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbikoKGdsb2JhbDo6U3lzdGVtLkJvb2xlYW4pby5AUmVxdWlyZWQpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZTlfQ29udmVydGVyKEAiQ29udmVydGVyIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbnZlcnRlcilvLkBDb252ZXJ0ZXIpLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgV3JpdGUxMV9WYWx1ZVByb3ZpZGVyKEAiVmFsdWVQcm92aWRlciIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5WYWx1ZVByb3ZpZGVyKW8uQFZhbHVlUHJvdmlkZXIpLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTExX1ZhbHVlUHJvdmlkZXIoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlZhbHVlUHJvdmlkZXIgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlZhbHVlUHJvdmlkZXIpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUeXBlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUeXBlKSk7DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdIGEgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKW8uQEFueUF0dHI7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGEuTGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUgYWkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSlhW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGVYbWxBdHRyaWJ1dGUoYWksIG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnRbXSBhID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnRbXSlvLkBNb25pdG9yQXJndW1lbnQ7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpYSA9IDA7IGlhIDwgYS5MZW5ndGg7IGlhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlMTBfTW9uaXRvckFyZ3VtZW50KEAiTW9uaXRvckFyZ3VtZW50IiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudClhW2lhXSksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlMTBfTW9uaXRvckFyZ3VtZW50KHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudCkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQE5hbWUpKTsNCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGU5X0NvbnZlcnRlcihzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29udmVydGVyIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db252ZXJ0ZXIpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUeXBlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUeXBlKSk7DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdIGEgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKW8uQEFueUF0dHI7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGEuTGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUgYWkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSlhW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGVYbWxBdHRyaWJ1dGUoYWksIG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZThfUmVjaXBlSG9zdERhdGEoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVIb3N0RGF0YSkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5JbnQzMilvLkBQcmlvcml0eSkgIT0gMTUzNikgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiUHJpb3JpdHkiLCBAIiIsIFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub1N0cmluZygoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpKChnbG9iYWw6OlN5c3RlbS5JbnQzMilvLkBQcmlvcml0eSkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlMl9JY29uKEAiSWNvbiIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JY29uKW8uQEljb24pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyW10gYSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhcltdKW8uQENvbW1hbmRCYXI7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpYSA9IDA7IGlhIDwgYS5MZW5ndGg7IGlhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlNF9Db21tYW5kQmFyKEAiQ29tbWFuZEJhciIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyKWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgoby5AQW55KSBpcyBTeXN0ZW0uWG1sLlhtbE5vZGUgfHwgby5AQW55ID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUVsZW1lbnRMaXRlcmFsKChTeXN0ZW0uWG1sLlhtbE5vZGUpby5AQW55LCBAIiIsIG51bGwsIGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZUludmFsaWRBbnlUeXBlRXhjZXB0aW9uKG8uQEFueSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlNF9Db21tYW5kQmFyKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIGlmIChvLkBOYW1lU3BlY2lmaWVkKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJOYW1lIiwgQCIiLCBXcml0ZTNfQ29tbWFuZEJhck5hbWUoKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUpby5ATmFtZSkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTWVudSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATWVudSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJHdWlkIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBHdWlkKSk7DQogICAgICAgICAgICBpZiAoby5ASURTcGVjaWZpZWQpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIklEIiwgQCIiLCBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9TdHJpbmcoKGdsb2JhbDo6U3lzdGVtLkludDMyKSgoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpby5ASUQpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoby5ATmFtZVNwZWNpZmllZCkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG8uQElEU3BlY2lmaWVkKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgV3JpdGUzX0NvbW1hbmRCYXJOYW1lKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZSB2KSB7DQogICAgICAgICAgICBzdHJpbmcgcyA9IG51bGw7DQogICAgICAgICAgICBzd2l0Y2ggKHYpIHsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AU29sdXRpb246IHMgPSBAIlNvbHV0aW9uIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFByb2plY3Q6IHMgPSBAIlByb2plY3QiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AV2ViUHJvamVjdDogcyA9IEAiV2ViIFByb2plY3QiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5ASXRlbTogcyA9IEAiSXRlbSI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBXZWJJdGVtOiBzID0gQCJXZWIgSXRlbSI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBGb2xkZXI6IHMgPSBAIkZvbGRlciI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBXZWJGb2xkZXI6IHMgPSBAIldlYiBGb2xkZXIiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AU29sdXRpb25Gb2xkZXI6IHMgPSBAIlNvbHV0aW9uIEZvbGRlciI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBQcm9qZWN0QWRkOiBzID0gQCJQcm9qZWN0IEFkZCI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBTb2x1dGlvbkFkZDogcyA9IEAiU29sdXRpb24gQWRkIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFNvbHV0aW9uRm9sZGVyQWRkOiBzID0gQCJTb2x1dGlvbiBGb2xkZXIgQWRkIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgQ3JlYXRlSW52YWxpZEVudW1WYWx1ZUV4Y2VwdGlvbigoKFN5c3RlbS5JbnQ2NCl2KS5Ub1N0cmluZyhTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlKSwgQCJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gczsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUyX0ljb24oc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkljb24gbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkljb24pKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJHdWlkIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBHdWlkKSk7DQogICAgICAgICAgICBpZiAoby5ASURTcGVjaWZpZWQpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIklEIiwgQCIiLCBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9TdHJpbmcoKGdsb2JhbDo6U3lzdGVtLkludDMyKSgoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpby5ASUQpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkZpbGUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEZpbGUpKTsNCiAgICAgICAgICAgIGlmIChvLkBJRFNwZWNpZmllZCkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTdfVHlwZUFsaWFzKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXMgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhcykpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQE5hbWUpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiVHlwZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVHlwZSkpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTZfR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZUhvc3REYXRhIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2VIb3N0RGF0YSkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZTJfSWNvbihAIkljb24iLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSWNvbilvLkBJY29uKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudVtdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnVbXSlvLkBNZW51Ow0KICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaWEgPSAwOyBpYSA8IGEuTGVuZ3RoOyBpYSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZTVfTWVudShAIk1lbnUiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSlhW2lhXSksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoKG8uQEFueSkgaXMgU3lzdGVtLlhtbC5YbWxOb2RlIHx8IG8uQEFueSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgV3JpdGVFbGVtZW50TGl0ZXJhbCgoU3lzdGVtLlhtbC5YbWxOb2RlKW8uQEFueSwgQCIiLCBudWxsLCBmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVJbnZhbGlkQW55VHlwZUV4Y2VwdGlvbihvLkBBbnkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTVfTWVudShzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsIEZyb21YbWxOQ05hbWUoKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiVGV4dCIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVGV4dCkpOw0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpby5AUHJpb3JpdHkpICE9IDE1MzYpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlByaW9yaXR5IiwgQCIiLCBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9TdHJpbmcoKGdsb2JhbDo6U3lzdGVtLkludDMyKSgoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpby5AUHJpb3JpdHkpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZTRfQ29tbWFuZEJhcihAIkNvbW1hbmRCYXIiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhcilvLkBDb21tYW5kQmFyKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBXcml0ZTE5X1RyYWNlTGV2ZWwoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwgdikgew0KICAgICAgICAgICAgc3RyaW5nIHMgPSBudWxsOw0KICAgICAgICAgICAgc3dpdGNoICh2KSB7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5ARXJyb3I6IHMgPSBAIkVycm9yIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5ASW5mbzogcyA9IEAiSW5mbyI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwuQE9mZjogcyA9IEAiT2ZmIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5AV2FybmluZzogcyA9IEAiV2FybmluZyI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwuQFZlcmJvc2U6IHMgPSBAIlZlcmJvc2UiOyBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBDcmVhdGVJbnZhbGlkRW51bVZhbHVlRXhjZXB0aW9uKCgoU3lzdGVtLkludDY0KXYpLlRvU3RyaW5nKFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1cmUpLCBAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbCIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHM7DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0Q2FsbGJhY2tzKCkgew0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIGNsYXNzIFhtbFNlcmlhbGl6YXRpb25SZWFkZXJHdWlkYW5jZVBhY2thZ2UgOiBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciB7DQoNCiAgICAgICAgcHVibGljIG9iamVjdCBSZWFkMjFfR3VpZGFuY2VQYWNrYWdlKCkgew0KICAgICAgICAgICAgb2JqZWN0IG8gPSBudWxsOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxX0d1aWRhbmNlUGFja2FnZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8gPSBSZWFkMjBfR3VpZGFuY2VQYWNrYWdlKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25Ob2RlRXhjZXB0aW9uKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpHdWlkYW5jZVBhY2thZ2UiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAob2JqZWN0KW87DQogICAgICAgIH0NCg0KICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIFJlYWQyMF9HdWlkYW5jZVBhY2thZ2UoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSgpOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZVtdIGFfMSA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMSA9IDA7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzEyXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzJdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0X05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDVfQ2FwdGlvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQENhcHRpb24gPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs0XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNl9EZXNjcmlwdGlvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQERlc2NyaXB0aW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzRdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDdfVmVyc2lvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFZlcnNpb24gPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs2XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkOF9HdWlkICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AR3VpZCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs2XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzddICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ5X1NjaGVtYVZlcnNpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBTY2hlbWFWZXJzaW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzddID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbOF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEwX0hvc3QgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBIb3N0ID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzhdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbOV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDExX0JpbmRpbmdSZWNpcGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBCaW5kaW5nUmVjaXBlID0gVG9YbWxOQ05hbWUoUmVhZGVyLlZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs5XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzEwXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTJfVHJhY2VMZXZlbCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFRyYWNlTGV2ZWwgPSBSZWFkMTlfVHJhY2VMZXZlbChSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzEwXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzExXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTNfU29ydFByaW9yaXR5ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AU29ydFByaW9yaXR5ID0gU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvSW50MzIoUmVhZGVyLlZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsxMV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lLCA6Q2FwdGlvbiwgOkRlc2NyaXB0aW9uLCA6VmVyc2lvbiwgOkd1aWQsIDpTY2hlbWFWZXJzaW9uLCA6SG9zdCwgOkJpbmRpbmdSZWNpcGUsIDpUcmFjZUxldmVsLCA6U29ydFByaW9yaXR5Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMCA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQwID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNF9Ib3N0RGF0YSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBIb3N0RGF0YSA9IFJlYWQ2X0d1aWRhbmNlUGFja2FnZUhvc3REYXRhKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNV9SZWNpcGVzICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUmVhZE51bGwoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVbXSBhXzFfMCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNhXzFfMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCByZWFkZXJDb3VudDEgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE2X1JlY2lwZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFfMV8wID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVbXSlFbnN1cmVBcnJheUluZGV4KGFfMV8wLCBjYV8xXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlKSk7YV8xXzBbY2FfMV8wKytdID0gUmVhZDE4X1JlY2lwZShmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlJlY2lwZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6UmVjaXBlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMSwgcmVmIHJlYWRlckNvdW50MSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBSZWNpcGVzID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVbXSlTaHJpbmtBcnJheShhXzFfMCwgY2FfMV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSksIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpIb3N0RGF0YSwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6UmVjaXBlcyIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6SG9zdERhdGEsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlJlY2lwZXMiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMwLCByZWYgcmVhZGVyQ291bnQwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGUgUmVhZDE4X1JlY2lwZShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlKCk7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzW10gYV8wID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV8wID0gMDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudFtdIGFfNCA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfNCA9IDA7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzEwXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzddICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0X05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gVG9YbWxOQ05hbWUoUmVhZGVyLlZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs3XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzhdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxN19SZWN1cnJlbnQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBSZWN1cnJlbnQgPSBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9Cb29sZWFuKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbOF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs5XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMThfQm91bmQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBCb3VuZCA9IFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub0Jvb2xlYW4oUmVhZGVyLlZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs5XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOk5hbWUsIDpSZWN1cnJlbnQsIDpCb3VuZCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczIgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MiA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTlfVHlwZXMgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFSZWFkTnVsbCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhc1tdIGFfMF8wID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgY2FfMF8wID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMzID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MyA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMjBfVHlwZUFsaWFzICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYV8wXzAgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhc1tdKUVuc3VyZUFycmF5SW5kZXgoYV8wXzAsIGNhXzBfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXMpKTthXzBfMFtjYV8wXzArK10gPSBSZWFkN19UeXBlQWxpYXMoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpUeXBlQWxpYXMiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlR5cGVBbGlhcyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczMsIHJlZiByZWFkZXJDb3VudDMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5AVHlwZXMgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhc1tdKVNocmlua0FycmF5KGFfMF8wLCBjYV8wXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzKSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzFdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ1X0NhcHRpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uQENhcHRpb24gPSBSZWFkZXIuUmVhZEVsZW1lbnRTdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzJdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ2X0Rlc2NyaXB0aW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBEZXNjcmlwdGlvbiA9IFJlYWRlci5SZWFkRWxlbWVudFN0cmluZygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE0X0hvc3REYXRhICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8uQEhvc3REYXRhID0gUmVhZDhfUmVjaXBlSG9zdERhdGEoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFszXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDIxX0FyZ3VtZW50cyAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVJlYWROdWxsKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnRbXSBhXzRfMCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNhXzRfMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zNCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCByZWFkZXJDb3VudDQgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDIyX0FyZ3VtZW50ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYV80XzAgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50W10pRW5zdXJlQXJyYXlJbmRleChhXzRfMCwgY2FfNF8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50KSk7YV80XzBbY2FfNF8wKytdID0gUmVhZDEyX0FyZ3VtZW50KGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6QXJndW1lbnQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkFyZ3VtZW50Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zNCwgcmVmIHJlYWRlckNvdW50NCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBBcmd1bWVudHMgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50W10pU2hyaW5rQXJyYXkoYV80XzAsIGNhXzRfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudCksIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs1XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMjNfR2F0aGVyaW5nU2VydmljZURhdGEgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5AR2F0aGVyaW5nU2VydmljZURhdGEgPSBSZWFkMTNfUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGEoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs1XSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI0X0FjdGlvbnMgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5AQWN0aW9ucyA9IFJlYWQxN19SZWNpcGVBY3Rpb25zKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlR5cGVzLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpDYXB0aW9uLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpEZXNjcmlwdGlvbiwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6SG9zdERhdGEsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkFyZ3VtZW50cywgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6R2F0aGVyaW5nU2VydmljZURhdGEsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkFjdGlvbnMiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlR5cGVzLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpDYXB0aW9uLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpEZXNjcmlwdGlvbiwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6SG9zdERhdGEsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkFyZ3VtZW50cywgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6R2F0aGVyaW5nU2VydmljZURhdGEsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkFjdGlvbnMiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMyLCByZWYgcmVhZGVyQ291bnQyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVBY3Rpb25zIFJlYWQxN19SZWNpcGVBY3Rpb25zKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSB4c2lUeXBlID0gY2hlY2tUeXBlID8gR2V0WHNpVHlwZSgpIDogbnVsbDsNCiAgICAgICAgICAgIGJvb2wgaXNOdWxsID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgaXNOdWxsID0gUmVhZE51bGwoKTsNCiAgICAgICAgICAgIGlmIChjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIGlmICh4c2lUeXBlID09IG51bGwgfHwgKChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWUgPT0gKG9iamVjdClpZDNfSXRlbSAmJiAob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lc3BhY2UgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbigoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzTnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlQWN0aW9ucyBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlQWN0aW9ucygpOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbltdIGFfMCA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMCA9IDA7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzRdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI1X0Nvb3JkaW5hdG9yU2VydmljZVR5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBDb29yZGluYXRvclNlcnZpY2VUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI2X0V4ZWN1dGlvblNlcnZpY2VUeXBlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ARXhlY3V0aW9uU2VydmljZVR5cGUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpDb29yZGluYXRvclNlcnZpY2VUeXBlLCA6RXhlY3V0aW9uU2VydmljZVR5cGUiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgby5AQWN0aW9uID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb25bXSlTaHJpbmtBcnJheShhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uKSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnM1ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDUgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI3X0FjdGlvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhXzAgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbltdKUVuc3VyZUFycmF5SW5kZXgoYV8wLCBjYV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbikpO2FfMFtjYV8wKytdID0gUmVhZDE2X0FjdGlvbihmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBBbnkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEVsZW1lbnQpUmVhZFhtbE5vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6QWN0aW9uIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zNSwgcmVmIHJlYWRlckNvdW50NSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvLkBBY3Rpb24gPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbltdKVNocmlua0FycmF5KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24pLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24gUmVhZDE2X0FjdGlvbihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbiBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uKCk7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXRbXSBhXzAgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzAgPSAwOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dFtdIGFfMSA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMSA9IDA7DQogICAgICAgICAgICBnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gYV81ID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV81ID0gMDsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbNl07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFszXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMjhfVHlwZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFR5cGUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs0XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs0XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSBhdHRyID0gKFN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSBEb2N1bWVudC5SZWFkTm9kZShSZWFkZXIpOw0KICAgICAgICAgICAgICAgICAgICBQYXJzZVdzZGxBcnJheVR5cGUoYXR0cik7DQogICAgICAgICAgICAgICAgICAgIGFfNSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pRW5zdXJlQXJyYXlJbmRleChhXzUsIGNhXzUsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSk7YV81W2NhXzUrK10gPSBhdHRyOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG8uQElucHV0ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dFtdKVNocmlua0FycmF5KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCksIHRydWUpOw0KICAgICAgICAgICAgby5AT3V0cHV0ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXRbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0KSwgdHJ1ZSk7DQogICAgICAgICAgICBvLkBBbnlBdHRyID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlTaHJpbmtBcnJheShhXzUsIGNhXzUsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSwgdHJ1ZSk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgby5ASW5wdXQgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0W10pU2hyaW5rQXJyYXkoYV8wLCBjYV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0KSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgby5AT3V0cHV0ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXRbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0KSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgby5AQW55QXR0ciA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pU2hyaW5rQXJyYXkoYV81LCBjYV81LCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSksIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zNiA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQ2ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyOV9JbnB1dCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhXzAgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0W10pRW5zdXJlQXJyYXlJbmRleChhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXQpKTthXzBbY2FfMCsrXSA9IFJlYWQxNF9JbnB1dChmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDMwX091dHB1dCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhXzEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dFtdKUVuc3VyZUFycmF5SW5kZXgoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCkpO2FfMVtjYV8xKytdID0gUmVhZDE1X091dHB1dChmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBBbnkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEVsZW1lbnQpUmVhZFhtbE5vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6SW5wdXQsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOk91dHB1dCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczYsIHJlZiByZWFkZXJDb3VudDYpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgby5ASW5wdXQgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0W10pU2hyaW5rQXJyYXkoYV8wLCBjYV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0KSwgdHJ1ZSk7DQogICAgICAgICAgICBvLkBPdXRwdXQgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dFtdKVNocmlua0FycmF5KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQpLCB0cnVlKTsNCiAgICAgICAgICAgIG8uQEFueUF0dHIgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKVNocmlua0FycmF5KGFfNSwgY2FfNSwgdHlwZW9mKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQgUmVhZDE1X091dHB1dChib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0KCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzFdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDRfTmFtZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zNyA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQ3ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczcsIHJlZiByZWFkZXJDb3VudDcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0IFJlYWQxNF9JbnB1dChib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0IG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCgpOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFszXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0X05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDMxX1JlY2lwZUFyZ3VtZW50ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AUmVjaXBlQXJndW1lbnQgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsyXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMzJfQWN0aW9uT3V0cHV0ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AQWN0aW9uT3V0cHV0ID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSwgOlJlY2lwZUFyZ3VtZW50LCA6QWN0aW9uT3V0cHV0Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zOCA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQ4ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczgsIHJlZiByZWFkZXJDb3VudDgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhIFJlYWQxM19SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhIG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YSgpOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFsyXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzFdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQzM19TZXJ2aWNlVHlwZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFNlcnZpY2VUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6U2VydmljZVR5cGUiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnM5ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDkgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBvLkBBbnkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEVsZW1lbnQpUmVhZFhtbE5vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczksIHJlZiByZWFkZXJDb3VudDkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50IFJlYWQxMl9Bcmd1bWVudChib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50IG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudCgpOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFs1XTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzJdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0X05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI4X1R5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM0X1JlcXVpcmVkICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AUmVxdWlyZWQgPSBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9Cb29sZWFuKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lLCA6VHlwZSwgOlJlcXVpcmVkIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTAgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTAgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM1X0NvbnZlcnRlciAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBDb252ZXJ0ZXIgPSBSZWFkOV9Db252ZXJ0ZXIoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM2X1ZhbHVlUHJvdmlkZXIgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5AVmFsdWVQcm92aWRlciA9IFJlYWQxMV9WYWx1ZVByb3ZpZGVyKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkNvbnZlcnRlciwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6VmFsdWVQcm92aWRlciIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6Q29udmVydGVyLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpWYWx1ZVByb3ZpZGVyIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMTAsIHJlZiByZWFkZXJDb3VudDEwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5WYWx1ZVByb3ZpZGVyIFJlYWQxMV9WYWx1ZVByb3ZpZGVyKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSB4c2lUeXBlID0gY2hlY2tUeXBlID8gR2V0WHNpVHlwZSgpIDogbnVsbDsNCiAgICAgICAgICAgIGJvb2wgaXNOdWxsID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgaXNOdWxsID0gUmVhZE51bGwoKTsNCiAgICAgICAgICAgIGlmIChjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIGlmICh4c2lUeXBlID09IG51bGwgfHwgKChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWUgPT0gKG9iamVjdClpZDNfSXRlbSAmJiAob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lc3BhY2UgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbigoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzTnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlciBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlcigpOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudFtdIGFfMCA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMCA9IDA7DQogICAgICAgICAgICBnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gYV8yID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV8yID0gMDsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbM107DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFsxXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMjhfVHlwZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFR5cGUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUgYXR0ciA9IChTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSkgRG9jdW1lbnQuUmVhZE5vZGUoUmVhZGVyKTsNCiAgICAgICAgICAgICAgICAgICAgUGFyc2VXc2RsQXJyYXlUeXBlKGF0dHIpOw0KICAgICAgICAgICAgICAgICAgICBhXzIgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKUVuc3VyZUFycmF5SW5kZXgoYV8yLCBjYV8yLCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSkpO2FfMltjYV8yKytdID0gYXR0cjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvLkBNb25pdG9yQXJndW1lbnQgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudFtdKVNocmlua0FycmF5KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQpLCB0cnVlKTsNCiAgICAgICAgICAgIG8uQEFueUF0dHIgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKVNocmlua0FycmF5KGFfMiwgY2FfMiwgdHlwZW9mKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICBvLkBNb25pdG9yQXJndW1lbnQgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudFtdKVNocmlua0FycmF5KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQpLCB0cnVlKTsNCiAgICAgICAgICAgICAgICBvLkBBbnlBdHRyID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlTaHJpbmtBcnJheShhXzIsIGNhXzIsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMxMSA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQxMSA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMzdfTW9uaXRvckFyZ3VtZW50ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFfMCA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50W10pRW5zdXJlQXJyYXlJbmRleChhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50KSk7YV8wW2NhXzArK10gPSBSZWFkMTBfTW9uaXRvckFyZ3VtZW50KGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpNb25pdG9yQXJndW1lbnQiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOk1vbml0b3JBcmd1bWVudCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczExLCByZWYgcmVhZGVyQ291bnQxMSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvLkBNb25pdG9yQXJndW1lbnQgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudFtdKVNocmlua0FycmF5KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQpLCB0cnVlKTsNCiAgICAgICAgICAgIG8uQEFueUF0dHIgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKVNocmlua0FycmF5KGFfMiwgY2FfMiwgdHlwZW9mKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQgUmVhZDEwX01vbml0b3JBcmd1bWVudChib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudCBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50KCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzFdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDRfTmFtZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTIgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTIgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMTIsIHJlZiByZWFkZXJDb3VudDEyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db252ZXJ0ZXIgUmVhZDlfQ29udmVydGVyKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSB4c2lUeXBlID0gY2hlY2tUeXBlID8gR2V0WHNpVHlwZSgpIDogbnVsbDsNCiAgICAgICAgICAgIGJvb2wgaXNOdWxsID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgaXNOdWxsID0gUmVhZE51bGwoKTsNCiAgICAgICAgICAgIGlmIChjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIGlmICh4c2lUeXBlID09IG51bGwgfHwgKChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWUgPT0gKG9iamVjdClpZDNfSXRlbSAmJiAob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lc3BhY2UgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbigoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzTnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29udmVydGVyIG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db252ZXJ0ZXIoKTsNCiAgICAgICAgICAgIGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSBhXzEgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzEgPSAwOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFsyXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyOF9UeXBlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AVHlwZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSBhdHRyID0gKFN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSBEb2N1bWVudC5SZWFkTm9kZShSZWFkZXIpOw0KICAgICAgICAgICAgICAgICAgICBQYXJzZVdzZGxBcnJheVR5cGUoYXR0cik7DQogICAgICAgICAgICAgICAgICAgIGFfMSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pRW5zdXJlQXJyYXlJbmRleChhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSk7YV8xW2NhXzErK10gPSBhdHRyOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG8uQEFueUF0dHIgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKVNocmlua0FycmF5KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICBvLkBBbnlBdHRyID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMxMyA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQxMyA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMxMywgcmVmIHJlYWRlckNvdW50MTMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgby5AQW55QXR0ciA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pU2hyaW5rQXJyYXkoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSksIHRydWUpOw0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhIFJlYWQ4X1JlY2lwZUhvc3REYXRhKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSB4c2lUeXBlID0gY2hlY2tUeXBlID8gR2V0WHNpVHlwZSgpIDogbnVsbDsNCiAgICAgICAgICAgIGJvb2wgaXNOdWxsID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgaXNOdWxsID0gUmVhZE51bGwoKTsNCiAgICAgICAgICAgIGlmIChjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIGlmICh4c2lUeXBlID09IG51bGwgfHwgKChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWUgPT0gKG9iamVjdClpZDNfSXRlbSAmJiAob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lc3BhY2UgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbigoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzTnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlSG9zdERhdGEgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhKCk7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhcltdIGFfMSA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMSA9IDA7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzRdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM4X1ByaW9yaXR5ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AUHJpb3JpdHkgPSBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9JbnQzMihSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6UHJpb3JpdHkiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgby5AQ29tbWFuZEJhciA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhcltdKVNocmlua0FycmF5KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyKSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMxNCA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQxNCA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMzlfSWNvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBJY29uID0gUmVhZDJfSWNvbihmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNDBfQ29tbWFuZEJhciAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhXzEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJbXSlFbnN1cmVBcnJheUluZGV4KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyKSk7YV8xW2NhXzErK10gPSBSZWFkNF9Db21tYW5kQmFyKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8uQEFueSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sRWxlbWVudClSZWFkWG1sTm9kZShmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpJY29uLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpDb21tYW5kQmFyIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMTQsIHJlZiByZWFkZXJDb3VudDE0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG8uQENvbW1hbmRCYXIgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhciksIHRydWUpOw0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIgUmVhZDRfQ29tbWFuZEJhcihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIoKTsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbNF07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFJlYWQzX0NvbW1hbmRCYXJOYW1lKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWVTcGVjaWZpZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDQxX01lbnUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBNZW51ID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDhfR3VpZCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQEd1aWQgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFszXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNDJfSUQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBJRCA9IFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub0ludDMyKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIG8uQElEU3BlY2lmaWVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFszXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOk5hbWUsIDpNZW51LCA6R3VpZCwgOklEIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTUgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTUgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMTUsIHJlZiByZWFkZXJDb3VudDE1KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZSBSZWFkM19Db21tYW5kQmFyTmFtZShzdHJpbmcgcykgew0KICAgICAgICAgICAgc3dpdGNoIChzKSB7DQogICAgICAgICAgICAgICAgY2FzZSBAIlNvbHV0aW9uIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AU29sdXRpb247DQogICAgICAgICAgICAgICAgY2FzZSBAIlByb2plY3QiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBQcm9qZWN0Ow0KICAgICAgICAgICAgICAgIGNhc2UgQCJXZWIgUHJvamVjdCI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFdlYlByb2plY3Q7DQogICAgICAgICAgICAgICAgY2FzZSBAIkl0ZW0iOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBJdGVtOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJXZWIgSXRlbSI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFdlYkl0ZW07DQogICAgICAgICAgICAgICAgY2FzZSBAIkZvbGRlciI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQEZvbGRlcjsNCiAgICAgICAgICAgICAgICBjYXNlIEAiV2ViIEZvbGRlciI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFdlYkZvbGRlcjsNCiAgICAgICAgICAgICAgICBjYXNlIEAiU29sdXRpb24gRm9sZGVyIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AU29sdXRpb25Gb2xkZXI7DQogICAgICAgICAgICAgICAgY2FzZSBAIlByb2plY3QgQWRkIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AUHJvamVjdEFkZDsNCiAgICAgICAgICAgICAgICBjYXNlIEAiU29sdXRpb24gQWRkIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AU29sdXRpb25BZGQ7DQogICAgICAgICAgICAgICAgY2FzZSBAIlNvbHV0aW9uIEZvbGRlciBBZGQiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBTb2x1dGlvbkZvbGRlckFkZDsNCiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBDcmVhdGVVbmtub3duQ29uc3RhbnRFeGNlcHRpb24ocywgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkljb24gUmVhZDJfSWNvbihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkljb24gbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkljb24oKTsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbM107DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkOF9HdWlkICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AR3VpZCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzFdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0Ml9JRCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQElEID0gU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvSW50MzIoUmVhZGVyLlZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgby5ASURTcGVjaWZpZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDQzX0ZpbGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBGaWxlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6R3VpZCwgOklELCA6RmlsZSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczE2ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDE2ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczE2LCByZWYgcmVhZGVyQ291bnQxNik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzIFJlYWQ3X1R5cGVBbGlhcyhib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhcyBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzKCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzJdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDRfTmFtZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsxXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMjhfVHlwZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFR5cGUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lLCA6VHlwZSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczE3ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDE3ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczE3LCByZWYgcmVhZGVyQ291bnQxNyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEgUmVhZDZfR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2VIb3N0RGF0YSBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEoKTsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51W10gYV8xID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV8xID0gMDsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbM107DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgby5ATWVudSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudVtdKVNocmlua0FycmF5KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51KSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMxOCA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQxOCA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMzlfSWNvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBJY29uID0gUmVhZDJfSWNvbihmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNDFfTWVudSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhXzEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnVbXSlFbnN1cmVBcnJheUluZGV4KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51KSk7YV8xW2NhXzErK10gPSBSZWFkNV9NZW51KGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8uQEFueSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sRWxlbWVudClSZWFkWG1sTm9kZShmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpJY29uLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpNZW51Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMTgsIHJlZiByZWFkZXJDb3VudDE4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG8uQE1lbnUgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnVbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSksIHRydWUpOw0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnUgUmVhZDVfTWVudShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnUgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnUoKTsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbNF07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFsxXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFRvWG1sTkNOYW1lKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsyXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNDRfVGV4dCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFRleHQgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFszXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMzhfUHJpb3JpdHkgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBQcmlvcml0eSA9IFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub0ludDMyKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lLCA6VGV4dCwgOlByaW9yaXR5Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTkgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTkgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDQwX0NvbW1hbmRCYXIgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5AQ29tbWFuZEJhciA9IFJlYWQ0X0NvbW1hbmRCYXIoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6Q29tbWFuZEJhciIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6Q29tbWFuZEJhciIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczE5LCByZWYgcmVhZGVyQ291bnQxOSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbCBSZWFkMTlfVHJhY2VMZXZlbChzdHJpbmcgcykgew0KICAgICAgICAgICAgc3dpdGNoIChzKSB7DQogICAgICAgICAgICAgICAgY2FzZSBAIkVycm9yIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLkBFcnJvcjsNCiAgICAgICAgICAgICAgICBjYXNlIEAiSW5mbyI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5ASW5mbzsNCiAgICAgICAgICAgICAgICBjYXNlIEAiT2ZmIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLkBPZmY7DQogICAgICAgICAgICAgICAgY2FzZSBAIldhcm5pbmciOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwuQFdhcm5pbmc7DQogICAgICAgICAgICAgICAgY2FzZSBAIlZlcmJvc2UiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwuQFZlcmJvc2U7DQogICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgQ3JlYXRlVW5rbm93bkNvbnN0YW50RXhjZXB0aW9uKHMsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgSW5pdENhbGxiYWNrcygpIHsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBpZDQ0X1RleHQ7DQogICAgICAgIHN0cmluZyBpZDM1X0NvbnZlcnRlcjsNCiAgICAgICAgc3RyaW5nIGlkMTVfUmVjaXBlczsNCiAgICAgICAgc3RyaW5nIGlkM19JdGVtOw0KICAgICAgICBzdHJpbmcgaWQxMF9Ib3N0Ow0KICAgICAgICBzdHJpbmcgaWQ2X0Rlc2NyaXB0aW9uOw0KICAgICAgICBzdHJpbmcgaWQyMV9Bcmd1bWVudHM7DQogICAgICAgIHN0cmluZyBpZDQzX0ZpbGU7DQogICAgICAgIHN0cmluZyBpZDM3X01vbml0b3JBcmd1bWVudDsNCiAgICAgICAgc3RyaW5nIGlkNDFfTWVudTsNCiAgICAgICAgc3RyaW5nIGlkMzJfQWN0aW9uT3V0cHV0Ow0KICAgICAgICBzdHJpbmcgaWQxNl9SZWNpcGU7DQogICAgICAgIHN0cmluZyBpZDE0X0hvc3REYXRhOw0KICAgICAgICBzdHJpbmcgaWQxOV9UeXBlczsNCiAgICAgICAgc3RyaW5nIGlkMzFfUmVjaXBlQXJndW1lbnQ7DQogICAgICAgIHN0cmluZyBpZDE4X0JvdW5kOw0KICAgICAgICBzdHJpbmcgaWQ0X05hbWU7DQogICAgICAgIHN0cmluZyBpZDVfQ2FwdGlvbjsNCiAgICAgICAgc3RyaW5nIGlkMjNfR2F0aGVyaW5nU2VydmljZURhdGE7DQogICAgICAgIHN0cmluZyBpZDExX0JpbmRpbmdSZWNpcGU7DQogICAgICAgIHN0cmluZyBpZDMzX1NlcnZpY2VUeXBlOw0KICAgICAgICBzdHJpbmcgaWQ0MF9Db21tYW5kQmFyOw0KICAgICAgICBzdHJpbmcgaWQ3X1ZlcnNpb247DQogICAgICAgIHN0cmluZyBpZDIyX0FyZ3VtZW50Ow0KICAgICAgICBzdHJpbmcgaWQ5X1NjaGVtYVZlcnNpb247DQogICAgICAgIHN0cmluZyBpZDM5X0ljb247DQogICAgICAgIHN0cmluZyBpZDI5X0lucHV0Ow0KICAgICAgICBzdHJpbmcgaWQzOF9Qcmlvcml0eTsNCiAgICAgICAgc3RyaW5nIGlkMV9HdWlkYW5jZVBhY2thZ2U7DQogICAgICAgIHN0cmluZyBpZDI2X0V4ZWN1dGlvblNlcnZpY2VUeXBlOw0KICAgICAgICBzdHJpbmcgaWQyNV9Db29yZGluYXRvclNlcnZpY2VUeXBlOw0KICAgICAgICBzdHJpbmcgaWQyX0l0ZW07DQogICAgICAgIHN0cmluZyBpZDQyX0lEOw0KICAgICAgICBzdHJpbmcgaWQyOF9UeXBlOw0KICAgICAgICBzdHJpbmcgaWQzNl9WYWx1ZVByb3ZpZGVyOw0KICAgICAgICBzdHJpbmcgaWQyNF9BY3Rpb25zOw0KICAgICAgICBzdHJpbmcgaWQxMl9UcmFjZUxldmVsOw0KICAgICAgICBzdHJpbmcgaWQzMF9PdXRwdXQ7DQogICAgICAgIHN0cmluZyBpZDI3X0FjdGlvbjsNCiAgICAgICAgc3RyaW5nIGlkMTNfU29ydFByaW9yaXR5Ow0KICAgICAgICBzdHJpbmcgaWQyMF9UeXBlQWxpYXM7DQogICAgICAgIHN0cmluZyBpZDE3X1JlY3VycmVudDsNCiAgICAgICAgc3RyaW5nIGlkOF9HdWlkOw0KICAgICAgICBzdHJpbmcgaWQzNF9SZXF1aXJlZDsNCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0SURzKCkgew0KICAgICAgICAgICAgaWQ0NF9UZXh0ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJUZXh0Iik7DQogICAgICAgICAgICBpZDM1X0NvbnZlcnRlciA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiQ29udmVydGVyIik7DQogICAgICAgICAgICBpZDE1X1JlY2lwZXMgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlJlY2lwZXMiKTsNCiAgICAgICAgICAgIGlkM19JdGVtID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCIiKTsNCiAgICAgICAgICAgIGlkMTBfSG9zdCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSG9zdCIpOw0KICAgICAgICAgICAgaWQ2X0Rlc2NyaXB0aW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJEZXNjcmlwdGlvbiIpOw0KICAgICAgICAgICAgaWQyMV9Bcmd1bWVudHMgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkFyZ3VtZW50cyIpOw0KICAgICAgICAgICAgaWQ0M19GaWxlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJGaWxlIik7DQogICAgICAgICAgICBpZDM3X01vbml0b3JBcmd1bWVudCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiTW9uaXRvckFyZ3VtZW50Iik7DQogICAgICAgICAgICBpZDQxX01lbnUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIk1lbnUiKTsNCiAgICAgICAgICAgIGlkMzJfQWN0aW9uT3V0cHV0ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJBY3Rpb25PdXRwdXQiKTsNCiAgICAgICAgICAgIGlkMTZfUmVjaXBlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJSZWNpcGUiKTsNCiAgICAgICAgICAgIGlkMTRfSG9zdERhdGEgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkhvc3REYXRhIik7DQogICAgICAgICAgICBpZDE5X1R5cGVzID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJUeXBlcyIpOw0KICAgICAgICAgICAgaWQzMV9SZWNpcGVBcmd1bWVudCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiUmVjaXBlQXJndW1lbnQiKTsNCiAgICAgICAgICAgIGlkMThfQm91bmQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkJvdW5kIik7DQogICAgICAgICAgICBpZDRfTmFtZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiTmFtZSIpOw0KICAgICAgICAgICAgaWQ1X0NhcHRpb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkNhcHRpb24iKTsNCiAgICAgICAgICAgIGlkMjNfR2F0aGVyaW5nU2VydmljZURhdGEgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkdhdGhlcmluZ1NlcnZpY2VEYXRhIik7DQogICAgICAgICAgICBpZDExX0JpbmRpbmdSZWNpcGUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkJpbmRpbmdSZWNpcGUiKTsNCiAgICAgICAgICAgIGlkMzNfU2VydmljZVR5cGUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlNlcnZpY2VUeXBlIik7DQogICAgICAgICAgICBpZDQwX0NvbW1hbmRCYXIgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkNvbW1hbmRCYXIiKTsNCiAgICAgICAgICAgIGlkN19WZXJzaW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJWZXJzaW9uIik7DQogICAgICAgICAgICBpZDIyX0FyZ3VtZW50ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJBcmd1bWVudCIpOw0KICAgICAgICAgICAgaWQ5X1NjaGVtYVZlcnNpb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlNjaGVtYVZlcnNpb24iKTsNCiAgICAgICAgICAgIGlkMzlfSWNvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSWNvbiIpOw0KICAgICAgICAgICAgaWQyOV9JbnB1dCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSW5wdXQiKTsNCiAgICAgICAgICAgIGlkMzhfUHJpb3JpdHkgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlByaW9yaXR5Iik7DQogICAgICAgICAgICBpZDFfR3VpZGFuY2VQYWNrYWdlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJHdWlkYW5jZVBhY2thZ2UiKTsNCiAgICAgICAgICAgIGlkMjZfRXhlY3V0aW9uU2VydmljZVR5cGUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkV4ZWN1dGlvblNlcnZpY2VUeXBlIik7DQogICAgICAgICAgICBpZDI1X0Nvb3JkaW5hdG9yU2VydmljZVR5cGUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkNvb3JkaW5hdG9yU2VydmljZVR5cGUiKTsNCiAgICAgICAgICAgIGlkMl9JdGVtID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgaWQ0Ml9JRCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSUQiKTsNCiAgICAgICAgICAgIGlkMjhfVHlwZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVHlwZSIpOw0KICAgICAgICAgICAgaWQzNl9WYWx1ZVByb3ZpZGVyID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJWYWx1ZVByb3ZpZGVyIik7DQogICAgICAgICAgICBpZDI0X0FjdGlvbnMgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkFjdGlvbnMiKTsNCiAgICAgICAgICAgIGlkMTJfVHJhY2VMZXZlbCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVHJhY2VMZXZlbCIpOw0KICAgICAgICAgICAgaWQzMF9PdXRwdXQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIk91dHB1dCIpOw0KICAgICAgICAgICAgaWQyN19BY3Rpb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkFjdGlvbiIpOw0KICAgICAgICAgICAgaWQxM19Tb3J0UHJpb3JpdHkgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlNvcnRQcmlvcml0eSIpOw0KICAgICAgICAgICAgaWQyMF9UeXBlQWxpYXMgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlR5cGVBbGlhcyIpOw0KICAgICAgICAgICAgaWQxN19SZWN1cnJlbnQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlJlY3VycmVudCIpOw0KICAgICAgICAgICAgaWQ4X0d1aWQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWQiKTsNCiAgICAgICAgICAgIGlkMzRfUmVxdWlyZWQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlJlcXVpcmVkIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgWG1sU2VyaWFsaXplcjEgOiBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplciB7DQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciBDcmVhdGVSZWFkZXIoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFhtbFNlcmlhbGl6YXRpb25SZWFkZXJHdWlkYW5jZVBhY2thZ2UoKTsNCiAgICAgICAgfQ0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgQ3JlYXRlV3JpdGVyKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBYbWxTZXJpYWxpemF0aW9uV3JpdGVyR3VpZGFuY2VQYWNrYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgc2VhbGVkIGNsYXNzIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIgOiBYbWxTZXJpYWxpemVyMSB7DQoNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Cb29sZWFuIENhbkRlc2VyaWFsaXplKFN5c3RlbS5YbWwuWG1sUmVhZGVyIHhtbFJlYWRlcikgew0KICAgICAgICAgICAgcmV0dXJuIHhtbFJlYWRlci5Jc1N0YXJ0RWxlbWVudChAIkd1aWRhbmNlUGFja2FnZSIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFNlcmlhbGl6ZShvYmplY3Qgb2JqZWN0VG9TZXJpYWxpemUsIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIHdyaXRlcikgew0KICAgICAgICAgICAgKChYbWxTZXJpYWxpemF0aW9uV3JpdGVyR3VpZGFuY2VQYWNrYWdlKXdyaXRlcikuV3JpdGUyMV9HdWlkYW5jZVBhY2thZ2Uob2JqZWN0VG9TZXJpYWxpemUpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBEZXNlcmlhbGl6ZShTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciByZWFkZXIpIHsNCiAgICAgICAgICAgIHJldHVybiAoKFhtbFNlcmlhbGl6YXRpb25SZWFkZXJHdWlkYW5jZVBhY2thZ2UpcmVhZGVyKS5SZWFkMjFfR3VpZGFuY2VQYWNrYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgY2xhc3MgWG1sU2VyaWFsaXplckNvbnRyYWN0IDogZ2xvYmFsOjpTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplckltcGxlbWVudGF0aW9uIHsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIGdsb2JhbDo6U3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgUmVhZGVyIHsgZ2V0IHsgcmV0dXJuIG5ldyBYbWxTZXJpYWxpemF0aW9uUmVhZGVyR3VpZGFuY2VQYWNrYWdlKCk7IH0gfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgZ2xvYmFsOjpTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciBXcml0ZXIgeyBnZXQgeyByZXR1cm4gbmV3IFhtbFNlcmlhbGl6YXRpb25Xcml0ZXJHdWlkYW5jZVBhY2thZ2UoKTsgfSB9DQogICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgcmVhZE1ldGhvZHMgPSBudWxsOw0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBSZWFkTWV0aG9kcyB7DQogICAgICAgICAgICBnZXQgew0KICAgICAgICAgICAgICAgIGlmIChyZWFkTWV0aG9kcyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgX3RtcCA9IG5ldyBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlKCk7DQogICAgICAgICAgICAgICAgICAgIF90bXBbQCJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZTpodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTo6RmFsc2U6Il0gPSBAIlJlYWQyMV9HdWlkYW5jZVBhY2thZ2UiOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVhZE1ldGhvZHMgPT0gbnVsbCkgcmVhZE1ldGhvZHMgPSBfdG1wOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZE1ldGhvZHM7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSB3cml0ZU1ldGhvZHMgPSBudWxsOw0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBXcml0ZU1ldGhvZHMgew0KICAgICAgICAgICAgZ2V0IHsNCiAgICAgICAgICAgICAgICBpZiAod3JpdGVNZXRob2RzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBfdG1wID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUoKTsNCiAgICAgICAgICAgICAgICAgICAgX3RtcFtAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlOmh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOjpGYWxzZToiXSA9IEAiV3JpdGUyMV9HdWlkYW5jZVBhY2thZ2UiOw0KICAgICAgICAgICAgICAgICAgICBpZiAod3JpdGVNZXRob2RzID09IG51bGwpIHdyaXRlTWV0aG9kcyA9IF90bXA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZU1ldGhvZHM7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSB0eXBlZFNlcmlhbGl6ZXJzID0gbnVsbDsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgVHlwZWRTZXJpYWxpemVycyB7DQogICAgICAgICAgICBnZXQgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlZFNlcmlhbGl6ZXJzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBfdG1wID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUoKTsNCiAgICAgICAgICAgICAgICAgICAgX3RtcC5BZGQoQCJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZTpodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTo6RmFsc2U6IiwgbmV3IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlZFNlcmlhbGl6ZXJzID09IG51bGwpIHR5cGVkU2VyaWFsaXplcnMgPSBfdG1wOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZWRTZXJpYWxpemVyczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkJvb2xlYW4gQ2FuU2VyaWFsaXplKFN5c3RlbS5UeXBlIHR5cGUpIHsNCiAgICAgICAgICAgIGlmICh0eXBlID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlKSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemVyIEdldFNlcmlhbGl6ZXIoU3lzdGVtLlR5cGUgdHlwZSkgew0KICAgICAgICAgICAgaWYgKHR5cGUgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UpKSByZXR1cm4gbmV3IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCiNlbmRyZWdpb24NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyA8YXV0b2dlbmVyYXRlZD4NCi8vICAgICBUaGlzIGNvZGUgd2FzIGdlbmVyYXRlZCBieSB0aGUgTXZwLlhtbC5YR2VuIHRvb2wuDQovLyAgICAgVG9vbCBWZXJzaW9uOiAgICAxLjEuMS4wDQovLyAgICAgUnVudGltZSBWZXJzaW9uOiAyLjAuNTA3MjcuNDINCi8vDQovLyAgICAgQ2hhbmdlcyB0byB0aGlzIGZpbGUgbWF5IGNhdXNlIGluY29ycmVjdCBiZWhhdmlvciBhbmQgd2lsbCBiZSBsb3N0IGlmDQovLyAgICAgdGhlIGNvZGUgaXMgcmVnZW5lcmF0ZWQuDQovLyA8L2F1dG9nZW5lcmF0ZWQ+DQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQojcHJhZ21hIHdhcm5pbmcgZGlzYWJsZSAwNjQyLCAwMjE5DQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5TZXJpYWxpemF0aW9uDQp7DQogICAgdXNpbmcgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uOw0KICAgIHVzaW5nIFN5c3RlbTsNCiAgICANCiAgICANCiAgICAvLy8gLy8vIDxzdW1tYXJ5PkN1c3RvbSByZWFkZXIgZm9yIEd1aWRhbmNlUGFja2FnZSBpbnN0YW5jZXMuPC9zdW1tYXJ5Pg0KICAgIGludGVybmFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZVJlYWRlciA6IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIuQmFzZVJlYWRlcg0KICAgIHsNCiAgICAgICAgDQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgUmVhZDIwX0d1aWRhbmNlUGFja2FnZShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIG9iaiA9IGJhc2UuUmVhZDIwX0d1aWRhbmNlUGFja2FnZShpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJR3VpZGFuY2VQYWNrYWdlRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gR3VpZGFuY2VQYWNrYWdlRGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSBSZWFkMThfUmVjaXBlKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGUgb2JqID0gYmFzZS5SZWFkMThfUmVjaXBlKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlSZWNpcGVEZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBSZWNpcGVEZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlQWN0aW9ucyBSZWFkMTdfUmVjaXBlQWN0aW9ucyhib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlQWN0aW9ucyBvYmogPSBiYXNlLlJlYWQxN19SZWNpcGVBY3Rpb25zKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlSZWNpcGVBY3Rpb25zRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gUmVjaXBlQWN0aW9uc0Rlc2VyaWFsaXplZDsNCgkJCWlmIChoYW5kbGVyICE9IG51bGwpDQoJCQkJaGFuZGxlcihvYmopOw0KDQoJCQlyZXR1cm4gb2JqOw0KCQl9DQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24gUmVhZDE2X0FjdGlvbihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uIG9iaiA9IGJhc2UuUmVhZDE2X0FjdGlvbihpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJQWN0aW9uRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gQWN0aW9uRGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCBSZWFkMTVfT3V0cHV0KGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQgb2JqID0gYmFzZS5SZWFkMTVfT3V0cHV0KGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlPdXRwdXREZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBPdXRwdXREZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXQgUmVhZDE0X0lucHV0KGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCBvYmogPSBiYXNlLlJlYWQxNF9JbnB1dChpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJSW5wdXREZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBJbnB1dERlc2VyaWFsaXplZDsNCgkJCWlmIChoYW5kbGVyICE9IG51bGwpDQoJCQkJaGFuZGxlcihvYmopOw0KDQoJCQlyZXR1cm4gb2JqOw0KCQl9DQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YSBSZWFkMTNfUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGEoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkNCgkJew0KCQkJZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhIG9iaiA9IGJhc2UuUmVhZDEzX1JlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlSZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YURlc2VyaWFsaXplZEhhbmRsZXIgaGFuZGxlciA9IFJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhRGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50IFJlYWQxMl9Bcmd1bWVudChib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnQgb2JqID0gYmFzZS5SZWFkMTJfQXJndW1lbnQoaXNOdWxsYWJsZSwgY2hlY2tUeXBlKTsNCgkJCUFyZ3VtZW50RGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gQXJndW1lbnREZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlciBSZWFkMTFfVmFsdWVQcm92aWRlcihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlciBvYmogPSBiYXNlLlJlYWQxMV9WYWx1ZVByb3ZpZGVyKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlWYWx1ZVByb3ZpZGVyRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gVmFsdWVQcm92aWRlckRlc2VyaWFsaXplZDsNCgkJCWlmIChoYW5kbGVyICE9IG51bGwpDQoJCQkJaGFuZGxlcihvYmopOw0KDQoJCQlyZXR1cm4gb2JqOw0KCQl9DQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQgUmVhZDEwX01vbml0b3JBcmd1bWVudChib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50IG9iaiA9IGJhc2UuUmVhZDEwX01vbml0b3JBcmd1bWVudChpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJTW9uaXRvckFyZ3VtZW50RGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gTW9uaXRvckFyZ3VtZW50RGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbnZlcnRlciBSZWFkOV9Db252ZXJ0ZXIoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkNCgkJew0KCQkJZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbnZlcnRlciBvYmogPSBiYXNlLlJlYWQ5X0NvbnZlcnRlcihpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJQ29udmVydGVyRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gQ29udmVydGVyRGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhIFJlYWQ4X1JlY2lwZUhvc3REYXRhKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVIb3N0RGF0YSBvYmogPSBiYXNlLlJlYWQ4X1JlY2lwZUhvc3REYXRhKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlSZWNpcGVIb3N0RGF0YURlc2VyaWFsaXplZEhhbmRsZXIgaGFuZGxlciA9IFJlY2lwZUhvc3REYXRhRGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIgUmVhZDRfQ29tbWFuZEJhcihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhciBvYmogPSBiYXNlLlJlYWQ0X0NvbW1hbmRCYXIoaXNOdWxsYWJsZSwgY2hlY2tUeXBlKTsNCgkJCUNvbW1hbmRCYXJEZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBDb21tYW5kQmFyRGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lIFJlYWQzX0NvbW1hbmRCYXJOYW1lKHN0cmluZyBzKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUgb2JqID0gYmFzZS5SZWFkM19Db21tYW5kQmFyTmFtZShzKTsNCgkJCUNvbW1hbmRCYXJOYW1lRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gQ29tbWFuZEJhck5hbWVEZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSWNvbiBSZWFkMl9JY29uKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JY29uIG9iaiA9IGJhc2UuUmVhZDJfSWNvbihpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJSWNvbkRlc2VyaWFsaXplZEhhbmRsZXIgaGFuZGxlciA9IEljb25EZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzIFJlYWQ3X1R5cGVBbGlhcyhib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzIG9iaiA9IGJhc2UuUmVhZDdfVHlwZUFsaWFzKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlUeXBlQWxpYXNEZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBUeXBlQWxpYXNEZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEgUmVhZDZfR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkNCgkJew0KCQkJZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZUhvc3REYXRhIG9iaiA9IGJhc2UuUmVhZDZfR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEoaXNOdWxsYWJsZSwgY2hlY2tUeXBlKTsNCgkJCUd1aWRhbmNlUGFja2FnZUhvc3REYXRhRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gR3VpZGFuY2VQYWNrYWdlSG9zdERhdGFEZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSBSZWFkNV9NZW51KGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51IG9iaiA9IGJhc2UuUmVhZDVfTWVudShpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJTWVudURlc2VyaWFsaXplZEhhbmRsZXIgaGFuZGxlciA9IE1lbnVEZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbCBSZWFkMTlfVHJhY2VMZXZlbChzdHJpbmcgcykNCgkJew0KCQkJZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwgb2JqID0gYmFzZS5SZWFkMTlfVHJhY2VMZXZlbChzKTsNCgkJCVRyYWNlTGV2ZWxEZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBUcmFjZUxldmVsRGVzZXJpYWxpemVkOw0KCQkJaWYgKGhhbmRsZXIgIT0gbnVsbCkNCgkJCQloYW5kbGVyKG9iaik7DQoNCgkJCXJldHVybiBvYmo7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+UmVhZHMgYW4gb2JqZWN0IG9mIHR5cGUgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UuPC9zdW1tYXJ5Pg0KCQlpbnRlcm5hbCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBSZWFkKCkNCgkJew0KCQkJcmV0dXJuIChNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSkgUmVhZDIxX0d1aWRhbmNlUGFja2FnZSgpOw0KCQl9DQogICAgICAgIA0KICAgICAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIGV2ZW50IEd1aWRhbmNlUGFja2FnZURlc2VyaWFsaXplZEhhbmRsZXIgR3VpZGFuY2VQYWNrYWdlRGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBSZWNpcGVEZXNlcmlhbGl6ZWRIYW5kbGVyIFJlY2lwZURlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgUmVjaXBlQWN0aW9uc0Rlc2VyaWFsaXplZEhhbmRsZXIgUmVjaXBlQWN0aW9uc0Rlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uRGVzZXJpYWxpemVkSGFuZGxlciBBY3Rpb25EZXNlcmlhbGl6ZWQ7DQogICAgICAgIA0KICAgICAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIGV2ZW50IE91dHB1dERlc2VyaWFsaXplZEhhbmRsZXIgT3V0cHV0RGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBJbnB1dERlc2VyaWFsaXplZEhhbmRsZXIgSW5wdXREZXNlcmlhbGl6ZWQ7DQogICAgICAgIA0KICAgICAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIGV2ZW50IFJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhRGVzZXJpYWxpemVkSGFuZGxlciBSZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YURlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgQXJndW1lbnREZXNlcmlhbGl6ZWRIYW5kbGVyIEFyZ3VtZW50RGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBWYWx1ZVByb3ZpZGVyRGVzZXJpYWxpemVkSGFuZGxlciBWYWx1ZVByb3ZpZGVyRGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBNb25pdG9yQXJndW1lbnREZXNlcmlhbGl6ZWRIYW5kbGVyIE1vbml0b3JBcmd1bWVudERlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgQ29udmVydGVyRGVzZXJpYWxpemVkSGFuZGxlciBDb252ZXJ0ZXJEZXNlcmlhbGl6ZWQ7DQogICAgICAgIA0KICAgICAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIGV2ZW50IFJlY2lwZUhvc3REYXRhRGVzZXJpYWxpemVkSGFuZGxlciBSZWNpcGVIb3N0RGF0YURlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgQ29tbWFuZEJhckRlc2VyaWFsaXplZEhhbmRsZXIgQ29tbWFuZEJhckRlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgQ29tbWFuZEJhck5hbWVEZXNlcmlhbGl6ZWRIYW5kbGVyIENvbW1hbmRCYXJOYW1lRGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBJY29uRGVzZXJpYWxpemVkSGFuZGxlciBJY29uRGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBUeXBlQWxpYXNEZXNlcmlhbGl6ZWRIYW5kbGVyIFR5cGVBbGlhc0Rlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgR3VpZGFuY2VQYWNrYWdlSG9zdERhdGFEZXNlcmlhbGl6ZWRIYW5kbGVyIEd1aWRhbmNlUGFja2FnZUhvc3REYXRhRGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBNZW51RGVzZXJpYWxpemVkSGFuZGxlciBNZW51RGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBUcmFjZUxldmVsRGVzZXJpYWxpemVkSGFuZGxlciBUcmFjZUxldmVsRGVzZXJpYWxpemVkOw0KICAgIH0NCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBHdWlkYW5jZVBhY2thZ2VEZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgZ3VpZGFuY2VQYWNrYWdlKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBSZWNpcGVEZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGUgcmVjaXBlKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBSZWNpcGVBY3Rpb25zRGVzZXJpYWxpemVkSGFuZGxlcihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlQWN0aW9ucyByZWNpcGVBY3Rpb25zKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBBY3Rpb25EZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24gYWN0aW9uKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBPdXRwdXREZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQgb3V0cHV0KTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBJbnB1dERlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0IGlucHV0KTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBSZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YURlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhIHJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBBcmd1bWVudERlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50IGFyZ3VtZW50KTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBWYWx1ZVByb3ZpZGVyRGVzZXJpYWxpemVkSGFuZGxlcihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlciB2YWx1ZVByb3ZpZGVyKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBNb25pdG9yQXJndW1lbnREZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQgbW9uaXRvckFyZ3VtZW50KTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBDb252ZXJ0ZXJEZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db252ZXJ0ZXIgY29udmVydGVyKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBSZWNpcGVIb3N0RGF0YURlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhIHJlY2lwZUhvc3REYXRhKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBDb21tYW5kQmFyRGVzZXJpYWxpemVkSGFuZGxlcihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhciBjb21tYW5kQmFyKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBDb21tYW5kQmFyTmFtZURlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lIGNvbW1hbmRCYXJOYW1lKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBJY29uRGVzZXJpYWxpemVkSGFuZGxlcihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSWNvbiBpY29uKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBUeXBlQWxpYXNEZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXMgdHlwZUFsaWFzKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBHdWlkYW5jZVBhY2thZ2VIb3N0RGF0YURlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZUhvc3REYXRhIGd1aWRhbmNlUGFja2FnZUhvc3REYXRhKTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBNZW51RGVzZXJpYWxpemVkSGFuZGxlcihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSBtZW51KTsNCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBUcmFjZUxldmVsRGVzZXJpYWxpemVkSGFuZGxlcihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbCB0cmFjZUxldmVsKTsNCiAgICANCiAgICAvLy8gLy8vIDxzdW1tYXJ5PkN1c3RvbSB3cml0ZXIgZm9yIEd1aWRhbmNlUGFja2FnZSBpbnN0YW5jZXMuPC9zdW1tYXJ5Pg0KICAgIGludGVybmFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZVdyaXRlciA6IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIuQmFzZVdyaXRlcg0KICAgIHsNCiAgICAgICAgDQoNCgkJLy8vIDxzdW1tYXJ5PldyaXRlcyBhbiBvYmplY3Qgb2YgdHlwZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZS48L3N1bW1hcnk+DQoJCWludGVybmFsIHZvaWQgV3JpdGUoTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgdmFsdWUpDQoJCXsNCgkJCVdyaXRlMjFfR3VpZGFuY2VQYWNrYWdlKHZhbHVlKTsNCgkJfQ0KICAgIH0NCn0NCiNpZiBfRFlOQU1JQ19YTUxTRVJJQUxJWkVSX0NPTVBJTEFUSU9ODQpbYXNzZW1ibHk6U3lzdGVtLlNlY3VyaXR5LkFsbG93UGFydGlhbGx5VHJ1c3RlZENhbGxlcnMoKV0NClthc3NlbWJseTpTeXN0ZW0uU2VjdXJpdHkuU2VjdXJpdHlUcmFuc3BhcmVudCgpXQ0KI2VuZGlmDQoNCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlNlcmlhbGl6YXRpb24gew0KDQogICAgaW50ZXJuYWwgcGFydGlhbCBjbGFzcyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyIHsNCglpbnRlcm5hbCBjbGFzcyBCYXNlV3JpdGVyIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgew0KDQogICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCB2b2lkIFdyaXRlMjFfR3VpZGFuY2VQYWNrYWdlKG9iamVjdCBvKSB7DQogICAgICAgICAgICBXcml0ZVN0YXJ0RG9jdW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUVtcHR5VGFnKEAiR3VpZGFuY2VQYWNrYWdlIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFRvcExldmVsRWxlbWVudCgpOw0KICAgICAgICAgICAgV3JpdGUyMF9HdWlkYW5jZVBhY2thZ2UoQCJHdWlkYW5jZVBhY2thZ2UiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlKW8pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTIwX0d1aWRhbmNlUGFja2FnZShzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJOYW1lIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkNhcHRpb24iLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQENhcHRpb24pKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiRGVzY3JpcHRpb24iLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQERlc2NyaXB0aW9uKSk7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVmVyc2lvbikgIT0gQCIxLjAiKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJWZXJzaW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBWZXJzaW9uKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkd1aWQiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEd1aWQpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiU2NoZW1hVmVyc2lvbiIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AU2NoZW1hVmVyc2lvbikpOw0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEhvc3QpICE9IEAiVmlzdWFsU3R1ZGlvIikgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiSG9zdCIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ASG9zdCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJCaW5kaW5nUmVjaXBlIiwgQCIiLCBGcm9tWG1sTkNOYW1lKCgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEJpbmRpbmdSZWNpcGUpKSk7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbClvLkBUcmFjZUxldmVsKSAhPSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5ARXJyb3IpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlRyYWNlTGV2ZWwiLCBAIiIsIFdyaXRlMTlfVHJhY2VMZXZlbCgoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsKW8uQFRyYWNlTGV2ZWwpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5JbnQzMilvLkBTb3J0UHJpb3JpdHkpICE9IDEwMCkgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiU29ydFByaW9yaXR5IiwgQCIiLCBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9TdHJpbmcoKGdsb2JhbDo6U3lzdGVtLkludDMyKSgoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpby5AU29ydFByaW9yaXR5KSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGU2X0d1aWRhbmNlUGFja2FnZUhvc3REYXRhKEAiSG9zdERhdGEiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEpby5ASG9zdERhdGEpLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVbXSBhID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVbXSkoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVbXSlvLkBSZWNpcGVzKTsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQoQCJSZWNpcGVzIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIG51bGwsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaWEgPSAwOyBpYSA8IGEuTGVuZ3RoOyBpYSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZTE4X1JlY2lwZShAIlJlY2lwZSIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGUpYVtpYV0pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUxOF9SZWNpcGUoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgRnJvbVhtbE5DTmFtZSgoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSkpOw0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbilvLkBSZWN1cnJlbnQpICE9IHRydWUpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlJlY3VycmVudCIsIEAiIiwgU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvU3RyaW5nKChnbG9iYWw6OlN5c3RlbS5Cb29sZWFuKSgoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbilvLkBSZWN1cnJlbnQpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5Cb29sZWFuKW8uQEJvdW5kKSAhPSB0cnVlKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJCb3VuZCIsIEAiIiwgU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvU3RyaW5nKChnbG9iYWw6OlN5c3RlbS5Cb29sZWFuKSgoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbilvLkBCb3VuZCkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzW10gYSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzW10pKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzW10pby5AVHlwZXMpOw0KICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpew0KICAgICAgICAgICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChAIlR5cGVzIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsIG51bGwsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaWEgPSAwOyBpYSA8IGEuTGVuZ3RoOyBpYSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZTdfVHlwZUFsaWFzKEAiVHlwZUFsaWFzIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhcylhW2lhXSksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVFbGVtZW50U3RyaW5nKEAiQ2FwdGlvbiIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBDYXB0aW9uKSk7DQogICAgICAgICAgICBXcml0ZUVsZW1lbnRTdHJpbmcoQCJEZXNjcmlwdGlvbiIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBEZXNjcmlwdGlvbikpOw0KICAgICAgICAgICAgV3JpdGU4X1JlY2lwZUhvc3REYXRhKEAiSG9zdERhdGEiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlSG9zdERhdGEpby5ASG9zdERhdGEpLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudFtdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50W10pKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnRbXSlvLkBBcmd1bWVudHMpOw0KICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpew0KICAgICAgICAgICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChAIkFyZ3VtZW50cyIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCBudWxsLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUxMl9Bcmd1bWVudChAIkFyZ3VtZW50IiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50KWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZTEzX1JlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKEAiR2F0aGVyaW5nU2VydmljZURhdGEiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGEpby5AR2F0aGVyaW5nU2VydmljZURhdGEpLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgV3JpdGUxN19SZWNpcGVBY3Rpb25zKEAiQWN0aW9ucyIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVBY3Rpb25zKW8uQEFjdGlvbnMpLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTE3X1JlY2lwZUFjdGlvbnMoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUFjdGlvbnMgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUFjdGlvbnMpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJDb29yZGluYXRvclNlcnZpY2VUeXBlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBDb29yZGluYXRvclNlcnZpY2VUeXBlKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkV4ZWN1dGlvblNlcnZpY2VUeXBlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBFeGVjdXRpb25TZXJ2aWNlVHlwZSkpOw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb25bXSBhID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb25bXSlvLkBBY3Rpb247DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpYSA9IDA7IGlhIDwgYS5MZW5ndGg7IGlhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlMTZfQWN0aW9uKEAiQWN0aW9uIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbilhW2lhXSksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoKG8uQEFueSkgaXMgU3lzdGVtLlhtbC5YbWxOb2RlIHx8IG8uQEFueSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgV3JpdGVFbGVtZW50TGl0ZXJhbCgoU3lzdGVtLlhtbC5YbWxOb2RlKW8uQEFueSwgQCIiLCBudWxsLCBmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVJbnZhbGlkQW55VHlwZUV4Y2VwdGlvbihvLkBBbnkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTE2X0FjdGlvbihzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24pKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUeXBlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUeXBlKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQE5hbWUpKTsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gYSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pby5AQW55QXR0cjsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYS5MZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSBhaSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKWFbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZVhtbEF0dHJpYnV0ZShhaSwgbyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0W10gYSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXRbXSlvLkBJbnB1dDsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUxNF9JbnB1dChAIklucHV0IiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0KWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0W10gYSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0W10pby5AT3V0cHV0Ow0KICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaWEgPSAwOyBpYSA8IGEuTGVuZ3RoOyBpYSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZTE1X091dHB1dChAIk91dHB1dCIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQpYVtpYV0pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKChvLkBBbnkpIGlzIFN5c3RlbS5YbWwuWG1sTm9kZSB8fCBvLkBBbnkgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIFdyaXRlRWxlbWVudExpdGVyYWwoKFN5c3RlbS5YbWwuWG1sTm9kZSlvLkBBbnksIEAiIiwgbnVsbCwgZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlSW52YWxpZEFueVR5cGVFeGNlcHRpb24oby5AQW55KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUxNV9PdXRwdXQoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0KSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTE0X0lucHV0KHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXQpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJOYW1lIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlJlY2lwZUFyZ3VtZW50IiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBSZWNpcGVBcmd1bWVudCkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJBY3Rpb25PdXRwdXQiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEFjdGlvbk91dHB1dCkpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTEzX1JlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YSBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGEpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJTZXJ2aWNlVHlwZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AU2VydmljZVR5cGUpKTsNCiAgICAgICAgICAgIGlmICgoby5AQW55KSBpcyBTeXN0ZW0uWG1sLlhtbE5vZGUgfHwgby5AQW55ID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUVsZW1lbnRMaXRlcmFsKChTeXN0ZW0uWG1sLlhtbE5vZGUpby5AQW55LCBAIiIsIG51bGwsIGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZUludmFsaWRBbnlUeXBlRXhjZXB0aW9uKG8uQEFueSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlMTJfQXJndW1lbnQoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50IG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudCkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQE5hbWUpKTsNCiAgICAgICAgICAgIGlmICgoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUeXBlKSAhPSBAIlN5c3RlbS5TdHJpbmciKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUeXBlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUeXBlKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5Cb29sZWFuKW8uQFJlcXVpcmVkKSAhPSB0cnVlKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJSZXF1aXJlZCIsIEAiIiwgU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvU3RyaW5nKChnbG9iYWw6OlN5c3RlbS5Cb29sZWFuKSgoZ2xvYmFsOjpTeXN0ZW0uQm9vbGVhbilvLkBSZXF1aXJlZCkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlOV9Db252ZXJ0ZXIoQCJDb252ZXJ0ZXIiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29udmVydGVyKW8uQENvbnZlcnRlciksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICBXcml0ZTExX1ZhbHVlUHJvdmlkZXIoQCJWYWx1ZVByb3ZpZGVyIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlZhbHVlUHJvdmlkZXIpby5AVmFsdWVQcm92aWRlciksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlMTFfVmFsdWVQcm92aWRlcihzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlciBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlcikpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlR5cGUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQFR5cGUpKTsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gYSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pby5AQW55QXR0cjsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYS5MZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSBhaSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKWFbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZVhtbEF0dHJpYnV0ZShhaSwgbyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudFtdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudFtdKW8uQE1vbml0b3JBcmd1bWVudDsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUxMF9Nb25pdG9yQXJndW1lbnQoQCJNb25pdG9yQXJndW1lbnQiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50KWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUxMF9Nb25pdG9yQXJndW1lbnQoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudCBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50KSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTlfQ29udmVydGVyKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db252ZXJ0ZXIgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbnZlcnRlcikpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlR5cGUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQFR5cGUpKTsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gYSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pby5AQW55QXR0cjsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYS5MZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSBhaSA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKWFbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZVhtbEF0dHJpYnV0ZShhaSwgbyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlOF9SZWNpcGVIb3N0RGF0YShzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlSG9zdERhdGEgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIGlmICgoKGdsb2JhbDo6U3lzdGVtLkludDMyKW8uQFByaW9yaXR5KSAhPSAxNTM2KSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJQcmlvcml0eSIsIEAiIiwgU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvU3RyaW5nKChnbG9iYWw6OlN5c3RlbS5JbnQzMikoKGdsb2JhbDo6U3lzdGVtLkludDMyKW8uQFByaW9yaXR5KSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGUyX0ljb24oQCJJY29uIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkljb24pby5ASWNvbiksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJbXSBhID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyW10pby5AQ29tbWFuZEJhcjsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGU0X0NvbW1hbmRCYXIoQCJDb21tYW5kQmFyIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIpYVtpYV0pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKChvLkBBbnkpIGlzIFN5c3RlbS5YbWwuWG1sTm9kZSB8fCBvLkBBbnkgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIFdyaXRlRWxlbWVudExpdGVyYWwoKFN5c3RlbS5YbWwuWG1sTm9kZSlvLkBBbnksIEAiIiwgbnVsbCwgZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlSW52YWxpZEFueVR5cGVFeGNlcHRpb24oby5AQW55KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGU0X0NvbW1hbmRCYXIoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICAgICAgaWYgKG8uQE5hbWVTcGVjaWZpZWQpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsIFdyaXRlM19Db21tYW5kQmFyTmFtZSgoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZSlvLkBOYW1lKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJNZW51IiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBNZW51KSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkd1aWQiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEd1aWQpKTsNCiAgICAgICAgICAgIGlmIChvLkBJRFNwZWNpZmllZCkgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiSUQiLCBAIiIsIFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub1N0cmluZygoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpKChnbG9iYWw6OlN5c3RlbS5JbnQzMilvLkBJRCkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChvLkBOYW1lU3BlY2lmaWVkKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoby5ASURTcGVjaWZpZWQpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBXcml0ZTNfQ29tbWFuZEJhck5hbWUoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lIHYpIHsNCiAgICAgICAgICAgIHN0cmluZyBzID0gbnVsbDsNCiAgICAgICAgICAgIHN3aXRjaCAodikgew0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBTb2x1dGlvbjogcyA9IEAiU29sdXRpb24iOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AUHJvamVjdDogcyA9IEAiUHJvamVjdCI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBXZWJQcm9qZWN0OiBzID0gQCJXZWIgUHJvamVjdCI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBJdGVtOiBzID0gQCJJdGVtIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFdlYkl0ZW06IHMgPSBAIldlYiBJdGVtIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQEZvbGRlcjogcyA9IEAiRm9sZGVyIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFdlYkZvbGRlcjogcyA9IEAiV2ViIEZvbGRlciI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBTb2x1dGlvbkZvbGRlcjogcyA9IEAiU29sdXRpb24gRm9sZGVyIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFByb2plY3RBZGQ6IHMgPSBAIlByb2plY3QgQWRkIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFNvbHV0aW9uQWRkOiBzID0gQCJTb2x1dGlvbiBBZGQiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AU29sdXRpb25Gb2xkZXJBZGQ6IHMgPSBAIlNvbHV0aW9uIEZvbGRlciBBZGQiOyBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBDcmVhdGVJbnZhbGlkRW51bVZhbHVlRXhjZXB0aW9uKCgoU3lzdGVtLkludDY0KXYpLlRvU3RyaW5nKFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1cmUpLCBAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBzOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTJfSWNvbihzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSWNvbiBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSWNvbikpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkd1aWQiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEd1aWQpKTsNCiAgICAgICAgICAgIGlmIChvLkBJRFNwZWNpZmllZCkgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiSUQiLCBAIiIsIFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub1N0cmluZygoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpKChnbG9iYWw6OlN5c3RlbS5JbnQzMilvLkBJRCkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiRmlsZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ARmlsZSkpOw0KICAgICAgICAgICAgaWYgKG8uQElEU3BlY2lmaWVkKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlN19UeXBlQWxpYXMoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhcyBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUeXBlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUeXBlKSk7DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlNl9HdWlkYW5jZVBhY2thZ2VIb3N0RGF0YShzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZUhvc3REYXRhKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlMl9JY29uKEAiSWNvbiIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JY29uKW8uQEljb24pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51W10gYSA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudVtdKW8uQE1lbnU7DQogICAgICAgICAgICAgICAgaWYgKGEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpYSA9IDA7IGlhIDwgYS5MZW5ndGg7IGlhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlNV9NZW51KEAiTWVudSIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51KWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgoby5AQW55KSBpcyBTeXN0ZW0uWG1sLlhtbE5vZGUgfHwgby5AQW55ID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUVsZW1lbnRMaXRlcmFsKChTeXN0ZW0uWG1sLlhtbE5vZGUpby5AQW55LCBAIiIsIG51bGwsIGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZUludmFsaWRBbnlUeXBlRXhjZXB0aW9uKG8uQEFueSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlNV9NZW51KHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51IG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51KSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgRnJvbVhtbE5DTmFtZSgoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUZXh0IiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUZXh0KSk7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5JbnQzMilvLkBQcmlvcml0eSkgIT0gMTUzNikgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiUHJpb3JpdHkiLCBAIiIsIFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub1N0cmluZygoZ2xvYmFsOjpTeXN0ZW0uSW50MzIpKChnbG9iYWw6OlN5c3RlbS5JbnQzMilvLkBQcmlvcml0eSkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlNF9Db21tYW5kQmFyKEAiQ29tbWFuZEJhciIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyKW8uQENvbW1hbmRCYXIpLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIFdyaXRlMTlfVHJhY2VMZXZlbChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbCB2KSB7DQogICAgICAgICAgICBzdHJpbmcgcyA9IG51bGw7DQogICAgICAgICAgICBzd2l0Y2ggKHYpIHsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLkBFcnJvcjogcyA9IEAiRXJyb3IiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLkBJbmZvOiBzID0gQCJJbmZvIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5AT2ZmOiBzID0gQCJPZmYiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLkBXYXJuaW5nOiBzID0gQCJXYXJuaW5nIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5AVmVyYm9zZTogcyA9IEAiVmVyYm9zZSI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IENyZWF0ZUludmFsaWRFbnVtVmFsdWVFeGNlcHRpb24oKChTeXN0ZW0uSW50NjQpdikuVG9TdHJpbmcoU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSksIEAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gczsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEluaXRDYWxsYmFja3MoKSB7DQogICAgICAgIH0NCiAgICB9DQoJfQ0KDQogICAgaW50ZXJuYWwgcGFydGlhbCBjbGFzcyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyIHsNCglpbnRlcm5hbCBjbGFzcyBCYXNlUmVhZGVyIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgew0KDQogICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBvYmplY3QgUmVhZDIxX0d1aWRhbmNlUGFja2FnZSgpIHsNCiAgICAgICAgICAgIG9iamVjdCBvID0gbnVsbDsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMV9HdWlkYW5jZVBhY2thZ2UgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvID0gUmVhZDIwX0d1aWRhbmNlUGFja2FnZShmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duTm9kZUV4Y2VwdGlvbigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6R3VpZGFuY2VQYWNrYWdlIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gKG9iamVjdClvOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBSZWFkMjBfR3VpZGFuY2VQYWNrYWdlKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSB4c2lUeXBlID0gY2hlY2tUeXBlID8gR2V0WHNpVHlwZSgpIDogbnVsbDsNCiAgICAgICAgICAgIGJvb2wgaXNOdWxsID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgaXNOdWxsID0gUmVhZE51bGwoKTsNCiAgICAgICAgICAgIGlmIChjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIGlmICh4c2lUeXBlID09IG51bGwgfHwgKChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWUgPT0gKG9iamVjdClpZDNfSXRlbSAmJiAob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lc3BhY2UgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbigoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzTnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UoKTsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVbXSBhXzEgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzEgPSAwOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFsxMl07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFsyXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ1X0NhcHRpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBDYXB0aW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDZfRGVzY3JpcHRpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBEZXNjcmlwdGlvbiA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs0XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzVdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ3X1ZlcnNpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBWZXJzaW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzVdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDhfR3VpZCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQEd1aWQgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs3XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkOV9TY2hlbWFWZXJzaW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AU2NoZW1hVmVyc2lvbiA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs3XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzhdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxMF9Ib3N0ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ASG9zdCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs4XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzldICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxMV9CaW5kaW5nUmVjaXBlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AQmluZGluZ1JlY2lwZSA9IFRvWG1sTkNOYW1lKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbOV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsxMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEyX1RyYWNlTGV2ZWwgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUcmFjZUxldmVsID0gUmVhZDE5X1RyYWNlTGV2ZWwoUmVhZGVyLlZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsxMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsxMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEzX1NvcnRQcmlvcml0eSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFNvcnRQcmlvcml0eSA9IFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub0ludDMyKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMTFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSwgOkNhcHRpb24sIDpEZXNjcmlwdGlvbiwgOlZlcnNpb24sIDpHdWlkLCA6U2NoZW1hVmVyc2lvbiwgOkhvc3QsIDpCaW5kaW5nUmVjaXBlLCA6VHJhY2VMZXZlbCwgOlNvcnRQcmlvcml0eSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczAgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MCA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTRfSG9zdERhdGEgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5ASG9zdERhdGEgPSBSZWFkNl9HdWlkYW5jZVBhY2thZ2VIb3N0RGF0YShmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTVfUmVjaXBlcyAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVJlYWROdWxsKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlW10gYV8xXzAgPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBjYV8xXzAgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoUmVhZGVyLklzRW1wdHlFbGVtZW50KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczEgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQxID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNl9SZWNpcGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhXzFfMCA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlW10pRW5zdXJlQXJyYXlJbmRleChhXzFfMCwgY2FfMV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSkpO2FfMV8wW2NhXzFfMCsrXSA9IFJlYWQxOF9SZWNpcGUoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpSZWNpcGUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlJlY2lwZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczEsIHJlZiByZWFkZXJDb3VudDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5AUmVjaXBlcyA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlW10pU2hyaW5rQXJyYXkoYV8xXzAsIGNhXzFfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGUpLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6SG9zdERhdGEsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlJlY2lwZXMiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkhvc3REYXRhLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpSZWNpcGVzIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMCwgcmVmIHJlYWRlckNvdW50MCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlIFJlYWQxOF9SZWNpcGUoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGUgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSgpOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhc1tdIGFfMCA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMCA9IDA7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnRbXSBhXzQgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzQgPSAwOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFsxMF07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFs3XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFRvWG1sTkNOYW1lKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbN10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs4XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTdfUmVjdXJyZW50ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AUmVjdXJyZW50ID0gU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvQm9vbGVhbihSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzhdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbOV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE4X0JvdW5kICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AQm91bmQgPSBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9Cb29sZWFuKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbOV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lLCA6UmVjdXJyZW50LCA6Qm91bmQiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMyID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDIgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE5X1R5cGVzICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUmVhZE51bGwoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXNbXSBhXzBfMCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNhXzBfMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCByZWFkZXJDb3VudDMgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDIwX1R5cGVBbGlhcyAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFfMF8wID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXNbXSlFbnN1cmVBcnJheUluZGV4KGFfMF8wLCBjYV8wXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHlwZUFsaWFzKSk7YV8wXzBbY2FfMF8wKytdID0gUmVhZDdfVHlwZUFsaWFzKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6VHlwZUFsaWFzIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpUeXBlQWxpYXMiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMzLCByZWYgcmVhZGVyQ291bnQzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uQFR5cGVzID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXNbXSlTaHJpbmtBcnJheShhXzBfMCwgY2FfMF8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhcyksIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsxXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNV9DYXB0aW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBDYXB0aW9uID0gUmVhZGVyLlJlYWRFbGVtZW50U3RyaW5nKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsyXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNl9EZXNjcmlwdGlvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5ARGVzY3JpcHRpb24gPSBSZWFkZXIuUmVhZEVsZW1lbnRTdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNF9Ib3N0RGF0YSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBIb3N0RGF0YSA9IFJlYWQ4X1JlY2lwZUhvc3REYXRhKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyMV9Bcmd1bWVudHMgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFSZWFkTnVsbCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFyZ3VtZW50W10gYV80XzAgPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBjYV80XzAgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoUmVhZGVyLklzRW1wdHlFbGVtZW50KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQ0ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyMl9Bcmd1bWVudCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFfNF8wID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudFtdKUVuc3VyZUFycmF5SW5kZXgoYV80XzAsIGNhXzRfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudCkpO2FfNF8wW2NhXzRfMCsrXSA9IFJlYWQxMl9Bcmd1bWVudChmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkFyZ3VtZW50Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpBcmd1bWVudCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczQsIHJlZiByZWFkZXJDb3VudDQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5AQXJndW1lbnRzID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudFtdKVNocmlua0FycmF5KGFfNF8wLCBjYV80XzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnQpLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDIzX0dhdGhlcmluZ1NlcnZpY2VEYXRhICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8uQEdhdGhlcmluZ1NlcnZpY2VEYXRhID0gUmVhZDEzX1JlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzZdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyNF9BY3Rpb25zICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8uQEFjdGlvbnMgPSBSZWFkMTdfUmVjaXBlQWN0aW9ucyhmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzZdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpUeXBlcywgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6Q2FwdGlvbiwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6RGVzY3JpcHRpb24sIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkhvc3REYXRhLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpBcmd1bWVudHMsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkdhdGhlcmluZ1NlcnZpY2VEYXRhLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpBY3Rpb25zIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpUeXBlcywgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6Q2FwdGlvbiwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6RGVzY3JpcHRpb24sIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkhvc3REYXRhLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpBcmd1bWVudHMsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkdhdGhlcmluZ1NlcnZpY2VEYXRhLCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpBY3Rpb25zIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMiwgcmVmIHJlYWRlckNvdW50Mik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlQWN0aW9ucyBSZWFkMTdfUmVjaXBlQWN0aW9ucyhib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUFjdGlvbnMgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUFjdGlvbnMoKTsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb25bXSBhXzAgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzAgPSAwOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFs0XTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzJdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyNV9Db29yZGluYXRvclNlcnZpY2VUeXBlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AQ29vcmRpbmF0b3JTZXJ2aWNlVHlwZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyNl9FeGVjdXRpb25TZXJ2aWNlVHlwZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQEV4ZWN1dGlvblNlcnZpY2VUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6Q29vcmRpbmF0b3JTZXJ2aWNlVHlwZSwgOkV4ZWN1dGlvblNlcnZpY2VUeXBlIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIG8uQEFjdGlvbiA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uW10pU2hyaW5rQXJyYXkoYV8wLCBjYV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbiksIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zNSA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQ1ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyN19BY3Rpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYV8wID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb25bXSlFbnN1cmVBcnJheUluZGV4KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24pKTthXzBbY2FfMCsrXSA9IFJlYWQxNl9BY3Rpb24oZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgby5AQW55ID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxFbGVtZW50KVJlYWRYbWxOb2RlKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkFjdGlvbiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczUsIHJlZiByZWFkZXJDb3VudDUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgby5AQWN0aW9uID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb25bXSlTaHJpbmtBcnJheShhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uKSwgdHJ1ZSk7DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQWN0aW9uIFJlYWQxNl9BY3Rpb24oYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5BY3Rpb24gbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkFjdGlvbigpOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0W10gYV8wID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV8wID0gMDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXRbXSBhXzEgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzEgPSAwOw0KICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdIGFfNSA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfNSA9IDA7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzZdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI4X1R5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDRfTmFtZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUgYXR0ciA9IChTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSkgRG9jdW1lbnQuUmVhZE5vZGUoUmVhZGVyKTsNCiAgICAgICAgICAgICAgICAgICAgUGFyc2VXc2RsQXJyYXlUeXBlKGF0dHIpOw0KICAgICAgICAgICAgICAgICAgICBhXzUgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKUVuc3VyZUFycmF5SW5kZXgoYV81LCBjYV81LCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSkpO2FfNVtjYV81KytdID0gYXR0cjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvLkBJbnB1dCA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXRbXSlTaHJpbmtBcnJheShhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXQpLCB0cnVlKTsNCiAgICAgICAgICAgIG8uQE91dHB1dCA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0W10pU2hyaW5rQXJyYXkoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCksIHRydWUpOw0KICAgICAgICAgICAgby5AQW55QXR0ciA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pU2hyaW5rQXJyYXkoYV81LCBjYV81LCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSksIHRydWUpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIG8uQElucHV0ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dFtdKVNocmlua0FycmF5KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCksIHRydWUpOw0KICAgICAgICAgICAgICAgIG8uQE91dHB1dCA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0W10pU2hyaW5rQXJyYXkoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCksIHRydWUpOw0KICAgICAgICAgICAgICAgIG8uQEFueUF0dHIgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKVNocmlua0FycmF5KGFfNSwgY2FfNSwgdHlwZW9mKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpLCB0cnVlKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczYgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50NiA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMjlfSW5wdXQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYV8wID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dFtdKUVuc3VyZUFycmF5SW5kZXgoYV8wLCBjYV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLklucHV0KSk7YV8wW2NhXzArK10gPSBSZWFkMTRfSW5wdXQoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQzMF9PdXRwdXQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYV8xID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXRbXSlFbnN1cmVBcnJheUluZGV4KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQpKTthXzFbY2FfMSsrXSA9IFJlYWQxNV9PdXRwdXQoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgby5AQW55ID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxFbGVtZW50KVJlYWRYbWxOb2RlKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOklucHV0LCBodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpPdXRwdXQiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnM2LCByZWYgcmVhZGVyQ291bnQ2KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG8uQElucHV0ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dFtdKVNocmlua0FycmF5KGFfMCwgY2FfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCksIHRydWUpOw0KICAgICAgICAgICAgby5AT3V0cHV0ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXRbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0KSwgdHJ1ZSk7DQogICAgICAgICAgICBvLkBBbnlBdHRyID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlTaHJpbmtBcnJheShhXzUsIGNhXzUsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSwgdHJ1ZSk7DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uT3V0cHV0IFJlYWQxNV9PdXRwdXQoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5PdXRwdXQgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk91dHB1dCgpOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFsxXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0X05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczcgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50NyA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnM3LCByZWYgcmVhZGVyQ291bnQ3KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCBSZWFkMTRfSW5wdXQoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JbnB1dCBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uSW5wdXQoKTsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbM107DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzFdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQzMV9SZWNpcGVBcmd1bWVudCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFJlY2lwZUFyZ3VtZW50ID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDMyX0FjdGlvbk91dHB1dCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQEFjdGlvbk91dHB1dCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOk5hbWUsIDpSZWNpcGVBcmd1bWVudCwgOkFjdGlvbk91dHB1dCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczggPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50OCA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnM4LCByZWYgcmVhZGVyQ291bnQ4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YSBSZWFkMTNfUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGEoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVHYXRoZXJpbmdTZXJ2aWNlRGF0YSBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uUmVjaXBlR2F0aGVyaW5nU2VydmljZURhdGEoKTsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbMl07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFsxXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMzNfU2VydmljZVR5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBTZXJ2aWNlVHlwZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsxXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOlNlcnZpY2VUeXBlIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zOSA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQ5ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AQW55ID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxFbGVtZW50KVJlYWRYbWxOb2RlKGZhbHNlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnM5LCByZWYgcmVhZGVyQ291bnQ5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudCBSZWFkMTJfQXJndW1lbnQoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Bcmd1bWVudCBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQXJndW1lbnQoKTsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbNV07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFsyXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQyOF9UeXBlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AVHlwZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFszXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzRdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQzNF9SZXF1aXJlZCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFJlcXVpcmVkID0gU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvQm9vbGVhbihSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzRdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSwgOlR5cGUsIDpSZXF1aXJlZCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczEwID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDEwID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQzNV9Db252ZXJ0ZXIgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5AQ29udmVydGVyID0gUmVhZDlfQ29udmVydGVyKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzFdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQzNl9WYWx1ZVByb3ZpZGVyICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8uQFZhbHVlUHJvdmlkZXIgPSBSZWFkMTFfVmFsdWVQcm92aWRlcihmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpDb252ZXJ0ZXIsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOlZhbHVlUHJvdmlkZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkNvbnZlcnRlciwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6VmFsdWVQcm92aWRlciIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczEwLCByZWYgcmVhZGVyQ291bnQxMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVmFsdWVQcm92aWRlciBSZWFkMTFfVmFsdWVQcm92aWRlcihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlZhbHVlUHJvdmlkZXIgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlZhbHVlUHJvdmlkZXIoKTsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnRbXSBhXzAgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzAgPSAwOw0KICAgICAgICAgICAgZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdIGFfMiA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMiA9IDA7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzNdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI4X1R5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sQXR0cmlidXRlIGF0dHIgPSAoU3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpIERvY3VtZW50LlJlYWROb2RlKFJlYWRlcik7DQogICAgICAgICAgICAgICAgICAgIFBhcnNlV3NkbEFycmF5VHlwZShhdHRyKTsNCiAgICAgICAgICAgICAgICAgICAgYV8yID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlFbnN1cmVBcnJheUluZGV4KGFfMiwgY2FfMiwgdHlwZW9mKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpKTthXzJbY2FfMisrXSA9IGF0dHI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgby5ATW9uaXRvckFyZ3VtZW50ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnRbXSlTaHJpbmtBcnJheShhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50KSwgdHJ1ZSk7DQogICAgICAgICAgICBvLkBBbnlBdHRyID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlTaHJpbmtBcnJheShhXzIsIGNhXzIsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSwgdHJ1ZSk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgby5ATW9uaXRvckFyZ3VtZW50ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnRbXSlTaHJpbmtBcnJheShhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50KSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgby5AQW55QXR0ciA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pU2hyaW5rQXJyYXkoYV8yLCBjYV8yLCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSksIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTEgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTEgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM3X01vbml0b3JBcmd1bWVudCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhXzAgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudFtdKUVuc3VyZUFycmF5SW5kZXgoYV8wLCBjYV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudCkpO2FfMFtjYV8wKytdID0gUmVhZDEwX01vbml0b3JBcmd1bWVudChmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6TW9uaXRvckFyZ3VtZW50Iik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTpNb25pdG9yQXJndW1lbnQiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMxMSwgcmVmIHJlYWRlckNvdW50MTEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgby5ATW9uaXRvckFyZ3VtZW50ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnRbXSlTaHJpbmtBcnJheShhXzAsIGNhXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50KSwgdHJ1ZSk7DQogICAgICAgICAgICBvLkBBbnlBdHRyID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlTaHJpbmtBcnJheShhXzIsIGNhXzIsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSwgdHJ1ZSk7DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTW9uaXRvckFyZ3VtZW50IFJlYWQxMF9Nb25pdG9yQXJndW1lbnQoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Nb25pdG9yQXJndW1lbnQgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1vbml0b3JBcmd1bWVudCgpOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFsxXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0X05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczEyID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDEyID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczEyLCByZWYgcmVhZGVyQ291bnQxMik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29udmVydGVyIFJlYWQ5X0NvbnZlcnRlcihib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbnZlcnRlciBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29udmVydGVyKCk7DQogICAgICAgICAgICBnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10gYV8xID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV8xID0gMDsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbMl07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMjhfVHlwZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFR5cGUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUgYXR0ciA9IChTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSkgRG9jdW1lbnQuUmVhZE5vZGUoUmVhZGVyKTsNCiAgICAgICAgICAgICAgICAgICAgUGFyc2VXc2RsQXJyYXlUeXBlKGF0dHIpOw0KICAgICAgICAgICAgICAgICAgICBhXzEgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKUVuc3VyZUFycmF5SW5kZXgoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSkpO2FfMVtjYV8xKytdID0gYXR0cjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvLkBBbnlBdHRyID0gKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGVbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlKSwgdHJ1ZSk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgby5AQW55QXR0ciA9IChnbG9iYWw6OlN5c3RlbS5YbWwuWG1sQXR0cmlidXRlW10pU2hyaW5rQXJyYXkoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZSksIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTMgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTMgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMTMsIHJlZiByZWFkZXJDb3VudDEzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG8uQEFueUF0dHIgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEF0dHJpYnV0ZVtdKVNocmlua0FycmF5KGFfMSwgY2FfMSwgdHlwZW9mKGdsb2JhbDo6U3lzdGVtLlhtbC5YbWxBdHRyaWJ1dGUpLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVIb3N0RGF0YSBSZWFkOF9SZWNpcGVIb3N0RGF0YShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhIG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5SZWNpcGVIb3N0RGF0YSgpOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJbXSBhXzEgPSBudWxsOw0KICAgICAgICAgICAgaW50IGNhXzEgPSAwOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFs0XTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQzOF9Qcmlvcml0eSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFByaW9yaXR5ID0gU3lzdGVtLlhtbC5YbWxDb252ZXJ0LlRvSW50MzIoUmVhZGVyLlZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFszXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOlByaW9yaXR5Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIG8uQENvbW1hbmRCYXIgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhciksIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTQgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTQgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM5X0ljb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5ASWNvbiA9IFJlYWQyX0ljb24oZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDQwX0NvbW1hbmRCYXIgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYV8xID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyW10pRW5zdXJlQXJyYXlJbmRleChhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhcikpO2FfMVtjYV8xKytdID0gUmVhZDRfQ29tbWFuZEJhcihmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBBbnkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEVsZW1lbnQpUmVhZFhtbE5vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6SWNvbiwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6Q29tbWFuZEJhciIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczE0LCByZWYgcmVhZGVyQ291bnQxNCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvLkBDb21tYW5kQmFyID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyW10pU2hyaW5rQXJyYXkoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXIpLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyIFJlYWQ0X0NvbW1hbmRCYXIoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyIG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyKCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzRdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDRfTmFtZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWUgPSBSZWFkM19Db21tYW5kQmFyTmFtZShSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lU3BlY2lmaWVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzFdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0MV9NZW51ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATWVudSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsxXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzJdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ4X0d1aWQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBHdWlkID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDQyX0lEICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ASUQgPSBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9JbnQzMihSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBvLkBJRFNwZWNpZmllZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lLCA6TWVudSwgOkd1aWQsIDpJRCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczE1ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDE1ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczE1LCByZWYgcmVhZGVyQ291bnQxNSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUgUmVhZDNfQ29tbWFuZEJhck5hbWUoc3RyaW5nIHMpIHsNCiAgICAgICAgICAgIHN3aXRjaCAocykgew0KICAgICAgICAgICAgICAgIGNhc2UgQCJTb2x1dGlvbiI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFNvbHV0aW9uOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJQcm9qZWN0IjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AUHJvamVjdDsNCiAgICAgICAgICAgICAgICBjYXNlIEAiV2ViIFByb2plY3QiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBXZWJQcm9qZWN0Ow0KICAgICAgICAgICAgICAgIGNhc2UgQCJJdGVtIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5ASXRlbTsNCiAgICAgICAgICAgICAgICBjYXNlIEAiV2ViIEl0ZW0iOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBXZWJJdGVtOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJGb2xkZXIiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBGb2xkZXI7DQogICAgICAgICAgICAgICAgY2FzZSBAIldlYiBGb2xkZXIiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkNvbW1hbmRCYXJOYW1lLkBXZWJGb2xkZXI7DQogICAgICAgICAgICAgICAgY2FzZSBAIlNvbHV0aW9uIEZvbGRlciI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFNvbHV0aW9uRm9sZGVyOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJQcm9qZWN0IEFkZCI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFByb2plY3RBZGQ7DQogICAgICAgICAgICAgICAgY2FzZSBAIlNvbHV0aW9uIEFkZCI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUuQFNvbHV0aW9uQWRkOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJTb2x1dGlvbiBGb2xkZXIgQWRkIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5AU29sdXRpb25Gb2xkZXJBZGQ7DQogICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgQ3JlYXRlVW5rbm93bkNvbnN0YW50RXhjZXB0aW9uKHMsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhck5hbWUpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JY29uIFJlYWQyX0ljb24oYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JY29uIG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5JY29uKCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzNdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDhfR3VpZCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQEd1aWQgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsxXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNDJfSUQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBJRCA9IFN5c3RlbS5YbWwuWG1sQ29udmVydC5Ub0ludDMyKFJlYWRlci5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIG8uQElEU3BlY2lmaWVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsxXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzJdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0M19GaWxlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ARmlsZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOkd1aWQsIDpJRCwgOkZpbGUiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMxNiA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQxNiA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMxNiwgcmVmIHJlYWRlckNvdW50MTYpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhcyBSZWFkN19UeXBlQWxpYXMoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UeXBlQWxpYXMgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlR5cGVBbGlhcygpOw0KICAgICAgICAgICAgYm9vbFtdIHBhcmFtc1JlYWQgPSBuZXcgYm9vbFsyXTsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTW92ZVRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0X05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDI4X1R5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSwgOlR5cGUiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMxNyA9IDA7DQogICAgICAgICAgICBpbnQgcmVhZGVyQ291bnQxNyA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMxNywgcmVmIHJlYWRlckNvdW50MTcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZUhvc3REYXRhIFJlYWQ2X0d1aWRhbmNlUGFja2FnZUhvc3REYXRhKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSB4c2lUeXBlID0gY2hlY2tUeXBlID8gR2V0WHNpVHlwZSgpIDogbnVsbDsNCiAgICAgICAgICAgIGJvb2wgaXNOdWxsID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgaXNOdWxsID0gUmVhZE51bGwoKTsNCiAgICAgICAgICAgIGlmIChjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIGlmICh4c2lUeXBlID09IG51bGwgfHwgKChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWUgPT0gKG9iamVjdClpZDNfSXRlbSAmJiAob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lc3BhY2UgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbigoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzTnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlSG9zdERhdGEgbzsNCiAgICAgICAgICAgIG8gPSBuZXcgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZUhvc3REYXRhKCk7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudVtdIGFfMSA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMSA9IDA7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzNdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3Qpbyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0VsZW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBSZWFkZXIuU2tpcCgpOw0KICAgICAgICAgICAgICAgIG8uQE1lbnUgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnVbXSlTaHJpbmtBcnJheShhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSksIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZGVyLlJlYWRTdGFydEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMTggPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MTggPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM5X0ljb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5ASWNvbiA9IFJlYWQyX0ljb24oZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDQxX01lbnUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYV8xID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51W10pRW5zdXJlQXJyYXlJbmRleChhXzEsIGNhXzEsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWVudSkpO2FfMVtjYV8xKytdID0gUmVhZDVfTWVudShmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvLkBBbnkgPSAoZ2xvYmFsOjpTeXN0ZW0uWG1sLlhtbEVsZW1lbnQpUmVhZFhtbE5vZGUoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6SWNvbiwgaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6TWVudSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgIENoZWNrUmVhZGVyQ291bnQocmVmIHdoaWxlSXRlcmF0aW9uczE4LCByZWYgcmVhZGVyQ291bnQxOCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvLkBNZW51ID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51W10pU2hyaW5rQXJyYXkoYV8xLCBjYV8xLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1lbnUpLCB0cnVlKTsNCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51IFJlYWQ1X01lbnUoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51IG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NZW51KCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzRdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDRfTmFtZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWUgPSBUb1htbE5DTmFtZShSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDQ0X1RleHQgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUZXh0ID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzJdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbM10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDM4X1ByaW9yaXR5ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AUHJpb3JpdHkgPSBTeXN0ZW0uWG1sLlhtbENvbnZlcnQuVG9JbnQzMihSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSwgOlRleHQsIDpQcmlvcml0eSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczE5ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDE5ID0gUmVhZGVyQ291bnQ7DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRW5kRWxlbWVudCAmJiBSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5Ob25lKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbXNSZWFkWzBdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ0MF9Db21tYW5kQmFyICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8uQENvbW1hbmRCYXIgPSBSZWFkNF9Db21tYW5kQmFyKGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkNvbW1hbmRCYXIiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlOkNvbW1hbmRCYXIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMxOSwgcmVmIHJlYWRlckNvdW50MTkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUmVhZEVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwgUmVhZDE5X1RyYWNlTGV2ZWwoc3RyaW5nIHMpIHsNCiAgICAgICAgICAgIHN3aXRjaCAocykgew0KICAgICAgICAgICAgICAgIGNhc2UgQCJFcnJvciI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5ARXJyb3I7DQogICAgICAgICAgICAgICAgY2FzZSBAIkluZm8iOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwuQEluZm87DQogICAgICAgICAgICAgICAgY2FzZSBAIk9mZiI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uVHJhY2VMZXZlbC5AT2ZmOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJXYXJuaW5nIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLkBXYXJuaW5nOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJWZXJib3NlIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLkBWZXJib3NlOw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IENyZWF0ZVVua25vd25Db25zdGFudEV4Y2VwdGlvbihzLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlRyYWNlTGV2ZWwpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEluaXRDYWxsYmFja3MoKSB7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgaWQ0NF9UZXh0Ow0KICAgICAgICBzdHJpbmcgaWQzNV9Db252ZXJ0ZXI7DQogICAgICAgIHN0cmluZyBpZDE1X1JlY2lwZXM7DQogICAgICAgIHN0cmluZyBpZDNfSXRlbTsNCiAgICAgICAgc3RyaW5nIGlkMTBfSG9zdDsNCiAgICAgICAgc3RyaW5nIGlkNl9EZXNjcmlwdGlvbjsNCiAgICAgICAgc3RyaW5nIGlkMjFfQXJndW1lbnRzOw0KICAgICAgICBzdHJpbmcgaWQ0M19GaWxlOw0KICAgICAgICBzdHJpbmcgaWQzN19Nb25pdG9yQXJndW1lbnQ7DQogICAgICAgIHN0cmluZyBpZDQxX01lbnU7DQogICAgICAgIHN0cmluZyBpZDMyX0FjdGlvbk91dHB1dDsNCiAgICAgICAgc3RyaW5nIGlkMTZfUmVjaXBlOw0KICAgICAgICBzdHJpbmcgaWQxNF9Ib3N0RGF0YTsNCiAgICAgICAgc3RyaW5nIGlkMTlfVHlwZXM7DQogICAgICAgIHN0cmluZyBpZDMxX1JlY2lwZUFyZ3VtZW50Ow0KICAgICAgICBzdHJpbmcgaWQxOF9Cb3VuZDsNCiAgICAgICAgc3RyaW5nIGlkNF9OYW1lOw0KICAgICAgICBzdHJpbmcgaWQ1X0NhcHRpb247DQogICAgICAgIHN0cmluZyBpZDIzX0dhdGhlcmluZ1NlcnZpY2VEYXRhOw0KICAgICAgICBzdHJpbmcgaWQxMV9CaW5kaW5nUmVjaXBlOw0KICAgICAgICBzdHJpbmcgaWQzM19TZXJ2aWNlVHlwZTsNCiAgICAgICAgc3RyaW5nIGlkNDBfQ29tbWFuZEJhcjsNCiAgICAgICAgc3RyaW5nIGlkN19WZXJzaW9uOw0KICAgICAgICBzdHJpbmcgaWQyMl9Bcmd1bWVudDsNCiAgICAgICAgc3RyaW5nIGlkOV9TY2hlbWFWZXJzaW9uOw0KICAgICAgICBzdHJpbmcgaWQzOV9JY29uOw0KICAgICAgICBzdHJpbmcgaWQyOV9JbnB1dDsNCiAgICAgICAgc3RyaW5nIGlkMzhfUHJpb3JpdHk7DQogICAgICAgIHN0cmluZyBpZDFfR3VpZGFuY2VQYWNrYWdlOw0KICAgICAgICBzdHJpbmcgaWQyNl9FeGVjdXRpb25TZXJ2aWNlVHlwZTsNCiAgICAgICAgc3RyaW5nIGlkMjVfQ29vcmRpbmF0b3JTZXJ2aWNlVHlwZTsNCiAgICAgICAgc3RyaW5nIGlkMl9JdGVtOw0KICAgICAgICBzdHJpbmcgaWQ0Ml9JRDsNCiAgICAgICAgc3RyaW5nIGlkMjhfVHlwZTsNCiAgICAgICAgc3RyaW5nIGlkMzZfVmFsdWVQcm92aWRlcjsNCiAgICAgICAgc3RyaW5nIGlkMjRfQWN0aW9uczsNCiAgICAgICAgc3RyaW5nIGlkMTJfVHJhY2VMZXZlbDsNCiAgICAgICAgc3RyaW5nIGlkMzBfT3V0cHV0Ow0KICAgICAgICBzdHJpbmcgaWQyN19BY3Rpb247DQogICAgICAgIHN0cmluZyBpZDEzX1NvcnRQcmlvcml0eTsNCiAgICAgICAgc3RyaW5nIGlkMjBfVHlwZUFsaWFzOw0KICAgICAgICBzdHJpbmcgaWQxN19SZWN1cnJlbnQ7DQogICAgICAgIHN0cmluZyBpZDhfR3VpZDsNCiAgICAgICAgc3RyaW5nIGlkMzRfUmVxdWlyZWQ7DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgSW5pdElEcygpIHsNCiAgICAgICAgICAgIGlkNDRfVGV4dCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVGV4dCIpOw0KICAgICAgICAgICAgaWQzNV9Db252ZXJ0ZXIgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkNvbnZlcnRlciIpOw0KICAgICAgICAgICAgaWQxNV9SZWNpcGVzID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJSZWNpcGVzIik7DQogICAgICAgICAgICBpZDNfSXRlbSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiIik7DQogICAgICAgICAgICBpZDEwX0hvc3QgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkhvc3QiKTsNCiAgICAgICAgICAgIGlkNl9EZXNjcmlwdGlvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiRGVzY3JpcHRpb24iKTsNCiAgICAgICAgICAgIGlkMjFfQXJndW1lbnRzID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJBcmd1bWVudHMiKTsNCiAgICAgICAgICAgIGlkNDNfRmlsZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiRmlsZSIpOw0KICAgICAgICAgICAgaWQzN19Nb25pdG9yQXJndW1lbnQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIk1vbml0b3JBcmd1bWVudCIpOw0KICAgICAgICAgICAgaWQ0MV9NZW51ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJNZW51Iik7DQogICAgICAgICAgICBpZDMyX0FjdGlvbk91dHB1dCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiQWN0aW9uT3V0cHV0Iik7DQogICAgICAgICAgICBpZDE2X1JlY2lwZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiUmVjaXBlIik7DQogICAgICAgICAgICBpZDE0X0hvc3REYXRhID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJIb3N0RGF0YSIpOw0KICAgICAgICAgICAgaWQxOV9UeXBlcyA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVHlwZXMiKTsNCiAgICAgICAgICAgIGlkMzFfUmVjaXBlQXJndW1lbnQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlJlY2lwZUFyZ3VtZW50Iik7DQogICAgICAgICAgICBpZDE4X0JvdW5kID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJCb3VuZCIpOw0KICAgICAgICAgICAgaWQ0X05hbWUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIk5hbWUiKTsNCiAgICAgICAgICAgIGlkNV9DYXB0aW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJDYXB0aW9uIik7DQogICAgICAgICAgICBpZDIzX0dhdGhlcmluZ1NlcnZpY2VEYXRhID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJHYXRoZXJpbmdTZXJ2aWNlRGF0YSIpOw0KICAgICAgICAgICAgaWQxMV9CaW5kaW5nUmVjaXBlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJCaW5kaW5nUmVjaXBlIik7DQogICAgICAgICAgICBpZDMzX1NlcnZpY2VUeXBlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJTZXJ2aWNlVHlwZSIpOw0KICAgICAgICAgICAgaWQ0MF9Db21tYW5kQmFyID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJDb21tYW5kQmFyIik7DQogICAgICAgICAgICBpZDdfVmVyc2lvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVmVyc2lvbiIpOw0KICAgICAgICAgICAgaWQyMl9Bcmd1bWVudCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiQXJndW1lbnQiKTsNCiAgICAgICAgICAgIGlkOV9TY2hlbWFWZXJzaW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJTY2hlbWFWZXJzaW9uIik7DQogICAgICAgICAgICBpZDM5X0ljb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkljb24iKTsNCiAgICAgICAgICAgIGlkMjlfSW5wdXQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIklucHV0Iik7DQogICAgICAgICAgICBpZDM4X1ByaW9yaXR5ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJQcmlvcml0eSIpOw0KICAgICAgICAgICAgaWQxX0d1aWRhbmNlUGFja2FnZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiR3VpZGFuY2VQYWNrYWdlIik7DQogICAgICAgICAgICBpZDI2X0V4ZWN1dGlvblNlcnZpY2VUeXBlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJFeGVjdXRpb25TZXJ2aWNlVHlwZSIpOw0KICAgICAgICAgICAgaWQyNV9Db29yZGluYXRvclNlcnZpY2VUeXBlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJDb29yZGluYXRvclNlcnZpY2VUeXBlIik7DQogICAgICAgICAgICBpZDJfSXRlbSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiKTsNCiAgICAgICAgICAgIGlkNDJfSUQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIklEIik7DQogICAgICAgICAgICBpZDI4X1R5cGUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlR5cGUiKTsNCiAgICAgICAgICAgIGlkMzZfVmFsdWVQcm92aWRlciA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVmFsdWVQcm92aWRlciIpOw0KICAgICAgICAgICAgaWQyNF9BY3Rpb25zID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJBY3Rpb25zIik7DQogICAgICAgICAgICBpZDEyX1RyYWNlTGV2ZWwgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlRyYWNlTGV2ZWwiKTsNCiAgICAgICAgICAgIGlkMzBfT3V0cHV0ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJPdXRwdXQiKTsNCiAgICAgICAgICAgIGlkMjdfQWN0aW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJBY3Rpb24iKTsNCiAgICAgICAgICAgIGlkMTNfU29ydFByaW9yaXR5ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJTb3J0UHJpb3JpdHkiKTsNCiAgICAgICAgICAgIGlkMjBfVHlwZUFsaWFzID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJUeXBlQWxpYXMiKTsNCiAgICAgICAgICAgIGlkMTdfUmVjdXJyZW50ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJSZWN1cnJlbnQiKTsNCiAgICAgICAgICAgIGlkOF9HdWlkID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJHdWlkIik7DQogICAgICAgICAgICBpZDM0X1JlcXVpcmVkID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJSZXF1aXJlZCIpOw0KICAgICAgICB9DQogICAgfQ0KCX0NCg0KICAgIGludGVybmFsIGFic3RyYWN0IGNsYXNzIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXJCYXNlIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6ZXIgew0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgQ3JlYXRlUmVhZGVyKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyLkJhc2VSZWFkZXIoKTsNCiAgICAgICAgfQ0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgQ3JlYXRlV3JpdGVyKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyLkJhc2VXcml0ZXIoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGludGVybmFsIHNlYWxlZCBwYXJ0aWFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIgOiBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyQmFzZSB7DQoNCgkJR3VpZGFuY2VQYWNrYWdlUmVhZGVyIF9yZWFkZXI7DQoJCUd1aWRhbmNlUGFja2FnZVdyaXRlciBfd3JpdGVyOw0KDQoJCS8vLyA8c3VtbWFyeT5Db25zdHJ1Y3RzIHRoZSBzZXJpYWxpemVyLjwvc3VtbWFyeT4NCgkJcHVibGljIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoKQ0KCQl7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+Q29uc3RydWN0cyB0aGUgc2VyaWFsaXplciB3aXRoIGEgcHJlLWJ1aWx0IHJlYWRlci48L3N1bW1hcnk+DQoJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyKEd1aWRhbmNlUGFja2FnZVJlYWRlciByZWFkZXIpDQoJCXsNCgkJCV9yZWFkZXIgPSByZWFkZXI7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+Q29uc3RydWN0cyB0aGUgc2VyaWFsaXplciB3aXRoIGEgcHJlLWJ1aWx0IHdyaXRlci48L3N1bW1hcnk+DQoJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyKEd1aWRhbmNlUGFja2FnZVdyaXRlciB3cml0ZXIpDQoJCXsNCgkJCV93cml0ZXIgPSB3cml0ZXI7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+Q29uc3RydWN0cyB0aGUgc2VyaWFsaXplciB3aXRoIHByZS1idWlsdCByZWFkZXIgYW5kIHdyaXRlci48L3N1bW1hcnk+DQoJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyKEd1aWRhbmNlUGFja2FnZVJlYWRlciByZWFkZXIsIEd1aWRhbmNlUGFja2FnZVdyaXRlciB3cml0ZXIpDQoJCXsNCgkJCV9yZWFkZXIgPSByZWFkZXI7DQoJCQlfd3JpdGVyID0gd3JpdGVyOw0KCQl9DQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uUmVhZGVyIENyZWF0ZVJlYWRlcigpDQoJCXsNCgkJCWlmIChfcmVhZGVyICE9IG51bGwpIHJldHVybiBfcmVhZGVyOw0KCQkJDQoJCQlyZXR1cm4gYmFzZS5DcmVhdGVSZWFkZXIoKTsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciBDcmVhdGVXcml0ZXIoKQ0KCQl7DQoJCQlpZiAoX3dyaXRlciAhPSBudWxsKSByZXR1cm4gX3dyaXRlcjsNCgkJCQ0KCQkJcmV0dXJuIGJhc2UuQ3JlYXRlV3JpdGVyKCk7DQoJCX0NCg0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkJvb2xlYW4gQ2FuRGVzZXJpYWxpemUoU3lzdGVtLlhtbC5YbWxSZWFkZXIgeG1sUmVhZGVyKSB7DQogICAgICAgICAgICByZXR1cm4geG1sUmVhZGVyLklzU3RhcnRFbGVtZW50KEAiR3VpZGFuY2VQYWNrYWdlIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgU2VyaWFsaXplKG9iamVjdCBvYmplY3RUb1NlcmlhbGl6ZSwgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgd3JpdGVyKSB7DQogICAgICAgICAgICAoKEJhc2VXcml0ZXIpd3JpdGVyKS5Xcml0ZTIxX0d1aWRhbmNlUGFja2FnZShvYmplY3RUb1NlcmlhbGl6ZSk7DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgb2JqZWN0IERlc2VyaWFsaXplKFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uUmVhZGVyIHJlYWRlcikgew0KICAgICAgICAgICAgcmV0dXJuICgoQmFzZVJlYWRlcilyZWFkZXIpLlJlYWQyMV9HdWlkYW5jZVBhY2thZ2UoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGludGVybmFsIHBhcnRpYWwgY2xhc3MgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplciB7DQoJaW50ZXJuYWwgY2xhc3MgWG1sU2VyaWFsaXplckNvbnRyYWN0IDogZ2xvYmFsOjpTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplckltcGxlbWVudGF0aW9uIHsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIGdsb2JhbDo6U3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgUmVhZGVyIHsgZ2V0IHsgcmV0dXJuIG5ldyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyLkJhc2VSZWFkZXIoKTsgfSB9DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBnbG9iYWw6OlN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIFdyaXRlciB7IGdldCB7IHJldHVybiBuZXcgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplci5CYXNlV3JpdGVyKCk7IH0gfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHJlYWRNZXRob2RzID0gbnVsbDsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgUmVhZE1ldGhvZHMgew0KICAgICAgICAgICAgZ2V0IHsNCiAgICAgICAgICAgICAgICBpZiAocmVhZE1ldGhvZHMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wW0AiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2U6aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6OkZhbHNlOiJdID0gQCJSZWFkMjFfR3VpZGFuY2VQYWNrYWdlIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYWRNZXRob2RzID09IG51bGwpIHJlYWRNZXRob2RzID0gX3RtcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRNZXRob2RzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgd3JpdGVNZXRob2RzID0gbnVsbDsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgV3JpdGVNZXRob2RzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHdyaXRlTWV0aG9kcyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgX3RtcCA9IG5ldyBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlKCk7DQogICAgICAgICAgICAgICAgICAgIF90bXBbQCJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZTpodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZTo6RmFsc2U6Il0gPSBAIldyaXRlMjFfR3VpZGFuY2VQYWNrYWdlIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdyaXRlTWV0aG9kcyA9PSBudWxsKSB3cml0ZU1ldGhvZHMgPSBfdG1wOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVNZXRob2RzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgdHlwZWRTZXJpYWxpemVycyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFR5cGVkU2VyaWFsaXplcnMgew0KICAgICAgICAgICAgZ2V0IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZWRTZXJpYWxpemVycyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgX3RtcCA9IG5ldyBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlKCk7DQogICAgICAgICAgICAgICAgICAgIF90bXAuQWRkKEAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2U6aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmU6OkZhbHNlOiIsIG5ldyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZWRTZXJpYWxpemVycyA9PSBudWxsKSB0eXBlZFNlcmlhbGl6ZXJzID0gX3RtcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVkU2VyaWFsaXplcnM7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Cb29sZWFuIENhblNlcmlhbGl6ZShTeXN0ZW0uVHlwZSB0eXBlKSB7DQogICAgICAgICAgICBpZiAodHlwZSA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSkpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplciBHZXRTZXJpYWxpemVyKFN5c3RlbS5UeXBlIHR5cGUpIHsNCiAgICAgICAgICAgIGlmICh0eXBlID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlKSkgcmV0dXJuIG5ldyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyKCk7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgIH0NCgl9DQp9DQoNCg0KI3ByYWdtYSB3YXJuaW5nIHJlc3RvcmUgMDY0MiwgMDIxOQ0K</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>9</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/GuidancePackageConfig.xsd</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8P3htbC1zdHlsZXNoZWV0IGhyZWY9IklQR1NjaGVtYS54c2x0IiB0eXBlPSJ0ZXh0L3hzbCI/Pg0KPHhzOnNjaGVtYSBhdHRyaWJ1dGVGb3JtRGVmYXVsdD0idW5xdWFsaWZpZWQiIGVsZW1lbnRGb3JtRGVmYXVsdD0icXVhbGlmaWVkIiB4bWxuczp4cz0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEiDQoJeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIiB4bWxuczpnYXg9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIg0KCXZlcnNpb249IjEuMCIgdGFyZ2V0TmFtZXNwYWNlPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSI+DQoJPHhzOmVsZW1lbnQgbmFtZT0iR3VpZGFuY2VQYWNrYWdlIj4NCgkJPHhzOmFubm90YXRpb24+DQoJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQlUaGUgbWFpbiBjb25maWd1cmF0aW9uIG9iamVjdCB0aGF0IGhvbGRzIGFsbCByZWNpcGUgY29uZmlndXJhdGlvbi4NCgkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJPC94czphbm5vdGF0aW9uPg0KCQk8eHM6Y29tcGxleFR5cGU+DQoJCQk8eHM6c2VxdWVuY2U+DQoJCQkJPHhzOmVsZW1lbnQgbmFtZT0iSG9zdERhdGEiIG1pbk9jY3Vycz0iMCI+DQoJCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQkJQ29udGFpbnMgZGVmaW5pdGlvbnMgb2Ygb25lIG9yIG1vcmUgY2FzY2FkaW5nIG1lbnVzLg0KCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJCTx4czpjb21wbGV4VHlwZT4NCgkJCQkJCTx4czpzZXF1ZW5jZT4NCgkJCQkJCQk8eHM6ZWxlbWVudCByZWY9Ikljb24iIG1pbk9jY3Vycz0iMCIgbWF4T2NjdXJzPSIxIi8+DQoJCQkJCQkJPHhzOmVsZW1lbnQgcmVmPSJNZW51IiBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0idW5ib3VuZGVkIiAvPg0KCQkJCQkJCTx4czphbnkgbmFtZXNwYWNlPSIjI290aGVyIiBwcm9jZXNzQ29udGVudHM9ImxheCIgbWluT2NjdXJzPSIwIiAvPg0KCQkJCQkJPC94czpzZXF1ZW5jZT4NCgkJCQkJPC94czpjb21wbGV4VHlwZT4NCgkJCQk8L3hzOmVsZW1lbnQ+DQoJCQkJPHhzOmVsZW1lbnQgbmFtZT0iUmVjaXBlcyIgbWluT2NjdXJzPSIwIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQlDb250YWlucyBkZWZpbml0aW9ucyBvZiBvbmUgb3IgbW9yZSByZWNpcGVzLg0KCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJCTx4czpjb21wbGV4VHlwZT4NCgkJCQkJCTx4czpzZXF1ZW5jZT4NCgkJCQkJCQk8eHM6ZWxlbWVudCByZWY9IlJlY2lwZSIgbWF4T2NjdXJzPSJ1bmJvdW5kZWQiIC8+DQoJCQkJCQk8L3hzOnNlcXVlbmNlPg0KCQkJCQk8L3hzOmNvbXBsZXhUeXBlPg0KCQkJCTwveHM6ZWxlbWVudD4NCgkJCTwveHM6c2VxdWVuY2U+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9Ik5hbWUiIHVzZT0ib3B0aW9uYWwiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCURlcHJlY2F0ZWQgYXR0cmlidXR0ZSwgdXNlIEd1aWQgdG8gdW5pcXVlbHkgbmFtZSB5b3VyIHBhY2thZ2UNCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPgkJCQ0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJDYXB0aW9uIiB1c2U9InJlcXVpcmVkIiB0eXBlPSJnYXg6Tm9uRW1wdHlTdHJpbmciPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCUEgZnJpZW5kbHkgc2hvcnQgZGVzY3JpcHRpb24gb2YgdGhlIGd1aWRhbmNlIHBhY2thZ2UuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iRGVzY3JpcHRpb24iIHR5cGU9InhzOnN0cmluZyI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJQSBmdWxsLWxlbmd0aCBkZXNjcmlwdGlvbiBvZiB0aGUgcHVycG9zZSBvZiB0aGUgZ3VpZGFuY2UgcGFja2FnZSwgaXRzIGZlYXR1cmVzLCBhbmQgcmVxdWlyZW1lbnRzLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9IlZlcnNpb24iIHR5cGU9InhzOnN0cmluZyIgZGVmYXVsdD0iMS4wIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlBbiBvcHRpb25hbCBwYWNrYWdlIHZlcnNpb24gZm9yIHNpZGUgYnkgc2lkZSBwYWNrYWdlIGluc3RhbGxhdGlvbi4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJHdWlkIiB1c2U9InJlcXVpcmVkIiB0eXBlPSJnYXg6R3VpZCI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJQSBHVUlEIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGUgZ3VpZGFuY2UgcGFja2FnZS4gDQoJCQkJCQlUaGUgdmFsdWUgbXVzdCBiZSB1bmlxdWUgYWNyb3NzIGFsbCBpbnN0YWxsZWQgZ3VpZGFuY2UgcGFja2FnZXMsIGFuZA0KCQkJCQkJaXQgY2Fubm90IGNvbnRhaW4gZW5jbG9zaW5nIGJyYWNrZXRzIG9yIHBhcmVudGhlc2VzLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9IlNjaGVtYVZlcnNpb24iIHR5cGU9InhzOnN0cmluZyIgdXNlPSJyZXF1aXJlZCIgZml4ZWQ9IjEuMCI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJQSBmaXhlZCB2ZXJzaW9uIHN0cmluZyBpbmRpY2F0aW5nIHRoZSB2ZXJzaW9uIG9mIHRoZSBndWlkYW5jZSBwYWNrYWdlIHNjaGVtYSBiZWluZyB1c2VkLiBUaGUNCgkJCQkJCXZhbHVlIG9mIHRoaXMgYXR0cmlidXRlIG11c3QgYmUgdGhlIHN0cmluZyAiMS4wIi4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJIb3N0IiB0eXBlPSJ4czpzdHJpbmciIGRlZmF1bHQ9IlZpc3VhbFN0dWRpbyI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJPHN1bW1hcnkgeG1sbnM9IiI+VGhlIGFyYml0cmFyeSBuYW1lIG9mIHRoZSBob3N0IHRoaXMgZ3VpZGFuY2UgcGFja2FnZSB3aWxsIHJ1biBvbi4NCgkJCQkJCTwvc3VtbWFyeT4NCgkJCQkJCTxyZW1hcmtzIHhtbG5zPSIiPg0KCQkJCQkJCVdoZW4gcmVjaXBlIG1hbmFnZXIgbG9hZGVkIG9uIGEgaG9zdCwgaXQgdXNlcyB0aGlzIGF0dHJpYnV0ZSB0byBpZGVudGlmeQ0KCQkJCQkJCXRoZSBob3N0J3MgdHlwZSBhbmQgZGV0ZXJtaW5lIHdoaWNoIGd1aWRhbmNlIHBhY2thZ2VzIGNhbiBiZSBsb2FkZWQuIElmIHRoaXMNCgkJCQkJCQlhdHRyaWJ1dGUgaXMgb21pdHRlZCwgdGhlIHBhY2thZ2UgdXNlcyBhIGRlZmF1bHQgaG9zdCBuYW1lIG9mICJWaXN1YWxTdHVkaW8sIiB3aGljaCBpcw0KCQkJCQkJCXRoZSBob3N0IG5hbWUgb2YgdGhlIFZpc3VhbCBTdHVkaW8gaW50ZWdyYXRpb24gcGFja2FnZS4NCgkJCQkJCTwvcmVtYXJrcz4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJCaW5kaW5nUmVjaXBlIiB0eXBlPSJnYXg6RG90TmV0SWRlbnRpZmllciI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJPHN1bW1hcnkgeG1sbnM9IiI+QW4gb3B0aW9uYWwgcmVjaXBlIHRvIGV4ZWN1dGUgd2hlbmV2ZXIgdGhlIGd1aWRhbmNlIHBhY2thZ2UgaXMgbG9hZGVkIGludG8gdGhlIHJlY2lwZSBtYW5hZ2VyLjwvc3VtbWFyeT4NCgkJCQkJCTxyZW1hcmtzIHhtbG5zPSIiPk11c3QgYmUgYSB2YWxpZCBYTUwgbmFtZSB3aXRob3V0IGNvbG9ucyAoTkNOYW1lKSBvciBkb3RzLjwvcmVtYXJrcz4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJUcmFjZUxldmVsIiB0eXBlPSJUcmFjZUxldmVsIiBkZWZhdWx0PSJFcnJvciI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJQWxsb3dzIHNwZWNpZmljYXRpb24gb2YgdGhlIHRyYWNlIGxldmVsIHRvIHVzZSBmb3IgdGhlIGZyYW1ld29yayBhbmQNCgkJCQkJCWFsbCBndWlkYW5jZSBwYWNrYWdlcyAoZXhjZXB0IHdoZW4gb3ZlcnJpZGVuKS4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJTb3J0UHJpb3JpdHkiIHR5cGU9InhzOmludCIgZGVmYXVsdD0iMTAwIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlTZXRzIHRoZSBwcmlvcml0eSBvcmRlciB0aGF0IHdpbGwgYmUgdXNlZCB0byBkaXNwbGF5DQoJCQkJCQlpbiB0aGUgbmV3IHByb2plY3QgZGlhbG9nLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCTwveHM6Y29tcGxleFR5cGU+DQoJCTx4czprZXkgbmFtZT0iUmVjaXBlTmFtZUtleSI+DQoJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJUmVjaXBlIG5hbWVzIG11c3QgYmUgdW5pcXVlLg0KCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTx4czpzZWxlY3RvciB4cGF0aD0iZ2F4OlJlY2lwZXMvZ2F4OlJlY2lwZSIgLz4NCgkJCTx4czpmaWVsZCB4cGF0aD0iQE5hbWUiIC8+DQoJCTwveHM6a2V5Pg0KCQk8eHM6a2V5cmVmIG5hbWU9IlJlY2lwZUJpbmRpbmdSZWYiIHJlZmVyPSJSZWNpcGVOYW1lS2V5Ij4NCgkJCTx4czphbm5vdGF0aW9uPg0KCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQlCaW5kaW5nIHJlY2lwZSBtdXN0IHBvaW50IHRvIGEgcmVjaXBlIGRlZmluZWQgaW4gdGhlIGN1cnJlbnQgZ3VpZGFuY2UgcGFja2FnZS4NCgkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8eHM6c2VsZWN0b3IgeHBhdGg9Ii4iIC8+DQoJCQk8eHM6ZmllbGQgeHBhdGg9IkBCaW5kaW5nUmVjaXBlIiAvPg0KCQk8L3hzOmtleXJlZj4NCgkJPHhzOmtleSBuYW1lPSJNZW51TmFtZUtleSI+DQoJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJTWVudSBuYW1lcyBtdXN0IGJlIHVuaXF1ZSBpbnNpZGUgYSBwYWNrYWdlIGRlZmluaXRpb24uDQoJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPHhzOnNlbGVjdG9yIHhwYXRoPSJnYXg6SG9zdERhdGEvZ2F4Ok1lbnUiIC8+DQoJCQk8eHM6ZmllbGQgeHBhdGg9IkBOYW1lIiAvPg0KCQk8L3hzOmtleT4NCgk8L3hzOmVsZW1lbnQ+DQoJPHhzOmVsZW1lbnQgbmFtZT0iUmVjaXBlIj4NCgkJPHhzOmFubm90YXRpb24+DQoJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQlEZWZpbmVzIGEgcmVjaXBlLg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpjb21wbGV4VHlwZT4NCgkJCTx4czpzZXF1ZW5jZT4NCgkJCQk8eHM6ZWxlbWVudCBuYW1lPSJUeXBlcyIgbWluT2NjdXJzPSIwIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQlBIGxpc3Qgb2YgQ0xSIHR5cGUgYWxpYXNlcywgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgYW55d2hlcmUgYSB0eXBlIG5hbWUgaXMgbmVlZGVkLg0KCQkJCQkJCUNhbiBoYXZlIGFuIEluY2x1ZGUgY2hpbGQgZWxlbWVudCB0byBpbmNsdWRlIHNldHMgb2YgcmV1c2FibGUgdHlwZSBkZWZpbml0aW9ucyBmcm9tIGFuDQoJCQkJCQkJZXh0ZXJuYWwgZmlsZS4gVGhpcyBleHRlcm5hbCBmaWxlIG11c3QgYmUgYW4gWE1MIGZyYWdtZW50IHRoYXQgY29udGFpbnMgb25lIG9yDQoJCQkJCQkJbW9yZSBBbGlhcyBlbGVtZW50cy4NCgkJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6Y29tcGxleFR5cGU+DQoJCQkJCQk8eHM6c2VxdWVuY2U+DQoJCQkJCQkJPHhzOmVsZW1lbnQgbWF4T2NjdXJzPSJ1bmJvdW5kZWQiIHJlZj0iVHlwZUFsaWFzIiBtaW5PY2N1cnM9IjAiIC8+DQoJCQkJCQk8L3hzOnNlcXVlbmNlPg0KCQkJCQk8L3hzOmNvbXBsZXhUeXBlPg0KCQkJCTwveHM6ZWxlbWVudD4NCgkJCQk8eHM6ZWxlbWVudCBuYW1lPSJDYXB0aW9uIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQlBIGNhcHRpb24gdGhhdCByZXByZXNlbnRzIGEgcmVjaXBlIHJlZmVyZW5jZSBhdCBhIGxhdW5jaCBwb2ludCBzdWNoIGFzIGEgY29udGV4dCBtZW51Lg0KCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJCTx4czpzaW1wbGVUeXBlPg0KCQkJCQkJPHhzOnJlc3RyaWN0aW9uIGJhc2U9InhzOnN0cmluZyI+DQoJCQkJCQkJPHhzOm1pbkxlbmd0aCB2YWx1ZT0iMSIgLz4NCgkJCQkJCQk8eHM6cGF0dGVybiB2YWx1ZT0iW15cblxyXHRdKyIgLz4NCgkJCQkJCTwveHM6cmVzdHJpY3Rpb24+DQoJCQkJCTwveHM6c2ltcGxlVHlwZT4NCgkJCQk8L3hzOmVsZW1lbnQ+DQoJCQkJPHhzOmVsZW1lbnQgbmFtZT0iRGVzY3JpcHRpb24iIHR5cGU9InhzOnN0cmluZyIgbWluT2NjdXJzPSIwIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQlBIGRlc2NyaXB0aW9uIG9mIHRoZSByZWNpcGUuIFNvbWUgbGF1bmNoIHBvaW50cywgc3VjaCBhcyB0aGUgQWRkIE5ldyBkaWFsb2cgYm94DQoJCQkJCQkJb3IgdGhlIHRhc2sgbGlzdCwgY2FuIHNob3cgdGhlIGRlc2NyaXB0aW9uIHN0cmluZyBhbG9uZyB3aXRoIHRoZSByZWNpcGUncyBjYXB0aW9uLg0KCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJPC94czplbGVtZW50Pg0KCQkJCTx4czplbGVtZW50IG5hbWU9Ikhvc3REYXRhIiBtaW5PY2N1cnM9IjAiPg0KCQkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJCUNvbnRhaW5zIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24gcHJvY2Vzc2VkIGJ5IHRoZSBob3N0LiBWaXN1YWxTdHVkaW8gaG9zdA0KCQkJCQkJCXVzZXMgY29tbWFuZCBpbmZvcm1hdGlvbi4gT3RoZXIgaG9zdHMgY2FuIHVzZSBhcmJpdHJhcnkgZGF0YSBpbiB0aGlzIGVsZW1lbnQuDQoJCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJCQkJPHhzOnNlcXVlbmNlPg0KCQkJCQkJCTx4czplbGVtZW50IHJlZj0iSWNvbiIgbWluT2NjdXJzPSIwIiAvPg0KCQkJCQkJCTx4czplbGVtZW50IHJlZj0iQ29tbWFuZEJhciIgbWluT2NjdXJzPSIwIiBtYXhPY2N1cnM9InVuYm91bmRlZCIgLz4NCgkJCQkJCQk8eHM6YW55IG5hbWVzcGFjZT0iIyNvdGhlciIgcHJvY2Vzc0NvbnRlbnRzPSJsYXgiIG1pbk9jY3Vycz0iMCIgLz4NCgkJCQkJCTwveHM6c2VxdWVuY2U+DQoJCQkJCQk8eHM6YXR0cmlidXRlIG5hbWU9IlByaW9yaXR5IiB0eXBlPSJ4czppbnQiIGRlZmF1bHQ9IjE1MzYiIC8+DQoJCQkJCTwveHM6Y29tcGxleFR5cGU+DQoJCQkJPC94czplbGVtZW50Pg0KCQkJCTx4czplbGVtZW50IG5hbWU9IkFyZ3VtZW50cyIgbWluT2NjdXJzPSIwIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQlBIGxpc3Qgb2YgdGhlIGFyZ3VtZW50cyB0aGUgcmVjaXBlIHRha2VzLiBFYWNoIGFyZ3VtZW50IGlzIGRlc2NyaWJlZCBieQ0KCQkJCQkJCWFuIEFyZ3VtZW50IGVsZW1lbnQuDQoJCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJCQkJPHhzOnNlcXVlbmNlPg0KCQkJCQkJCTx4czplbGVtZW50IG1heE9jY3Vycz0idW5ib3VuZGVkIiByZWY9IkFyZ3VtZW50IiBtaW5PY2N1cnM9IjAiIC8+DQoJCQkJCQk8L3hzOnNlcXVlbmNlPg0KCQkJCQk8L3hzOmNvbXBsZXhUeXBlPg0KCQkJCTwveHM6ZWxlbWVudD4NCgkJCQk8eHM6ZWxlbWVudCBuYW1lPSJHYXRoZXJpbmdTZXJ2aWNlRGF0YSIgbWluT2NjdXJzPSIwIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQlEYXRhIGZvciB0aGUgYXJndW1lbnQtZ2F0aGVyaW5nIHNlcnZpY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNpcGUuDQoJCQkJCQkJVGhlIHNlcnZpY2Uga25vd3MgaG93IHRvIHZhbGlkYXRlIGFuZCBpbnRlcnByZXQgdGhpcyBkYXRhLg0KCQkJCQkJCVRoaXMgZGF0YSBjYW4gYmUgZGVzY3JpYmVkIGluIHRoZSBzYW1lIGZpbGUsIG9yIGluY2x1ZGVkIGZyb20gYW5vdGhlciBmaWxlLg0KCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJCTx4czpjb21wbGV4VHlwZT4NCgkJCQkJCTx4czpzZXF1ZW5jZT4NCgkJCQkJCQk8eHM6YW55IG5hbWVzcGFjZT0iIyNvdGhlciIgcHJvY2Vzc0NvbnRlbnRzPSJsYXgiIC8+DQoJCQkJCQk8L3hzOnNlcXVlbmNlPg0KCQkJCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJTZXJ2aWNlVHlwZSIgdHlwZT0iZ2F4Ok5vbkVtcHR5U3RyaW5nIiB1c2U9Im9wdGlvbmFsIj4NCgkJCQkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQkJCQlOYW1lIG9mIGEgQ0xSIHR5cGUvY2xhc3MvYWxpYXMgdGhhdCBpbXBsZW1lbnRzIHRoZSBJVmFsdWVHYXRoZXJpbmdTZXJ2aWNlIGludGVyZmFjZS4NCgkJCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCQkJCTwveHM6YXR0cmlidXRlPg0KCQkJCQk8L3hzOmNvbXBsZXhUeXBlPg0KCQkJCTwveHM6ZWxlbWVudD4NCgkJCQk8eHM6ZWxlbWVudCBuYW1lPSJBY3Rpb25zIiBtaW5PY2N1cnM9IjAiPg0KCQkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJCUEgbGlzdCBvZiBhY3Rpb25zIHRoYXQgdGhlIHJlY2lwZSBpbnZva2VzIGFmdGVyIGNvbGxlY3RpbmcgYWxsIGFyZ3VtZW50cy4NCgkJCQkJCQlFYWNoIGFjdGlvbiBpcyBkZXNjcmliZWQgYnkgYW4gQWN0aW9uIGVsZW1lbnQuDQoJCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJCQkJPHhzOnNlcXVlbmNlPg0KCQkJCQkJCTx4czplbGVtZW50IHJlZj0iQWN0aW9uIiBtYXhPY2N1cnM9InVuYm91bmRlZCIgLz4NCgkJCQkJCQk8eHM6YW55IG5hbWVzcGFjZT0iIyNvdGhlciIgcHJvY2Vzc0NvbnRlbnRzPSJsYXgiIG1pbk9jY3Vycz0iMCIgbWF4T2NjdXJzPSIxIiAvPg0KCQkJCQkJPC94czpzZXF1ZW5jZT4NCgkJCQkJCTx4czphdHRyaWJ1dGUgbmFtZT0iQ29vcmRpbmF0b3JTZXJ2aWNlVHlwZSIgdHlwZT0iZ2F4Ok5vbkVtcHR5U3RyaW5nIiB1c2U9Im9wdGlvbmFsIj4NCgkJCQkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQkJCQlOYW1lIG9mIGEgQ0xSIHR5cGUvY2xhc3MvYWxpYXMgdGhhdCBpbXBsZW1lbnRzIHRoZSBJQWN0aW9uQ29vcmRpbmF0aW9uU2VydmljZSBpbnRlcmZhY2UsIHdoaWNoDQoJCQkJCQkJCQlwcm92aWRlcyBjdXN0b20gY29vcmRpbmF0aW9uIG9mIGFjdGlvbiBleGVjdXRpb24uDQoJCQkJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJCQkJCTx4czphdHRyaWJ1dGUgbmFtZT0iRXhlY3V0aW9uU2VydmljZVR5cGUiIHR5cGU9ImdheDpOb25FbXB0eVN0cmluZyIgdXNlPSJvcHRpb25hbCI+DQoJCQkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJCQkJTmFtZSBvZiBhIENMUiB0eXBlL2NsYXNzL2FsaWFzIHRoYXQgaW1wbGVtZW50cyB0aGUgSUFjdGlvbkV4ZWN1dGlvblNlcnZpY2UgaW50ZXJmYWNlLCB3aGljaA0KCQkJCQkJCQkJcHJvdmlkZXMgY3VzdG9tIGFjdGlvbiBleGVjdXRpb24uDQoJCQkJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJCQkJPC94czpjb21wbGV4VHlwZT4NCgkJCQk8L3hzOmVsZW1lbnQ+DQoJCQk8L3hzOnNlcXVlbmNlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJOYW1lIiB0eXBlPSJnYXg6RG90TmV0SWRlbnRpZmllciIgdXNlPSJyZXF1aXJlZCI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJPHN1bW1hcnkgeG1sbnM9IiI+VGhlIG5hbWUgb2YgdGhlIHJlY2lwZS48L3N1bW1hcnk+DQoJCQkJCQk8cmVtYXJrcyB4bWxucz0iIj5NdXN0IGJlIGEgdmFsaWQgWE1MIG5hbWUgd2l0aG91dCBjb2xvbnMgKE5DTmFtZSkgb3IgZG90cy48L3JlbWFya3M+DQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iUmVjdXJyZW50IiB0eXBlPSJ4czpib29sZWFuIiBkZWZhdWx0PSJ0cnVlIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQk8c3VtbWFyeSB4bWxucz0iIj5TcGVjaWZpZXMgd2hldGhlciB0aGUgcmVjaXBlIHJlbWFpbnMgaW4gcGxhY2UgYWZ0ZXIgZWFjaCBleGVjdXRpb24uPC9zdW1tYXJ5Pg0KCQkJCQkJPHJlbWFya3MgeG1sbnM9IiI+VGhpcyBhdHRyaWJ1dGUgZGVmYXVsdHMgdG8gdHJ1ZSwgd2hpY2ggbWVhbnMgdGhhdCB0aGUgcmVjaXBlIHdpbGwgcmVtYWluIGluIHBsYWNlIGFmdGVyIGl0IGlzIGV4ZWN1dGVkLiBTZXR0aW5nIHRoaXMgYXR0cmlidXRlIHRvIGZhbHNlIHJlbW92ZXMgdGhlIHJlY2lwZSBhZnRlciBpdCBpcyBleGVjdXRlZCBmb3IgdGhlIGZpcnN0IHRpbWUuPC9yZW1hcmtzPg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9IkJvdW5kIiB0eXBlPSJ4czpib29sZWFuIiBkZWZhdWx0PSJ0cnVlIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQk8c3VtbWFyeSB4bWxucz0iIj5TcGVjaWZpZXMgd2hldGhlciB0aGUgcmVjaXBlIGlzIGJvdW5kIG9yIHVuYm91bmQuPC9zdW1tYXJ5Pg0KCQkJCQkJPHJlbWFya3MgeG1sbnM9IiI+VGhpcyBhdHRyaWJ1dGUgZGVmYXVsdHMgdG8gdHJ1ZSwgd2hpY2ggbWVhbnMgdGhhdCB0aGUgcmVjaXBlIGlzDQoJCQkJCQlib3VuZCwgYW5kIG5vIHVuYm91bmQgcmVmZXJlbmNlcyBjYW4gcG9pbnQgdG8gaXQuPC9yZW1hcmtzPg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCTwveHM6Y29tcGxleFR5cGU+DQoJCTx4czprZXkgbmFtZT0iUmVjaXBlQXJndW1lbnRLZXkiPg0KCQkJPHhzOmFubm90YXRpb24+DQoJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCUFyZ3VtZW50IG5hbWVzIG11c3QgYmUgdW5pcXVlIGluc2lkZSBhIHJlY2lwZSBkZWZpbml0aW9uLg0KCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTx4czpzZWxlY3RvciB4cGF0aD0iZ2F4OkFyZ3VtZW50cy9nYXg6QXJndW1lbnQiIC8+DQoJCQk8eHM6ZmllbGQgeHBhdGg9IkBOYW1lIiAvPg0KCQk8L3hzOmtleT4NCgkJPHhzOnVuaXF1ZSBuYW1lPSJBY3Rpb25OYW1lS2V5Ij4NCgkJCTx4czphbm5vdGF0aW9uPg0KCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQlBY3Rpb24gbmFtZXMgbXVzdCBiZSB1bmlxdWUgaW5zaWRlIGEgcmVjaXBlIGRlZmluaXRpb24uDQoJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPHhzOnNlbGVjdG9yIHhwYXRoPSJnYXg6QWN0aW9ucy9nYXg6QWN0aW9uIiAvPg0KCQkJPHhzOmZpZWxkIHhwYXRoPSJATmFtZSIgLz4NCgkJPC94czp1bmlxdWU+DQoJCTx4czprZXlyZWYgbmFtZT0iQWN0aW9uUmVjaXBlQXJndW1lbnRSZWYiIHJlZmVyPSJSZWNpcGVBcmd1bWVudEtleSI+DQoJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJQW4gYWN0aW9uIGNvbnRhaW5zIGlucHV0cyB0aGF0IGluIHR1cm4gY2FuIHJlZmVyZW5jZSBhcmd1bWVudHMgdGhyb3VnaCB0aGUNCgkJCQkJUmVjaXBlQXJndW1lbnQgYXR0cmlidXRlLiBUaGUgcmVmZXJlbmNlZCBhcmd1bWVudCBtdXN0IGJlIGRlZmluZWQgaW4gdGhlIHJlY2lwZS4NCgkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8eHM6c2VsZWN0b3IgeHBhdGg9ImdheDpBY3Rpb25zL2dheDpBY3Rpb24vZ2F4OklucHV0IiAvPg0KCQkJPHhzOmZpZWxkIHhwYXRoPSJAUmVjaXBlQXJndW1lbnQiIC8+DQoJCTwveHM6a2V5cmVmPg0KCQk8eHM6a2V5cmVmIG5hbWU9Ik1vbml0b3JBcmd1bWVudFJlZiIgcmVmZXI9IlJlY2lwZUFyZ3VtZW50S2V5Ij4NCgkJCTx4czphbm5vdGF0aW9uPg0KCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQlBIHZhbHVlIHByb3ZpZGVyIGNhbiBtb25pdG9yIG90aGVyIGFyZ3VtZW50cyBmb3IgY2hhbmdlcy4NCgkJCQkJVGhlIHJlZmVyZW5jZWQgYXJndW1lbnQgbXVzdCBiZSBkZWZpbmVkIGluIHRoZSByZWNpcGUuDQoJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPHhzOnNlbGVjdG9yIHhwYXRoPSJnYXg6QXJndW1lbnRzL2dheDpBcmd1bWVudC9nYXg6VmFsdWVQcm92aWRlci9nYXg6TW9uaXRvckFyZ3VtZW50IiAvPg0KCQkJPHhzOmZpZWxkIHhwYXRoPSJATmFtZSIgLz4NCgkJPC94czprZXlyZWY+DQoJPC94czplbGVtZW50Pg0KCTx4czplbGVtZW50IG5hbWU9IkFjdGlvbiI+DQoJCTx4czphbm5vdGF0aW9uPg0KCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJVGhlIG9wZXJhdGlvbiB0byBiZSBleGVjdXRlZCBieSB0aGUgcmVjaXBlLg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpjb21wbGV4VHlwZT4NCgkJCTx4czpzZXF1ZW5jZSBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0idW5ib3VuZGVkIj4NCgkJCQk8eHM6ZWxlbWVudCByZWY9IklucHV0IiBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0idW5ib3VuZGVkIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQlaZXJvIG9yIG1vcmUgYWN0aW9uIGlucHV0cyB0aGF0IG1heSBiZSBib3VuZCB0byByZWNpcGUgYXJndW1lbnRzIG9yIHRvIGFuIGFjdGlvbiBvdXRwdXQuDQoJCQkJCQkJVGhlIHBhcmFtZXRlci9hcmd1bWVudCBwYWlycyBhcmUgcGFzc2VkIGluIGEgZGljdGlvbmFyeSBtYWludGFpbmVkIGJ5IHRoZSBmcmFtZXdvcmsuDQoJCQkJCQkJRWFjaCBhcmd1bWVudCBpcyBkZXNjcmliZWQgaW4gdGhlIFBhcmFtZXRlciBlbGVtZW50Lg0KCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJPC94czplbGVtZW50Pg0KCQkJCTx4czplbGVtZW50IHJlZj0iT3V0cHV0IiBtaW5PY2N1cnM9IjAiPg0KCQkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJCVplcm8gb3IgbW9yZSBhY3Rpb24gb3V0cHV0cy4NCgkJCQkJCQlUaGUgcGFyYW1ldGVyL2FyZ3VtZW50IHBhaXJzIGFyZSBwYXNzZWQgaW4gYSBkaWN0aW9uYXJ5IG1haW50YWluZWQgYnkgdGhlIGZyYW1ld29yay4NCgkJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJCTwveHM6ZWxlbWVudD4NCgkJCQk8eHM6YW55IG5hbWVzcGFjZT0iIyNvdGhlciIgcHJvY2Vzc0NvbnRlbnRzPSJsYXgiIG1pbk9jY3Vycz0iMCIgbWF4T2NjdXJzPSIxIiAvPg0KCQkJPC94czpzZXF1ZW5jZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iVHlwZSIgdHlwZT0iZ2F4Ok5vbkVtcHR5U3RyaW5nIiB1c2U9InJlcXVpcmVkIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlOYW1lIG9mIGEgQ0xSIHR5cGUsIGNsYXNzLCBvciBhbGlhcyB0aGF0IGltcGxlbWVudHMgdGhlIElBY3Rpb24gaW50ZXJmYWNlLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9Ik5hbWUiIHR5cGU9ImdheDpOb25FbXB0eVN0cmluZyIgdXNlPSJyZXF1aXJlZCIgLz4NCgkJCTx4czphbnlBdHRyaWJ1dGUgcHJvY2Vzc0NvbnRlbnRzPSJsYXgiIC8+DQoJCTwveHM6Y29tcGxleFR5cGU+DQoJCTx4czprZXkgbmFtZT0iSW5wdXROYW1lS2V5Ij4NCgkJCTx4czphbm5vdGF0aW9uPg0KCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQlJbnB1dCBuYW1lcyBtdXN0IGJlIHVuaXF1ZSBpbnNpZGUgYW4gYWN0aW9uIGRlZmluaXRpb24uDQoJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPHhzOnNlbGVjdG9yIHhwYXRoPSJnYXg6SW5wdXQiIC8+DQoJCQk8eHM6ZmllbGQgeHBhdGg9IkBOYW1lIiAvPg0KCQk8L3hzOmtleT4NCgkJPHhzOmtleSBuYW1lPSJPdXRwdXROYW1lS2V5Ij4NCgkJCTx4czphbm5vdGF0aW9uPg0KCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQlPdXRwdXQgbmFtZXMgbXVzdCBiZSB1bmlxdWUgaW5zaWRlIGFuIGFjdGlvbiBkZWZpbml0aW9uLg0KCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTx4czpzZWxlY3RvciB4cGF0aD0iZ2F4Ok91dHB1dCIgLz4NCgkJCTx4czpmaWVsZCB4cGF0aD0iQE5hbWUiIC8+DQoJCTwveHM6a2V5Pg0KCTwveHM6ZWxlbWVudD4NCgk8eHM6ZWxlbWVudCBuYW1lPSJJY29uIj4NCgkJPHhzOmFubm90YXRpb24+DQoJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQlTcGVjaWZpZXMgYW4gaWNvbiB0byB1c2UgdG8gcmVwcmVzZW50IHRoZSBjb21tYW5kIGluIGRpYWxvZyBib3hlcywgY29tbWFuZCBiYXJzLCBhbmQgbWVudXMuDQoJCQkJSWNvbnMgY2FuIGJlIHNwZWNpZmllZCB1c2luZyBlaXRoZXIgYSBmaWxlIG5hbWUgb3IgYSBjb21iaW5hdGlvbiBvZiBhIEdVSUQgKG9wdGlvbmFsKSBhbmQNCgkJCQlhIG51bWVyaWMgaWRlbnRpZmllci4gSWYgbm8gaWNvbiBpcyBzcGVjaWZpZWQsIHRoZSBkZWZhdWx0IGljb24gd2lsbCBiZSB1c2VkLg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpjb21wbGV4VHlwZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iR3VpZCIgdHlwZT0iZ2F4Okd1aWQiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBHVUlEIG9mIHRoZSBwYWNrYWdlIHRoYXQgY29udGFpbnMgdGhlIGljb24gdG8gdXNlLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9IklEIiB0eXBlPSJ4czppbnQiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBJRCBudW1iZXIgb2YgdGhlIGljb24gaW4gYSBETEwgc3BlY2lmaWVkIGJ5IHRoZSBHdWlkIGF0dHJpYnV0ZSwgaWYgcHJlc2VudC4gSWYgbm8NCgkJCQkJCUdVSUQgaXMgc3VwcGxpZWQsIHRoZSBJRCBhdHRyaWJ1dGUgc3BlY2lmaWVzIGFuIGljb24gaW4gdGhlIE1pY3Jvc29mdCBPZmZpY2UgbGlicmFyeQ0KCQkJCQkJYnkgZGVmYXVsdC4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJGaWxlIiB0eXBlPSJnYXg6Tm9uRW1wdHlTdHJpbmciPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBwYXRoIGFuZCBuYW1lIG9mIGFuIGljb24gKC5pY28pIGZpbGUgdG8gdXNlLCBnaXZlbiBhcyBhIHJlbGF0aXZlIHJlZmVyZW5jZSBmcm9tDQoJCQkJCQl0aGUgcm9vdCBsZXZlbCBvZiB0aGUgZ3VpZGFuY2UgcGFja2FnZS4gSWYgdGhlIEZpbGUgYXR0cmlidXRlIGlzIHNwZWNpZmllZCwgdGhlIEd1aWQgDQoJCQkJCQlhbmQgSUQgYXR0cmlidXRlcyB3aWxsIGJlIGlnbm9yZWQuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJPC94czpjb21wbGV4VHlwZT4NCgk8L3hzOmVsZW1lbnQ+DQoJPHhzOmVsZW1lbnQgbmFtZT0iTWVudSI+DQoJCTx4czphbm5vdGF0aW9uPg0KCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJRGVmaW5lcyBhIHN1Ym1lbnUgYW5kIGFzc29jaWF0ZXMgaXQgd2l0aCBhIGNvbW1hbmQgYmFyIGluIFZpc3VhbCBTdHVkaW8uIFN1Ym1lbnVzIGNhbiBob2xkIG9uZQ0KCQkJCW9yIG1vcmUgcmVjaXBlcyBhbmQgYXJlIGEgY29udmVuaWVudCB3YXkgdG8gZ3JvdXAgcmVsYXRlZCByZWNpcGVzLg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpjb21wbGV4VHlwZT4NCgkJCTx4czpzZXF1ZW5jZT4NCgkJCQk8eHM6ZWxlbWVudCByZWY9IkNvbW1hbmRCYXIiIG1pbk9jY3Vycz0iMSIgbWF4T2NjdXJzPSIxIiAvPg0KCQkJPC94czpzZXF1ZW5jZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iTmFtZSIgdHlwZT0iZ2F4OkRvdE5ldElkZW50aWZpZXIiIC8+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9IlRleHQiPg0KCQkJCTx4czpzaW1wbGVUeXBlPg0KCQkJCQk8eHM6cmVzdHJpY3Rpb24gYmFzZT0ieHM6c3RyaW5nIj4NCgkJCQkJCTx4czptaW5MZW5ndGggdmFsdWU9IjEiIC8+DQoJCQkJCQk8eHM6cGF0dGVybiB2YWx1ZT0iW15cblxyXHRdKyIgLz4NCgkJCQkJPC94czpyZXN0cmljdGlvbj4NCgkJCQk8L3hzOnNpbXBsZVR5cGU+DQoJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iUHJpb3JpdHkiIHR5cGU9InhzOmludCIgZGVmYXVsdD0iMTUzNiIgLz4NCgkJPC94czpjb21wbGV4VHlwZT4NCgk8L3hzOmVsZW1lbnQ+DQoJPHhzOmVsZW1lbnQgbmFtZT0iQ29tbWFuZEJhciI+DQoJCTx4czphbm5vdGF0aW9uPg0KCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJVGhlIFZpc3VhbCBTdHVkaW8gY29tbWFuZCBiYXIgb24gd2hpY2ggdG8gcGxhY2UgdGhlIHN1Ym1lbnUgb3IgdGhlIGNvbW1hbmQgZm9yIHRoZSByZWNpcGUuDQoJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCTwveHM6YW5ub3RhdGlvbj4NCgkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJOYW1lIiB0eXBlPSJDb21tYW5kQmFyTmFtZSIgLz4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iTWVudSIgdHlwZT0ieHM6c3RyaW5nIiAvPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJHdWlkIiB0eXBlPSJnYXg6R3VpZCIgLz4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iSUQiIHR5cGU9InhzOmludCIgLz4NCgkJPC94czpjb21wbGV4VHlwZT4NCgkJPHhzOmtleXJlZiBuYW1lPSJNZW51TmFtZVJlZiIgcmVmZXI9Ik1lbnVOYW1lS2V5Ij4NCgkJCTx4czphbm5vdGF0aW9uPg0KCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQlUaGUgcmVmZXJlbmNlZCBtZW51IG11c3QgYmUgZGVmaW5lZCBpbiB0aGUgcGFja2FnZS4NCgkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8eHM6c2VsZWN0b3IgeHBhdGg9Ii4iIC8+DQoJCQk8eHM6ZmllbGQgeHBhdGg9IkBNZW51IiAvPg0KCQk8L3hzOmtleXJlZj4NCgk8L3hzOmVsZW1lbnQ+DQoJPHhzOmVsZW1lbnQgbmFtZT0iSW5wdXQiPg0KCQk8eHM6Y29tcGxleFR5cGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9Ik5hbWUiIHR5cGU9ImdheDpOb25FbXB0eVN0cmluZyIgdXNlPSJyZXF1aXJlZCI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJVGhlIG5hbWUgb2YgdGhlIGJvdW5kIGFjdGlvbiBwYXJhbWV0ZXIuIFRoZSByZWNpcGUgYXJndW1lbnQgcHJvdmlkZXMgdGhlIHZhbHVlIGZvciANCgkJCQkJCXRoZSBhY3Rpb24gcGFyYW1ldGVyLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9IlJlY2lwZUFyZ3VtZW50IiB0eXBlPSJ4czpzdHJpbmciPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBuYW1lIG9mIHRoZSByZWNpcGUgYXJndW1lbnQgdGhhdCBwcm92aWRlcyB0aGUgdmFsdWUgdG8gdGhlIGFjdGlvbiBwYXJhbWV0ZXIuDQoJCQkJCQlUaGlzIGF0dHJpYnV0ZSBpcyBvcHRpb25hbCBhbmQgY2FuIGJlIHJlcGxhY2VkIGJ5IHRoZSBWYWx1ZSBhdHRyaWJ1dGUuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iQWN0aW9uT3V0cHV0IiB0eXBlPSJBY3Rpb25QYXJlbWV0ZXJJZGVudGlmaWVyIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlUaGUgbmFtZSBvZiBhbiBhY3Rpb24gb3V0cHV0IGFyZ3VtZW50IHRoYXQgcHJvdmlkZXMgdGhlIHZhbHVlIHRvIHRoZSBhY3Rpb24gcGFyYW1ldGVyLg0KCQkJCQkJVGhpcyBhdHRyaWJ1dGUgaXMgb3B0aW9uYWwuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJPC94czpjb21wbGV4VHlwZT4NCgk8L3hzOmVsZW1lbnQ+DQoJPHhzOmVsZW1lbnQgbmFtZT0iT3V0cHV0Ij4NCgkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJOYW1lIiB0eXBlPSJ4czpzdHJpbmciIHVzZT0ib3B0aW9uYWwiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCUEgbmFtZSB0byB1c2UgdG8gcmVwcmVzZW50IGFuIGFjdGlvbidzIG91dHB1dC4gT3RoZXIgYWN0aW9ucyBjYW4gc3Vic2VxdWVudGx5IHVzZSB0aGlzDQoJCQkJCQluYW1lIGFzIGlucHV0Lg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCTwveHM6Y29tcGxleFR5cGU+DQoJPC94czplbGVtZW50Pg0KCTx4czplbGVtZW50IG5hbWU9IkFyZ3VtZW50Ij4NCgkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJPHhzOnNlcXVlbmNlPg0KCQkJCTx4czplbGVtZW50IHJlZj0iQ29udmVydGVyIiBtaW5PY2N1cnM9IjAiIC8+DQoJCQkJPHhzOmVsZW1lbnQgcmVmPSJWYWx1ZVByb3ZpZGVyIiBtaW5PY2N1cnM9IjAiIC8+DQoJCQk8L3hzOnNlcXVlbmNlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJOYW1lIiB0eXBlPSJnYXg6Tm9uRW1wdHlTdHJpbmciIHVzZT0icmVxdWlyZWQiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudCB1c2VkIGluIHRoZSByZWNpcGUgYXJndW1lbnQgdGFibGUgYW5kDQoJCQkJCQl0aHJvdWdob3V0IHRoZSBjb25maWd1cmF0aW9uIGZpbGUuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmF0dHJpYnV0ZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iVHlwZSIgdHlwZT0ieHM6c3RyaW5nIiBkZWZhdWx0PSJTeXN0ZW0uU3RyaW5nIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlUaGUgdHlwZSBvZiB0aGUgYXJndW1lbnQsIHNwZWNpZmllZCBhcyBlaXRoZXIgYSBmdWxsIENMUiB0eXBlIG9yIGFuIGFsaWFzLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czphdHRyaWJ1dGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9IlJlcXVpcmVkIiB0eXBlPSJ4czpib29sZWFuIiBkZWZhdWx0PSJ0cnVlIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlTcGVjaWZpZXMgd2hldGhlciB0aGUgYXJndW1lbnQgaXMgcmVxdWlyZWQ7IHRoYXQgaXMsIHRoYXQgaXRzIHZhbHVlIGNhbm5vdCBiZSBOdWxsIGJlZm9yZSBhY3Rpb25zIGFyZSBleGVjdXRlZC4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQk8L3hzOmNvbXBsZXhUeXBlPg0KCTwveHM6ZWxlbWVudD4NCgk8eHM6ZWxlbWVudCBuYW1lPSJDb252ZXJ0ZXIiPg0KCQk8eHM6YW5ub3RhdGlvbj4NCgkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCUFuIG9wdGlvbmFsIGNvbXBvbmVudCB0aGF0IGNhbiBjb252ZXJ0IGFuZCB2YWxpZGF0ZSB0aGUgYXJndW1lbnQgdmFsdWUuDQoJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCTwveHM6YW5ub3RhdGlvbj4NCgkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJUeXBlIiB1c2U9InJlcXVpcmVkIiB0eXBlPSJnYXg6Tm9uRW1wdHlTdHJpbmciPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBuYW1lIG9mIGEgQ0xSIHR5cGUsIGNsYXNzLCBvciBhbGlhcyB0aGF0IGltcGxlbWVudHMgdGhlIElWYWx1ZVByb3ZpZGVyIGludGVyZmFjZS4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmFueUF0dHJpYnV0ZSBwcm9jZXNzQ29udGVudHM9ImxheCIgLz4NCgkJPC94czpjb21wbGV4VHlwZT4NCgk8L3hzOmVsZW1lbnQ+DQoJPHhzOmVsZW1lbnQgbmFtZT0iVmFsdWVQcm92aWRlciI+DQoJCTx4czphbm5vdGF0aW9uPg0KCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJQSBjb21wb25lbnQgdGhhdCBjYW4gcHJvdmlkZSBhIHZhbHVlIGZvciB0aGUgYXJndW1lbnQuDQoJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCTwveHM6YW5ub3RhdGlvbj4NCgkJPHhzOmNvbXBsZXhUeXBlPg0KCQkJPHhzOnNlcXVlbmNlPg0KCQkJCTx4czplbGVtZW50IHJlZj0iTW9uaXRvckFyZ3VtZW50IiBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0idW5ib3VuZGVkIj4NCgkJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCQk8c3VtbWFyeSB4bWxucz0iIj5BbiBvcHRpb25hbCBsaXN0IG9mIGFyZ3VtZW50cyB0aGF0IHdpbGwgYmUgbW9uaXRvcmVkIGZvciBjaGFuZ2VzLjwvc3VtbWFyeT4NCgkJCQkJCQk8cmVtYXJrcyB4bWxucz0iIj5UaGUgSVZhbHVlUHJvdmlkZXIuT25Bcmd1bWVudENoYW5nZWQgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyIGFuIGFyZ3VtZW50IGluIHRoZSBsaXN0IGNoYW5nZXMuPC9yZW1hcmtzPg0KCQkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCQk8L3hzOmFubm90YXRpb24+DQoJCQkJPC94czplbGVtZW50Pg0KCQkJPC94czpzZXF1ZW5jZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iVHlwZSIgdXNlPSJyZXF1aXJlZCIgdHlwZT0iZ2F4Ok5vbkVtcHR5U3RyaW5nIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlOYW1lIG9mIGEgQ0xSIHR5cGUsIGNsYXNzLCBvciBhbGlhcyB0aGF0IGltcGxlbWVudHMgdGhlIElWYWx1ZVByb3ZpZGVyIGludGVyZmFjZS4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmFueUF0dHJpYnV0ZSBwcm9jZXNzQ29udGVudHM9ImxheCIgLz4NCgkJPC94czpjb21wbGV4VHlwZT4NCgk8L3hzOmVsZW1lbnQ+DQoJPHhzOmVsZW1lbnQgbmFtZT0iTW9uaXRvckFyZ3VtZW50Ij4NCgkJPHhzOmFubm90YXRpb24+DQoJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQlQb2ludHMgdG8gYW4gYXJndW1lbnQgdGhhdCB3aWxsIGJlIG1vbml0b3JlZCBieSBhIHZhbHVlIHByb3ZpZGVyLg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpjb21wbGV4VHlwZT4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iTmFtZSIgdHlwZT0iZ2F4Ok5vbkVtcHR5U3RyaW5nIiB1c2U9InJlcXVpcmVkIiAvPg0KCQk8L3hzOmNvbXBsZXhUeXBlPg0KCTwveHM6ZWxlbWVudD4NCgk8eHM6ZWxlbWVudCBuYW1lPSJUeXBlQWxpYXMiPg0KCQk8eHM6YW5ub3RhdGlvbj4NCgkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCURlZmluZXMgYW4gYWxpYXMgdGhhdCBjYW4gYmUgdXNlZCB0byByZXByZXNlbnQgYSBmdWxseS1xdWFsaWZpZWQgQ0xSIHR5cGUgaW4gdGhlIA0KCQkJCWNvbmZpZ3VyYXRpb24gZmlsZS4NCgkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJPC94czphbm5vdGF0aW9uPg0KCQk8eHM6Y29tcGxleFR5cGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9Ik5hbWUiIHR5cGU9ImdheDpOb25FbXB0eVN0cmluZyIgdXNlPSJyZXF1aXJlZCIgLz4NCgkJCTx4czphdHRyaWJ1dGUgbmFtZT0iVHlwZSIgdHlwZT0iZ2F4Ok5vbkVtcHR5U3RyaW5nIiB1c2U9InJlcXVpcmVkIiAvPg0KCQk8L3hzOmNvbXBsZXhUeXBlPg0KCTwveHM6ZWxlbWVudD4NCgk8eHM6c2ltcGxlVHlwZSBuYW1lPSJHdWlkIj4NCgkJPHhzOnJlc3RyaWN0aW9uIGJhc2U9InhzOnN0cmluZyI+DQoJCQk8eHM6cGF0dGVybiB2YWx1ZT0iXlswLTlhLWZBLUZdezh9LShbMC05YS1mQS1GXXs0fS0pezN9WzAtOWEtZkEtRl17MTJ9JCIgLz4NCgkJPC94czpyZXN0cmljdGlvbj4NCgk8L3hzOnNpbXBsZVR5cGU+DQoJPHhzOnNpbXBsZVR5cGUgbmFtZT0iRG90RnJlZU5hbWUiPg0KCQk8eHM6YW5ub3RhdGlvbj4NCgkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCUEgdHlwZSBkZWZpbml0aW9uIHRoYXQgZG9lc24ndCBhbGxvdyBkb3QgKCIuIikgY2hhcmFjdGVycyBpbiBhIHN0cmluZy4NCgkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJPC94czphbm5vdGF0aW9uPg0KCQk8eHM6cmVzdHJpY3Rpb24gYmFzZT0ieHM6c3RyaW5nIj4NCgkJCTx4czpwYXR0ZXJuIHZhbHVlPSJbXi5dKyIgLz4NCgkJPC94czpyZXN0cmljdGlvbj4NCgk8L3hzOnNpbXBsZVR5cGU+DQoJPHhzOnNpbXBsZVR5cGUgbmFtZT0iRG90TmV0SWRlbnRpZmllciI+DQoJCTx4czphbm5vdGF0aW9uPg0KCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJQSB0eXBlIGRlZmluaXRpb24gdGhhdCBvbmx5IGFsbG93cyB2YWxpZCAuTkVUIGlkZW50aWZpZXJzLg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpyZXN0cmljdGlvbiBiYXNlPSJ4czpOQ05hbWUiPg0KCQkJPHhzOnBhdHRlcm4gdmFsdWU9IlteLl0rIiAvPg0KCQk8L3hzOnJlc3RyaWN0aW9uPg0KCTwveHM6c2ltcGxlVHlwZT4NCgk8eHM6c2ltcGxlVHlwZSBuYW1lPSJBY3Rpb25QYXJlbWV0ZXJJZGVudGlmaWVyIj4NCgkJPHhzOmFubm90YXRpb24+DQoJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQlBIHR5cGUgZGVmaW5pdGlvbiB0aGF0IG9ubHkgYWxsb3dzIHZhbGlkIC5ORVQgaWRlbnRpZmllcnMgb2YgdGhlIGZvcm0geC55Lg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpyZXN0cmljdGlvbiBiYXNlPSJ4czpzdHJpbmciPg0KCQkJPHhzOnBhdHRlcm4gdmFsdWU9IlthLXpBLVpdW2EtekEtWjAtOV0qLlthLXpBLVpdW2EtekEtWjAtOV0qIiAvPg0KCQk8L3hzOnJlc3RyaWN0aW9uPg0KCTwveHM6c2ltcGxlVHlwZT4NCgk8eHM6c2ltcGxlVHlwZSBuYW1lPSJUcmFjZUxldmVsIj4NCgkJPHhzOmFubm90YXRpb24+DQoJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQlBIHR5cGUgZGVmaW5pdGlvbiB0aGF0IG9ubHkgYWxsb3dzIHZhbHVlcyBkZWZpbmVkIGJ5IHRoZSAuTkVUIEZyYW1ld29yaydzDQoJCQkJU3lzdGVtLkRpYWdub3N0aWNzLlRyYWNlTGV2ZWwgZW51bWVyYXRpb24uIFNlZSB0aGUgLk5FVCBGcmFtZXdvcmsgZG9jdW1lbnRhdGlvbg0KCQkJCWZvciBtb3JlIGluZm9ybWF0aW9uLg0KCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQk8L3hzOmFubm90YXRpb24+DQoJCTx4czpyZXN0cmljdGlvbiBiYXNlPSJ4czpzdHJpbmciPg0KCQkJPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJFcnJvciIgLz4NCgkJCTx4czplbnVtZXJhdGlvbiB2YWx1ZT0iSW5mbyIgLz4NCgkJCTx4czplbnVtZXJhdGlvbiB2YWx1ZT0iT2ZmIiAvPg0KCQkJPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJXYXJuaW5nIiAvPg0KCQkJPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJWZXJib3NlIiAvPg0KCQk8L3hzOnJlc3RyaWN0aW9uPg0KCTwveHM6c2ltcGxlVHlwZT4NCgk8eHM6c2ltcGxlVHlwZSBuYW1lPSJDb21tYW5kQmFyTmFtZSI+DQoJCTx4czphbm5vdGF0aW9uPg0KCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJQSB0eXBlIGRlZmluaXRpb24gdGhhdCBlbnVtZXJhdGVzIGEgbGlzdCBvZiBmcmllbmRseSBuYW1lcyBmb3IgVmlzdWFsIFN0dWRpbyBjb21tYW5kIGJhcnMuDQoJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCTwveHM6YW5ub3RhdGlvbj4NCgkJPHhzOnJlc3RyaWN0aW9uIGJhc2U9InhzOnN0cmluZyI+DQoJCQk8eHM6ZW51bWVyYXRpb24gdmFsdWU9IlNvbHV0aW9uIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlUaGUgcm9vdCBsZXZlbCBjb250ZXh0IG1lbnUgb2YgdGhlIHNvbHV0aW9uIGluIFNvbHV0aW9uIEV4cGxvcmVyLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czplbnVtZXJhdGlvbj4NCgkJCTx4czplbnVtZXJhdGlvbiB2YWx1ZT0iUHJvamVjdCI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJVGhlIGNvbnRleHQgbWVudSBvZiBhIHNpbmdsZSBwcm9qZWN0IGluIFNvbHV0aW9uIEV4cGxvcmVyLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czplbnVtZXJhdGlvbj4NCgkJCTx4czplbnVtZXJhdGlvbiB2YWx1ZT0iV2ViIFByb2plY3QiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBjb250ZXh0IG1lbnUgb2YgYSBzaW5nbGUgd2ViIHByb2plY3QgaW4gU29sdXRpb24gRXhwbG9yZXIuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmVudW1lcmF0aW9uPg0KCQkJPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJJdGVtIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlUaGUgY29udGV4dCBtZW51IG9mIGEgc2luZ2xlIGl0ZW0gaW4gU29sdXRpb24gRXhwbG9yZXIuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmVudW1lcmF0aW9uPg0KCQkJPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJXZWIgSXRlbSI+DQoJCQkJPHhzOmFubm90YXRpb24+DQoJCQkJCTx4czpkb2N1bWVudGF0aW9uPg0KCQkJCQkJVGhlIGNvbnRleHQgbWVudSBvZiBhIHNpbmdsZSBpdGVtIGluc2lkZSBhIHdlYiBwcm9qZWN0IGluIFNvbHV0aW9uIEV4cGxvcmVyLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czplbnVtZXJhdGlvbj4NCgkJCTx4czplbnVtZXJhdGlvbiB2YWx1ZT0iRm9sZGVyIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlUaGUgY29udGV4dCBtZW51IG9mIGEgZm9sZGVyIGluc2lkZSBhIHByb2plY3QgaW4gU29sdXRpb24gRXhwbG9yZXIuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmVudW1lcmF0aW9uPg0KCQkJPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJXZWIgRm9sZGVyIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlUaGUgY29udGV4dCBtZW51IG9mIGEgZm9sZGVyIGluc2lkZSBhIHdlYiBwcm9qZWN0IGluIFNvbHV0aW9uIEV4cGxvcmVyLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czplbnVtZXJhdGlvbj4NCgkJCTx4czplbnVtZXJhdGlvbiB2YWx1ZT0iU29sdXRpb24gRm9sZGVyIj4NCgkJCQk8eHM6YW5ub3RhdGlvbj4NCgkJCQkJPHhzOmRvY3VtZW50YXRpb24+DQoJCQkJCQlUaGUgY29udGV4dCBtZW51IG9mIGEgc29sdXRpb24gZm9sZGVyIGluIFNvbHV0aW9uIEV4cGxvcmVyLg0KCQkJCQk8L3hzOmRvY3VtZW50YXRpb24+DQoJCQkJPC94czphbm5vdGF0aW9uPg0KCQkJPC94czplbnVtZXJhdGlvbj4NCgkJCTx4czplbnVtZXJhdGlvbiB2YWx1ZT0iUHJvamVjdCBBZGQiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBjb250ZXh0IG1lbnUgb2YgdGhlIEFkZCBtZW51IG9mIGEgcHJvamVjdCBpbiBTb2x1dGlvbiBFeHBsb3Jlci4gVXNlIGl0IHRvIEFkZCBOZXcgSXRlbXMuDQoJCQkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQk8L3hzOmFubm90YXRpb24+DQoJCQk8L3hzOmVudW1lcmF0aW9uPg0KCQkJPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJTb2x1dGlvbiBBZGQiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBjb250ZXh0IG1lbnUgb2YgdGhlIEFkZCBtZW51IG9mIHRoZSBzb2x1dGlvbiByb290IGluIFNvbHV0aW9uIEV4cGxvcmVyLiBVc2UgaXQgdG8gQWRkIE5ldyBQcm9qZWN0cy4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6ZW51bWVyYXRpb24+DQoJCQk8eHM6ZW51bWVyYXRpb24gdmFsdWU9IlNvbHV0aW9uIEZvbGRlciBBZGQiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCVRoZSBjb250ZXh0IG1lbnUgb2YgdGhlIEFkZCBtZW51IG9mIGEgc29sdXRpb24gZm9sZGVyIGluIFNvbHV0aW9uIEV4cGxvcmVyLiBVc2UgaXQgdG8gQWRkIE5ldyBQcm9qZWN0cy4NCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6ZW51bWVyYXRpb24+DQoJCTwveHM6cmVzdHJpY3Rpb24+DQoJPC94czpzaW1wbGVUeXBlPg0KCTx4czpzaW1wbGVUeXBlIG5hbWU9Ik5vbkVtcHR5U3RyaW5nIj4NCgkJPHhzOmFubm90YXRpb24+DQoJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQlBIHR5cGUgZGVmaW5pdGlvbiB0aGF0IHJlcXVpcmVzIGEgc3RyaW5nIHRvIGNvbnRhaW4gYXQgbGVhc3Qgb25lIGNoYXJhY3Rlci4NCgkJCTwveHM6ZG9jdW1lbnRhdGlvbj4NCgkJPC94czphbm5vdGF0aW9uPg0KCQk8eHM6cmVzdHJpY3Rpb24gYmFzZT0ieHM6c3RyaW5nIj4NCgkJCTx4czptaW5MZW5ndGggdmFsdWU9IjEiIC8+DQoJCTwveHM6cmVzdHJpY3Rpb24+DQoJPC94czpzaW1wbGVUeXBlPg0KPC94czpzY2hlbWE+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>2</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/ManifestConfig.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIDxhdXRvZ2VuZXJhdGVkPg0KLy8gICAgIFRoaXMgY29kZSB3YXMgZ2VuZXJhdGVkIGJ5IHRoZSBNdnAuWG1sLlhzZEdlbiB0b29sLg0KLy8gICAgIFRvb2wgVmVyc2lvbjogICAgMS4xLjEuMA0KLy8gICAgIFJ1bnRpbWUgVmVyc2lvbjogMi4wLjUwNzI3LjQyDQovLw0KLy8gICAgIENoYW5nZXMgdG8gdGhpcyBmaWxlIG1heSBjYXVzZSBpbmNvcnJlY3QgYmVoYXZpb3IgYW5kIHdpbGwgYmUgbG9zdCBpZg0KLy8gICAgIHRoZSBjb2RlIGlzIHJlZ2VuZXJhdGVkLg0KLy8gPC9hdXRvZ2VuZXJhdGVkPg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIFdvcmthcm91bmQgZm9yIGJ1ZyBodHRwOi8vbGFiLm1zZG4ubWljcm9zb2Z0LmNvbS9wcm9kdWN0ZmVlZGJhY2svdmlld2ZlZWRiYWNrLmFzcHg/ZmVlZGJhY2tpZD1kNDU3YTM2ZS0wY2U4LTQzNjgtOWEyNy05Mjc2Mjg2MGQ4ZTENCiNwcmFnbWEgd2FybmluZyBkaXNhYmxlIDE1OTENCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0DQp7DQogICAgDQogICAgDQogICAgLy8vIDxyZW1hcmtzLz4NCiAgICBbU3lzdGVtLkNvZGVEb20uQ29tcGlsZXIuR2VuZXJhdGVkQ29kZUF0dHJpYnV0ZSgiU3lzdGVtLlhtbCIsICIyLjAuNTA3MjcuNDIiKV0NCiAgICBbU3lzdGVtLlNlcmlhbGl6YWJsZUF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWdnZXJTdGVwVGhyb3VnaEF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduZXJDYXRlZ29yeUF0dHJpYnV0ZSgiY29kZSIpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sVHlwZUF0dHJpYnV0ZShBbm9ueW1vdXNUeXBlPXRydWUpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sUm9vdEF0dHJpYnV0ZShOYW1lc3BhY2U9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIFJlY2lwZUZyYW1ld29yaw0KICAgIHsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgSG9zdFtdIGhvc3RzRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIEd1aWRhbmNlUGFja2FnZVtdIGd1aWRhbmNlUGFja2FnZXNGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIHNjaGVtYVZlcnNpb25GaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgVHJhY2VMZXZlbCB0cmFjZUxldmVsRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwdWJsaWMgUmVjaXBlRnJhbWV3b3JrKCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zY2hlbWFWZXJzaW9uRmllbGQgPSAiMS4wIjsNCiAgICAgICAgICAgIHRoaXMudHJhY2VMZXZlbEZpZWxkID0gVHJhY2VMZXZlbC5FcnJvcjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBcnJheUl0ZW1BdHRyaWJ1dGUoIkhvc3QiLCBJc051bGxhYmxlPWZhbHNlKV0NCiAgICAgICAgcHVibGljIEhvc3RbXSBIb3N0cw0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ob3N0c0ZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5ob3N0c0ZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXJyYXlJdGVtQXR0cmlidXRlKCJHdWlkYW5jZVBhY2thZ2UiLCBJc051bGxhYmxlPWZhbHNlKV0NCiAgICAgICAgcHVibGljIEd1aWRhbmNlUGFja2FnZVtdIEd1aWRhbmNlUGFja2FnZXMNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3VpZGFuY2VQYWNrYWdlc0ZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5ndWlkYW5jZVBhY2thZ2VzRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBTY2hlbWFWZXJzaW9uDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNjaGVtYVZlcnNpb25GaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuc2NoZW1hVmVyc2lvbkZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVmYXVsdFZhbHVlQXR0cmlidXRlKFRyYWNlTGV2ZWwuRXJyb3IpXQ0KICAgICAgICBwdWJsaWMgVHJhY2VMZXZlbCBUcmFjZUxldmVsDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYWNlTGV2ZWxGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMudHJhY2VMZXZlbEZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLy8vIDxyZW1hcmtzLz4NCiAgICBbU3lzdGVtLkNvZGVEb20uQ29tcGlsZXIuR2VuZXJhdGVkQ29kZUF0dHJpYnV0ZSgiU3lzdGVtLlhtbCIsICIyLjAuNTA3MjcuNDIiKV0NCiAgICBbU3lzdGVtLlNlcmlhbGl6YWJsZUF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWdnZXJTdGVwVGhyb3VnaEF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduZXJDYXRlZ29yeUF0dHJpYnV0ZSgiY29kZSIpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sVHlwZUF0dHJpYnV0ZShBbm9ueW1vdXNUeXBlPXRydWUpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sUm9vdEF0dHJpYnV0ZShOYW1lc3BhY2U9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIEhvc3QNCiAgICB7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBuYW1lRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBpbnN0YWxsZXJUeXBlRmllbGQ7DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZUZpZWxkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5uYW1lRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBJbnN0YWxsZXJUeXBlDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbGxlclR5cGVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFsbGVyVHlwZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLy8vIDxyZW1hcmtzLz4NCiAgICBbU3lzdGVtLkNvZGVEb20uQ29tcGlsZXIuR2VuZXJhdGVkQ29kZUF0dHJpYnV0ZSgiU3lzdGVtLlhtbCIsICIyLjAuNTA3MjcuNDIiKV0NCiAgICBbU3lzdGVtLlNlcmlhbGl6YWJsZUF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWdnZXJTdGVwVGhyb3VnaEF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduZXJDYXRlZ29yeUF0dHJpYnV0ZSgiY29kZSIpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sVHlwZUF0dHJpYnV0ZShBbm9ueW1vdXNUeXBlPXRydWUpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sUm9vdEF0dHJpYnV0ZShOYW1lc3BhY2U9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIsIElzTnVsbGFibGU9ZmFsc2UpXQ0KICAgIHB1YmxpYyBwYXJ0aWFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZQ0KICAgIHsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIG5hbWVGaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIGNhcHRpb25GaWVsZDsNCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgc3RyaW5nIGRlc2NyaXB0aW9uRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyB2ZXJzaW9uRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBob3N0RmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBndWlkRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwcml2YXRlIHN0cmluZyBjb25maWd1cmF0aW9uRmlsZUZpZWxkOw0KICAgICAgICANCiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgdGltZXN0YW1wRmllbGQ7DQogICAgICAgIA0KICAgICAgICBwdWJsaWMgR3VpZGFuY2VQYWNrYWdlKCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5ob3N0RmllbGQgPSAiVmlzdWFsU3R1ZGlvIjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWVGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgQ2FwdGlvbg0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXB0aW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNhcHRpb25GaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBWZXJzaW9uDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnNpb25GaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMudmVyc2lvbkZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVmYXVsdFZhbHVlQXR0cmlidXRlKCJWaXN1YWxTdHVkaW8iKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBIb3N0DQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhvc3RGaWVsZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuaG9zdEZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sQXR0cmlidXRlQXR0cmlidXRlKCldDQogICAgICAgIHB1YmxpYyBzdHJpbmcgR3VpZA0KICAgICAgICB7DQogICAgICAgICAgICBnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ndWlkRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmd1aWRGaWVsZCA9IHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBbU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbEF0dHJpYnV0ZUF0dHJpYnV0ZSgpXQ0KICAgICAgICBwdWJsaWMgc3RyaW5nIENvbmZpZ3VyYXRpb25GaWxlDQogICAgICAgIHsNCiAgICAgICAgICAgIGdldA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb25GaWxlRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb25GaWxlRmllbGQgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgW1N5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxBdHRyaWJ1dGVBdHRyaWJ1dGUoKV0NCiAgICAgICAgcHVibGljIHN0cmluZyBUaW1lc3RhbXANCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wRmllbGQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRpbWVzdGFtcEZpZWxkID0gdmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLy8vIDxyZW1hcmtzLz4NCiAgICBbU3lzdGVtLkNvZGVEb20uQ29tcGlsZXIuR2VuZXJhdGVkQ29kZUF0dHJpYnV0ZSgiU3lzdGVtLlhtbCIsICIyLjAuNTA3MjcuNDIiKV0NCiAgICBbU3lzdGVtLlNlcmlhbGl6YWJsZUF0dHJpYnV0ZSgpXQ0KICAgIFtTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sVHlwZUF0dHJpYnV0ZShOYW1lc3BhY2U9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpXQ0KICAgIHB1YmxpYyBlbnVtIFRyYWNlTGV2ZWwNCiAgICB7DQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBFcnJvciwNCiAgICAgICAgDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIEluZm8sDQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBPZmYsDQogICAgICAgIA0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBXYXJuaW5nLA0KICAgICAgICANCiAgICAgICAgLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgVmVyYm9zZSwNCiAgICB9DQp9DQoNCiNwcmFnbWEgd2FybmluZyByZXN0b3JlIDE1OTE=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>2</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/ManifestConfig.Serialization.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">I3JlZ2lvbiBPcmlnaW5hbCBYbWxTZXJpYWxpemVyIGNvZGUNCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiNpZiBfRFlOQU1JQ19YTUxTRVJJQUxJWkVSX0NPTVBJTEFUSU9ODQpbYXNzZW1ibHk6U3lzdGVtLlNlY3VyaXR5LkFsbG93UGFydGlhbGx5VHJ1c3RlZENhbGxlcnMoKV0NClthc3NlbWJseTpTeXN0ZW0uU2VjdXJpdHkuU2VjdXJpdHlUcmFuc3BhcmVudCgpXQ0KI2VuZGlmDQpbYXNzZW1ibHk6U3lzdGVtLlJlZmxlY3Rpb24uQXNzZW1ibHlWZXJzaW9uQXR0cmlidXRlKCIxLjAuNTA1MDUuMCIpXQ0KbmFtZXNwYWNlIE1pY3Jvc29mdC5YbWwuU2VyaWFsaXphdGlvbi5HZW5lcmF0ZWRBc3NlbWJseSB7DQoNCiAgICBwdWJsaWMgY2xhc3MgWG1sU2VyaWFsaXphdGlvbldyaXRlckd1aWRhbmNlUGFja2FnZSA6IFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIHsNCg0KICAgICAgICBwdWJsaWMgdm9pZCBXcml0ZTNfR3VpZGFuY2VQYWNrYWdlKG9iamVjdCBvKSB7DQogICAgICAgICAgICBXcml0ZVN0YXJ0RG9jdW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUVtcHR5VGFnKEAiR3VpZGFuY2VQYWNrYWdlIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBUb3BMZXZlbEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFdyaXRlMl9HdWlkYW5jZVBhY2thZ2UoQCJHdWlkYW5jZVBhY2thZ2UiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSlvKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUyX0d1aWRhbmNlUGFja2FnZShzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJDYXB0aW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBDYXB0aW9uKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkRlc2NyaXB0aW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBEZXNjcmlwdGlvbikpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJWZXJzaW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBWZXJzaW9uKSk7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ASG9zdCkgIT0gQCJWaXN1YWxTdHVkaW8iKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJIb3N0IiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBIb3N0KSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkd1aWQiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEd1aWQpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiQ29uZmlndXJhdGlvbkZpbGUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQENvbmZpZ3VyYXRpb25GaWxlKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlRpbWVzdGFtcCIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVGltZXN0YW1wKSk7DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0Q2FsbGJhY2tzKCkgew0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIGNsYXNzIFhtbFNlcmlhbGl6YXRpb25SZWFkZXJHdWlkYW5jZVBhY2thZ2UgOiBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciB7DQoNCiAgICAgICAgcHVibGljIG9iamVjdCBSZWFkM19HdWlkYW5jZVBhY2thZ2UoKSB7DQogICAgICAgICAgICBvYmplY3QgbyA9IG51bGw7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDFfR3VpZGFuY2VQYWNrYWdlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgbyA9IFJlYWQyX0d1aWRhbmNlUGFja2FnZShmYWxzZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duTm9kZUV4Y2VwdGlvbigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0Okd1aWRhbmNlUGFja2FnZSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIChvYmplY3QpbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UgUmVhZDJfR3VpZGFuY2VQYWNrYWdlKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSB4c2lUeXBlID0gY2hlY2tUeXBlID8gR2V0WHNpVHlwZSgpIDogbnVsbDsNCiAgICAgICAgICAgIGJvb2wgaXNOdWxsID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgaXNOdWxsID0gUmVhZE51bGwoKTsNCiAgICAgICAgICAgIGlmIChjaGVja1R5cGUpIHsNCiAgICAgICAgICAgIGlmICh4c2lUeXBlID09IG51bGwgfHwgKChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWUgPT0gKG9iamVjdClpZDNfSXRlbSAmJiAob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lc3BhY2UgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbigoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzTnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UoKTsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbOF07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFswXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9OYW1lICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ATmFtZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFswXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzFdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ1X0NhcHRpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBDYXB0aW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDZfRGVzY3JpcHRpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBEZXNjcmlwdGlvbiA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ3X1ZlcnNpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBWZXJzaW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDhfSG9zdCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQEhvc3QgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs1XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkOV9HdWlkICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AR3VpZCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs1XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzZdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxMF9Db25maWd1cmF0aW9uRmlsZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQENvbmZpZ3VyYXRpb25GaWxlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzZdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbN10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDExX1RpbWVzdGFtcCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFRpbWVzdGFtcCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs3XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOk5hbWUsIDpDYXB0aW9uLCA6RGVzY3JpcHRpb24sIDpWZXJzaW9uLCA6SG9zdCwgOkd1aWQsIDpDb25maWd1cmF0aW9uRmlsZSwgOlRpbWVzdGFtcCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczAgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MCA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMwLCByZWYgcmVhZGVyQ291bnQwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEluaXRDYWxsYmFja3MoKSB7DQogICAgICAgIH0NCg0KICAgICAgICBzdHJpbmcgaWQ0X05hbWU7DQogICAgICAgIHN0cmluZyBpZDEwX0NvbmZpZ3VyYXRpb25GaWxlOw0KICAgICAgICBzdHJpbmcgaWQzX0l0ZW07DQogICAgICAgIHN0cmluZyBpZDJfSXRlbTsNCiAgICAgICAgc3RyaW5nIGlkOF9Ib3N0Ow0KICAgICAgICBzdHJpbmcgaWQ3X1ZlcnNpb247DQogICAgICAgIHN0cmluZyBpZDlfR3VpZDsNCiAgICAgICAgc3RyaW5nIGlkMTFfVGltZXN0YW1wOw0KICAgICAgICBzdHJpbmcgaWQ2X0Rlc2NyaXB0aW9uOw0KICAgICAgICBzdHJpbmcgaWQ1X0NhcHRpb247DQogICAgICAgIHN0cmluZyBpZDFfR3VpZGFuY2VQYWNrYWdlOw0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEluaXRJRHMoKSB7DQogICAgICAgICAgICBpZDRfTmFtZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiTmFtZSIpOw0KICAgICAgICAgICAgaWQxMF9Db25maWd1cmF0aW9uRmlsZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiQ29uZmlndXJhdGlvbkZpbGUiKTsNCiAgICAgICAgICAgIGlkM19JdGVtID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCIiKTsNCiAgICAgICAgICAgIGlkMl9JdGVtID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgIGlkOF9Ib3N0ID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJIb3N0Iik7DQogICAgICAgICAgICBpZDdfVmVyc2lvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVmVyc2lvbiIpOw0KICAgICAgICAgICAgaWQ5X0d1aWQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWQiKTsNCiAgICAgICAgICAgIGlkMTFfVGltZXN0YW1wID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJUaW1lc3RhbXAiKTsNCiAgICAgICAgICAgIGlkNl9EZXNjcmlwdGlvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiRGVzY3JpcHRpb24iKTsNCiAgICAgICAgICAgIGlkNV9DYXB0aW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJDYXB0aW9uIik7DQogICAgICAgICAgICBpZDFfR3VpZGFuY2VQYWNrYWdlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJHdWlkYW5jZVBhY2thZ2UiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBYbWxTZXJpYWxpemVyMSA6IFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemVyIHsNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uUmVhZGVyIENyZWF0ZVJlYWRlcigpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgWG1sU2VyaWFsaXphdGlvblJlYWRlckd1aWRhbmNlUGFja2FnZSgpOw0KICAgICAgICB9DQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciBDcmVhdGVXcml0ZXIoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFhtbFNlcmlhbGl6YXRpb25Xcml0ZXJHdWlkYW5jZVBhY2thZ2UoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBzZWFsZWQgY2xhc3MgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplciA6IFhtbFNlcmlhbGl6ZXIxIHsNCg0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkJvb2xlYW4gQ2FuRGVzZXJpYWxpemUoU3lzdGVtLlhtbC5YbWxSZWFkZXIgeG1sUmVhZGVyKSB7DQogICAgICAgICAgICByZXR1cm4geG1sUmVhZGVyLklzU3RhcnRFbGVtZW50KEAiR3VpZGFuY2VQYWNrYWdlIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFNlcmlhbGl6ZShvYmplY3Qgb2JqZWN0VG9TZXJpYWxpemUsIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIHdyaXRlcikgew0KICAgICAgICAgICAgKChYbWxTZXJpYWxpemF0aW9uV3JpdGVyR3VpZGFuY2VQYWNrYWdlKXdyaXRlcikuV3JpdGUzX0d1aWRhbmNlUGFja2FnZShvYmplY3RUb1NlcmlhbGl6ZSk7DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgb2JqZWN0IERlc2VyaWFsaXplKFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uUmVhZGVyIHJlYWRlcikgew0KICAgICAgICAgICAgcmV0dXJuICgoWG1sU2VyaWFsaXphdGlvblJlYWRlckd1aWRhbmNlUGFja2FnZSlyZWFkZXIpLlJlYWQzX0d1aWRhbmNlUGFja2FnZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIGNsYXNzIFhtbFNlcmlhbGl6ZXJDb250cmFjdCA6IGdsb2JhbDo6U3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6ZXJJbXBsZW1lbnRhdGlvbiB7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBnbG9iYWw6OlN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uUmVhZGVyIFJlYWRlciB7IGdldCB7IHJldHVybiBuZXcgWG1sU2VyaWFsaXphdGlvblJlYWRlckd1aWRhbmNlUGFja2FnZSgpOyB9IH0NCiAgICAgICAgcHVibGljIG92ZXJyaWRlIGdsb2JhbDo6U3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgV3JpdGVyIHsgZ2V0IHsgcmV0dXJuIG5ldyBYbWxTZXJpYWxpemF0aW9uV3JpdGVyR3VpZGFuY2VQYWNrYWdlKCk7IH0gfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHJlYWRNZXRob2RzID0gbnVsbDsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgUmVhZE1ldGhvZHMgew0KICAgICAgICAgICAgZ2V0IHsNCiAgICAgICAgICAgICAgICBpZiAocmVhZE1ldGhvZHMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wW0AiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2U6aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0OjpGYWxzZToiXSA9IEAiUmVhZDNfR3VpZGFuY2VQYWNrYWdlIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYWRNZXRob2RzID09IG51bGwpIHJlYWRNZXRob2RzID0gX3RtcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRNZXRob2RzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgd3JpdGVNZXRob2RzID0gbnVsbDsNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgV3JpdGVNZXRob2RzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHdyaXRlTWV0aG9kcyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgX3RtcCA9IG5ldyBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlKCk7DQogICAgICAgICAgICAgICAgICAgIF90bXBbQCJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZTpodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6OkZhbHNlOiJdID0gQCJXcml0ZTNfR3VpZGFuY2VQYWNrYWdlIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdyaXRlTWV0aG9kcyA9PSBudWxsKSB3cml0ZU1ldGhvZHMgPSBfdG1wOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVNZXRob2RzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgdHlwZWRTZXJpYWxpemVycyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFR5cGVkU2VyaWFsaXplcnMgew0KICAgICAgICAgICAgZ2V0IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZWRTZXJpYWxpemVycyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUgX3RtcCA9IG5ldyBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlKCk7DQogICAgICAgICAgICAgICAgICAgIF90bXAuQWRkKEAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2U6aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0OjpGYWxzZToiLCBuZXcgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplcigpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVkU2VyaWFsaXplcnMgPT0gbnVsbCkgdHlwZWRTZXJpYWxpemVycyA9IF90bXA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiB0eXBlZFNlcmlhbGl6ZXJzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQm9vbGVhbiBDYW5TZXJpYWxpemUoU3lzdGVtLlR5cGUgdHlwZSkgew0KICAgICAgICAgICAgaWYgKHR5cGUgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6ZXIgR2V0U2VyaWFsaXplcihTeXN0ZW0uVHlwZSB0eXBlKSB7DQogICAgICAgICAgICBpZiAodHlwZSA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSkpIHJldHVybiBuZXcgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplcigpOw0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KI2VuZHJlZ2lvbg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIDxhdXRvZ2VuZXJhdGVkPg0KLy8gICAgIFRoaXMgY29kZSB3YXMgZ2VuZXJhdGVkIGJ5IHRoZSBNdnAuWG1sLlhHZW4gdG9vbC4NCi8vICAgICBUb29sIFZlcnNpb246ICAgIDEuMS4xLjANCi8vICAgICBSdW50aW1lIFZlcnNpb246IDIuMC41MDcyNy40Mg0KLy8NCi8vICAgICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBtYXkgY2F1c2UgaW5jb3JyZWN0IGJlaGF2aW9yIGFuZCB3aWxsIGJlIGxvc3QgaWYNCi8vICAgICB0aGUgY29kZSBpcyByZWdlbmVyYXRlZC4NCi8vIDwvYXV0b2dlbmVyYXRlZD4NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCiNwcmFnbWEgd2FybmluZyBkaXNhYmxlIDA2NDIsIDAyMTkNCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0DQp7DQogICAgdXNpbmcgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uOw0KICAgIHVzaW5nIFN5c3RlbTsNCiAgICANCiAgICANCiAgICAvLy8gLy8vIDxzdW1tYXJ5PkN1c3RvbSByZWFkZXIgZm9yIEd1aWRhbmNlUGFja2FnZSBpbnN0YW5jZXMuPC9zdW1tYXJ5Pg0KICAgIGludGVybmFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZVJlYWRlciA6IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIuQmFzZVJlYWRlcg0KICAgIHsNCiAgICAgICAgDQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UgUmVhZDJfR3VpZGFuY2VQYWNrYWdlKGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2Ugb2JqID0gYmFzZS5SZWFkMl9HdWlkYW5jZVBhY2thZ2UoaXNOdWxsYWJsZSwgY2hlY2tUeXBlKTsNCgkJCUd1aWRhbmNlUGFja2FnZURlc2VyaWFsaXplZEhhbmRsZXIgaGFuZGxlciA9IEd1aWRhbmNlUGFja2FnZURlc2VyaWFsaXplZDsNCgkJCWlmIChoYW5kbGVyICE9IG51bGwpDQoJCQkJaGFuZGxlcihvYmopOw0KDQoJCQlyZXR1cm4gb2JqOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5PlJlYWRzIGFuIG9iamVjdCBvZiB0eXBlIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlLjwvc3VtbWFyeT4NCgkJaW50ZXJuYWwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UgUmVhZCgpDQoJCXsNCgkJCXJldHVybiAoTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpIFJlYWQzX0d1aWRhbmNlUGFja2FnZSgpOw0KCQl9DQogICAgICAgIA0KICAgICAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIGV2ZW50IEd1aWRhbmNlUGFja2FnZURlc2VyaWFsaXplZEhhbmRsZXIgR3VpZGFuY2VQYWNrYWdlRGVzZXJpYWxpemVkOw0KICAgIH0NCiAgICANCiAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBHdWlkYW5jZVBhY2thZ2VEZXNlcmlhbGl6ZWRIYW5kbGVyKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UgZ3VpZGFuY2VQYWNrYWdlKTsNCiAgICANCiAgICAvLy8gLy8vIDxzdW1tYXJ5PkN1c3RvbSB3cml0ZXIgZm9yIEd1aWRhbmNlUGFja2FnZSBpbnN0YW5jZXMuPC9zdW1tYXJ5Pg0KICAgIGludGVybmFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZVdyaXRlciA6IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIuQmFzZVdyaXRlcg0KICAgIHsNCiAgICAgICAgDQoNCgkJLy8vIDxzdW1tYXJ5PldyaXRlcyBhbiBvYmplY3Qgb2YgdHlwZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZS48L3N1bW1hcnk+DQoJCWludGVybmFsIHZvaWQgV3JpdGUoTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UgdmFsdWUpDQoJCXsNCgkJCVdyaXRlM19HdWlkYW5jZVBhY2thZ2UodmFsdWUpOw0KCQl9DQogICAgfQ0KfQ0KI2lmIF9EWU5BTUlDX1hNTFNFUklBTElaRVJfQ09NUElMQVRJT04NClthc3NlbWJseTpTeXN0ZW0uU2VjdXJpdHkuQWxsb3dQYXJ0aWFsbHlUcnVzdGVkQ2FsbGVycygpXQ0KW2Fzc2VtYmx5OlN5c3RlbS5TZWN1cml0eS5TZWN1cml0eVRyYW5zcGFyZW50KCldDQojZW5kaWYNCg0KbmFtZXNwYWNlIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3Qgew0KDQogICAgaW50ZXJuYWwgcGFydGlhbCBjbGFzcyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyIHsNCglpbnRlcm5hbCBjbGFzcyBCYXNlV3JpdGVyIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgew0KDQogICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCB2b2lkIFdyaXRlM19HdWlkYW5jZVBhY2thZ2Uob2JqZWN0IG8pIHsNCiAgICAgICAgICAgIFdyaXRlU3RhcnREb2N1bWVudCgpOw0KICAgICAgICAgICAgaWYgKG8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIFdyaXRlRW1wdHlUYWcoQCJHdWlkYW5jZVBhY2thZ2UiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFRvcExldmVsRWxlbWVudCgpOw0KICAgICAgICAgICAgV3JpdGUyX0d1aWRhbmNlUGFja2FnZShAIkd1aWRhbmNlUGFja2FnZSIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0IiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKW8pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTJfR3VpZGFuY2VQYWNrYWdlKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJOYW1lIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkNhcHRpb24iLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQENhcHRpb24pKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiRGVzY3JpcHRpb24iLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQERlc2NyaXB0aW9uKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlZlcnNpb24iLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQFZlcnNpb24pKTsNCiAgICAgICAgICAgIGlmICgoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBIb3N0KSAhPSBAIlZpc3VhbFN0dWRpbyIpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkhvc3QiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEhvc3QpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiR3VpZCIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AR3VpZCkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJDb25maWd1cmF0aW9uRmlsZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AQ29uZmlndXJhdGlvbkZpbGUpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiVGltZXN0YW1wIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBUaW1lc3RhbXApKTsNCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEluaXRDYWxsYmFja3MoKSB7DQogICAgICAgIH0NCiAgICB9DQoJfQ0KDQogICAgaW50ZXJuYWwgcGFydGlhbCBjbGFzcyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyIHsNCglpbnRlcm5hbCBjbGFzcyBCYXNlUmVhZGVyIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgew0KDQogICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBvYmplY3QgUmVhZDNfR3VpZGFuY2VQYWNrYWdlKCkgew0KICAgICAgICAgICAgb2JqZWN0IG8gPSBudWxsOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxX0d1aWRhbmNlUGFja2FnZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8gPSBSZWFkMl9HdWlkYW5jZVBhY2thZ2UoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93bk5vZGVFeGNlcHRpb24oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpHdWlkYW5jZVBhY2thZ2UiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAob2JqZWN0KW87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIFJlYWQyX0d1aWRhbmNlUGFja2FnZShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzhdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDRfTmFtZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQE5hbWUgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMF0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFsxXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNV9DYXB0aW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AQ2FwdGlvbiA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsxXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzJdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ2X0Rlc2NyaXB0aW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ARGVzY3JpcHRpb24gPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFszXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkN19WZXJzaW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AVmVyc2lvbiA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFszXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzRdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ4X0hvc3QgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBIb3N0ID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzRdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbNV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDlfR3VpZCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQEd1aWQgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbNV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs2XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTBfQ29uZmlndXJhdGlvbkZpbGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBDb25maWd1cmF0aW9uRmlsZSA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs2XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzddICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxMV9UaW1lc3RhbXAgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUaW1lc3RhbXAgPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbN10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghSXNYbWxuc0F0dHJpYnV0ZShSZWFkZXIuTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUoKG9iamVjdClvLCBAIjpOYW1lLCA6Q2FwdGlvbiwgOkRlc2NyaXB0aW9uLCA6VmVyc2lvbiwgOkhvc3QsIDpHdWlkLCA6Q29uZmlndXJhdGlvbkZpbGUsIDpUaW1lc3RhbXAiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMwID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDAgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMCwgcmVmIHJlYWRlckNvdW50MCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0Q2FsbGJhY2tzKCkgew0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIGlkNF9OYW1lOw0KICAgICAgICBzdHJpbmcgaWQxMF9Db25maWd1cmF0aW9uRmlsZTsNCiAgICAgICAgc3RyaW5nIGlkM19JdGVtOw0KICAgICAgICBzdHJpbmcgaWQyX0l0ZW07DQogICAgICAgIHN0cmluZyBpZDhfSG9zdDsNCiAgICAgICAgc3RyaW5nIGlkN19WZXJzaW9uOw0KICAgICAgICBzdHJpbmcgaWQ5X0d1aWQ7DQogICAgICAgIHN0cmluZyBpZDExX1RpbWVzdGFtcDsNCiAgICAgICAgc3RyaW5nIGlkNl9EZXNjcmlwdGlvbjsNCiAgICAgICAgc3RyaW5nIGlkNV9DYXB0aW9uOw0KICAgICAgICBzdHJpbmcgaWQxX0d1aWRhbmNlUGFja2FnZTsNCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0SURzKCkgew0KICAgICAgICAgICAgaWQ0X05hbWUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIk5hbWUiKTsNCiAgICAgICAgICAgIGlkMTBfQ29uZmlndXJhdGlvbkZpbGUgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkNvbmZpZ3VyYXRpb25GaWxlIik7DQogICAgICAgICAgICBpZDNfSXRlbSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiIik7DQogICAgICAgICAgICBpZDJfSXRlbSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0Iik7DQogICAgICAgICAgICBpZDhfSG9zdCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSG9zdCIpOw0KICAgICAgICAgICAgaWQ3X1ZlcnNpb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlZlcnNpb24iKTsNCiAgICAgICAgICAgIGlkOV9HdWlkID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJHdWlkIik7DQogICAgICAgICAgICBpZDExX1RpbWVzdGFtcCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVGltZXN0YW1wIik7DQogICAgICAgICAgICBpZDZfRGVzY3JpcHRpb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkRlc2NyaXB0aW9uIik7DQogICAgICAgICAgICBpZDVfQ2FwdGlvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiQ2FwdGlvbiIpOw0KICAgICAgICAgICAgaWQxX0d1aWRhbmNlUGFja2FnZSA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiR3VpZGFuY2VQYWNrYWdlIik7DQogICAgICAgIH0NCiAgICB9DQoJfQ0KDQogICAgaW50ZXJuYWwgYWJzdHJhY3QgY2xhc3MgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplckJhc2UgOiBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplciB7DQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciBDcmVhdGVSZWFkZXIoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIuQmFzZVJlYWRlcigpOw0KICAgICAgICB9DQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciBDcmVhdGVXcml0ZXIoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIuQmFzZVdyaXRlcigpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaW50ZXJuYWwgc2VhbGVkIHBhcnRpYWwgY2xhc3MgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplciA6IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXJCYXNlIHsNCg0KCQlHdWlkYW5jZVBhY2thZ2VSZWFkZXIgX3JlYWRlcjsNCgkJR3VpZGFuY2VQYWNrYWdlV3JpdGVyIF93cml0ZXI7DQoNCgkJLy8vIDxzdW1tYXJ5PkNvbnN0cnVjdHMgdGhlIHNlcmlhbGl6ZXIuPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplcigpDQoJCXsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT5Db25zdHJ1Y3RzIHRoZSBzZXJpYWxpemVyIHdpdGggYSBwcmUtYnVpbHQgcmVhZGVyLjwvc3VtbWFyeT4NCgkJcHVibGljIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoR3VpZGFuY2VQYWNrYWdlUmVhZGVyIHJlYWRlcikNCgkJew0KCQkJX3JlYWRlciA9IHJlYWRlcjsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT5Db25zdHJ1Y3RzIHRoZSBzZXJpYWxpemVyIHdpdGggYSBwcmUtYnVpbHQgd3JpdGVyLjwvc3VtbWFyeT4NCgkJcHVibGljIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoR3VpZGFuY2VQYWNrYWdlV3JpdGVyIHdyaXRlcikNCgkJew0KCQkJX3dyaXRlciA9IHdyaXRlcjsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT5Db25zdHJ1Y3RzIHRoZSBzZXJpYWxpemVyIHdpdGggcHJlLWJ1aWx0IHJlYWRlciBhbmQgd3JpdGVyLjwvc3VtbWFyeT4NCgkJcHVibGljIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoR3VpZGFuY2VQYWNrYWdlUmVhZGVyIHJlYWRlciwgR3VpZGFuY2VQYWNrYWdlV3JpdGVyIHdyaXRlcikNCgkJew0KCQkJX3JlYWRlciA9IHJlYWRlcjsNCgkJCV93cml0ZXIgPSB3cml0ZXI7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgQ3JlYXRlUmVhZGVyKCkNCgkJew0KCQkJaWYgKF9yZWFkZXIgIT0gbnVsbCkgcmV0dXJuIF9yZWFkZXI7DQoJCQkNCgkJCXJldHVybiBiYXNlLkNyZWF0ZVJlYWRlcigpOw0KCQl9DQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIENyZWF0ZVdyaXRlcigpDQoJCXsNCgkJCWlmIChfd3JpdGVyICE9IG51bGwpIHJldHVybiBfd3JpdGVyOw0KCQkJDQoJCQlyZXR1cm4gYmFzZS5DcmVhdGVXcml0ZXIoKTsNCgkJfQ0KDQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQm9vbGVhbiBDYW5EZXNlcmlhbGl6ZShTeXN0ZW0uWG1sLlhtbFJlYWRlciB4bWxSZWFkZXIpIHsNCiAgICAgICAgICAgIHJldHVybiB4bWxSZWFkZXIuSXNTdGFydEVsZW1lbnQoQCJHdWlkYW5jZVBhY2thZ2UiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgU2VyaWFsaXplKG9iamVjdCBvYmplY3RUb1NlcmlhbGl6ZSwgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgd3JpdGVyKSB7DQogICAgICAgICAgICAoKEJhc2VXcml0ZXIpd3JpdGVyKS5Xcml0ZTNfR3VpZGFuY2VQYWNrYWdlKG9iamVjdFRvU2VyaWFsaXplKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBvYmplY3QgRGVzZXJpYWxpemUoU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgcmVhZGVyKSB7DQogICAgICAgICAgICByZXR1cm4gKChCYXNlUmVhZGVyKXJlYWRlcikuUmVhZDNfR3VpZGFuY2VQYWNrYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpbnRlcm5hbCBwYXJ0aWFsIGNsYXNzIEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIgew0KCWludGVybmFsIGNsYXNzIFhtbFNlcmlhbGl6ZXJDb250cmFjdCA6IGdsb2JhbDo6U3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6ZXJJbXBsZW1lbnRhdGlvbiB7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBnbG9iYWw6OlN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uUmVhZGVyIFJlYWRlciB7IGdldCB7IHJldHVybiBuZXcgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplci5CYXNlUmVhZGVyKCk7IH0gfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgZ2xvYmFsOjpTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciBXcml0ZXIgeyBnZXQgeyByZXR1cm4gbmV3IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIuQmFzZVdyaXRlcigpOyB9IH0NCiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSByZWFkTWV0aG9kcyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFJlYWRNZXRob2RzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHJlYWRNZXRob2RzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBfdG1wID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUoKTsNCiAgICAgICAgICAgICAgICAgICAgX3RtcFtAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlOmh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDo6RmFsc2U6Il0gPSBAIlJlYWQzX0d1aWRhbmNlUGFja2FnZSI7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZWFkTWV0aG9kcyA9PSBudWxsKSByZWFkTWV0aG9kcyA9IF90bXA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiByZWFkTWV0aG9kczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHdyaXRlTWV0aG9kcyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFdyaXRlTWV0aG9kcyB7DQogICAgICAgICAgICBnZXQgew0KICAgICAgICAgICAgICAgIGlmICh3cml0ZU1ldGhvZHMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wW0AiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2U6aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0OjpGYWxzZToiXSA9IEAiV3JpdGUzX0d1aWRhbmNlUGFja2FnZSI7DQogICAgICAgICAgICAgICAgICAgIGlmICh3cml0ZU1ldGhvZHMgPT0gbnVsbCkgd3JpdGVNZXRob2RzID0gX3RtcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlTWV0aG9kczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHR5cGVkU2VyaWFsaXplcnMgPSBudWxsOw0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBUeXBlZFNlcmlhbGl6ZXJzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVkU2VyaWFsaXplcnMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wLkFkZChAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlOmh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDo6RmFsc2U6IiwgbmV3IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlZFNlcmlhbGl6ZXJzID09IG51bGwpIHR5cGVkU2VyaWFsaXplcnMgPSBfdG1wOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZWRTZXJpYWxpemVyczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkJvb2xlYW4gQ2FuU2VyaWFsaXplKFN5c3RlbS5UeXBlIHR5cGUpIHsNCiAgICAgICAgICAgIGlmICh0eXBlID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemVyIEdldFNlcmlhbGl6ZXIoU3lzdGVtLlR5cGUgdHlwZSkgew0KICAgICAgICAgICAgaWYgKHR5cGUgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpKSByZXR1cm4gbmV3IEd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgfQ0KCX0NCn0NCg0KDQojcHJhZ21hIHdhcm5pbmcgcmVzdG9yZSAwNjQyLCAwMjE5DQojcmVnaW9uIE9yaWdpbmFsIFhtbFNlcmlhbGl6ZXIgY29kZQ0KLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KI2lmIF9EWU5BTUlDX1hNTFNFUklBTElaRVJfQ09NUElMQVRJT04NClthc3NlbWJseTpTeXN0ZW0uU2VjdXJpdHkuQWxsb3dQYXJ0aWFsbHlUcnVzdGVkQ2FsbGVycygpXQ0KW2Fzc2VtYmx5OlN5c3RlbS5TZWN1cml0eS5TZWN1cml0eVRyYW5zcGFyZW50KCldDQojZW5kaWYNClthc3NlbWJseTpTeXN0ZW0uUmVmbGVjdGlvbi5Bc3NlbWJseVZlcnNpb25BdHRyaWJ1dGUoIjEuMC41MDUwNS4wIildDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlhtbC5TZXJpYWxpemF0aW9uLkdlbmVyYXRlZEFzc2VtYmx5IHsNCg0KICAgIHB1YmxpYyBjbGFzcyBYbWxTZXJpYWxpemF0aW9uV3JpdGVyUmVjaXBlRnJhbWV3b3JrIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgew0KDQogICAgICAgIHB1YmxpYyB2b2lkIFdyaXRlNl9SZWNpcGVGcmFtZXdvcmsob2JqZWN0IG8pIHsNCiAgICAgICAgICAgIFdyaXRlU3RhcnREb2N1bWVudCgpOw0KICAgICAgICAgICAgaWYgKG8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIFdyaXRlRW1wdHlUYWcoQCJSZWNpcGVGcmFtZXdvcmsiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFRvcExldmVsRWxlbWVudCgpOw0KICAgICAgICAgICAgV3JpdGU1X1JlY2lwZUZyYW1ld29yayhAIlJlY2lwZUZyYW1ld29yayIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0IiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrKW8pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTVfUmVjaXBlRnJhbWV3b3JrKHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmsgbywgYm9vbCBpc051bGxhYmxlLCBib29sIG5lZWRUeXBlKSB7DQogICAgICAgICAgICBpZiAoKG9iamVjdClvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsYWJsZSkgV3JpdGVOdWxsVGFnTGl0ZXJhbChuLCBucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFuZWVkVHlwZSkgew0KICAgICAgICAgICAgICAgIFN5c3RlbS5UeXBlIHQgPSBvLkdldFR5cGUoKTsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yaykpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJTY2hlbWFWZXJzaW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBTY2hlbWFWZXJzaW9uKSk7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbClvLkBUcmFjZUxldmVsKSAhPSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbC5ARXJyb3IpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlRyYWNlTGV2ZWwiLCBAIiIsIFdyaXRlNF9UcmFjZUxldmVsKCgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwpby5AVHJhY2VMZXZlbCkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdFtdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkhvc3RbXSkoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0W10pby5ASG9zdHMpOw0KICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpew0KICAgICAgICAgICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChAIkhvc3RzIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiLCBudWxsLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUyX0hvc3QoQCJIb3N0IiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0KWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVtdIGEgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVtdKSgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVtdKW8uQEd1aWRhbmNlUGFja2FnZXMpOw0KICAgICAgICAgICAgICAgIGlmIChhICE9IG51bGwpew0KICAgICAgICAgICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChAIkd1aWRhbmNlUGFja2FnZXMiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIsIG51bGwsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaWEgPSAwOyBpYSA8IGEuTGVuZ3RoOyBpYSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZTNfR3VpZGFuY2VQYWNrYWdlKEAiR3VpZGFuY2VQYWNrYWdlIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiLCAoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpYVtpYV0pLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGUzX0d1aWRhbmNlUGFja2FnZShzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiTmFtZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ATmFtZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJDYXB0aW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBDYXB0aW9uKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkRlc2NyaXB0aW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBEZXNjcmlwdGlvbikpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJWZXJzaW9uIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBWZXJzaW9uKSk7DQogICAgICAgICAgICBpZiAoKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ASG9zdCkgIT0gQCJWaXN1YWxTdHVkaW8iKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJIb3N0IiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBIb3N0KSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkd1aWQiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEd1aWQpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiQ29uZmlndXJhdGlvbkZpbGUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQENvbmZpZ3VyYXRpb25GaWxlKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIlRpbWVzdGFtcCIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVGltZXN0YW1wKSk7DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlMl9Ib3N0KHN0cmluZyBuLCBzdHJpbmcgbnMsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0IG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0KSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0Iik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQE5hbWUpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiSW5zdGFsbGVyVHlwZSIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ASW5zdGFsbGVyVHlwZSkpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIFdyaXRlNF9UcmFjZUxldmVsKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsIHYpIHsNCiAgICAgICAgICAgIHN0cmluZyBzID0gbnVsbDsNCiAgICAgICAgICAgIHN3aXRjaCAodikgew0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQEVycm9yOiBzID0gQCJFcnJvciI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQEluZm86IHMgPSBAIkluZm8iOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsLkBPZmY6IHMgPSBAIk9mZiI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQFdhcm5pbmc6IHMgPSBAIldhcm5pbmciOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsLkBWZXJib3NlOiBzID0gQCJWZXJib3NlIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgQ3JlYXRlSW52YWxpZEVudW1WYWx1ZUV4Y2VwdGlvbigoKFN5c3RlbS5JbnQ2NCl2KS5Ub1N0cmluZyhTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlKSwgQCJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBzOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgSW5pdENhbGxiYWNrcygpIHsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBjbGFzcyBYbWxTZXJpYWxpemF0aW9uUmVhZGVyUmVjaXBlRnJhbWV3b3JrIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgew0KDQogICAgICAgIHB1YmxpYyBvYmplY3QgUmVhZDZfUmVjaXBlRnJhbWV3b3JrKCkgew0KICAgICAgICAgICAgb2JqZWN0IG8gPSBudWxsOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxX1JlY2lwZUZyYW1ld29yayAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8gPSBSZWFkNV9SZWNpcGVGcmFtZXdvcmsoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93bk5vZGVFeGNlcHRpb24oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpSZWNpcGVGcmFtZXdvcmsiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAob2JqZWN0KW87DQogICAgICAgIH0NCg0KICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrIFJlYWQ1X1JlY2lwZUZyYW1ld29yayhib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yayBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrKCk7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdFtdIGFfMCA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMCA9IDA7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlW10gYV8xID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV8xID0gMDsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbNF07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFsyXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9TY2hlbWFWZXJzaW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AU2NoZW1hVmVyc2lvbiA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ1X1RyYWNlTGV2ZWwgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUcmFjZUxldmVsID0gUmVhZDRfVHJhY2VMZXZlbChSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6U2NoZW1hVmVyc2lvbiwgOlRyYWNlTGV2ZWwiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMwID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDAgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDZfSG9zdHMgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFSZWFkTnVsbCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkhvc3RbXSBhXzBfMCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNhXzBfMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCByZWFkZXJDb3VudDEgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDdfSG9zdCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFfMF8wID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0W10pRW5zdXJlQXJyYXlJbmRleChhXzBfMCwgY2FfMF8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkhvc3QpKTthXzBfMFtjYV8wXzArK10gPSBSZWFkMl9Ib3N0KGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0Okhvc3QiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpIb3N0Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMSwgcmVmIHJlYWRlckNvdW50MSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBIb3N0cyA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdFtdKVNocmlua0FycmF5KGFfMF8wLCBjYV8wXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdCksIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkOF9HdWlkYW5jZVBhY2thZ2VzICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUmVhZE51bGwoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSBhXzFfMCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNhXzFfMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMiA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCByZWFkZXJDb3VudDIgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDlfR3VpZGFuY2VQYWNrYWdlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYV8xXzAgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVtdKUVuc3VyZUFycmF5SW5kZXgoYV8xXzAsIGNhXzFfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpKTthXzFfMFtjYV8xXzArK10gPSBSZWFkM19HdWlkYW5jZVBhY2thZ2UoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6R3VpZGFuY2VQYWNrYWdlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6R3VpZGFuY2VQYWNrYWdlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMiwgcmVmIHJlYWRlckNvdW50Mik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBHdWlkYW5jZVBhY2thZ2VzID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSlTaHJpbmtBcnJheShhXzFfMCwgY2FfMV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSksIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6SG9zdHMsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpHdWlkYW5jZVBhY2thZ2VzIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6SG9zdHMsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpHdWlkYW5jZVBhY2thZ2VzIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMCwgcmVmIHJlYWRlckNvdW50MCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIFJlYWQzX0d1aWRhbmNlUGFja2FnZShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzhdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEwX05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDExX0NhcHRpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBDYXB0aW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEyX0Rlc2NyaXB0aW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ARGVzY3JpcHRpb24gPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFszXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTNfVmVyc2lvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFZlcnNpb24gPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs0XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkN19Ib3N0ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ASG9zdCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs0XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzVdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNF9HdWlkICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AR3VpZCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs1XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzZdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNV9Db25maWd1cmF0aW9uRmlsZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQENvbmZpZ3VyYXRpb25GaWxlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzZdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbN10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE2X1RpbWVzdGFtcCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFRpbWVzdGFtcCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs3XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOk5hbWUsIDpDYXB0aW9uLCA6RGVzY3JpcHRpb24sIDpWZXJzaW9uLCA6SG9zdCwgOkd1aWQsIDpDb25maWd1cmF0aW9uRmlsZSwgOlRpbWVzdGFtcCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczMgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MyA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMzLCByZWYgcmVhZGVyQ291bnQzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0IFJlYWQyX0hvc3QoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0IG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0KCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzJdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEwX05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE3X0luc3RhbGxlclR5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBJbnN0YWxsZXJUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSwgOkluc3RhbGxlclR5cGUiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnM0ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDQgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zNCwgcmVmIHJlYWRlckNvdW50NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbCBSZWFkNF9UcmFjZUxldmVsKHN0cmluZyBzKSB7DQogICAgICAgICAgICBzd2l0Y2ggKHMpIHsNCiAgICAgICAgICAgICAgICBjYXNlIEAiRXJyb3IiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQEVycm9yOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJJbmZvIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsLkBJbmZvOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJPZmYiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQE9mZjsNCiAgICAgICAgICAgICAgICBjYXNlIEAiV2FybmluZyI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbC5AV2FybmluZzsNCiAgICAgICAgICAgICAgICBjYXNlIEAiVmVyYm9zZSI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbC5AVmVyYm9zZTsNCiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBDcmVhdGVVbmtub3duQ29uc3RhbnRFeGNlcHRpb24ocywgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0Q2FsbGJhY2tzKCkgew0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIGlkMTBfTmFtZTsNCiAgICAgICAgc3RyaW5nIGlkMTNfVmVyc2lvbjsNCiAgICAgICAgc3RyaW5nIGlkNV9UcmFjZUxldmVsOw0KICAgICAgICBzdHJpbmcgaWQxNV9Db25maWd1cmF0aW9uRmlsZTsNCiAgICAgICAgc3RyaW5nIGlkMV9SZWNpcGVGcmFtZXdvcms7DQogICAgICAgIHN0cmluZyBpZDE2X1RpbWVzdGFtcDsNCiAgICAgICAgc3RyaW5nIGlkN19Ib3N0Ow0KICAgICAgICBzdHJpbmcgaWQzX0l0ZW07DQogICAgICAgIHN0cmluZyBpZDEyX0Rlc2NyaXB0aW9uOw0KICAgICAgICBzdHJpbmcgaWQ2X0hvc3RzOw0KICAgICAgICBzdHJpbmcgaWQxMV9DYXB0aW9uOw0KICAgICAgICBzdHJpbmcgaWQ4X0d1aWRhbmNlUGFja2FnZXM7DQogICAgICAgIHN0cmluZyBpZDRfU2NoZW1hVmVyc2lvbjsNCiAgICAgICAgc3RyaW5nIGlkMTRfR3VpZDsNCiAgICAgICAgc3RyaW5nIGlkMl9JdGVtOw0KICAgICAgICBzdHJpbmcgaWQ5X0d1aWRhbmNlUGFja2FnZTsNCiAgICAgICAgc3RyaW5nIGlkMTdfSW5zdGFsbGVyVHlwZTsNCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0SURzKCkgew0KICAgICAgICAgICAgaWQxMF9OYW1lID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJOYW1lIik7DQogICAgICAgICAgICBpZDEzX1ZlcnNpb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlZlcnNpb24iKTsNCiAgICAgICAgICAgIGlkNV9UcmFjZUxldmVsID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJUcmFjZUxldmVsIik7DQogICAgICAgICAgICBpZDE1X0NvbmZpZ3VyYXRpb25GaWxlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJDb25maWd1cmF0aW9uRmlsZSIpOw0KICAgICAgICAgICAgaWQxX1JlY2lwZUZyYW1ld29yayA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiUmVjaXBlRnJhbWV3b3JrIik7DQogICAgICAgICAgICBpZDE2X1RpbWVzdGFtcCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVGltZXN0YW1wIik7DQogICAgICAgICAgICBpZDdfSG9zdCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSG9zdCIpOw0KICAgICAgICAgICAgaWQzX0l0ZW0gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIiIpOw0KICAgICAgICAgICAgaWQxMl9EZXNjcmlwdGlvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiRGVzY3JpcHRpb24iKTsNCiAgICAgICAgICAgIGlkNl9Ib3N0cyA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSG9zdHMiKTsNCiAgICAgICAgICAgIGlkMTFfQ2FwdGlvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiQ2FwdGlvbiIpOw0KICAgICAgICAgICAgaWQ4X0d1aWRhbmNlUGFja2FnZXMgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWRhbmNlUGFja2FnZXMiKTsNCiAgICAgICAgICAgIGlkNF9TY2hlbWFWZXJzaW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJTY2hlbWFWZXJzaW9uIik7DQogICAgICAgICAgICBpZDE0X0d1aWQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWQiKTsNCiAgICAgICAgICAgIGlkMl9JdGVtID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgIGlkOV9HdWlkYW5jZVBhY2thZ2UgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWRhbmNlUGFja2FnZSIpOw0KICAgICAgICAgICAgaWQxN19JbnN0YWxsZXJUeXBlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJJbnN0YWxsZXJUeXBlIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgWG1sU2VyaWFsaXplcjEgOiBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplciB7DQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciBDcmVhdGVSZWFkZXIoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFhtbFNlcmlhbGl6YXRpb25SZWFkZXJSZWNpcGVGcmFtZXdvcmsoKTsNCiAgICAgICAgfQ0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgQ3JlYXRlV3JpdGVyKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBYbWxTZXJpYWxpemF0aW9uV3JpdGVyUmVjaXBlRnJhbWV3b3JrKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgc2VhbGVkIGNsYXNzIFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIgOiBYbWxTZXJpYWxpemVyMSB7DQoNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5Cb29sZWFuIENhbkRlc2VyaWFsaXplKFN5c3RlbS5YbWwuWG1sUmVhZGVyIHhtbFJlYWRlcikgew0KICAgICAgICAgICAgcmV0dXJuIHhtbFJlYWRlci5Jc1N0YXJ0RWxlbWVudChAIlJlY2lwZUZyYW1ld29yayIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0Iik7DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBTZXJpYWxpemUob2JqZWN0IG9iamVjdFRvU2VyaWFsaXplLCBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciB3cml0ZXIpIHsNCiAgICAgICAgICAgICgoWG1sU2VyaWFsaXphdGlvbldyaXRlclJlY2lwZUZyYW1ld29yayl3cml0ZXIpLldyaXRlNl9SZWNpcGVGcmFtZXdvcmsob2JqZWN0VG9TZXJpYWxpemUpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIG9iamVjdCBEZXNlcmlhbGl6ZShTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciByZWFkZXIpIHsNCiAgICAgICAgICAgIHJldHVybiAoKFhtbFNlcmlhbGl6YXRpb25SZWFkZXJSZWNpcGVGcmFtZXdvcmspcmVhZGVyKS5SZWFkNl9SZWNpcGVGcmFtZXdvcmsoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBjbGFzcyBYbWxTZXJpYWxpemVyQ29udHJhY3QgOiBnbG9iYWw6OlN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemVySW1wbGVtZW50YXRpb24gew0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgZ2xvYmFsOjpTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciBSZWFkZXIgeyBnZXQgeyByZXR1cm4gbmV3IFhtbFNlcmlhbGl6YXRpb25SZWFkZXJSZWNpcGVGcmFtZXdvcmsoKTsgfSB9DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBnbG9iYWw6OlN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIFdyaXRlciB7IGdldCB7IHJldHVybiBuZXcgWG1sU2VyaWFsaXphdGlvbldyaXRlclJlY2lwZUZyYW1ld29yaygpOyB9IH0NCiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSByZWFkTWV0aG9kcyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFJlYWRNZXRob2RzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHJlYWRNZXRob2RzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBfdG1wID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUoKTsNCiAgICAgICAgICAgICAgICAgICAgX3RtcFtAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrOmh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDo6RmFsc2U6Il0gPSBAIlJlYWQ2X1JlY2lwZUZyYW1ld29yayI7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZWFkTWV0aG9kcyA9PSBudWxsKSByZWFkTWV0aG9kcyA9IF90bXA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiByZWFkTWV0aG9kczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHdyaXRlTWV0aG9kcyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFdyaXRlTWV0aG9kcyB7DQogICAgICAgICAgICBnZXQgew0KICAgICAgICAgICAgICAgIGlmICh3cml0ZU1ldGhvZHMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wW0AiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcms6aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0OjpGYWxzZToiXSA9IEAiV3JpdGU2X1JlY2lwZUZyYW1ld29yayI7DQogICAgICAgICAgICAgICAgICAgIGlmICh3cml0ZU1ldGhvZHMgPT0gbnVsbCkgd3JpdGVNZXRob2RzID0gX3RtcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlTWV0aG9kczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHR5cGVkU2VyaWFsaXplcnMgPSBudWxsOw0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBUeXBlZFNlcmlhbGl6ZXJzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVkU2VyaWFsaXplcnMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wLkFkZChAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrOmh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDo6RmFsc2U6IiwgbmV3IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIoKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlZFNlcmlhbGl6ZXJzID09IG51bGwpIHR5cGVkU2VyaWFsaXplcnMgPSBfdG1wOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZWRTZXJpYWxpemVyczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkJvb2xlYW4gQ2FuU2VyaWFsaXplKFN5c3RlbS5UeXBlIHR5cGUpIHsNCiAgICAgICAgICAgIGlmICh0eXBlID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrKSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemVyIEdldFNlcmlhbGl6ZXIoU3lzdGVtLlR5cGUgdHlwZSkgew0KICAgICAgICAgICAgaWYgKHR5cGUgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmspKSByZXR1cm4gbmV3IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIoKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCiNlbmRyZWdpb24NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyA8YXV0b2dlbmVyYXRlZD4NCi8vICAgICBUaGlzIGNvZGUgd2FzIGdlbmVyYXRlZCBieSB0aGUgTXZwLlhtbC5YR2VuIHRvb2wuDQovLyAgICAgVG9vbCBWZXJzaW9uOiAgICAxLjEuMS4wDQovLyAgICAgUnVudGltZSBWZXJzaW9uOiAyLjAuNTA3MjcuNDINCi8vDQovLyAgICAgQ2hhbmdlcyB0byB0aGlzIGZpbGUgbWF5IGNhdXNlIGluY29ycmVjdCBiZWhhdmlvciBhbmQgd2lsbCBiZSBsb3N0IGlmDQovLyAgICAgdGhlIGNvZGUgaXMgcmVnZW5lcmF0ZWQuDQovLyA8L2F1dG9nZW5lcmF0ZWQ+DQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQojcHJhZ21hIHdhcm5pbmcgZGlzYWJsZSAwNjQyLCAwMjE5DQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdA0Kew0KICAgIHVzaW5nIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbjsNCiAgICB1c2luZyBTeXN0ZW07DQogICAgDQogICAgDQogICAgLy8vIC8vLyA8c3VtbWFyeT5DdXN0b20gcmVhZGVyIGZvciBSZWNpcGVGcmFtZXdvcmsgaW5zdGFuY2VzLjwvc3VtbWFyeT4NCiAgICBpbnRlcm5hbCBjbGFzcyBSZWNpcGVGcmFtZXdvcmtSZWFkZXIgOiBSZWNpcGVGcmFtZXdvcmtTZXJpYWxpemVyLkJhc2VSZWFkZXINCiAgICB7DQogICAgICAgIA0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrIFJlYWQ1X1JlY2lwZUZyYW1ld29yayhib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrIG9iaiA9IGJhc2UuUmVhZDVfUmVjaXBlRnJhbWV3b3JrKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlSZWNpcGVGcmFtZXdvcmtEZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBSZWNpcGVGcmFtZXdvcmtEZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIFJlYWQzX0d1aWRhbmNlUGFja2FnZShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIG9iaiA9IGJhc2UuUmVhZDNfR3VpZGFuY2VQYWNrYWdlKGlzTnVsbGFibGUsIGNoZWNrVHlwZSk7DQoJCQlHdWlkYW5jZVBhY2thZ2VEZXNlcmlhbGl6ZWRIYW5kbGVyIGhhbmRsZXIgPSBHdWlkYW5jZVBhY2thZ2VEZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdCBSZWFkMl9Ib3N0KGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBjaGVja1R5cGUpDQoJCXsNCgkJCWdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0IG9iaiA9IGJhc2UuUmVhZDJfSG9zdChpc051bGxhYmxlLCBjaGVja1R5cGUpOw0KCQkJSG9zdERlc2VyaWFsaXplZEhhbmRsZXIgaGFuZGxlciA9IEhvc3REZXNlcmlhbGl6ZWQ7DQoJCQlpZiAoaGFuZGxlciAhPSBudWxsKQ0KCQkJCWhhbmRsZXIob2JqKTsNCg0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJCS8vLyA8cmVtYXJrcy8+DQoJCXByb3RlY3RlZCBvdmVycmlkZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbCBSZWFkNF9UcmFjZUxldmVsKHN0cmluZyBzKQ0KCQl7DQoJCQlnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbCBvYmogPSBiYXNlLlJlYWQ0X1RyYWNlTGV2ZWwocyk7DQoJCQlUcmFjZUxldmVsRGVzZXJpYWxpemVkSGFuZGxlciBoYW5kbGVyID0gVHJhY2VMZXZlbERlc2VyaWFsaXplZDsNCgkJCWlmIChoYW5kbGVyICE9IG51bGwpDQoJCQkJaGFuZGxlcihvYmopOw0KDQoJCQlyZXR1cm4gb2JqOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5PlJlYWRzIGFuIG9iamVjdCBvZiB0eXBlIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrLjwvc3VtbWFyeT4NCgkJaW50ZXJuYWwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmsgUmVhZCgpDQoJCXsNCgkJCXJldHVybiAoTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmspIFJlYWQ2X1JlY2lwZUZyYW1ld29yaygpOw0KCQl9DQogICAgICAgIA0KICAgICAgICAvLy8gLy8vIDxyZW1hcmtzLz4NCiAgICAgICAgcHVibGljIGV2ZW50IFJlY2lwZUZyYW1ld29ya0Rlc2VyaWFsaXplZEhhbmRsZXIgUmVjaXBlRnJhbWV3b3JrRGVzZXJpYWxpemVkOw0KICAgICAgICANCiAgICAgICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHB1YmxpYyBldmVudCBHdWlkYW5jZVBhY2thZ2VEZXNlcmlhbGl6ZWRIYW5kbGVyIEd1aWRhbmNlUGFja2FnZURlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgSG9zdERlc2VyaWFsaXplZEhhbmRsZXIgSG9zdERlc2VyaWFsaXplZDsNCiAgICAgICAgDQogICAgICAgIC8vLyAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwdWJsaWMgZXZlbnQgVHJhY2VMZXZlbERlc2VyaWFsaXplZEhhbmRsZXIgVHJhY2VMZXZlbERlc2VyaWFsaXplZDsNCiAgICB9DQogICAgDQogICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgcHVibGljIGRlbGVnYXRlIHZvaWQgUmVjaXBlRnJhbWV3b3JrRGVzZXJpYWxpemVkSGFuZGxlcihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrIHJlY2lwZUZyYW1ld29yayk7DQogICAgDQogICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgcHVibGljIGRlbGVnYXRlIHZvaWQgSG9zdERlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkhvc3QgaG9zdCk7DQogICAgDQogICAgLy8vIC8vLyA8cmVtYXJrcy8+DQogICAgcHVibGljIGRlbGVnYXRlIHZvaWQgVHJhY2VMZXZlbERlc2VyaWFsaXplZEhhbmRsZXIoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwgdHJhY2VMZXZlbCk7DQogICAgDQogICAgLy8vIC8vLyA8c3VtbWFyeT5DdXN0b20gd3JpdGVyIGZvciBSZWNpcGVGcmFtZXdvcmsgaW5zdGFuY2VzLjwvc3VtbWFyeT4NCiAgICBpbnRlcm5hbCBjbGFzcyBSZWNpcGVGcmFtZXdvcmtXcml0ZXIgOiBSZWNpcGVGcmFtZXdvcmtTZXJpYWxpemVyLkJhc2VXcml0ZXINCiAgICB7DQogICAgICAgIA0KDQoJCS8vLyA8c3VtbWFyeT5Xcml0ZXMgYW4gb2JqZWN0IG9mIHR5cGUgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmsuPC9zdW1tYXJ5Pg0KCQlpbnRlcm5hbCB2b2lkIFdyaXRlKE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrIHZhbHVlKQ0KCQl7DQoJCQlXcml0ZTZfUmVjaXBlRnJhbWV3b3JrKHZhbHVlKTsNCgkJfQ0KICAgIH0NCn0NCiNpZiBfRFlOQU1JQ19YTUxTRVJJQUxJWkVSX0NPTVBJTEFUSU9ODQpbYXNzZW1ibHk6U3lzdGVtLlNlY3VyaXR5LkFsbG93UGFydGlhbGx5VHJ1c3RlZENhbGxlcnMoKV0NClthc3NlbWJseTpTeXN0ZW0uU2VjdXJpdHkuU2VjdXJpdHlUcmFuc3BhcmVudCgpXQ0KI2VuZGlmDQoNCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0IHsNCg0KICAgIGludGVybmFsIHBhcnRpYWwgY2xhc3MgUmVjaXBlRnJhbWV3b3JrU2VyaWFsaXplciB7DQoJaW50ZXJuYWwgY2xhc3MgQmFzZVdyaXRlciA6IFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIHsNCg0KICAgICAgICBwcm90ZWN0ZWQgaW50ZXJuYWwgdm9pZCBXcml0ZTZfUmVjaXBlRnJhbWV3b3JrKG9iamVjdCBvKSB7DQogICAgICAgICAgICBXcml0ZVN0YXJ0RG9jdW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChvID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBXcml0ZUVtcHR5VGFnKEAiUmVjaXBlRnJhbWV3b3JrIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBUb3BMZXZlbEVsZW1lbnQoKTsNCiAgICAgICAgICAgIFdyaXRlNV9SZWNpcGVGcmFtZXdvcmsoQCJSZWNpcGVGcmFtZXdvcmsiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIsICgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yaylvKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgV3JpdGU1X1JlY2lwZUZyYW1ld29yayhzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrIG8sIGJvb2wgaXNOdWxsYWJsZSwgYm9vbCBuZWVkVHlwZSkgew0KICAgICAgICAgICAgaWYgKChvYmplY3QpbyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIFdyaXRlTnVsbFRhZ0xpdGVyYWwobiwgbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbmVlZFR5cGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0uVHlwZSB0ID0gby5HZXRUeXBlKCk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmspKSB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBDcmVhdGVVbmtub3duVHlwZUV4Y2VwdGlvbihvKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZVN0YXJ0RWxlbWVudChuLCBucywgbywgZmFsc2UsIG51bGwpOw0KICAgICAgICAgICAgaWYgKG5lZWRUeXBlKSBXcml0ZVhzaVR5cGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiU2NoZW1hVmVyc2lvbiIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AU2NoZW1hVmVyc2lvbikpOw0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwpby5AVHJhY2VMZXZlbCkgIT0gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQEVycm9yKSB7DQogICAgICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUcmFjZUxldmVsIiwgQCIiLCBXcml0ZTRfVHJhY2VMZXZlbCgoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsKW8uQFRyYWNlTGV2ZWwpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkhvc3RbXSBhID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0W10pKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdFtdKW8uQEhvc3RzKTsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQoQCJIb3N0cyIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0IiwgbnVsbCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpYSA9IDA7IGlhIDwgYS5MZW5ndGg7IGlhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlMl9Ib3N0KEAiSG9zdCIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0IiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdClhW2lhXSksIGZhbHNlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSBhID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSkoKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSlvLkBHdWlkYW5jZVBhY2thZ2VzKTsNCiAgICAgICAgICAgICAgICBpZiAoYSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQoQCJHdWlkYW5jZVBhY2thZ2VzIiwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiLCBudWxsLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGlhID0gMDsgaWEgPCBhLkxlbmd0aDsgaWErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUzX0d1aWRhbmNlUGFja2FnZShAIkd1aWRhbmNlUGFja2FnZSIsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0IiwgKChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKWFbaWFdKSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBXcml0ZUVuZEVsZW1lbnQobyk7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFdyaXRlM19HdWlkYW5jZVBhY2thZ2Uoc3RyaW5nIG4sIHN0cmluZyBucywgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKSkgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24obyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVTdGFydEVsZW1lbnQobiwgbnMsIG8sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgIGlmIChuZWVkVHlwZSkgV3JpdGVYc2lUeXBlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0Iik7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIk5hbWUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQE5hbWUpKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiQ2FwdGlvbiIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AQ2FwdGlvbikpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJEZXNjcmlwdGlvbiIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ARGVzY3JpcHRpb24pKTsNCiAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiVmVyc2lvbiIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5AVmVyc2lvbikpOw0KICAgICAgICAgICAgaWYgKCgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEhvc3QpICE9IEAiVmlzdWFsU3R1ZGlvIikgew0KICAgICAgICAgICAgICAgIFdyaXRlQXR0cmlidXRlKEAiSG9zdCIsIEAiIiwgKChnbG9iYWw6OlN5c3RlbS5TdHJpbmcpby5ASG9zdCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJHdWlkIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBHdWlkKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkNvbmZpZ3VyYXRpb25GaWxlIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBDb25maWd1cmF0aW9uRmlsZSkpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJUaW1lc3RhbXAiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQFRpbWVzdGFtcCkpOw0KICAgICAgICAgICAgV3JpdGVFbmRFbGVtZW50KG8pOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBXcml0ZTJfSG9zdChzdHJpbmcgbiwgc3RyaW5nIG5zLCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdCBvLCBib29sIGlzTnVsbGFibGUsIGJvb2wgbmVlZFR5cGUpIHsNCiAgICAgICAgICAgIGlmICgob2JqZWN0KW8gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBXcml0ZU51bGxUYWdMaXRlcmFsKG4sIG5zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIW5lZWRUeXBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLlR5cGUgdCA9IG8uR2V0VHlwZSgpOw0KICAgICAgICAgICAgICAgIGlmICh0ID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdCkpIHsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKG8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFdyaXRlU3RhcnRFbGVtZW50KG4sIG5zLCBvLCBmYWxzZSwgbnVsbCk7DQogICAgICAgICAgICBpZiAobmVlZFR5cGUpIFdyaXRlWHNpVHlwZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpOw0KICAgICAgICAgICAgV3JpdGVBdHRyaWJ1dGUoQCJOYW1lIiwgQCIiLCAoKGdsb2JhbDo6U3lzdGVtLlN0cmluZylvLkBOYW1lKSk7DQogICAgICAgICAgICBXcml0ZUF0dHJpYnV0ZShAIkluc3RhbGxlclR5cGUiLCBAIiIsICgoZ2xvYmFsOjpTeXN0ZW0uU3RyaW5nKW8uQEluc3RhbGxlclR5cGUpKTsNCiAgICAgICAgICAgIFdyaXRlRW5kRWxlbWVudChvKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0cmluZyBXcml0ZTRfVHJhY2VMZXZlbChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbCB2KSB7DQogICAgICAgICAgICBzdHJpbmcgcyA9IG51bGw7DQogICAgICAgICAgICBzd2l0Y2ggKHYpIHsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsLkBFcnJvcjogcyA9IEAiRXJyb3IiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsLkBJbmZvOiBzID0gQCJJbmZvIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbC5AT2ZmOiBzID0gQCJPZmYiOyBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsLkBXYXJuaW5nOiBzID0gQCJXYXJuaW5nIjsgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbC5AVmVyYm9zZTogcyA9IEAiVmVyYm9zZSI7IGJyZWFrOw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IENyZWF0ZUludmFsaWRFbnVtVmFsdWVFeGNlcHRpb24oKChTeXN0ZW0uSW50NjQpdikuVG9TdHJpbmcoU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSksIEAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gczsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIEluaXRDYWxsYmFja3MoKSB7DQogICAgICAgIH0NCiAgICB9DQoJfQ0KDQogICAgaW50ZXJuYWwgcGFydGlhbCBjbGFzcyBSZWNpcGVGcmFtZXdvcmtTZXJpYWxpemVyIHsNCglpbnRlcm5hbCBjbGFzcyBCYXNlUmVhZGVyIDogU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgew0KDQogICAgICAgIHByb3RlY3RlZCBpbnRlcm5hbCBvYmplY3QgUmVhZDZfUmVjaXBlRnJhbWV3b3JrKCkgew0KICAgICAgICAgICAgb2JqZWN0IG8gPSBudWxsOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgaWYgKCgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxX1JlY2lwZUZyYW1ld29yayAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8gPSBSZWFkNV9SZWNpcGVGcmFtZXdvcmsoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93bk5vZGVFeGNlcHRpb24oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpSZWNpcGVGcmFtZXdvcmsiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAob2JqZWN0KW87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrIFJlYWQ1X1JlY2lwZUZyYW1ld29yayhib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yayBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrKCk7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdFtdIGFfMCA9IG51bGw7DQogICAgICAgICAgICBpbnQgY2FfMCA9IDA7DQogICAgICAgICAgICBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlW10gYV8xID0gbnVsbDsNCiAgICAgICAgICAgIGludCBjYV8xID0gMDsNCiAgICAgICAgICAgIGJvb2xbXSBwYXJhbXNSZWFkID0gbmV3IGJvb2xbNF07DQogICAgICAgICAgICB3aGlsZSAoUmVhZGVyLk1vdmVUb05leHRBdHRyaWJ1dGUoKSkgew0KICAgICAgICAgICAgICAgIGlmICghcGFyYW1zUmVhZFsyXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkNF9TY2hlbWFWZXJzaW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AU2NoZW1hVmVyc2lvbiA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFsyXSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzNdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQ1X1RyYWNlTGV2ZWwgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBUcmFjZUxldmVsID0gUmVhZDRfVHJhY2VMZXZlbChSZWFkZXIuVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzNdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6U2NoZW1hVmVyc2lvbiwgOlRyYWNlTGV2ZWwiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnMwID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDAgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDZfSG9zdHMgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFSZWFkTnVsbCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkhvc3RbXSBhXzBfMCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNhXzBfMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCByZWFkZXJDb3VudDEgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDdfSG9zdCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFfMF8wID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0W10pRW5zdXJlQXJyYXlJbmRleChhXzBfMCwgY2FfMF8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkhvc3QpKTthXzBfMFtjYV8wXzArK10gPSBSZWFkMl9Ib3N0KGZhbHNlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKG51bGwsIEAiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0Okhvc3QiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZShudWxsLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpIb3N0Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMSwgcmVmIHJlYWRlckNvdW50MSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBIb3N0cyA9IChnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdFtdKVNocmlua0FycmF5KGFfMF8wLCBjYV8wXzAsIHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuSG9zdCksIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkOF9HdWlkYW5jZVBhY2thZ2VzICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUmVhZE51bGwoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSBhXzFfMCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGNhXzFfMCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChSZWFkZXIuSXNFbXB0eUVsZW1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpbGVJdGVyYXRpb25zMiA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCByZWFkZXJDb3VudDIgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJlYWRlci5Ob2RlVHlwZSA9PSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDlfR3VpZGFuY2VQYWNrYWdlICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDJfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYV8xXzAgPSAoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVtdKUVuc3VyZUFycmF5SW5kZXgoYV8xXzAsIGNhXzFfMCwgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpKTthXzFfMFtjYV8xXzArK10gPSBSZWFkM19HdWlkYW5jZVBhY2thZ2UoZmFsc2UsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6R3VpZGFuY2VQYWNrYWdlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5rbm93bk5vZGUobnVsbCwgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6R3VpZGFuY2VQYWNrYWdlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMiwgcmVmIHJlYWRlckNvdW50Mik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkBHdWlkYW5jZVBhY2thZ2VzID0gKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSlTaHJpbmtBcnJheShhXzFfMCwgY2FfMV8wLCB0eXBlb2YoZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSksIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6SG9zdHMsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpHdWlkYW5jZVBhY2thZ2VzIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3Q6SG9zdHMsIGh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDpHdWlkYW5jZVBhY2thZ2VzIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zMCwgcmVmIHJlYWRlckNvdW50MCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIFJlYWQzX0d1aWRhbmNlUGFja2FnZShib29sIGlzTnVsbGFibGUsIGJvb2wgY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUgeHNpVHlwZSA9IGNoZWNrVHlwZSA/IEdldFhzaVR5cGUoKSA6IG51bGw7DQogICAgICAgICAgICBib29sIGlzTnVsbCA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKGlzTnVsbGFibGUpIGlzTnVsbCA9IFJlYWROdWxsKCk7DQogICAgICAgICAgICBpZiAoY2hlY2tUeXBlKSB7DQogICAgICAgICAgICBpZiAoeHNpVHlwZSA9PSBudWxsIHx8ICgob2JqZWN0KSAoKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKS5OYW1lID09IChvYmplY3QpaWQzX0l0ZW0gJiYgKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZXNwYWNlID09IChvYmplY3QpaWQyX0l0ZW0pKSB7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgQ3JlYXRlVW5rbm93blR5cGVFeGNlcHRpb24oKFN5c3RlbS5YbWwuWG1sUXVhbGlmaWVkTmFtZSl4c2lUeXBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpc051bGwpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSBvOw0KICAgICAgICAgICAgbyA9IG5ldyBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzhdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEwX05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDExX0NhcHRpb24gJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBDYXB0aW9uID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMl0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEyX0Rlc2NyaXB0aW9uICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ARGVzY3JpcHRpb24gPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbMl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFszXSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkMTNfVmVyc2lvbiAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFZlcnNpb24gPSBSZWFkZXIuVmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtc1JlYWRbM10gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICghcGFyYW1zUmVhZFs0XSAmJiAoKG9iamVjdCkgUmVhZGVyLkxvY2FsTmFtZSA9PSAob2JqZWN0KWlkN19Ib3N0ICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5ASG9zdCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs0XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzVdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNF9HdWlkICYmIChvYmplY3QpIFJlYWRlci5OYW1lc3BhY2VVUkkgPT0gKG9iamVjdClpZDNfSXRlbSkpIHsNCiAgICAgICAgICAgICAgICAgICAgby5AR3VpZCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs1XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwYXJhbXNSZWFkWzZdICYmICgob2JqZWN0KSBSZWFkZXIuTG9jYWxOYW1lID09IChvYmplY3QpaWQxNV9Db25maWd1cmF0aW9uRmlsZSAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQENvbmZpZ3VyYXRpb25GaWxlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzZdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbN10gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE2X1RpbWVzdGFtcCAmJiAob2JqZWN0KSBSZWFkZXIuTmFtZXNwYWNlVVJJID09IChvYmplY3QpaWQzX0l0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgIG8uQFRpbWVzdGFtcCA9IFJlYWRlci5WYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zUmVhZFs3XSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFJc1htbG5zQXR0cmlidXRlKFJlYWRlci5OYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiOk5hbWUsIDpDYXB0aW9uLCA6RGVzY3JpcHRpb24sIDpWZXJzaW9uLCA6SG9zdCwgOkd1aWQsIDpDb25maWd1cmF0aW9uRmlsZSwgOlRpbWVzdGFtcCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9FbGVtZW50KCk7DQogICAgICAgICAgICBpZiAoUmVhZGVyLklzRW1wdHlFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgUmVhZGVyLlNraXAoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRlci5SZWFkU3RhcnRFbGVtZW50KCk7DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvQ29udGVudCgpOw0KICAgICAgICAgICAgaW50IHdoaWxlSXRlcmF0aW9uczMgPSAwOw0KICAgICAgICAgICAgaW50IHJlYWRlckNvdW50MyA9IFJlYWRlckNvdW50Ow0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLkVuZEVsZW1lbnQgJiYgUmVhZGVyLk5vZGVUeXBlICE9IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuTm9uZSkgew0KICAgICAgICAgICAgICAgIGlmIChSZWFkZXIuTm9kZVR5cGUgPT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgICAgICBDaGVja1JlYWRlckNvdW50KHJlZiB3aGlsZUl0ZXJhdGlvbnMzLCByZWYgcmVhZGVyQ291bnQzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFJlYWRFbmRFbGVtZW50KCk7DQogICAgICAgICAgICByZXR1cm4gbzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8cmVtYXJrcy8+DQogICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0IFJlYWQyX0hvc3QoYm9vbCBpc051bGxhYmxlLCBib29sIGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lIHhzaVR5cGUgPSBjaGVja1R5cGUgPyBHZXRYc2lUeXBlKCkgOiBudWxsOw0KICAgICAgICAgICAgYm9vbCBpc051bGwgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChpc051bGxhYmxlKSBpc051bGwgPSBSZWFkTnVsbCgpOw0KICAgICAgICAgICAgaWYgKGNoZWNrVHlwZSkgew0KICAgICAgICAgICAgaWYgKHhzaVR5cGUgPT0gbnVsbCB8fCAoKG9iamVjdCkgKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSkuTmFtZSA9PSAob2JqZWN0KWlkM19JdGVtICYmIChvYmplY3QpICgoU3lzdGVtLlhtbC5YbWxRdWFsaWZpZWROYW1lKXhzaVR5cGUpLk5hbWVzcGFjZSA9PSAob2JqZWN0KWlkMl9JdGVtKSkgew0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IENyZWF0ZVVua25vd25UeXBlRXhjZXB0aW9uKChTeXN0ZW0uWG1sLlhtbFF1YWxpZmllZE5hbWUpeHNpVHlwZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNOdWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0IG87DQogICAgICAgICAgICBvID0gbmV3IGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5Ib3N0KCk7DQogICAgICAgICAgICBib29sW10gcGFyYW1zUmVhZCA9IG5ldyBib29sWzJdOw0KICAgICAgICAgICAgd2hpbGUgKFJlYWRlci5Nb3ZlVG9OZXh0QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtc1JlYWRbMF0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDEwX05hbWUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBOYW1lID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzBdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIXBhcmFtc1JlYWRbMV0gJiYgKChvYmplY3QpIFJlYWRlci5Mb2NhbE5hbWUgPT0gKG9iamVjdClpZDE3X0luc3RhbGxlclR5cGUgJiYgKG9iamVjdCkgUmVhZGVyLk5hbWVzcGFjZVVSSSA9PSAob2JqZWN0KWlkM19JdGVtKSkgew0KICAgICAgICAgICAgICAgICAgICBvLkBJbnN0YWxsZXJUeXBlID0gUmVhZGVyLlZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBwYXJhbXNSZWFkWzFdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoIUlzWG1sbnNBdHRyaWJ1dGUoUmVhZGVyLk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIFVua25vd25Ob2RlKChvYmplY3QpbywgQCI6TmFtZSwgOkluc3RhbGxlclR5cGUiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuTW92ZVRvRWxlbWVudCgpOw0KICAgICAgICAgICAgaWYgKFJlYWRlci5Jc0VtcHR5RWxlbWVudCkgew0KICAgICAgICAgICAgICAgIFJlYWRlci5Ta2lwKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkZXIuUmVhZFN0YXJ0RWxlbWVudCgpOw0KICAgICAgICAgICAgUmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCiAgICAgICAgICAgIGludCB3aGlsZUl0ZXJhdGlvbnM0ID0gMDsNCiAgICAgICAgICAgIGludCByZWFkZXJDb3VudDQgPSBSZWFkZXJDb3VudDsNCiAgICAgICAgICAgIHdoaWxlIChSZWFkZXIuTm9kZVR5cGUgIT0gU3lzdGVtLlhtbC5YbWxOb2RlVHlwZS5FbmRFbGVtZW50ICYmIFJlYWRlci5Ob2RlVHlwZSAhPSBTeXN0ZW0uWG1sLlhtbE5vZGVUeXBlLk5vbmUpIHsNCiAgICAgICAgICAgICAgICBpZiAoUmVhZGVyLk5vZGVUeXBlID09IFN5c3RlbS5YbWwuWG1sTm9kZVR5cGUuRWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBVbmtub3duTm9kZSgob2JqZWN0KW8sIEAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlYWRlci5Nb3ZlVG9Db250ZW50KCk7DQogICAgICAgICAgICAgICAgQ2hlY2tSZWFkZXJDb3VudChyZWYgd2hpbGVJdGVyYXRpb25zNCwgcmVmIHJlYWRlckNvdW50NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBSZWFkRW5kRWxlbWVudCgpOw0KICAgICAgICAgICAgcmV0dXJuIG87DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHJlbWFya3MvPg0KICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbCBSZWFkNF9UcmFjZUxldmVsKHN0cmluZyBzKSB7DQogICAgICAgICAgICBzd2l0Y2ggKHMpIHsNCiAgICAgICAgICAgICAgICBjYXNlIEAiRXJyb3IiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQEVycm9yOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJJbmZvIjogcmV0dXJuIGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsLkBJbmZvOw0KICAgICAgICAgICAgICAgIGNhc2UgQCJPZmYiOiByZXR1cm4gZ2xvYmFsOjpNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLk1hbmlmZXN0LlRyYWNlTGV2ZWwuQE9mZjsNCiAgICAgICAgICAgICAgICBjYXNlIEAiV2FybmluZyI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbC5AV2FybmluZzsNCiAgICAgICAgICAgICAgICBjYXNlIEAiVmVyYm9zZSI6IHJldHVybiBnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuVHJhY2VMZXZlbC5AVmVyYm9zZTsNCiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBDcmVhdGVVbmtub3duQ29uc3RhbnRFeGNlcHRpb24ocywgdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5UcmFjZUxldmVsKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0Q2FsbGJhY2tzKCkgew0KICAgICAgICB9DQoNCiAgICAgICAgc3RyaW5nIGlkMTBfTmFtZTsNCiAgICAgICAgc3RyaW5nIGlkMTNfVmVyc2lvbjsNCiAgICAgICAgc3RyaW5nIGlkNV9UcmFjZUxldmVsOw0KICAgICAgICBzdHJpbmcgaWQxNV9Db25maWd1cmF0aW9uRmlsZTsNCiAgICAgICAgc3RyaW5nIGlkMV9SZWNpcGVGcmFtZXdvcms7DQogICAgICAgIHN0cmluZyBpZDE2X1RpbWVzdGFtcDsNCiAgICAgICAgc3RyaW5nIGlkN19Ib3N0Ow0KICAgICAgICBzdHJpbmcgaWQzX0l0ZW07DQogICAgICAgIHN0cmluZyBpZDEyX0Rlc2NyaXB0aW9uOw0KICAgICAgICBzdHJpbmcgaWQ2X0hvc3RzOw0KICAgICAgICBzdHJpbmcgaWQxMV9DYXB0aW9uOw0KICAgICAgICBzdHJpbmcgaWQ4X0d1aWRhbmNlUGFja2FnZXM7DQogICAgICAgIHN0cmluZyBpZDRfU2NoZW1hVmVyc2lvbjsNCiAgICAgICAgc3RyaW5nIGlkMTRfR3VpZDsNCiAgICAgICAgc3RyaW5nIGlkMl9JdGVtOw0KICAgICAgICBzdHJpbmcgaWQ5X0d1aWRhbmNlUGFja2FnZTsNCiAgICAgICAgc3RyaW5nIGlkMTdfSW5zdGFsbGVyVHlwZTsNCg0KICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBJbml0SURzKCkgew0KICAgICAgICAgICAgaWQxMF9OYW1lID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJOYW1lIik7DQogICAgICAgICAgICBpZDEzX1ZlcnNpb24gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIlZlcnNpb24iKTsNCiAgICAgICAgICAgIGlkNV9UcmFjZUxldmVsID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJUcmFjZUxldmVsIik7DQogICAgICAgICAgICBpZDE1X0NvbmZpZ3VyYXRpb25GaWxlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJDb25maWd1cmF0aW9uRmlsZSIpOw0KICAgICAgICAgICAgaWQxX1JlY2lwZUZyYW1ld29yayA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiUmVjaXBlRnJhbWV3b3JrIik7DQogICAgICAgICAgICBpZDE2X1RpbWVzdGFtcCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiVGltZXN0YW1wIik7DQogICAgICAgICAgICBpZDdfSG9zdCA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSG9zdCIpOw0KICAgICAgICAgICAgaWQzX0l0ZW0gPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIiIpOw0KICAgICAgICAgICAgaWQxMl9EZXNjcmlwdGlvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiRGVzY3JpcHRpb24iKTsNCiAgICAgICAgICAgIGlkNl9Ib3N0cyA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiSG9zdHMiKTsNCiAgICAgICAgICAgIGlkMTFfQ2FwdGlvbiA9IFJlYWRlci5OYW1lVGFibGUuQWRkKEAiQ2FwdGlvbiIpOw0KICAgICAgICAgICAgaWQ4X0d1aWRhbmNlUGFja2FnZXMgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWRhbmNlUGFja2FnZXMiKTsNCiAgICAgICAgICAgIGlkNF9TY2hlbWFWZXJzaW9uID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJTY2hlbWFWZXJzaW9uIik7DQogICAgICAgICAgICBpZDE0X0d1aWQgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWQiKTsNCiAgICAgICAgICAgIGlkMl9JdGVtID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiKTsNCiAgICAgICAgICAgIGlkOV9HdWlkYW5jZVBhY2thZ2UgPSBSZWFkZXIuTmFtZVRhYmxlLkFkZChAIkd1aWRhbmNlUGFja2FnZSIpOw0KICAgICAgICAgICAgaWQxN19JbnN0YWxsZXJUeXBlID0gUmVhZGVyLk5hbWVUYWJsZS5BZGQoQCJJbnN0YWxsZXJUeXBlIik7DQogICAgICAgIH0NCiAgICB9DQoJfQ0KDQogICAgaW50ZXJuYWwgYWJzdHJhY3QgY2xhc3MgUmVjaXBlRnJhbWV3b3JrU2VyaWFsaXplckJhc2UgOiBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplciB7DQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvblJlYWRlciBDcmVhdGVSZWFkZXIoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIuQmFzZVJlYWRlcigpOw0KICAgICAgICB9DQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciBDcmVhdGVXcml0ZXIoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIuQmFzZVdyaXRlcigpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaW50ZXJuYWwgc2VhbGVkIHBhcnRpYWwgY2xhc3MgUmVjaXBlRnJhbWV3b3JrU2VyaWFsaXplciA6IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXJCYXNlIHsNCg0KCQlSZWNpcGVGcmFtZXdvcmtSZWFkZXIgX3JlYWRlcjsNCgkJUmVjaXBlRnJhbWV3b3JrV3JpdGVyIF93cml0ZXI7DQoNCgkJLy8vIDxzdW1tYXJ5PkNvbnN0cnVjdHMgdGhlIHNlcmlhbGl6ZXIuPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgUmVjaXBlRnJhbWV3b3JrU2VyaWFsaXplcigpDQoJCXsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT5Db25zdHJ1Y3RzIHRoZSBzZXJpYWxpemVyIHdpdGggYSBwcmUtYnVpbHQgcmVhZGVyLjwvc3VtbWFyeT4NCgkJcHVibGljIFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIoUmVjaXBlRnJhbWV3b3JrUmVhZGVyIHJlYWRlcikNCgkJew0KCQkJX3JlYWRlciA9IHJlYWRlcjsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT5Db25zdHJ1Y3RzIHRoZSBzZXJpYWxpemVyIHdpdGggYSBwcmUtYnVpbHQgd3JpdGVyLjwvc3VtbWFyeT4NCgkJcHVibGljIFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIoUmVjaXBlRnJhbWV3b3JrV3JpdGVyIHdyaXRlcikNCgkJew0KCQkJX3dyaXRlciA9IHdyaXRlcjsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT5Db25zdHJ1Y3RzIHRoZSBzZXJpYWxpemVyIHdpdGggcHJlLWJ1aWx0IHJlYWRlciBhbmQgd3JpdGVyLjwvc3VtbWFyeT4NCgkJcHVibGljIFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIoUmVjaXBlRnJhbWV3b3JrUmVhZGVyIHJlYWRlciwgUmVjaXBlRnJhbWV3b3JrV3JpdGVyIHdyaXRlcikNCgkJew0KCQkJX3JlYWRlciA9IHJlYWRlcjsNCgkJCV93cml0ZXIgPSB3cml0ZXI7DQoJCX0NCg0KCQkvLy8gPHJlbWFya3MvPg0KCQlwcm90ZWN0ZWQgb3ZlcnJpZGUgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgQ3JlYXRlUmVhZGVyKCkNCgkJew0KCQkJaWYgKF9yZWFkZXIgIT0gbnVsbCkgcmV0dXJuIF9yZWFkZXI7DQoJCQkNCgkJCXJldHVybiBiYXNlLkNyZWF0ZVJlYWRlcigpOw0KCQl9DQoNCgkJLy8vIDxyZW1hcmtzLz4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uV3JpdGVyIENyZWF0ZVdyaXRlcigpDQoJCXsNCgkJCWlmIChfd3JpdGVyICE9IG51bGwpIHJldHVybiBfd3JpdGVyOw0KCQkJDQoJCQlyZXR1cm4gYmFzZS5DcmVhdGVXcml0ZXIoKTsNCgkJfQ0KDQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQm9vbGVhbiBDYW5EZXNlcmlhbGl6ZShTeXN0ZW0uWG1sLlhtbFJlYWRlciB4bWxSZWFkZXIpIHsNCiAgICAgICAgICAgIHJldHVybiB4bWxSZWFkZXIuSXNTdGFydEVsZW1lbnQoQCJSZWNpcGVGcmFtZXdvcmsiLCBAImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgU2VyaWFsaXplKG9iamVjdCBvYmplY3RUb1NlcmlhbGl6ZSwgU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25Xcml0ZXIgd3JpdGVyKSB7DQogICAgICAgICAgICAoKEJhc2VXcml0ZXIpd3JpdGVyKS5Xcml0ZTZfUmVjaXBlRnJhbWV3b3JrKG9iamVjdFRvU2VyaWFsaXplKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBvYmplY3QgRGVzZXJpYWxpemUoU3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6YXRpb25SZWFkZXIgcmVhZGVyKSB7DQogICAgICAgICAgICByZXR1cm4gKChCYXNlUmVhZGVyKXJlYWRlcikuUmVhZDZfUmVjaXBlRnJhbWV3b3JrKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpbnRlcm5hbCBwYXJ0aWFsIGNsYXNzIFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIgew0KCWludGVybmFsIGNsYXNzIFhtbFNlcmlhbGl6ZXJDb250cmFjdCA6IGdsb2JhbDo6U3lzdGVtLlhtbC5TZXJpYWxpemF0aW9uLlhtbFNlcmlhbGl6ZXJJbXBsZW1lbnRhdGlvbiB7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBnbG9iYWw6OlN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemF0aW9uUmVhZGVyIFJlYWRlciB7IGdldCB7IHJldHVybiBuZXcgUmVjaXBlRnJhbWV3b3JrU2VyaWFsaXplci5CYXNlUmVhZGVyKCk7IH0gfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgZ2xvYmFsOjpTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXphdGlvbldyaXRlciBXcml0ZXIgeyBnZXQgeyByZXR1cm4gbmV3IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIuQmFzZVdyaXRlcigpOyB9IH0NCiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSByZWFkTWV0aG9kcyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFJlYWRNZXRob2RzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHJlYWRNZXRob2RzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBfdG1wID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUoKTsNCiAgICAgICAgICAgICAgICAgICAgX3RtcFtAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrOmh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDo6RmFsc2U6Il0gPSBAIlJlYWQ2X1JlY2lwZUZyYW1ld29yayI7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZWFkTWV0aG9kcyA9PSBudWxsKSByZWFkTWV0aG9kcyA9IF90bXA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiByZWFkTWV0aG9kczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHdyaXRlTWV0aG9kcyA9IG51bGw7DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIFdyaXRlTWV0aG9kcyB7DQogICAgICAgICAgICBnZXQgew0KICAgICAgICAgICAgICAgIGlmICh3cml0ZU1ldGhvZHMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wW0AiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcms6aHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0OjpGYWxzZToiXSA9IEAiV3JpdGU2X1JlY2lwZUZyYW1ld29yayI7DQogICAgICAgICAgICAgICAgICAgIGlmICh3cml0ZU1ldGhvZHMgPT0gbnVsbCkgd3JpdGVNZXRob2RzID0gX3RtcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlTWV0aG9kczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHR5cGVkU2VyaWFsaXplcnMgPSBudWxsOw0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSBUeXBlZFNlcmlhbGl6ZXJzIHsNCiAgICAgICAgICAgIGdldCB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVkU2VyaWFsaXplcnMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIF90bXAgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICBfdG1wLkFkZChAIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrOmh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdDo6RmFsc2U6IiwgbmV3IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIoKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlZFNlcmlhbGl6ZXJzID09IG51bGwpIHR5cGVkU2VyaWFsaXplcnMgPSBfdG1wOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZWRTZXJpYWxpemVyczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgU3lzdGVtLkJvb2xlYW4gQ2FuU2VyaWFsaXplKFN5c3RlbS5UeXBlIHR5cGUpIHsNCiAgICAgICAgICAgIGlmICh0eXBlID09IHR5cGVvZihnbG9iYWw6Ok1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrKSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbi5YbWxTZXJpYWxpemVyIEdldFNlcmlhbGl6ZXIoU3lzdGVtLlR5cGUgdHlwZSkgew0KICAgICAgICAgICAgaWYgKHR5cGUgPT0gdHlwZW9mKGdsb2JhbDo6TWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmspKSByZXR1cm4gbmV3IFJlY2lwZUZyYW1ld29ya1NlcmlhbGl6ZXIoKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgfQ0KCX0NCn0NCg0KDQojcHJhZ21hIHdhcm5pbmcgcmVzdG9yZSAwNjQyLCAwMjE5DQo=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>2</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/ManifestConfig.xsd</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjw/eG1sLXN0eWxlc2hlZXQgaHJlZj0iSVBHU2NoZW1hLnhzbHQiIHR5cGU9InRleHQveHNsIj8+DQo8eHM6c2NoZW1hIHRhcmdldE5hbWVzcGFjZT0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LW1hbmlmZXN0IiBlbGVtZW50Rm9ybURlZmF1bHQ9InF1YWxpZmllZCIgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCIgeG1sbnM6Z2F4PSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiIHhtbG5zOnhzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSIgeG1sbnM6bXNkYXRhPSJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnhtbC1tc2RhdGEiPg0KICA8eHM6ZWxlbWVudCBuYW1lPSJSZWNpcGVGcmFtZXdvcmsiPg0KICAgIDx4czphbm5vdGF0aW9uPg0KICAgICAgPHhzOmRvY3VtZW50YXRpb24+DQogICAgICAgIE1hbmlmZXN0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgaW5zdGFsbGVkIHBhY2thZ2VzLg0KICAgICAgICBTb21lIGF0dHJpYnV0ZSB2YWx1ZXMgd2lsbCBiZSBzcGVjaWZpZWQgaW4gYSBwZXItdXNlciBtYW5pZmVzdC4NCiAgICAgIDwveHM6ZG9jdW1lbnRhdGlvbj4NCiAgICA8L3hzOmFubm90YXRpb24+DQogICAgPHhzOmNvbXBsZXhUeXBlPg0KICAgICAgPHhzOnNlcXVlbmNlPg0KICAgICAgICA8eHM6ZWxlbWVudCBuYW1lPSJIb3N0cyI+DQogICAgICAgICAgPHhzOmNvbXBsZXhUeXBlPg0KICAgICAgICAgICAgPHhzOnNlcXVlbmNlPg0KICAgICAgICAgICAgICA8eHM6ZWxlbWVudCByZWY9Ikhvc3QiIG1pbk9jY3Vycz0iMCIgbWF4T2NjdXJzPSJ1bmJvdW5kZWQiLz4NCiAgICAgICAgICAgIDwveHM6c2VxdWVuY2U+DQogICAgICAgICAgPC94czpjb21wbGV4VHlwZT4NCiAgICAgICAgPC94czplbGVtZW50Pg0KICAgICAgICA8eHM6ZWxlbWVudCBuYW1lPSJHdWlkYW5jZVBhY2thZ2VzIj4NCiAgICAgICAgICA8eHM6Y29tcGxleFR5cGU+DQogICAgICAgICAgICA8eHM6c2VxdWVuY2U+DQogICAgICAgICAgICAgIDx4czplbGVtZW50IHJlZj0iR3VpZGFuY2VQYWNrYWdlIiBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0idW5ib3VuZGVkIi8+DQogICAgICAgICAgICA8L3hzOnNlcXVlbmNlPg0KICAgICAgICAgIDwveHM6Y29tcGxleFR5cGU+DQogICAgICAgIDwveHM6ZWxlbWVudD4NCiAgICAgIDwveHM6c2VxdWVuY2U+DQogICAgICA8eHM6YXR0cmlidXRlIG5hbWU9IlNjaGVtYVZlcnNpb24iIHR5cGU9InhzOnN0cmluZyIgdXNlPSJyZXF1aXJlZCIgZml4ZWQ9IjEuMCI+DQogICAgICAgIDx4czphbm5vdGF0aW9uPg0KICAgICAgICAgIDx4czpkb2N1bWVudGF0aW9uPg0KICAgICAgICAgICAgRml4ZWQgdmVyc2lvbiBmb3IgdGhlIGZyYW1ld29yayBtYW5pZmVzdCwgd2hpY2ggbXVzdCBiZSB0aGUgc3RyaW5nICIxLjAiDQogICAgICAgICAgPC94czpkb2N1bWVudGF0aW9uPg0KICAgICAgICA8L3hzOmFubm90YXRpb24+DQogICAgICA8L3hzOmF0dHJpYnV0ZT4NCiAgICAgIDx4czphdHRyaWJ1dGUgbmFtZT0iVHJhY2VMZXZlbCIgdHlwZT0iVHJhY2VMZXZlbCIgZGVmYXVsdD0iRXJyb3IiPg0KICAgICAgICA8eHM6YW5ub3RhdGlvbj4NCiAgICAgICAgICA8eHM6ZG9jdW1lbnRhdGlvbj4NCiAgICAgICAgICAgIEFsbG93cyBzcGVjaWZpY2F0aW9uIG9mIHRoZSB0cmFjZSBsZXZlbCB0byB1c2UgZm9yIHRoZSBmcmFtZXdvcmsgYW5kDQogICAgICAgICAgICBhbGwgcGFja2FnZXMgKGV4Y2VwdCB3aGVuIG92ZXJyaWRlbikuDQogICAgICAgICAgPC94czpkb2N1bWVudGF0aW9uPg0KICAgICAgICA8L3hzOmFubm90YXRpb24+DQogICAgICA8L3hzOmF0dHJpYnV0ZT4NCiAgICA8L3hzOmNvbXBsZXhUeXBlPg0KICAgIDx4czprZXkgbmFtZT0iSG9zdE5hbWVLZXkiPg0KICAgICAgPHhzOmFubm90YXRpb24+DQogICAgICAgIDx4czpkb2N1bWVudGF0aW9uPg0KICAgICAgICAgIFJlY2lwZSBuYW1lcyBtdXN0IGJlIHVuaXF1ZS4NCiAgICAgICAgPC94czpkb2N1bWVudGF0aW9uPg0KICAgICAgPC94czphbm5vdGF0aW9uPg0KICAgICAgPHhzOnNlbGVjdG9yIHhwYXRoPSJnYXg6SG9zdHMvZ2F4Okhvc3QiIC8+DQogICAgICA8eHM6ZmllbGQgeHBhdGg9IkBOYW1lIiAvPg0KICAgIDwveHM6a2V5Pg0KICAgIDx4czp1bmlxdWUgbmFtZT0iUGFja2FnZUd1aWRLZXkiPg0KICAgICAgPHhzOmFubm90YXRpb24+DQogICAgICAgIDx4czpkb2N1bWVudGF0aW9uPg0KICAgICAgICAgIFJlY2lwZSBwYWNrYWdlIG5hbWVzIG11c3QgYmUgdW5pcXVlLg0KICAgICAgICA8L3hzOmRvY3VtZW50YXRpb24+DQogICAgICA8L3hzOmFubm90YXRpb24+DQogICAgICA8eHM6c2VsZWN0b3IgeHBhdGg9ImdheDpHdWlkYW5jZXMvZ2F4Okd1aWRhbmNlUGFja2FnZSIgLz4NCiAgICAgIDx4czpmaWVsZCB4cGF0aD0iQEd1aWQiIC8+DQogICAgPC94czp1bmlxdWU+DQogIDwveHM6ZWxlbWVudD4NCiAgPHhzOmVsZW1lbnQgbmFtZT0iR3VpZGFuY2VQYWNrYWdlIj4NCiAgICA8eHM6Y29tcGxleFR5cGU+DQoJCQk8eHM6YXR0cmlidXRlIG5hbWU9Ik5hbWUiIHVzZT0ib3B0aW9uYWwiPg0KCQkJCTx4czphbm5vdGF0aW9uPg0KCQkJCQk8eHM6ZG9jdW1lbnRhdGlvbj4NCgkJCQkJCURlcHJlY2F0ZWQgYXR0cmlidXR0ZSwgdXNlIEd1aWQgdG8gdW5pcXVlbHkgbmFtZSB5b3VyIHBhY2thZ2UNCgkJCQkJPC94czpkb2N1bWVudGF0aW9uPg0KCQkJCTwveHM6YW5ub3RhdGlvbj4NCgkJCTwveHM6YXR0cmlidXRlPg0KCQkJPHhzOmF0dHJpYnV0ZSBuYW1lPSJDYXB0aW9uIiB1c2U9InJlcXVpcmVkIj4NCiAgICAgICAgPHhzOmFubm90YXRpb24+DQogICAgICAgICAgPHhzOmRvY3VtZW50YXRpb24+DQogICAgICAgICAgICBGcmllbmRseSBzaG9ydCBkZXNjcmlwdGlvbiBvZiB0aGUgcGFja2FnZS4NCiAgICAgICAgICA8L3hzOmRvY3VtZW50YXRpb24+DQogICAgICAgIDwveHM6YW5ub3RhdGlvbj4NCiAgICAgICAgPHhzOnNpbXBsZVR5cGU+DQogICAgICAgICAgPHhzOnJlc3RyaWN0aW9uIGJhc2U9InhzOnN0cmluZyI+DQogICAgICAgICAgICA8eHM6bWluTGVuZ3RoIHZhbHVlPSIxIi8+DQogICAgICAgICAgPC94czpyZXN0cmljdGlvbj4NCiAgICAgICAgPC94czpzaW1wbGVUeXBlPg0KICAgICAgPC94czphdHRyaWJ1dGU+DQogICAgICA8eHM6YXR0cmlidXRlIG5hbWU9IkRlc2NyaXB0aW9uIiB0eXBlPSJ4czpzdHJpbmciPg0KICAgICAgICA8eHM6YW5ub3RhdGlvbj4NCiAgICAgICAgICA8eHM6ZG9jdW1lbnRhdGlvbj4NCiAgICAgICAgICAgIEZ1bGwtbGVuZ3RoIGRlc2NyaXB0aW9uIG9mIHRoZSBwdXJwb3NlIG9mIHRoZSBwYWNrYWdlLCBpdHMgZmVhdHVyZXMgYW5kIHJlcXVpcmVtZW50cy4NCiAgICAgICAgICA8L3hzOmRvY3VtZW50YXRpb24+DQogICAgICAgIDwveHM6YW5ub3RhdGlvbj4NCiAgICAgIDwveHM6YXR0cmlidXRlPg0KICAgICAgPHhzOmF0dHJpYnV0ZSBuYW1lPSJWZXJzaW9uIiB1c2U9InJlcXVpcmVkIj4NCiAgICAgICAgPHhzOmFubm90YXRpb24+DQogICAgICAgICAgPHhzOmRvY3VtZW50YXRpb24+DQogICAgICAgICAgICBSZXF1aXJlZCBwYWNrYWdlIHZlcnNpb24gZm9yIHNpZGUgYnkgc2lkZSBwYWNrYWdlIGluc3RhbGxhdGlvbi4gQXMgdGhlDQogICAgICAgICAgICBwYWNrYWdlIHNjaGVtYSBzcGVjaWZpZXMgYSBkZWZhdWx0IHZhbHVlIGZvciB0aGlzIGF0dHJpYnV0ZSwgd2Ugd2lsbA0KICAgICAgICAgICAgYWx3YXlzIGhhdmUgYSB2YWx1ZSBoZXJlLCBoZW5jZSBpdCdzIG1hZGUgcmVxdWlyZWQuDQogICAgICAgICAgPC94czpkb2N1bWVudGF0aW9uPg0KICAgICAgICA8L3hzOmFubm90YXRpb24+DQogICAgICAgIDx4czpzaW1wbGVUeXBlPg0KICAgICAgICAgIDx4czpyZXN0cmljdGlvbiBiYXNlPSJ4czpzdHJpbmciPg0KICAgICAgICAgICAgPHhzOm1pbkxlbmd0aCB2YWx1ZT0iMSIvPg0KICAgICAgICAgIDwveHM6cmVzdHJpY3Rpb24+DQogICAgICAgIDwveHM6c2ltcGxlVHlwZT4NCiAgICAgIDwveHM6YXR0cmlidXRlPg0KICAgICAgPHhzOmF0dHJpYnV0ZSBuYW1lPSJIb3N0IiB0eXBlPSJ4czpzdHJpbmciIGRlZmF1bHQ9IlZpc3VhbFN0dWRpbyI+DQogICAgICAgIDx4czphbm5vdGF0aW9uPg0KICAgICAgICAgIDx4czpkb2N1bWVudGF0aW9uPg0KICAgICAgICAgICAgPHN1bW1hcnkgeG1sbnM9IiI+QXJiaXRyYXJ5IG5hbWUgb2YgdGhlIGhvc3QgdGhpcyBwYWNrYWdlIHdpbGwgcnVuIG9uLiA8L3N1bW1hcnk+DQogICAgICAgICAgICA8cmVtYXJrcyB4bWxucz0iIj4NCiAgICAgICAgICAgICAgVGhlIHJlY2lwZSBtYW5hZ2VyLCB1cG9uIGJlaW5nIGxvYWRlZCBvbiBhIGhvc3QsIGdldHMgdGhlIGlkZW50aWZpZXIgZm9yDQogICAgICAgICAgICAgIHRoZSBraW5kIG9mIGhvc3QgaXQncyBiZWluZyBsb2FkZWQgaW50by4gVGhpcyBuYW1lIGlzIHVzZWQgdG8gcmVzb2x2ZQ0KICAgICAgICAgICAgICB0aGUgcGFja2FnZXMgdGhhdCBjYW4gYmUgbG9hZGVkLiBGb3IgZXhhbXBsZSwgdGhlIFZpc3VhbCBTdHVkaW8gaW50ZWdyYXRpb24NCiAgICAgICAgICAgICAgcGFja2FnZSBsb2FkcyB0aGUgbWFuYWdlciB3aXRoIGEgaG9zdCBuYW1lIG9mICJWaXN1YWxTdHVkaW8iLCB3aGljaCBpcw0KICAgICAgICAgICAgICBhbHNvIHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgYXR0cmlidXRlIGlmIGl0J3Mgb21pdHRlZC4NCiAgICAgICAgICAgIDwvcmVtYXJrcz4NCiAgICAgICAgICA8L3hzOmRvY3VtZW50YXRpb24+DQogICAgICAgIDwveHM6YW5ub3RhdGlvbj4NCiAgICAgIDwveHM6YXR0cmlidXRlPg0KICAgICAgPHhzOmF0dHJpYnV0ZSBuYW1lPSJHdWlkIiB1c2U9InJlcXVpcmVkIj4NCiAgICAgICAgPHhzOmFubm90YXRpb24+DQogICAgICAgICAgPHhzOmRvY3VtZW50YXRpb24+DQogICAgICAgICAgICBBIEdVSUQgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBwYWNrYWdlLiANCgkJCQkJCVRoZSB2YWx1ZSBtdXN0IG5vdCBjb250YWluIGVuY2xvc2luZyBicmFja2V0cyBvciBwYXJlbnRoZXNpcy4NCiAgICAgICAgICAgIEl0IG11c3QgYWxzbyBiZSB1bmlxdWUgYWNyb3NzIGFsbCBpbnN0YWxsZWQgcGFja2FnZXMuDQogICAgICAgICAgPC94czpkb2N1bWVudGF0aW9uPg0KICAgICAgICA8L3hzOmFubm90YXRpb24+DQogICAgICAgIDx4czpzaW1wbGVUeXBlPg0KICAgICAgICAgIDx4czpyZXN0cmljdGlvbiBiYXNlPSJ4czpzdHJpbmciPg0KICAgICAgICAgICAgPHhzOnBhdHRlcm4gdmFsdWU9Il5bMC05YS1mQS1GXXs4fS0oWzAtOWEtZkEtRl17NH0tKXszfVswLTlhLWZBLUZdezEyfSQiIC8+DQogICAgICAgICAgPC94czpyZXN0cmljdGlvbj4NCiAgICAgICAgPC94czpzaW1wbGVUeXBlPg0KICAgICAgPC94czphdHRyaWJ1dGU+DQogICAgICA8eHM6YXR0cmlidXRlIG5hbWU9IkNvbmZpZ3VyYXRpb25GaWxlIiB0eXBlPSJ4czpzdHJpbmciIHVzZT0icmVxdWlyZWQiPg0KICAgICAgICA8eHM6YW5ub3RhdGlvbj4NCiAgICAgICAgICA8eHM6ZG9jdW1lbnRhdGlvbj4NCiAgICAgICAgICAgIFRoZSBmdWxsIHBhdGggb2YgdGhlIFhNTCBmaWxlIGNvbnRhaW5pbmcgdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbi4NCiAgICAgICAgICA8L3hzOmRvY3VtZW50YXRpb24+DQogICAgICAgIDwveHM6YW5ub3RhdGlvbj4NCiAgICAgIDwveHM6YXR0cmlidXRlPg0KICAgICAgPHhzOmF0dHJpYnV0ZSBuYW1lPSJUaW1lc3RhbXAiIHR5cGU9InhzOnN0cmluZyIgdXNlPSJyZXF1aXJlZCI+DQogICAgICAgIDx4czphbm5vdGF0aW9uPg0KICAgICAgICAgIDx4czpkb2N1bWVudGF0aW9uPg0KICAgICAgICAgICAgU3RhbXAgb2YgdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbiB3aGVuIGluc3RhbGxhdGlvbiBvY2N1cnJlZC4NCiAgICAgICAgICA8L3hzOmRvY3VtZW50YXRpb24+DQogICAgICAgIDwveHM6YW5ub3RhdGlvbj4NCiAgICAgIDwveHM6YXR0cmlidXRlPg0KICAgIDwveHM6Y29tcGxleFR5cGU+DQogIDwveHM6ZWxlbWVudD4NCiAgPHhzOmVsZW1lbnQgbmFtZT0iSG9zdCI+DQogICAgPHhzOmFubm90YXRpb24+DQogICAgICA8eHM6ZG9jdW1lbnRhdGlvbj4NCiAgICAgICAgQSBob3N0IHRoYXQgaGFzIGJlZW4gcmVnaXN0ZXJlZCB3aXRoIHRoZSBmcmFtZXdvcmsuDQogICAgICA8L3hzOmRvY3VtZW50YXRpb24+DQogICAgPC94czphbm5vdGF0aW9uPg0KICAgIDx4czpjb21wbGV4VHlwZT4NCiAgICAgIDx4czphdHRyaWJ1dGUgbmFtZT0iTmFtZSIgdHlwZT0ieHM6c3RyaW5nIiAvPg0KICAgICAgPHhzOmF0dHJpYnV0ZSBuYW1lPSJJbnN0YWxsZXJUeXBlIiB0eXBlPSJ4czpzdHJpbmciIC8+DQogICAgPC94czpjb21wbGV4VHlwZT4NCiAgPC94czplbGVtZW50Pg0KICA8eHM6c2ltcGxlVHlwZSBuYW1lPSJUcmFjZUxldmVsIj4NCiAgICA8eHM6YW5ub3RhdGlvbj4NCiAgICAgIDx4czpkb2N1bWVudGF0aW9uPg0KICAgICAgICBTZWUgLk5FVCBGcmFtZXdvcmsgU3lzdGVtLkRpYWdub3N0aWNzLlRyYWNlTGV2ZWwgZW51bWVyYXRpb24gZG9jdW1lbnRhdGlvbi4NCiAgICAgIDwveHM6ZG9jdW1lbnRhdGlvbj4NCiAgICA8L3hzOmFubm90YXRpb24+DQogICAgPHhzOnJlc3RyaWN0aW9uIGJhc2U9InhzOnN0cmluZyI+DQogICAgICA8eHM6ZW51bWVyYXRpb24gdmFsdWU9IkVycm9yIiAvPg0KICAgICAgPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJJbmZvIiAvPg0KICAgICAgPHhzOmVudW1lcmF0aW9uIHZhbHVlPSJPZmYiIC8+DQogICAgICA8eHM6ZW51bWVyYXRpb24gdmFsdWU9Ildhcm5pbmciIC8+DQogICAgICA8eHM6ZW51bWVyYXRpb24gdmFsdWU9IlZlcmJvc2UiIC8+DQogICAgPC94czpyZXN0cmljdGlvbj4NCiAgPC94czpzaW1wbGVUeXBlPg0KPC94czpzY2hlbWE+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>2</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Common/Configuration/SchemaInfo.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KDQojZW5kcmVnaW9uDQoNCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uDQp7DQoJLy8vIDxzdW1tYXJ5Pg0KCS8vLyBFeHBvc2VzIHNjaGVtYSBpbmZvcm1hdGlvbiBmb3IgdGhlIGZyYW1ld29yayBjb25maWd1cmF0aW9uLg0KCS8vLyA8L3N1bW1hcnk+DQoJcHVibGljIHNlYWxlZCBjbGFzcyBTY2hlbWFJbmZvDQoJew0KCQlwcml2YXRlIFNjaGVtYUluZm8oKSB7fQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIE5hbWVzcGFjZSBvZiBwYWNrYWdlIGNvbmZpZ3VyYXRpb24gZmlsZXMuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBjb25zdCBzdHJpbmcgUGFja2FnZU5hbWVzcGFjZSA9ICJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSI7DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRGVmYXVsdCBuYW1lc3BhY2UgdXNlZCBpbiBlbGVtZW50cyBhbmQgcXVlcmllcywgd2hpY2ggZXF1YWxzICJnYXgiLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgY29uc3Qgc3RyaW5nIFByZWZpeCA9ICJnYXgiOw0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIE5hbWVzcGFjZSBvZiBtYW5pZmVzdCBmaWxlcy4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBNYW5pZmVzdE5hbWVzcGFjZSA9ICJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtbWFuaWZlc3QiOw0KICAgIH0NCg0KICAgIC8vLyA8c3VtbWFyeT4NCiAgICAvLy8gRWxlbWVudCBuYW1lcyB1c2VkIGluIHRoZSBjb25maWd1cmF0aW9uIHNjaGVtYS4NCiAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgIHB1YmxpYyBzZWFsZWQgY2xhc3MgRWxlbWVudE5hbWVzDQogICAgew0KICAgICAgICBwcml2YXRlIEVsZW1lbnROYW1lcygpIHsgfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIFJvb3QgZWxlbWVudCBvZiB0aGUgY29uZmlndXJhdGlvbiBmb3IgYSBwYWNrYWdlLCBhbmQgdGhlIA0KCQkvLy8gbm9kZSBpbiB0aGUgbWFuaWZlc3Qgc3BlY2lmeWluZyBjb25maWd1cmF0aW9uIGZvciBhIHBhY2thZ2UuDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyBjb25zdCBzdHJpbmcgR3VpZGFuY2VQYWNrYWdlID0gIkd1aWRhbmNlUGFja2FnZSI7DQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIERlZmluZXMgYSBob3N0IGJpbmRpbmcgbm9kZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIGNvbnN0IHN0cmluZyBIb3N0ID0gIkhvc3QiOw0KICAgIH0NCg0KICAgIC8vLyA8c3VtbWFyeT4NCiAgICAvLy8gQXR0cmlidXRlIG5hbWVzIHVzZWQgaW4gdGhlIGNvbmZpZ3VyYXRpb24gc2NoZW1hLg0KICAgIC8vLyA8L3N1bW1hcnk+DQogICAgcHVibGljIHNlYWxlZCBjbGFzcyBBdHRyaWJ1dGVOYW1lcw0KICAgIHsNCiAgICAgICAgcHJpdmF0ZSBBdHRyaWJ1dGVOYW1lcygpIHsgfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFRoZSBuYW1lIG9mIHRoZSBIb3N0DQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBjb25zdCBzdHJpbmcgTmFtZSA9ICJOYW1lIjsNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gVmVyc2lvbiBvZiBhbiBlbGVtZW50IG9yIGRvY3VtZW50Lg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgY29uc3Qgc3RyaW5nIFZlcnNpb24gPSAiVmVyc2lvbiI7DQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIERpc3BsYXkgbmFtZSBvZiBhIHBhY2thZ2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBjb25zdCBzdHJpbmcgQ2FwdGlvbiA9ICJDYXB0aW9uIjsNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRnVsbCBkZXNjcmlwdGlvbiBvZiBhIHBhY2thZ2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBjb25zdCBzdHJpbmcgRGVzY3JpcHRpb24gPSAiRGVzY3JpcHRpb24iOw0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBUaW1lc3RhbXAgb2YgdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbiBmaWxlIGF0IGluc3RhbGxhdGlvbiB0aW1lLg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICBwdWJsaWMgY29uc3Qgc3RyaW5nIFRpbWVzdGFtcCA9ICJUaW1lc3RhbXAiOw0KICAgICAgICAvLy8gPHN1bW1hcnk+DQoJCS8vLyBMZXZlbCBvZiBpbmZvcm1hdGlvbiB0cmFjaW5nIGZvciBhIHBhY2thZ2Ugb3IgdGhlIGZyYW1ld29yay4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIGNvbnN0IHN0cmluZyBUcmFjZUxldmVsID0gIlRyYWNlTGV2ZWwiOw0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBPcHRpb25hbCB1bmlxdWUgaWRlbnRpZmllciBmb3IgYSBwYWNrYWdlIG9uIGEgaG9zdC4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBHdWlkID0gIkd1aWQiOw0KICAgICAgICAvLy8gPHN1bW1hcnk+DQoJCS8vLyBIb3N0IHdoZXJlIGEgcGFja2FnZSB3aWxsIHJ1biBvbi4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIGNvbnN0IHN0cmluZyBIb3N0ID0gIkhvc3QiOw0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBMb2NhdGlvbiBvZiB0aGUgY29uZmlndXJhdGlvbiBmaWxlIGZvciBhIHBhY2thZ2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBjb25zdCBzdHJpbmcgQ29uZmlndXJhdGlvbkZpbGUgPSAiQ29uZmlndXJhdGlvbkZpbGUiOw0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBBdHRyaWJ1dGUgb2YgdGhlIDxzZWUgY3JlZj0iRWxlbWVudE5hbWVzLkhvc3QiLz4gbm9kZSB0aGF0IHNwZWNpZmllcyB0aGUgDQoJCS8vLyB0eXBlIHRoYXQgcGVyZm9ybXMgaW5zdGFsbGF0aW9uIG9mIHBhY2thZ2VzIGluIHRoZSBob3N0Lg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgY29uc3Qgc3RyaW5nIEluc3RhbGxlclR5cGUgPSAiSW5zdGFsbGVyVHlwZSI7DQogICAgfQ0KfQ0K</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>17</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Framework/GuidancePackage.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDsNCnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ247DQp1c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7DQp1c2luZyBTeXN0ZW0uSU87DQp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgU3lzdGVtLlhtbDsNCnVzaW5nIFN5c3RlbS5YbWwuU2NoZW1hOw0KdXNpbmcgU3lzdGVtLldpbmRvd3MuRm9ybXMuRGVzaWduOw0KDQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLkNvbXBvbmVudE1vZGVsOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb247DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlNlcmlhbGl6YXRpb247DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5TZXJ2aWNlczsNCg0KLy8gQ3JlYXRlIGFuIGFsaWFzIHRvIGF2b2lkIGNvbmZsaWN0cyB3aXRoIHRoZSBDb25maWd1cmF0aW9uIHByb3BlcnR5Lg0KdXNpbmcgQ29uZmlnID0gTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tbW9uLlNlcnZpY2VzOw0KdXNpbmcgTXZwLlhtbC5YSW5jbHVkZTsNCnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uOw0KdXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbjsNCnVzaW5nIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlczsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkludGVybmFsOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQoNCiNlbmRyZWdpb24gVXNpbmcgZGlyZWN0aXZlcw0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsNCnsNCgkvLy8gPHN1bW1hcnk+DQoJLy8vIFJlcHJlc2VudHMgYSBsb2dpY2FsIGdyb3VwaW5nIG9mIHJlY2lwZXMuDQoJLy8vIDwvc3VtbWFyeT4NCgkvLy8gPHJlbWFya3M+IA0KCS8vLyBBIGd1aWRhbmNlIHBhY2thZ2UgZGVwZW5kcyBvbiBhbiA8c2VlIGNyZWY9IklQZXJzaXN0ZW5jZVNlcnZpY2UiLz4gYmVpbmcgDQoJLy8vIGV4cG9zZWQgdG8gc3VzcGVuZCBleGVjdXRpb24gb2YgcmVjaXBlcy4gVGhlIGltcGxlbWVudGF0aW9uIG9mIA0KCS8vLyB0aGlzIHNlcnZpY2UgbXVzdCBiZSBob29rZWQgZWl0aGVyIGludG8gdGhlIHBhcmVudCA8c2VlIGNyZWY9IlJlY2lwZU1hbmFnZXIiLz4gDQoJLy8vIChmb3IgZ2xvYmFsIHN0b3JhZ2UgY29tbW9uIHRvIGFsbCBwYWNrYWdlcykgb3IgaW50byB0aGUgcGFja2FnZSBpdHNlbGYgZm9yIA0KCS8vLyBwYWNrYWdlLXNwZWNpZmljIHN0b3JhZ2UuDQoJLy8vIDwvcmVtYXJrcz4NCglbU2VydmljZURlcGVuZGVuY3kodHlwZW9mKElUeXBlUmVzb2x1dGlvblNlcnZpY2UpKV0NCglwdWJsaWMgc2VhbGVkIGNsYXNzIEd1aWRhbmNlUGFja2FnZSA6IENvbXBvbmVudE1vZGVsLlNlcnZpY2VDb250YWluZXIsDQoJCUlDb25maWd1cmF0aW9uU2VydmljZSwgSVZhbHVlSW5mb1NlcnZpY2UsIElFeGVjdXRpb25TZXJ2aWNlDQoJew0KCQkjcmVnaW9uIEZpZWxkcw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEhvbGRzIHRoZSA8c2VlIGNyZWY9IlhtbFJlYWRlci5CYXNlVVJJIi8+IG9mIHRoZSByZWFkZXIgdGhlIGNvbmZpZ3VyYXRpb24gDQoJCS8vLyB3YXMgbG9hZGVkIGZyb20sIG9yIHRoZSBwYXRoIHNwZWNpZmllZCBieSB0aGUgdXNlci4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJc3RyaW5nIGJhc2VQYXRoID0gU3RyaW5nLkVtcHR5Ow0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIE1ldGFkYXRhIGZvciBhcmd1bWVudHMgYnkgcmVjaXBlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlEaWN0aW9uYXJ5PHN0cmluZywgRGljdGlvbmFyeTxzdHJpbmcsIFZhbHVlSW5mbz4+IGFyZ3VtZW50c01ldGFEYXRhQnlSZWNpcGUgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIERpY3Rpb25hcnk8c3RyaW5nLCBWYWx1ZUluZm8+PigpOw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEhvbGRzIHRoZSBjdXJyZW50IHJlY2lwZSBiZWluZyBleGVjdXRlZC4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJUmVjaXBlIGN1cnJlbnRSZWNpcGU7DQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEhvbGRzIHRoZSBjdXJyZW50IHJlZmVyZW5jZSBiZWluZyBleGVjdXRlZC4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJSUFzc2V0UmVmZXJlbmNlIGN1cnJlbnRSZWZlcmVuY2U7DQoNCgkJI2VuZHJlZ2lvbiBGaWVsZHMNCg0KCQkjcmVnaW9uIENvbnN0cnVjdG9ycw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9Ikd1aWRhbmNlUGFja2FnZSIvPiBjbGFzcyANCgkJLy8vIHdpdGggYSBjb25maWd1cmF0aW9uIGZpbGUuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY29uZmlndXJhdGlvbiI+VGhlIGZpbGUgY29udGFpbmluZyB0aGUgcGFja2FnZSBjb25maWd1cmF0aW9uLjwvcGFyYW0+DQoJCS8vLyA8cmVtYXJrcz4NCgkJLy8vIEV4dGVybmFsIGluY2x1ZGVkIGZpbGVzIHdpbGwgYmUgcmVzb2x2ZWQgYXMgcmVsYXRpdmUgcGF0aHMgYmFzZWQgb24gdGhlIA0KCQkvLy8gPHBhcmFtcmVmIG5hbWU9ImNvbmZpZ3VyYXRpb24iLz4gbG9jYXRpb24uDQoJCS8vLyA8L3JlbWFya3M+DQoJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2Uoc3RyaW5nIGNvbmZpZ3VyYXRpb24pDQoJCXsNCgkJCUluaXRpYWxpemVTZXJ2aWNlcygpOw0KCQkJWG1sVGV4dFJlYWRlciByZWFkZXIgPSBuZXcgWG1sVGV4dFJlYWRlcihjb25maWd1cmF0aW9uKTsNCgkJCXRyeQ0KCQkJew0KCQkJCUluaXRpYWxpemUocmVhZGVyKTsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlyZWFkZXIuQ2xvc2UoKTsNCgkJCX0NCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9Ikd1aWRhbmNlUGFja2FnZSIvPiBjbGFzcyB3aXRoIGEgDQoJCS8vLyByZWFkZXIgcG9pbnRpbmcgdG8gdGhlIGNvbmZpZ3VyYXRpb24uDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY29uZmlndXJhdGlvbiI+VGhlIHJlYWRlciB0byBsb2FkIGNvbmZpZ3VyYXRpb24gZnJvbS48L3BhcmFtPg0KCQkvLy8gPHJlbWFya3M+DQoJCS8vLyBFeHRlcm5hbCBpbmNsdWRlZCBmaWxlcyB3aWxsIGJlIHJlc29sdmVkIGFzIHJlbGF0aXZlIHBhdGhzIGJhc2VkIG9uIHRoZSANCgkJLy8vIDxwYXJhbXJlZiBuYW1lPSJjb25maWd1cmF0aW9uIi8+IHJlYWRlciA8c2VlIGNyZWY9IlhtbFJlYWRlci5CYXNlVVJJIi8+IHByb3BlcnR5Lg0KCQkvLy8gPC9yZW1hcmtzPg0KCQlwdWJsaWMgR3VpZGFuY2VQYWNrYWdlKFhtbFJlYWRlciBjb25maWd1cmF0aW9uKQ0KCQl7DQoJCQlJbml0aWFsaXplU2VydmljZXMoKTsNCgkJCUluaXRpYWxpemUoY29uZmlndXJhdGlvbik7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgPHNlZSBjcmVmPSJHdWlkYW5jZVBhY2thZ2UiLz4gY2xhc3Mgd2l0aCBhIA0KCQkvLy8gY29uZmlndXJhdGlvbiBtb2RlbCwgcmVhZHkgZm9yIHVzZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJjb25maWd1cmF0aW9uIj5UaGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIHBhY2thZ2UuPC9wYXJhbT4NCgkJLy8vIDxyZW1hcmtzPlRvIGxldCB0aGUgY29udGFpbmVkIGNvbXBvbmVudHMgcHVibGlzaCBhZGRpdGlvbmFsIHNlcnZpY2VzLCB1c2UgDQoJCS8vLyB0aGUgb3ZlcmxvYWQgdGhhdCBpcyByZWNlaXZpbmcgdGhlIDxjPmV4cG9zZVNlcnZpY2VDb250YWluZXJTZXJ2aWNlPC9jPiBmbGFnLjwvcmVtYXJrcz4NCgkJcHVibGljIEd1aWRhbmNlUGFja2FnZShDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBjb25maWd1cmF0aW9uKQ0KCQkJOiB0aGlzKGNvbmZpZ3VyYXRpb24sIFN0cmluZy5FbXB0eSkNCgkJew0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIDxzZWUgY3JlZj0iR3VpZGFuY2VQYWNrYWdlIi8+IGNsYXNzIHdpdGggYSANCgkJLy8vIGNvbmZpZ3VyYXRpb24gbW9kZWwsIHJlYWR5IGZvciB1c2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY29uZmlndXJhdGlvbiI+VGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBwYWNrYWdlLjwvcGFyYW0+DQoJCS8vLyA8cGFyYW0gbmFtZT0iYmFzZVBhdGgiPkxvY2F0aW9uIHRvIHVzZSBhcyB0aGUgYmFzZSBmb2xkZXIgdG8gcmVzb2x2ZSB0eXBlcyB1c2VkIGJ5IHRoZSBwYWNrYWdlLiANCgkJLy8vIENhbiBiZSA8c2VlIGxhbmd3b3JkPSJudWxsIi8+IG9yIGFuIGVtcHR5IHN0cmluZyB0byB1c2UgdGhlIDxzZWUgY3JlZj0iUmVjaXBlTWFuYWdlciIvPiBpbnN0YWxsYXRpb24gZm9sZGVyLjwvcGFyYW0+DQoJCS8vLyA8cmVtYXJrcz4NCgkJLy8vIFR5cGVzIHVzZWQgYnkgdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbiBhcmUgcmVzb2x2ZWQgcmVsYXRpdmUgdG8gdGhlIGZyYW1ld29yayBpbnN0YWxsYXRpb24gb25seS4NCgkJLy8vIFVzZSB0aGUgb3ZlcmxvYWQgcmVjZWl2aW5nIHRoZSBiYXNlIHBhdGggdG8gY2hhbmdlIHRoaXMgYmVoYXZpb3IuDQoJCS8vLyA8L3JlbWFya3M+DQoJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2UoQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgY29uZmlndXJhdGlvbiwgc3RyaW5nIGJhc2VQYXRoKQ0KCQl7DQoJCQlpZiAoY29uZmlndXJhdGlvbiA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImNvbmZpZ3VyYXRpb24iKTsNCgkJCX0NCgkJCUluaXRpYWxpemVTZXJ2aWNlcygpOw0KDQoJCQkvLyBXZSBuZWVkIHRvIHNlcmlhbGl6ZSBpdCBhbmQgcmVwcm9jZXNzLCB0byBlbnN1cmUgdmFsaWRpdHkgYW5kIGluZGV4aW5nLg0KCQkJdXNpbmcgKFN0cmVhbSBtZW0gPSBuZXcgTWVtb3J5U3RyZWFtKCkpDQoJCQl7DQoJCQkJLy8gV2UgYXZvaWQgdGhlIHBlcmYuIGNvc3Qgb2YgZ2VuZXJhdGluZyBhIHJ1bnRpbWUgc2VyaWFsaXphdGlvbiBhc3NlbWJseQ0KCQkJCS8vIGJ5IHVzaW5nIGEgZGVzaWduLXRpbWUgZ2VuZXJhdGVkIG9uZSB0aGF0IGtub3dzIGhvdyB0byBkZWFsIHdpdGggb3V0IGNvbmZpZy4NCgkJCQlHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyIHNlciA9IG5ldyBHdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyKCk7DQoJCQkJc2VyLlNlcmlhbGl6ZShtZW0sIGNvbmZpZ3VyYXRpb24pOw0KDQoJCQkJLy8gUmVpbml0aWFsaXplIHdpdGggdGhlIG90aGVyIG92ZXJsb2FkLg0KCQkJCW1lbS5TZWVrKDAsIFNlZWtPcmlnaW4uQmVnaW4pOw0KCQkJCUluaXRpYWxpemUobmV3IFhtbFRleHRSZWFkZXIobWVtKSk7DQoJCQl9DQoNCgkJCS8vIEZvcmNlIFBhdGggdmFsaWRhdGlvbiBpZiBub24tZW1wdHkuDQoJCQlpZiAoYmFzZVBhdGggIT0gbnVsbCAmJiBiYXNlUGF0aC5MZW5ndGggPiAwKQ0KCQkJew0KCQkJCXRoaXMuYmFzZVBhdGggPSBQYXRoLkdldERpcmVjdG9yeU5hbWUoYmFzZVBhdGgpOw0KCQkJfQ0KCQl9DQoNCgkJI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnMNCg0KCQkjcmVnaW9uIFByb3BlcnRpZXMNCg0KCQlUcmFjZVN3aXRjaCB0cmFjaW5nOw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFRyYWNlU3dpdGNoIGZvciB0aGlzIEd1aWRhbmNlIFBhY2thZ2UNCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIFRyYWNlU3dpdGNoIFRyYWNlU3dpdGNoDQoJCXsNCgkJCWdldCB7IHJldHVybiB0cmFjaW5nOyB9DQoJCX0NCg0KCQlUcmFjZUxldmVsIHRyYWNpbmdMZXZlbCA9IFRyYWNlTGV2ZWwuT2ZmOw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEN1cnJlbnQgbGV2ZWwgb2YgdHJhY2luZyBmb3IgdGhpcyBHdWlkYW5jZVBhY2thZ2UNCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHJpdmF0ZSBUcmFjZUxldmVsIFRyYWNlTGV2ZWwNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIHRyYWNpbmdMZXZlbDsgfQ0KCQkJc2V0IHsgdHJhY2luZ0xldmVsID0gdmFsdWU7IH0NCgkJfQ0KDQoJCWludCBzb3J0UHJpb3JpdHkgPSAwOw0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBTb3J0IHByaW9yaXR5IHVzZWQgaW4gdGhlIEFkZCBOZXcgZGlhbG9nIGJveCBmb3IgR3VpZGFuY2VQYWNrYWdlcw0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgaW50IFNvcnRQcmlvcml0eQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gc29ydFByaW9yaXR5OyB9DQoJCQlzZXQgeyBzb3J0UHJpb3JpdHkgPSB2YWx1ZTsgfQ0KCQl9DQoNCgkJQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgY29uZmlnOw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEdldHMgdGhlIGN1cnJlbnQgcGFja2FnZSBjb25maWd1cmF0aW9uLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgQ29uZmlndXJhdGlvbg0KCQl7DQoJCQlnZXQgeyByZXR1cm4gY29uZmlnOyB9DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBSZXR1cm5zIHRoZSBpbnN0YWxsYXRpb24gZGlyZWN0b3J5IG9mIHRoaXMgR3VpZGFuY2UgUGFja2FnZQ0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgc3RyaW5nIEJhc2VQYXRoDQoJCXsNCgkJCWdldCB7IHJldHVybiB0aGlzLmJhc2VQYXRoOyB9DQoJCX0NCg0KCQkjZW5kcmVnaW9uIFByb3BlcnRpZXMNCg0KCQkjcmVnaW9uIEluaXRpYWxpemF0aW9uDQoNCgkJcHJpdmF0ZSB2b2lkIEluaXRpYWxpemVTZXJ2aWNlcygpDQoJCXsNCgkJCUFkZFNlcnZpY2UodHlwZW9mKElDb25maWd1cmF0aW9uU2VydmljZSksIHRoaXMpOw0KCQkJQWRkU2VydmljZSh0eXBlb2YoSVZhbHVlSW5mb1NlcnZpY2UpLCB0aGlzKTsNCgkJCUFkZFNlcnZpY2UodHlwZW9mKElFeGVjdXRpb25TZXJ2aWNlKSwgdGhpcyk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBJbml0aWFsaXplcyB0aGUgcGFja2FnZSB3aXRoIGEgbmV3IGNvbmZpZ3VyYXRpb24uDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY29uZmlndXJhdGlvbiI+VGhlIHJlYWRlciB0byBsb2FkIGNvbmZpZ3VyYXRpb24gZnJvbS48L3BhcmFtPg0KCQkvLy8gPHJlbWFya3M+DQoJCS8vLyA8cGFyYT5FeHRlcm5hbCBpbmNsdWRlZCBmaWxlcyB3aWxsIGJlIHJlc29sdmVkIGFzIHJlbGF0aXZlIHBhdGhzIGJhc2VkIG9uIHRoZSANCgkJLy8vIDxwYXJhbXJlZiBuYW1lPSJjb25maWd1cmF0aW9uIi8+IHJlYWRlciA8c2VlIGNyZWY9IlhtbFJlYWRlci5CYXNlVVJJIi8+IHByb3BlcnR5Lg0KCQkvLy8gPC9wYXJhPg0KCQkvLy8gQW5vdGhlciBvdmVybG9hZCBpcyBwcm92aWRlZCBmb3IgdXNpbmcgYSBjdXN0b20gcHJvdmlkZWQgcmVzb2x2ZXIuDQoJCS8vLyA8L3JlbWFya3M+DQoJCXByaXZhdGUgdm9pZCBJbml0aWFsaXplKFhtbFJlYWRlciBjb25maWd1cmF0aW9uKQ0KCQl7DQoJCQlpZiAoY29uZmlndXJhdGlvbiA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImNvbmZpZ3VyYXRpb24iKTsNCgkJCX0NCg0KCQkJaWYgKGJhc2VQYXRoLkxlbmd0aCA9PSAwKQ0KCQkJew0KCQkJCWJhc2VQYXRoID0gR2V0QmFzZVBhdGgoY29uZmlndXJhdGlvbik7DQoJCQl9DQoNCgkJCXRoaXMuY29uZmlnID0gUmVhZENvbmZpZ3VyYXRpb24oY29uZmlndXJhdGlvbik7DQoJCQl0cmFjaW5nID0gbmV3IFRyYWNlU3dpdGNoKENvbmZpZ3VyYXRpb24uQ2FwdGlvbiwgQ29uZmlndXJhdGlvbi5EZXNjcmlwdGlvbik7DQoJCQl0cmFjaW5nLkxldmVsID0gVHJhY2VMZXZlbC5PZmY7DQoJCQl0cmFjaW5nTGV2ZWwgPSAoVHJhY2VMZXZlbClFbnVtLlBhcnNlKHR5cGVvZihUcmFjZUxldmVsKSwgQ29uZmlndXJhdGlvbi5UcmFjZUxldmVsLlRvU3RyaW5nKCkpOw0KCQkJdGhpcy5zb3J0UHJpb3JpdHkgPSBDb25maWd1cmF0aW9uLlNvcnRQcmlvcml0eTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEFkZHMgdGhlIHJlY2lwZSByZWZlcmVuY2Ugc2VydmljZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TaXRlZCgpDQoJCXsNCgkJCWJhc2UuT25TaXRlZCgpOw0KCQkJLy8gSG9vayB0aGUgc2VydmljZSB0aGF0IHdpbGwgcmVzb2x2ZSByZWxhdGl2ZSB0byB0aGUgQmFzZVVSSSBsb2NhdGlvbiBkZXRlcm1pbmVkIA0KCQkJLy8gYXQgaW5pdGlhbGl6YXRpb24gdGltZSBmcm9tIHRoZSBYbWxSZWFkZXIgb3IgcGFzc2VkIGJ5IHRoZSB1c2VyLiANCgkJCS8vIENoYWluIGl0IHdpdGggdGhlIHBhcmVudCBwZXJzaXN0ZW5jZSBwcm92aWRlci4NCgkJCUFkZFNlcnZpY2UodHlwZW9mKElUeXBlUmVzb2x1dGlvblNlcnZpY2UpLCBuZXcgVHlwZVJlc29sdXRpb25TZXJ2aWNlKA0KCQkJCWJhc2VQYXRoLCBHZXRTZXJ2aWNlPElUeXBlUmVzb2x1dGlvblNlcnZpY2U+KCkpKTsNCg0KCQkJLy8gQWRkIHRoZSByZWNpcGUgcmVmZXJlbmNlIHNlcnZpY2UsIHdoaWNoIGRlcGVuZHMgb24gdGhlIElQZXJzaXN0ZW5jZVNlcnZpY2UgYmVpbmcgcHJlc2VudC4NCgkJCS8vIElNUE9SVEFOVDogVGhlIElBc3NldFJlZmVyZW5jZVNlcnZpY2UgbXVzdCBiZSBzaXRlZCBBRlRFUiBJVHlwZVJlc29sdXRpb25TZXJ2aWNlIGJlY3Vhc2UNCgkJCS8vIHNvbWUgUmVmZXJlbmNlcyByZXF1ZWlyZSB0aGUgSVR5cGVSZXNvbHV0aW9uU2VydmljZSBvZiB0aGUgR3VpZGFuY2UgcGFja2FnZQ0KCQkJQWRkU2VydmljZSh0eXBlb2YoSUFzc2V0UmVmZXJlbmNlU2VydmljZSksIG5ldyBBc3NldFJlZmVyZW5jZVNlcnZpY2UoKSk7DQoJCX0NCg0KCQkjZW5kcmVnaW9uIEluaXRpYWxpemUNCg0KCQkjcmVnaW9uIEV4ZWN1dGlvbg0KDQoJCXByaXZhdGUgRXhlY3V0aW9uUmVzdWx0IEV4ZWN1dGUoc3RyaW5nIHJlY2lwZSwgSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSwgSURpY3Rpb25hcnkgYXJndW1lbnRzKQ0KCQl7DQoJCQlpZiAocmVjaXBlID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicmVjaXBlIik7DQoJCQl9DQoJCQlUaHJvd0lmQWxyZWFkeUV4ZWN1dGluZ1JlY2lwZSgpOw0KCQkJQ29uZmlnLlJlY2lwZSBjb25maWcgPSBUaHJvd0lmUmVjaXBlTm90Q29uZmlndXJlZChyZWNpcGUpOw0KDQoJCQlSZWZlcmVuY2VTZXJ2aWNlIHJlZmVyZW5jZVNlcnZpY2UgPSBudWxsOw0KCQkJdHJ5DQoJCQl7DQoJCQkJc3RyaW5nIGFwcGxpZXNUbyA9IEdldFJlZmVyZW5jZUFwcGxpZXNUb09yRXJyb3JNZXNzYWdlKHJlZmVyZW5jZSk7DQoJCQkJVHJhY2UuVHJhY2VJbmZvcm1hdGlvbihQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWNpcGVfU3RhcnRpbmdFeGVjdXRpb24sIHJlY2lwZSwNCgkJCQkJcmVmZXJlbmNlICE9IG51bGwgPyBTdHJpbmcuRm9ybWF0KFByb3BlcnRpZXMuUmVzb3VyY2VzLlJlY2lwZV9SZWZlcmVuY2VBcHBsaWVkLCBhcHBsaWVzVG8pIDogIiIpOw0KDQoJCQkJLy8gVGhpcyAicGFyZW50IiBsb2FkZXIgc2VydmljZSBpcyB0aGUgb25lIHdlIGNyZWF0ZWQgaW4gT25TaXRlZCB0aGF0IA0KCQkJCS8vIHdyYXBzIHRoZSBvbmUgcHJvdmlkZWQgYnkgdGhlIHJlY2lwZSBtYW5hZ2VyIGl0c2VsZiwgYW5kIGFkZHMgcmVzb2x1dGlvbiANCgkJCQkvLyByZWxhdGl2ZSB0byB0aGUgcGFja2FnZSBhc3NlbWJseSBsb2NhdGlvbi4NCgkJCQlJVHlwZVJlc29sdXRpb25TZXJ2aWNlIGxvYWRlciA9IEdldFNlcnZpY2U8SVR5cGVSZXNvbHV0aW9uU2VydmljZT4odHJ1ZSk7DQoNCgkJCQkvLyBDcmVhdGUgdGhlIHJlY2lwZSBmcm9tIHRoZSBjb25maWd1cmF0aW9uLg0KCQkJCWN1cnJlbnRSZWNpcGUgPSBuZXcgUmVjaXBlKGNvbmZpZyk7DQoJCQkJY3VycmVudFJlZmVyZW5jZSA9IHJlZmVyZW5jZTsNCg0KCQkJCS8vIFNldHVwIHRoZSBhbGlhcyByZXNvbHV0aW9uICJnYXRld2F5IiBsb2FkZXIgc2VydmljZS4gDQoJCQkJLy8gVGhpcyByZXNvbHZlcyBhbGlhc2VzIGRlZmluZWQgZm9yIHRoZSByZWNpcGUgb25seS4NCgkJCQkvLyBUaGlzIHNlcnZpY2Ugd2lsbCB0byBhd2F5IHRvZ2V0aGVyIHdpdGggdGhlIHJlY2lwZS4NCgkJCQljdXJyZW50UmVjaXBlLkFkZFNlcnZpY2UodHlwZW9mKElUeXBlUmVzb2x1dGlvblNlcnZpY2UpLCBuZXcgQWxpYXNSZXNvbHV0aW9uU2VydmljZSgNCgkJCQkJY29uZmlnLlR5cGVBbGlhc2VzQnlOYW1lLCBsb2FkZXIpKTsNCg0KCQkJCWJvb2wgaXNQZXJzaXN0ZWQ7DQoJCQkJSVBlcnNpc3RlbmNlU2VydmljZSBwZXJzaXN0ZW5jZVNlcnZpY2U7DQoJCQkJYXJndW1lbnRzID0gTG9hZFBlcnNpdGVkU3RhdGUocmVmZXJlbmNlLCBhcmd1bWVudHMsIG91dCBpc1BlcnNpc3RlZCwgb3V0IHBlcnNpc3RlbmNlU2VydmljZSk7DQoNCgkJCQkvLyBDb25zdHJ1Y3QgdGhlIGRpY3Rpb25hcnkgc2VydmljZS4gV2UgZG9uJ3QgcGFzcyB0aGUgYXJndW1lbnRzIGF0IHRoaXMgDQoJCQkJLy8gcG9pbnQgYXMgd2Ugd2FudCB0byBnbyBvdmVyIHRoZSBwcm9jZXNzIG9mIHNldHRpbmcgZWFjaCBpbiB0dXJuLCBzbyB0aGV5IGFyZSB2YWxpZGF0ZWQuDQoJCQkJRGljdGlvbmFyeVNlcnZpY2UgZGljdGlvbmFyeXN2YyA9IG5ldyBEaWN0aW9uYXJ5U2VydmljZShudWxsKTsNCgkJCQlBZGRTZXJ2aWNlKHR5cGVvZihJRGljdGlvbmFyeVNlcnZpY2UpLCBkaWN0aW9uYXJ5c3ZjKTsNCgkJCQkvLyBFeHBvc2UgdGhlIElDb21wb25lbnRDaGFuZ2VTZXJ2aWNlIGltcGxlbWVudGF0aW9uIHRvby4NCgkJCQlBZGRTZXJ2aWNlKHR5cGVvZihJQ29tcG9uZW50Q2hhbmdlU2VydmljZSksIGRpY3Rpb25hcnlzdmMpOw0KDQoJCQkJaWYgKGFyZ3VtZW50cyAhPSBudWxsICYmIGFyZ3VtZW50cy5Db3VudCA+IDApDQoJCQkJew0KCQkJCQlib29sIHNob3VsZFVwZGF0ZVN0YXRlID0gSW5pdGlhbGl6ZURpY3Rpb25hcnlTZXJ2aWNlKGFyZ3VtZW50cywgZGljdGlvbmFyeXN2Yyk7DQoNCgkJCQkJLy8gUGVyc2lzdCBjaGFuZ2VzIGlmIGFwcHJvcHJpYXRlLiANCgkJCQkJaWYgKGlzUGVyc2lzdGVkICYmIHNob3VsZFVwZGF0ZVN0YXRlKQ0KCQkJCQl7DQoJCQkJCQlwZXJzaXN0ZW5jZVNlcnZpY2UuU2F2ZVN0YXRlKENvbmZpZ3VyYXRpb24uR3VpZCwgcmVmZXJlbmNlLCBhcmd1bWVudHMpOw0KCQkJCQl9DQoJCQkJfQ0KDQoJCQkJLy8gQ29uc3RydWN0IHRoZSBkaWN0aW9uYXJ5IHNlcnZpY2UsIHBhc3NpbmcgdGhlIHBlcnNpc3RlZCBzdGF0ZSAob3IgbnVsbCkgYXMgd2VsbCANCgkJCQkvLyBhcyB0aGUgYXJndW1lbnRzIGNvbmZpZ3VyYXRpb24uDQoNCgkJCQkvLyBTaXRlIGFuZCBleGVjdXRlIHRoZSByZWNpcGUuDQoJCQkJQWRkKGN1cnJlbnRSZWNpcGUpOw0KCQkJCXJlZmVyZW5jZVNlcnZpY2UgPSBuZXcgUmVmZXJlbmNlU2VydmljZSgpOw0KCQkJCWN1cnJlbnRSZWNpcGUuQWRkU2VydmljZSh0eXBlb2YoSVJlZmVyZW5jZVNlcnZpY2UpLCByZWZlcmVuY2VTZXJ2aWNlKTsNCg0KCQkJCWJvb2wgYWxsb3dzdXNwZW5kID0gKHJlZmVyZW5jZSAhPSBudWxsICYmIHJlZmVyZW5jZSBpcyBJQm91bmRBc3NldFJlZmVyZW5jZSkgfHwNCgkJCQkJKGFyZ3VtZW50cyAhPSBudWxsKTsNCgkJCQlFeGVjdXRpb25SZXN1bHQgcmVzdWx0ID0gY3VycmVudFJlY2lwZS5FeGVjdXRlKGFsbG93c3VzcGVuZCk7DQoJCQkJVHJhY2UuVHJhY2VJbmZvcm1hdGlvbihQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWNpcGVfRXhlY3V0aW9uUmVzdWx0LCByZXN1bHQpOw0KDQoJCQkJaWYgKHJlc3VsdCA9PSBFeGVjdXRpb25SZXN1bHQuRmluaXNoKQ0KCQkJCXsNCgkJCQkJLy8gSWYgcmVjaXBlIGlzIG5vdCByZWN1cnJlbnQgYW5kIGl0J3MgYSBib3VuZCByZWZlcmVuY2UsIHJlbW92ZSBpdC4NCgkJCQkJaWYgKCFjdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24uUmVjdXJyZW50ICYmIHJlZmVyZW5jZSBpcyBJQm91bmRBc3NldFJlZmVyZW5jZSkNCgkJCQkJew0KCQkJCQkJSUFzc2V0UmVmZXJlbmNlU2VydmljZSByZWZzdmMgPSBHZXRTZXJ2aWNlPElBc3NldFJlZmVyZW5jZVNlcnZpY2U+KHRydWUpOw0KCQkJCQkJcmVmc3ZjLlJlbW92ZShyZWZlcmVuY2UpOw0KCQkJCQkJLy8gUmVtb3ZlIHRoZSBwZXJzaXN0ZWQgc3RhdGUuDQoJCQkJCQlwZXJzaXN0ZW5jZVNlcnZpY2UuUmVtb3ZlU3RhdGUoQ29uZmlndXJhdGlvbi5HdWlkLCByZWZlcmVuY2UpOw0KCQkJCQl9DQoJCQkJfQ0KDQoJCQkJcmV0dXJuIHJlc3VsdDsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQkjcmVnaW9uIENsZWFudXANCg0KCQkJCWlmIChyZWZlcmVuY2VTZXJ2aWNlICE9IG51bGwpDQoJCQkJew0KCQkJCQljdXJyZW50UmVjaXBlLlJlbW92ZVNlcnZpY2UodHlwZW9mKElSZWZlcmVuY2VTZXJ2aWNlKSk7DQoJCQkJfQ0KDQoJCQkJLy8gUmVtb3ZlIHJlY2lwZSBmcm9tIGNvbnRhaW5lci4NCgkJCQlSZW1vdmUoY3VycmVudFJlY2lwZSk7DQoJCQkJLy8gUmVtb3ZlIHNlcnZpY2VzIHdlIGFkZGVkLg0KCQkJCVJlbW92ZVNlcnZpY2UodHlwZW9mKElEaWN0aW9uYXJ5U2VydmljZSkpOw0KCQkJCVJlbW92ZVNlcnZpY2UodHlwZW9mKElDb21wb25lbnRDaGFuZ2VTZXJ2aWNlKSk7DQoJCQkJLy8gRGlzcG9zZSBhbmQgY2xlYW4gY3VycmVudCB2YXJpYWJsZXMuDQoJCQkJaWYgKGN1cnJlbnRSZWNpcGUgIT0gbnVsbCkNCgkJCQl7DQoJCQkJCWN1cnJlbnRSZWNpcGUuRGlzcG9zZSgpOw0KCQkJCQljdXJyZW50UmVjaXBlID0gbnVsbDsNCgkJCQl9DQoJCQkJY3VycmVudFJlZmVyZW5jZSA9IG51bGw7DQoNCgkJCQkjZW5kcmVnaW9uIENsZWFudXANCgkJCQkvLyBXcml0ZSBhIHNlcGFyYXRvciBvbiB0aGUgdHJhY2UuDQoJCQkJVHJhY2UuVHJhY2VJbmZvcm1hdGlvbihuZXcgc3RyaW5nKCctJywgMTUwKSk7DQoJCQl9DQoJCX0NCg0KCQlwcml2YXRlIHN0YXRpYyBib29sIEluaXRpYWxpemVEaWN0aW9uYXJ5U2VydmljZShJRGljdGlvbmFyeSBhcmd1bWVudHMsIERpY3Rpb25hcnlTZXJ2aWNlIGRpY3Rpb25hcnlzdmMpDQoJCXsNCgkJCS8vIEJ1aWxkIHRoZSBuZXcgZGljdGlvbmFyeSBieSB0cnlpbmcgdG8gc2V0IGVhY2ggdmFsdWUgaW4gdGhlIGluaXRpYWwgc3RhdGUuDQoJCQkvLyBNdXN0IGNvcHkga2V5cyBiZWNhdXNlIHdlJ2xsIGJlIG1vZGlmeWluZyB0aGUgZGljdGlvbmFyeSAoY2FuJ3QgaXRlcmVhdGUgd2l0aCBmb3JlYWNoKS4NCgkJCW9iamVjdFtdIGtleXMgPSBuZXcgb2JqZWN0W2FyZ3VtZW50cy5Db3VudF07DQoJCQlhcmd1bWVudHMuS2V5cy5Db3B5VG8oa2V5cywgMCk7DQoJCQlib29sIHVwZGF0ZXN0YXRlID0gZmFsc2U7DQoJCQlmb3JlYWNoIChvYmplY3Qga2V5IGluIGtleXMpDQoJCQl7DQoJCQkJdHJ5DQoJCQkJew0KCQkJCQlkaWN0aW9uYXJ5c3ZjLlNldFZhbHVlKGtleSwgYXJndW1lbnRzW2tleV0pOw0KCQkJCX0NCgkJCQljYXRjaCAoQXJndW1lbnREb2VzbnRFeGlzdEV4Y2VwdGlvbikNCgkJCQl7DQoJCQkJCS8vIERvbid0IHJlbW92ZSBhcmd1bWVudHMgdGhhdCBhcmUgbm90IGRlZmluZWQuIFRoZXkgbWF5IGJlIA0KCQkJCQkvLyB1c2VkIGZvciBwdXJwb3NlcyBvdGhlciB0aGFuIHJlY2lwZSBleGVjdXRpb24sIGkuZS4gdGVtcGxhdGUgDQoJCQkJCS8vIGV4cGFuc2lvbiBhbmQgcGFyYW1ldGVyIHJlcGxhY2VtZW50cy4gU2V0IHRoZW0gdmlhIGludGVybmFsIA0KCQkJCQkvLyBtZWNoYW5pc20gc28gdGhleSBtYWtlIGl0IGludG8gdGhlIGRpY3Rpb25hcnkuDQoJCQkJCWRpY3Rpb25hcnlzdmMuU3RhdGVba2V5XSA9IGFyZ3VtZW50c1trZXldOw0KCQkJCX0NCgkJCQljYXRjaCAoQXJndW1lbnROdWxsRXhjZXB0aW9uKQ0KCQkJCXsNCgkJCQkJVHJhY2UuVHJhY2VXYXJuaW5nKFByb3BlcnRpZXMuUmVzb3VyY2VzLkd1aWRhbmNlUGFja2FnZV9JbnZhbGlkU3RhdGVLZXkpOw0KCQkJCQlhcmd1bWVudHMuUmVtb3ZlKGtleSk7DQoJCQkJCXVwZGF0ZXN0YXRlID0gdHJ1ZTsNCgkJCQl9DQoJCQkJY2F0Y2ggKEFyZ3VtZW50RXhjZXB0aW9uKQ0KCQkJCXsNCgkJCQkJVHJhY2UuVHJhY2VXYXJuaW5nKFN0cmluZy5Gb3JtYXQoDQoJCQkJCQlDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLkd1aWRhbmNlUGFja2FnZV9JbnZhbGlkU3RhdGVWYWx1ZSwNCgkJCQkJCWtleSkpOw0KCQkJCQlhcmd1bWVudHMuUmVtb3ZlKGtleSk7DQoJCQkJCXVwZGF0ZXN0YXRlID0gdHJ1ZTsNCgkJCQl9DQoJCQl9DQoJCQlyZXR1cm4gdXBkYXRlc3RhdGU7DQoJCX0NCg0KCQlwcml2YXRlIElEaWN0aW9uYXJ5IExvYWRQZXJzaXRlZFN0YXRlKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UsIElEaWN0aW9uYXJ5IGFyZ3VtZW50cywgb3V0IGJvb2wgaXNQZXJzaXN0ZWQsIG91dCBJUGVyc2lzdGVuY2VTZXJ2aWNlIHBlcnNpc3RlbmNlU2VydmljZSkNCgkJew0KCQkJaXNQZXJzaXN0ZWQgPSBmYWxzZTsNCgkJCXBlcnNpc3RlbmNlU2VydmljZSA9IEdldFNlcnZpY2U8SVBlcnNpc3RlbmNlU2VydmljZT4oKTsNCgkJCWlmIChwZXJzaXN0ZW5jZVNlcnZpY2UgPT0gbnVsbCkNCgkJCXsNCgkJCQlUcmFjZS5UcmFjZVdhcm5pbmcoUHJvcGVydGllcy5SZXNvdXJjZXMuUmVjaXBlX05vUGVyc2lzdGVuY2UpOw0KCQkJfQ0KCQkJLy8gT25seSByZXRyaWV2ZSB0aGUgcGVyc2lzdGVkIHZhbHVlcyBpZiB0aGVyZSdzIGEgcGVyc2lzdGVuY2Ugc2VydmljZSwgDQoJCQkvLyBhbiBhc3NldCByZWZlcmVuY2UgYW5kIHdlIGhhdmUgbm90IHJlY2VpdmVkIGEgZGljdGlvbmFyeSB0aGF0IG92ZXJyaWRlcyBpdC4NCgkJCWlmIChwZXJzaXN0ZW5jZVNlcnZpY2UgIT0gbnVsbCAmJiByZWZlcmVuY2UgIT0gbnVsbCAmJiBhcmd1bWVudHMgPT0gbnVsbCkNCgkJCXsNCgkJCQkvLyBSZWxvYWQgc3RhdGUuIE1heSByZXR1cm4gbnVsbC4gDQoJCQkJYXJndW1lbnRzID0gcGVyc2lzdGVuY2VTZXJ2aWNlLkxvYWRTdGF0ZShDb25maWd1cmF0aW9uLkd1aWQsIHJlZmVyZW5jZSk7DQoJCQkJaWYgKGFyZ3VtZW50cyA9PSBudWxsKQ0KCQkJCXsNCgkJCQkJVHJhY2UuVHJhY2VJbmZvcm1hdGlvbihQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWNpcGVfTm9TYXZlZFN0YXRlKTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJaXNQZXJzaXN0ZWQgPSB0cnVlOw0KCQkJCQlUcmFjZS5UcmFjZUluZm9ybWF0aW9uKFByb3BlcnRpZXMuUmVzb3VyY2VzLlJlY2lwZV9Bcmd1bWVudHNTYXZlZCwgYXJndW1lbnRzLkNvdW50KTsNCgkJCQl9DQoJCQl9DQoJCQlyZXR1cm4gYXJndW1lbnRzOw0KCQl9DQoNCgkJcHJpdmF0ZSBzdGF0aWMgc3RyaW5nIEdldFJlZmVyZW5jZUFwcGxpZXNUb09yRXJyb3JNZXNzYWdlKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UpDQoJCXsNCgkJCXN0cmluZyBhcHBsaWVzVG8gPSBudWxsOw0KCQkJdHJ5DQoJCQl7DQoJCQkJaWYgKHJlZmVyZW5jZSAhPSBudWxsKQ0KCQkJCXsNCgkJCQkJYXBwbGllc1RvID0gcmVmZXJlbmNlLkFwcGxpZXNUbzsNCgkJCQl9DQoJCQl9DQoJCQljYXRjaCAoRXhjZXB0aW9uIGUpDQoJCQl7DQoJCQkJVHJhY2UuVHJhY2VJbmZvcm1hdGlvbihlLk1lc3NhZ2UpOw0KCQkJCWFwcGxpZXNUbyA9IFByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZV9BcHBsaWVzVG9UaHJldzsNCgkJCX0NCgkJCXJldHVybiBhcHBsaWVzVG87DQoJCX0NCg0KCQlwcml2YXRlIENvbmZpZy5SZWNpcGUgVGhyb3dJZlJlY2lwZU5vdENvbmZpZ3VyZWQoc3RyaW5nIHJlY2lwZSkNCgkJew0KCQkJaWYgKHRoaXMuQ29uZmlndXJhdGlvbi5Db250YWlucyhyZWNpcGUpID09IGZhbHNlKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KCQkJCQlTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuR3VpZGFuY2VQYWNrYWdlX1JlY2lwZU5vdEV4aXN0cywNCgkJCQkJcmVjaXBlLCBDb25maWd1cmF0aW9uLkNhcHRpb24pKTsNCgkJCX0NCgkJCXJldHVybiB0aGlzLkNvbmZpZ3VyYXRpb25bcmVjaXBlXTsNCgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBUaHJvd0lmQWxyZWFkeUV4ZWN1dGluZ1JlY2lwZSgpDQoJCXsNCgkJCWlmIChjdXJyZW50UmVjaXBlICE9IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLkd1aWRhbmNlUGFja2FnZV9BbHJlYWR5RXhlY3V0aW5nUmVjaXBlLA0KCQkJCQljdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24gPT0gbnVsbCA/IG51bGwgOg0KCQkJCQljdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24uTmFtZSkpOw0KCQkJfQ0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gU2V0cyB0aGUgVHJhY2VTd2l0Y2ggbGV2ZWwgb2YgdGhlIEd1aWRhbmNlUGFja2FnZSB0byB0aGUgY29ycmVzcG9uZGluZyBsZXZlbCBzcGVjaWZpZWQgaW4gdGhlIHNldHRpbmdzDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyB2b2lkIFR1cm5Pbk91dHB1dCgpDQoJCXsNCgkJCVRyYWNlU3dpdGNoLkxldmVsID0gdGhpcy5UcmFjZUxldmVsOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gU2V0cyB0aGUgVHJhY2VTd2l0Y2ggbGV2ZWwgb2YgdGhlIEd1aWRhbmNlIFBhY2thZ2UgdG8gT2ZmDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyB2b2lkIFR1cm5PZmZPdXRwdXQoKQ0KCQl7DQoJCQlUcmFjZVN3aXRjaC5MZXZlbCA9IFRyYWNlTGV2ZWwuT2ZmOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRXhlY3V0ZXMgYSByZWNpcGUgd2l0aCBubyBwZXJzaXN0ZW5jZSBhc3NvY2lhdGVkLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InJlY2lwZSI+TmFtZSBvZiB0aGUgcmVjaXBlIHRvIGV4ZWN1dGUuPC9wYXJhbT4NCgkJLy8vIDxleGNlcHRpb24gY3JlZj0iSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbiI+QSByZWNpcGUgaXMgYWxyZWFkeSBiZWluZyBleGVjdXRlZC48L2V4Y2VwdGlvbj4NCgkJLy8vIDxleGNlcHRpb24gY3JlZj0iQXJndW1lbnRFeGNlcHRpb24iPlRoZSByZWNpcGUgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbi48L2V4Y2VwdGlvbj4NCgkJLy8vIDxyZXR1cm5zPlRoZSByZXN1bHQgb2YgdGhlIGV4ZWN1dGlvbi48L3JldHVybnM+DQoJCXB1YmxpYyBFeGVjdXRpb25SZXN1bHQgRXhlY3V0ZShzdHJpbmcgcmVjaXBlKQ0KCQl7DQoJCQlyZXR1cm4gRXhlY3V0ZShyZWNpcGUsIG51bGwsIG51bGwpOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRXhlY3V0ZXMgYSByZWNpcGUgdXNpbmcgdGhlIA0KCQkvLy8gcmVjZWl2ZWQgZGljdGlvbmFyeSBhcyB0aGUgaW5pdGlhbCBzdGF0ZSBmb3IgdGhlIGV4ZWN1dGlvbi4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJyZWNpcGUiPk5hbWUgb2YgdGhlIHJlY2lwZSB0byBleGVjdXRlLjwvcGFyYW0+DQoJCS8vLyA8cGFyYW0gbmFtZT0iYXJndW1lbnRzIj5UaGUgaW5pdGlhbCBzdGF0ZSB0byB1c2UgZm9yIHRoZSBleGVjdXRpb24uPC9wYXJhbT4NCgkJLy8vIDxleGNlcHRpb24gY3JlZj0iSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbiI+QSByZWNpcGUgaXMgYWxyZWFkeSBiZWluZyBleGVjdXRlZC48L2V4Y2VwdGlvbj4NCgkJLy8vIDxleGNlcHRpb24gY3JlZj0iQXJndW1lbnRFeGNlcHRpb24iPlRoZSByZWNpcGUgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbi48L2V4Y2VwdGlvbj4NCgkJLy8vIDxyZXR1cm5zPlRoZSByZXN1bHQgb2YgdGhlIGV4ZWN1dGlvbi48L3JldHVybnM+DQoJCXB1YmxpYyBFeGVjdXRpb25SZXN1bHQgRXhlY3V0ZShzdHJpbmcgcmVjaXBlLCBJRGljdGlvbmFyeSBhcmd1bWVudHMpDQoJCXsNCgkJCXJldHVybiBFeGVjdXRlKHJlY2lwZSwgbnVsbCwgYXJndW1lbnRzKTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEV4ZWN1dGVzIHRoZSByZWNpcGUgcG9pbnRlZCBieSB0aGUgPHNlZSBjcmVmPSJJQXNzZXRSZWZlcmVuY2UuQXNzZXROYW1lIi8+LCB1c2luZyB0aGUgDQoJCS8vLyByZWZlcmVuY2UgdG8gcmVzdG9yZSBhbnkgc3RhdGUgdGhhdCBtYXkgaGF2ZSBiZWVuIHNhdmVkLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InJlZmVyZW5jZSI+VGhlIHJlZmVyZW5jZSB0aGF0IGlzIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHJlY2lwZSBhbmQgYW55DQoJCS8vLyBzdGF0ZSBhc3NvY2lhdGVkIHdpdGggYSBwcmV2aW91cyBleGVjdXRpb24uDQoJCS8vLyA8L3BhcmFtPg0KCQkvLy8gPGV4Y2VwdGlvbiBjcmVmPSJJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uIj5BIHJlY2lwZSBpcyBhbHJlYWR5IGJlaW5nIGV4ZWN1dGVkLjwvZXhjZXB0aW9uPg0KCQkvLy8gPGV4Y2VwdGlvbiBjcmVmPSJBcmd1bWVudEV4Y2VwdGlvbiI+VGhlIHJlY2lwZSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgcGFja2FnZSBjb25maWd1cmF0aW9uLjwvZXhjZXB0aW9uPg0KCQkvLy8gPHJldHVybnM+VGhlIHJlc3VsdCBvZiB0aGUgZXhlY3V0aW9uLjwvcmV0dXJucz4NCgkJcHVibGljIEV4ZWN1dGlvblJlc3VsdCBFeGVjdXRlKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UpDQoJCXsNCgkJCXJldHVybiBFeGVjdXRlKHJlZmVyZW5jZS5Bc3NldE5hbWUsIHJlZmVyZW5jZSwgbnVsbCk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBFeGVjdXRlcyB0aGUgcmVjaXBlIHBvaW50ZWQgYnkgdGhlIDxzZWUgY3JlZj0iSUFzc2V0UmVmZXJlbmNlLkFzc2V0TmFtZSIvPiwgdXNpbmcgdGhlIA0KCQkvLy8gcmVjZWl2ZWQgZGljdGlvbmFyeSBhcyB0aGUgaW5pdGlhbCBzdGF0ZSBmb3IgdGhlIGV4ZWN1dGlvbi4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJyZWZlcmVuY2UiPlRoZSByZWZlcmVuY2UgdGhhdCBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoZSByZWNpcGUgYW5kIGFueQ0KCQkvLy8gc3RhdGUgYXNzb2NpYXRlZCB3aXRoIGEgcHJldmlvdXMgZXhlY3V0aW9uLg0KCQkvLy8gPC9wYXJhbT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJhcmd1bWVudHMiPlRoZSBpbml0aWFsIHN0YXRlIHRvIHVzZSBmb3IgdGhlIGV4ZWN1dGlvbi48L3BhcmFtPg0KCQkvLy8gPGV4Y2VwdGlvbiBjcmVmPSJJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uIj5BIHJlY2lwZSBpcyBhbHJlYWR5IGJlaW5nIGV4ZWN1dGVkLjwvZXhjZXB0aW9uPg0KCQkvLy8gPGV4Y2VwdGlvbiBjcmVmPSJBcmd1bWVudEV4Y2VwdGlvbiI+VGhlIHJlY2lwZSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgcGFja2FnZSBjb25maWd1cmF0aW9uLjwvZXhjZXB0aW9uPg0KCQkvLy8gPHJldHVybnM+VGhlIHJlc3VsdCBvZiB0aGUgZXhlY3V0aW9uLjwvcmV0dXJucz4NCgkJcHVibGljIEV4ZWN1dGlvblJlc3VsdCBFeGVjdXRlKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UsIElEaWN0aW9uYXJ5IGFyZ3VtZW50cykNCgkJew0KCQkJcmV0dXJuIEV4ZWN1dGUocmVmZXJlbmNlLkFzc2V0TmFtZSwgcmVmZXJlbmNlLCBhcmd1bWVudHMpOw0KCQl9DQoNCgkJI2VuZHJlZ2lvbiBJR3VpZGFuY2VQYWNrYWdlU2VydmljZSBNZW1iZXJzDQoNCgkJI3JlZ2lvbiBJQ29uZmlndXJhdGlvblNlcnZpY2UgTWVtYmVycw0KDQoJCUNvbmZpZy5HdWlkYW5jZVBhY2thZ2UgSUNvbmZpZ3VyYXRpb25TZXJ2aWNlLkN1cnJlbnRQYWNrYWdlDQoJCXsNCgkJCWdldCB7IHJldHVybiBDb25maWd1cmF0aW9uOyB9DQoJCX0NCg0KCQlDb25maWcuUmVjaXBlIElDb25maWd1cmF0aW9uU2VydmljZS5DdXJyZW50UmVjaXBlDQoJCXsNCgkJCWdldCB7IHJldHVybiBjdXJyZW50UmVjaXBlID09IG51bGwgPyBudWxsIDogY3VycmVudFJlY2lwZS5Db25maWd1cmF0aW9uOyB9DQoJCX0NCg0KCQlvYmplY3QgSUNvbmZpZ3VyYXRpb25TZXJ2aWNlLkN1cnJlbnRHYXRoZXJpbmdTZXJ2aWNlRGF0YQ0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlyZXR1cm4gY3VycmVudFJlY2lwZSA9PSBudWxsID8gbnVsbCA6IA0KCQkJCQljdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24gPT0gbnVsbCA/IG51bGwgOg0KCQkJCQljdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24uR2F0aGVyaW5nU2VydmljZURhdGE7DQoJCQl9DQoJCX0NCg0KCQlzdHJpbmcgSUNvbmZpZ3VyYXRpb25TZXJ2aWNlLkJhc2VQYXRoDQoJCXsNCgkJCWdldCB7IHJldHVybiBiYXNlUGF0aDsgfQ0KCQl9DQoNCgkJI2VuZHJlZ2lvbiBJQ29uZmlndXJhdGlvblNlcnZpY2UgTWVtYmVycw0KDQoJCSNyZWdpb24gSVZhbHVlSW5mb1NlcnZpY2UgbWVtYmVycw0KDQoJCVZhbHVlSW5mbyBJVmFsdWVJbmZvU2VydmljZS5HZXRJbmZvKHN0cmluZyBhcmd1bWVudE5hbWUpDQoJCXsNCgkJCVRocm93SWZOb1JlY2lwZUV4ZWN1dGluZygpOw0KCQkJVGhyb3dJZkFyZ3VtZW50Tm90RGVmaW5lZChhcmd1bWVudE5hbWUpOw0KCQkJRW5zdXJlSW5pdGlhbGl6ZU1ldGFkYXRhRm9yQ3VycmVudFJlY2lwZSgpOw0KCQkJcmV0dXJuIGFyZ3VtZW50c01ldGFEYXRhQnlSZWNpcGVbY3VycmVudFJlY2lwZS5Db25maWd1cmF0aW9uLk5hbWVdW2FyZ3VtZW50TmFtZV07DQoJCX0NCg0KCQlwcml2YXRlIHZvaWQgRW5zdXJlSW5pdGlhbGl6ZU1ldGFkYXRhRm9yQ3VycmVudFJlY2lwZSgpDQoJCXsNCgkJCWlmICghYXJndW1lbnRzTWV0YURhdGFCeVJlY2lwZS5Db250YWluc0tleShjdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24uTmFtZSkpDQoJCQl7DQoJCQkJRGljdGlvbmFyeTxzdHJpbmcsIFZhbHVlSW5mbz4gaW5mb3MgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFZhbHVlSW5mbz4oY3VycmVudFJlY2lwZS5Db25maWd1cmF0aW9uLkFyZ3VtZW50cy5MZW5ndGgpOw0KCQkJCWZvcmVhY2ggKENvbmZpZy5Bcmd1bWVudCBhcmd1bWVudCBpbiBjdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24uQXJndW1lbnRzKQ0KCQkJCXsNCgkJCQkJSVR5cGVSZXNvbHV0aW9uU2VydmljZSByZXNvbHV0aW9uID0gY3VycmVudFJlY2lwZS5HZXRTZXJ2aWNlPElUeXBlUmVzb2x1dGlvblNlcnZpY2U+KHRydWUpOw0KCQkJCQlUeXBlIGFyZ3VtZW50VHlwZSA9IHJlc29sdXRpb24uR2V0VHlwZShhcmd1bWVudC5UeXBlLCB0cnVlKTsNCgkJCQkJVHlwZUNvbnZlcnRlciBjb252ZXJ0ZXIgPSBudWxsOw0KDQoJCQkJCWlmIChhcmd1bWVudC5Db252ZXJ0ZXIgIT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJY29udmVydGVyID0gQ3JlYXRlQW5kQ29uZmlndXJlQ29udmVydGVyKGFyZ3VtZW50LCByZXNvbHV0aW9uLCBjb252ZXJ0ZXIpOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJY29udmVydGVyID0gR2V0QnVpbHRJbkNvbnZlcnRlcihhcmd1bWVudFR5cGUsIGNvbnZlcnRlcik7DQoJCQkJCX0NCg0KCQkJCQlpbmZvcy5BZGQoYXJndW1lbnQuTmFtZSwgbmV3IFZhbHVlSW5mbyhhcmd1bWVudC5OYW1lLCBhcmd1bWVudC5SZXF1aXJlZCwgYXJndW1lbnRUeXBlLCBjb252ZXJ0ZXIpKTsNCgkJCQl9DQoNCgkJCQlhcmd1bWVudHNNZXRhRGF0YUJ5UmVjaXBlLkFkZChjdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24uTmFtZSwgaW5mb3MpOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSBzdGF0aWMgVHlwZUNvbnZlcnRlciBHZXRCdWlsdEluQ29udmVydGVyKFR5cGUgYXJndHlwZSwgVHlwZUNvbnZlcnRlciBjb252ZXJ0ZXIpDQoJCXsNCgkJCVR5cGVDb252ZXJ0ZXIgY2luc3RhbmNlID0gVHlwZURlc2NyaXB0b3IuR2V0Q29udmVydGVyKGFyZ3R5cGUpOw0KCQkJaWYgKGFyZ3R5cGUuSXNFbnVtKQ0KCQkJew0KCQkJCWNvbnZlcnRlciA9IG5ldyBFbnVtZXJhdGlvbkNvbnZlcnRlcihhcmd0eXBlKTsNCgkJCX0NCgkJCWVsc2UgaWYgKGFyZ3R5cGUuSXNDT01PYmplY3QgfHwNCgkJCQkJQXR0cmlidXRlLkdldEN1c3RvbUF0dHJpYnV0ZShhcmd0eXBlLCB0eXBlb2YoQ29tSW1wb3J0QXR0cmlidXRlKSwgdHJ1ZSkgIT0gbnVsbCkNCgkJCXsNCgkJCQljb252ZXJ0ZXIgPSBuZXcgQ29tT2JqZWN0Q29udmVydGVyKGFyZ3R5cGUpOw0KCQkJfQ0KCQkJZWxzZSBpZiAoY2luc3RhbmNlICE9IG51bGwgJiYgY2luc3RhbmNlLkdldFR5cGUoKSAhPSB0eXBlb2YoQ29tcG9uZW50Q29udmVydGVyKSkNCgkJCXsNCgkJCQkvLyBPbmx5IHVzZSBjb252ZXJ0ZXJzIHRoYXQgYXJlIG5vdCB0aGUgZ2VuZXJpYyBDb21wb25lbnRDb252ZXJ0ZXIuDQoJCQkJY29udmVydGVyID0gY2luc3RhbmNlOw0KCQkJfQ0KCQkJcmV0dXJuIGNvbnZlcnRlcjsNCgkJfQ0KDQoJCXByaXZhdGUgc3RhdGljIFR5cGVDb252ZXJ0ZXIgQ3JlYXRlQW5kQ29uZmlndXJlQ29udmVydGVyKENvbmZpZy5Bcmd1bWVudCBhcmd1bWVudCwgSVR5cGVSZXNvbHV0aW9uU2VydmljZSByZXNvbHV0aW9uLCBUeXBlQ29udmVydGVyIGNvbnZlcnRlcikNCgkJew0KCQkJY29udmVydGVyID0gQWN0aXZhdG9yLkNyZWF0ZUluc3RhbmNlKHJlc29sdXRpb24uR2V0VHlwZShhcmd1bWVudC5Db252ZXJ0ZXIuVHlwZSwgdHJ1ZSkpIGFzIFR5cGVDb252ZXJ0ZXI7DQoJCQlpZiAoY29udmVydGVyID09IG51bGwpDQoJCQl7DQoJCQkJLy8gQ291bGRuJ3QgZG8gaW1wbGljaXQgY2FzdCB0byBUeXBlQ29udmVydGVyLg0KCQkJCXRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KCQkJCQlTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuR2VuZXJhbF9UeXBlSXNOb3RBc3NpZ25hYmxlLA0KCQkJCQljb252ZXJ0ZXIsIHR5cGVvZihUeXBlQ29udmVydGVyKSkpOw0KCQkJfQ0KCQkJLy8gQ2hlY2sgaWYgY29udmVydGVyIGlzIGNvbmZpZ3VyYWJsZS4NCgkJCWlmIChjb252ZXJ0ZXIgaXMgSUF0dHJpYnV0ZXNDb25maWd1cmFibGUpDQoJCQl7DQoJCQkJUmVjaXBlLkNvbmZpZ3VyZSgoSUF0dHJpYnV0ZXNDb25maWd1cmFibGUpY29udmVydGVyLCBhcmd1bWVudC5Db252ZXJ0ZXIuQW55QXR0cik7DQoJCQl9DQoJCQlyZXR1cm4gY29udmVydGVyOw0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIFRocm93SWZOb1JlY2lwZUV4ZWN1dGluZygpDQoJCXsNCgkJCWlmIChjdXJyZW50UmVjaXBlID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oUHJvcGVydGllcy5SZXNvdXJjZXMuUmVjaXBlX05vUmVjaXBlRXhlY3V0aW5nKTsNCgkJCX0NCgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBUaHJvd0lmQXJndW1lbnROb3REZWZpbmVkKHN0cmluZyBhcmd1bWVudE5hbWUpDQoJCXsNCgkJCWlmICghdGhpcy5jdXJyZW50UmVjaXBlLkNvbmZpZ3VyYXRpb24uQXJndW1lbnRzQnlOYW1lLkNvbnRhaW5zS2V5KGFyZ3VtZW50TmFtZSkpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RG9lc250RXhpc3RFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlY2lwZV9Bcmd1bWVudFVuZGVmaW5lZCwNCgkJCQkJYXJndW1lbnROYW1lKSk7DQoJCQl9DQoJCX0NCg0KCQlzdHJpbmcgSVZhbHVlSW5mb1NlcnZpY2UuQ29tcG9uZW50TmFtZQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gKChJQ29uZmlndXJhdGlvblNlcnZpY2UpdGhpcykuQ3VycmVudFJlY2lwZS5DYXB0aW9uOyB9DQoJCX0NCg0KCQkjZW5kcmVnaW9uDQoNCgkJI3JlZ2lvbiBNaXNjZWxhbmVvdXMgTWVtYmVycw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFJlYWRzIGFuZCB2YWxpZGF0ZXMgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIGEgcGFja2FnZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJjb25maWdGaWxlIj5UaGUgZmlsZSB0byByZWFkIHRoZSBjb25maWd1cmF0aW9uIGZyb20uPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPlRoZSBsb2FkZWQgaW4tbWVtb3J5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb25maWd1cmF0aW9uLjwvcmV0dXJucz4NCgkJcHVibGljIHN0YXRpYyBDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBSZWFkQ29uZmlndXJhdGlvbihzdHJpbmcgY29uZmlnRmlsZSkNCgkJew0KCQkJaWYgKCFGaWxlLkV4aXN0cyhjb25maWdGaWxlKSkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgRmlsZU5vdEZvdW5kRXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5HdWlkYW5jZVBhY2thZ2VfQ29uZmlndXJhdGlvbk5vdEZvdW5kLA0KCQkJCQljb25maWdGaWxlKSk7DQoJCQl9DQoNCgkJCVhtbFRleHRSZWFkZXIgcmVhZGVyID0gbmV3IFhtbFRleHRSZWFkZXIoY29uZmlnRmlsZSk7DQoJCQl0cnkNCgkJCXsNCgkJCQlyZXR1cm4gUmVhZENvbmZpZ3VyYXRpb24ocmVhZGVyKTsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlyZWFkZXIuQ2xvc2UoKTsNCgkJCX0NCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFJlYWRzIGFuZCB2YWxpZGF0ZXMgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIGEgcGFja2FnZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJjb25maWdSZWFkZXIiPlRoZSByZWFkZXIgY29udGFpbmluZyB0aGUgY29uZmlndXJhdGlvbi48L3BhcmFtPg0KCQkvLy8gPHJldHVybnM+VGhlIGxvYWRlZCBpbi1tZW1vcnkgcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24uPC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIFJlYWRDb25maWd1cmF0aW9uKFhtbFJlYWRlciBjb25maWdSZWFkZXIpDQoJCXsNCgkJCWNvbmZpZ1JlYWRlciA9IFJlc29sdmVYSW5jbHVkZShjb25maWdSZWFkZXIpOw0KDQoJCQkjcmVnaW9uIEluaXRpYWxpemUgdGhlIHJlYWRlciBhbmQgc2NoZW1hDQoNCgkJCVhtbFJlYWRlclNldHRpbmdzIHNldHRpbmdzID0gbmV3IFhtbFJlYWRlclNldHRpbmdzKCk7DQoJCQlzZXR0aW5ncy5WYWxpZGF0aW9uVHlwZSA9IFZhbGlkYXRpb25UeXBlLlNjaGVtYTsNCgkJCXNldHRpbmdzLkNvbmZvcm1hbmNlTGV2ZWwgPSBDb25mb3JtYW5jZUxldmVsLkF1dG87DQoNCgkJCS8vIFB1bGwgdGhlIFhTRCBmcm9tIHRoZSBjb25maWcgYXNzZW1ibHkgKGl0J3MgYW4gZW1iZWRkZWQgcmVzb3VyY2UpLg0KCQkJdXNpbmcgKFN0cmVhbSB4c2RzdHJlYW0gPSB0eXBlb2YoQ29uZmlnLkd1aWRhbmNlUGFja2FnZSkuQXNzZW1ibHkuR2V0TWFuaWZlc3RSZXNvdXJjZVN0cmVhbSgNCgkJCQlDb25maWcuR3VpZGFuY2VQYWNrYWdlLlNjaGVtYVJlc291cmNlTmFtZSkpDQoJCQl7DQoJCQkJRGVidWcuQXNzZXJ0KHhzZHN0cmVhbSAhPSBudWxsLCAiWFNEIG5vdCBlbWJlZGRlZCBpbiBjb25maWcgYXNzZW1ibHkiKTsNCg0KCQkJCS8vIElmIHRoZSBzY2hlbWEgaXMgbm90IHZhbGlkICh3ZSBtdXN0IGNoZWNrIHRoYXQgYXQgZGVzaWduLXRpbWUpLCB0aGlzIHdpbGwgdGhyb3cuDQoJCQkJLy8gV2UgbmV2ZXIgY2FsbCBjbG9zZSBvbiB0aGUgc3RyZWFtIGFzIGl0J3MgYW4gdW5tYW5hZ2VkIHJlc291cmNlIHN0cmVhbS4gQ2xvc2luZyANCgkJCQkvLyBpdCB3aWxsIHJlbmRlciBpdCB1bnVzYWJsZSBmb3IgdGhlIHJlc3Qgb2YgdGhlIGxpZmUgb2YgdGhlIEFwcERvbWFpbi4NCgkJCQlYbWxTY2hlbWEgeHNkID0gWG1sU2NoZW1hLlJlYWQoeHNkc3RyZWFtLCBudWxsKTsNCgkJCQlzZXR0aW5ncy5TY2hlbWFzLkFkZCh4c2QpOw0KCQkJfQ0KDQoJCQlYbWxSZWFkZXIgeHIgPSBYbWxSZWFkZXIuQ3JlYXRlKGNvbmZpZ1JlYWRlciwgc2V0dGluZ3MpOw0KDQoJCQkjZW5kcmVnaW9uIEluaXRpYWxpemUgdGhlIHJlYWRlciBhbmQgc2NoZW1hDQoNCgkJCUd1aWRhbmNlUGFja2FnZVJlYWRlciByZWFkZXIgPSBuZXcgR3VpZGFuY2VQYWNrYWdlUmVhZGVyKCk7DQoJCQlyZWFkZXIuUmVjaXBlRGVzZXJpYWxpemVkICs9IGRlbGVnYXRlKENvbmZpZy5SZWNpcGUgcmVjaXBlKSB7IENvbmZpZy5SZWNpcGVWYWxpZGF0b3IuVmFsaWRhdGUocmVjaXBlKTsgfTsNCg0KCQkJdHJ5DQoJCQl7DQoJCQkJcmV0dXJuIChDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSluZXcgR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplcihyZWFkZXIpLkRlc2VyaWFsaXplKHhyKTsNCgkJCX0NCgkJCWNhdGNoIChFeGNlcHRpb24gZXgpDQoJCQl7DQoJCQkJLy8gUmVhbCBzZXJpYWxpemF0aW9uIGV4Y2VwdGlvbnMgYXJlIGluIHRoZSBpbm5lciBleGNlcHRpb24uDQoJCQkJdGhyb3cgbmV3IFN5c3RlbS5Db25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRpb24oDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLkd1aWRhbmNlUGFja2FnZV9DYW50TG9hZENvbmZpZywNCgkJCQkJZXguSW5uZXJFeGNlcHRpb24gIT0gbnVsbCA/IGV4LklubmVyRXhjZXB0aW9uIDogZXgpOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSBzdGF0aWMgWG1sUmVhZGVyIFJlc29sdmVYSW5jbHVkZShYbWxSZWFkZXIgY29uZmlnUmVhZGVyKQ0KCQl7DQoJCQkvLyBXcmFwIHJlYWRlciBpbiBpbmNsdWRpbmcgcmVhZGVyIHRvIGVuYWJsZSBYSW5jbHVkZS4NCgkJCWlmICghKGNvbmZpZ1JlYWRlciBpcyBYSW5jbHVkaW5nUmVhZGVyKSkNCgkJCXsNCgkJCQkvLyBUZW1wb3JhcmlseSByZW5kZXIgaW5jbHVkZWQgZmlsZSBiZWNhdXNlIG9mIA0KCQkJCS8vIGFuIGVycm9yIGluIGRlc2VyaWFsaXphdGlvbiBvdGhlcndpc2UuDQoJCQkJTWVtb3J5U3RyZWFtIG1lbSA9IG5ldyBNZW1vcnlTdHJlYW0oKTsNCgkJCQlYSW5jbHVkaW5nUmVhZGVyIHhpciA9IG5ldyBYSW5jbHVkaW5nUmVhZGVyKGNvbmZpZ1JlYWRlcik7DQoJCQkJWG1sV3JpdGVyIHdyaXRlciA9IFhtbFdyaXRlci5DcmVhdGUobWVtKTsNCgkJCQl3cml0ZXIuV3JpdGVOb2RlKHhpciwgZmFsc2UpOw0KCQkJCXdyaXRlci5GbHVzaCgpOw0KDQoJCQkJbWVtLlBvc2l0aW9uID0gMDsNCgkJCQlyZXR1cm4gbmV3IEZpeGVkQmFzZVVSSVdyYXBwaW5nUmVhZGVyKFhtbFJlYWRlci5DcmVhdGUobWVtKSwgY29uZmlnUmVhZGVyLkJhc2VVUkkpOw0KCQkJfQ0KDQoJCQlyZXR1cm4gY29uZmlnUmVhZGVyOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gUmV0cmlldmVzIHRoZSA8c2VlIGNyZWY9IkNvbmZpZy5BdHRyaWJ1dGVOYW1lcy5HdWlkIi8+IG9mIA0KCQkvLy8gdGhlIDxzZWUgY3JlZj0iQ29uZmlnLkVsZW1lbnROYW1lcy5HdWlkYW5jZVBhY2thZ2UiLz4gZWxlbWVudC4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJyZWFkZXIiPlRoZSByZWFkZXIgdG8gcmVhZCB0aGUgbmFtZSBmcm9tLjwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz5UaGUgbmFtZSBvZiB0aGUgcGFja2FnZSwgb3IgPHNlZSBjcmVmPSJTdHJpbmcuRW1wdHkiLz4gDQoJCS8vLyBpZiB0aGUgcmVhZGVyIGlzIG5vdCBwb3NpdGlvbmVkIGluIGEgPHNlZSBjcmVmPSJDb25maWcuRWxlbWVudE5hbWVzLkd1aWRhbmNlUGFja2FnZSIvPiANCgkJLy8vIGVsZW1lbnQuPC9yZXR1cm5zPg0KCQlwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRQYWNrYWdlTmFtZShYbWxSZWFkZXIgcmVhZGVyKQ0KCQl7DQoJCQlpZiAocmVhZGVyLlJlYWRTdGF0ZSA9PSBTeXN0ZW0uWG1sLlJlYWRTdGF0ZS5Jbml0aWFsKSByZWFkZXIuUmVhZCgpOw0KDQoJCQkvLyBQb3NpdGlvbiBvbiB0aGUgZWxlbWVudC4NCgkJCWlmIChyZWFkZXIuTm9kZVR5cGUgIT0gWG1sTm9kZVR5cGUuRWxlbWVudCkgcmVhZGVyLk1vdmVUb0NvbnRlbnQoKTsNCg0KCQkJaWYgKHJlYWRlci5Mb2NhbE5hbWUgIT0gQ29uZmlnLkVsZW1lbnROYW1lcy5HdWlkYW5jZVBhY2thZ2UgfHwNCgkJCQlyZWFkZXIuTmFtZXNwYWNlVVJJICE9IENvbmZpZy5TY2hlbWFJbmZvLlBhY2thZ2VOYW1lc3BhY2UpDQoJCQl7DQoJCQkJcmV0dXJuIFN0cmluZy5FbXB0eTsNCgkJCX0NCg0KCQkJLy8gUmV0dXJuIHRoZSBOYW1lIGF0dHJpYnV0ZS4NCgkJCXJldHVybiByZWFkZXIuR2V0QXR0cmlidXRlKENvbmZpZy5BdHRyaWJ1dGVOYW1lcy5HdWlkKTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEdldHMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgPHNlZSBjcmVmPSJDb25maWd1cmF0aW9uIi8+DQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cmV0dXJucz5BIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGFja2FnZS48L3JldHVybnM+DQoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKQ0KCQl7DQoJCQlpZiAoQ29uZmlndXJhdGlvbiA9PSBudWxsKQ0KCQkJew0KCQkJCXJldHVybiBiYXNlLlRvU3RyaW5nKCk7DQoJCQl9DQoNCgkJCXJldHVybiAiR3VpZGFuY2VQYWNrYWdlKCIgKyBDb25maWd1cmF0aW9uLkNhcHRpb24gKyAiKSI7DQoJCX0NCg0KCQkjZW5kcmVnaW9uIE1pc2NlbGFuZW91cyBNZW1iZXJzDQoNCgkJcHJpdmF0ZSBzdGF0aWMgc3RyaW5nIEdldEJhc2VQYXRoKFhtbFJlYWRlciByZWFkZXIpDQoJCXsNCgkJCXN0cmluZyBiYXNldXJpOw0KDQoJCQkvLyBJZiB3ZSBoYXZlIGEgQmFzZVVSSSwgd2UnbGwgdXNlIHRoYXQgb25lLiBPdGhlcndpc2UsIGRlZmF1bHQgdG8gZnJhbWV3b3JrIA0KCQkJLy8gbG9jYXRpb24sIGFmdGVyIGEgd2FybmluZy4NCgkJCWlmIChyZWFkZXIuQmFzZVVSSS5MZW5ndGggPT0gMCkNCgkJCXsNCgkJCQlUcmFjZS5UcmFjZVdhcm5pbmcoUHJvcGVydGllcy5SZXNvdXJjZXMuR3VpZGFuY2VQYWNrYWdlX05vQmFzZVVSSSk7DQoJCQkJLy8gVU5ET05FOiBjaGFuZ2Ugd2hlbiB3ZSBhZGQgR0FDIHN1cHBvcnQuDQoJCQkJYmFzZXVyaSA9IHR5cGVvZihSZWNpcGVNYW5hZ2VyKS5Bc3NlbWJseS5Db2RlQmFzZTsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQliYXNldXJpID0gcmVhZGVyLkJhc2VVUkk7DQoJCQl9DQoNCgkJCVVyaSBiYXNlbG9jYXRpb24gPSBuZXcgVXJpKGJhc2V1cmkpOw0KCQkJaWYgKCFiYXNlbG9jYXRpb24uSXNGaWxlKQ0KCQkJew0KCQkJCXRocm93IG5ldyBTeXN0ZW0uQ29uZmlndXJhdGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uKA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5HdWlkYW5jZVBhY2thZ2VfVXJpTm9GaWxlKTsNCgkJCX0NCg0KCQkJcmV0dXJuIFBhdGguR2V0RGlyZWN0b3J5TmFtZShiYXNlbG9jYXRpb24uTG9jYWxQYXRoKTsNCgkJfQ0KDQoJCVtTZXJpYWxpemFibGVdDQoJCXByaXZhdGUgY2xhc3MgQXJndW1lbnREb2VzbnRFeGlzdEV4Y2VwdGlvbiA6IEFyZ3VtZW50RXhjZXB0aW9uDQoJCXsNCgkJCXB1YmxpYyBBcmd1bWVudERvZXNudEV4aXN0RXhjZXB0aW9uKHN0cmluZyBtZXNzYWdlKSA6IGJhc2UobWVzc2FnZSkgeyB9DQoNCgkJCXByb3RlY3RlZCBBcmd1bWVudERvZXNudEV4aXN0RXhjZXB0aW9uKFNlcmlhbGl6YXRpb25JbmZvIGluZm8sIFN0cmVhbWluZ0NvbnRleHQgY29udGV4dCkNCgkJCQk6IGJhc2UoaW5mbywgY29udGV4dCkgeyB9DQoJCX0NCgl9DQp9</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>34</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Framework/ManifestInstaller.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCnVzaW5nIFN5c3RlbS5Db25maWd1cmF0aW9uLkluc3RhbGw7DQp1c2luZyBTeXN0ZW0uSU87DQp1c2luZyBTeXN0ZW0uWG1sOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb247DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5TZXJ2aWNlczsNCg0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuSW50ZXJuYWw7DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLkNvbW1vbi5TZXJ2aWNlczsNCnVzaW5nIFN5c3RlbS5TZWN1cml0eS5QZXJtaXNzaW9uczsNCnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljczsNCnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uOw0KdXNpbmcgU3lzdGVtLlRleHQ7DQp1c2luZyBNdnAuWG1sLkNvbW1vbi5YUGF0aDsNCg0KI2VuZHJlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yaw0Kew0KICAgIC8vLyA8c3VtbWFyeT4NCiAgICAvLy8gUHJvdmlkZXMgaW5zdGFsbGF0aW9uIG9mIGhvc3RzIGFuZCBHdWlkYW5jZSBQYWNrYWdlcy4NCiAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgIC8vLyA8cmVtYXJrcz4NCiAgICAvLy8gR3VpZGFuY2UgUGFja2FnZSBtdXN0IHByb3ZpZGUgYSBzZXBhcmF0ZSBwcm9qZWN0IHdpdGggYSBjbGFzcyANCiAgICAvLy8gdGhhdCBpbmhlcml0cyBmcm9tIHRoaXMgb25lIGFuZCBtdXN0IGJlIHVzZWQgb24gdGhlIA0KICAgIC8vLyBjb3JyZXNwb25kaW5nIHNldHVwIHByb2plY3QgdG8gcGVyZm9ybSBpbnN0YWxsYXRpb24uIFRoZSBjbGFzcyANCiAgICAvLy8gbmVlZHMgdG8gb25seSBpbmhlcml0IGZyb20gdGhpcyBvbmU7IGl0IGRvZXMgbm90IG5lZWQgdG8gcHJvdmlkZSANCiAgICAvLy8gYW55IGZ1cnRoZXIgY29kZS4gVGhlIHByb2plY3QgbXVzdCBiZSB1c2VkIGFzIGEgY3VzdG9tIGFjdGlvbiBpbiBhbGwgDQogICAgLy8vIHN0YWdlcyBvZiBjdXN0b20gYWN0aW9uIGV4ZWN1dGlvbiBpbiB0aGUgc2V0dXAgcHJvamVjdDogSW5zdGFsbCwgDQogICAgLy8vIENvbW1pdCwgUm9sbGJhY2sgYW5kIFVuaW5zdGFsbC4NCiAgICAvLy8gPHBhcmE+DQogICAgLy8vIFJlY2VpdmVzIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVycyBmb3IgdGhlIGluc3RhbGxhdGlvbiBwcm9jZXNzOg0KICAgIC8vLyA8L3BhcmE+DQogICAgLy8vIDxsaXN0IHR5cGU9InRhYmxlIj4NCiAgICAvLy8gPGxpc3RoZWFkZXI+DQogICAgLy8vIDx0ZXJtPkFyZ3VtZW50PC90ZXJtPg0KICAgIC8vLyA8ZGVzY3JpcHRpb24+RGVzY3JpcHRpb248L2Rlc2NyaXB0aW9uPg0KICAgIC8vLyA8L2xpc3RoZWFkZXI+DQogICAgLy8vIDxpdGVtPg0KCS8vLyA8dGVybT5Ib3N0PC90ZXJtPg0KICAgIC8vLyA8ZGVzY3JpcHRpb24+VGhlIG5hbWUgb2YgdGhlIGhvc3QgYmluZGluZyBiZWluZyBpbnN0YWxsZWQuPC9kZXNjcmlwdGlvbj4NCiAgICAvLy8gPC9pdGVtPg0KCS8vLyA8aXRlbT4NCgkvLy8gPHRlcm0+SW5zdGFsbGVyPC90ZXJtPg0KCS8vLyA8ZGVzY3JpcHRpb24+RnVsbCB0eXBlIG5hbWUgb2YgdGhlIGNsYXNzIHRvIHVzZSB0byBpbnN0YWxsIHBhY2thZ2VzIG9uIHRoaXMgaG9zdC4gDQoJLy8vIE11c3QgaW1wbGVtZW50IDxzZWUgY3JlZj0iSUhvc3RJbnN0YWxsZXIiLz4gaW50ZXJmYWNlLjwvZGVzY3JpcHRpb24+DQoJLy8vIDwvaXRlbT4NCgkvLy8gPGl0ZW0+DQoJLy8vIDx0ZXJtPkNvbmZpZ3VyYXRpb248L3Rlcm0+DQoJLy8vIDxkZXNjcmlwdGlvbj5UaGUgY29uZmlndXJhdGlvbiBmaWxlIG9mIHRoZSBwYWNrYWdlIHRvIGluc3RhbGwuPC9kZXNjcmlwdGlvbj4NCgkvLy8gPC9pdGVtPg0KICAgIC8vLyA8aXRlbT4NCiAgICAvLy8gPHRlcm0+RGVidWdJbnN0YWxsZXI8L3Rlcm0+DQogICAgLy8vIDxkZXNjcmlwdGlvbj5BIGJvb2xlYW4gZmxhZyB0aGF0IGFsbG93cyBkZWJ1Z2dpbmcgb2YgdGhlIG1hbmlmZXN0IGluc3RhbGxhdGlvbiBwcm9jZXNzLjwvZGVzY3JpcHRpb24+DQogICAgLy8vIDwvaXRlbT4NCgkvLy8gPGl0ZW0+DQoJLy8vIDx0ZXJtPkRlc2lnbk1vZGU8L3Rlcm0+DQoJLy8vIDxkZXNjcmlwdGlvbj5BIGJvb2xlYW4gZmxhZyB0aGF0IHNwZWNpZmllcyB0aGUgaW5zdGFsbGF0aW9uIGlzIGhhcHBlbmluZyBhdCAgZGVzaWduLXRpbWUuIEV4aXN0aW5nIGhvc3QvcGFja2FnZXMgDQoJLy8vIHNldHRpbmdzcyB3aWxsIHNpbXBseSBiZSBvdmVycmlkZW4sIGluc3RlYWQgb2YgY2F1c2luZyBhbiBleGNlcHRpb24uPC9kZXNjcmlwdGlvbj4NCgkvLy8gPC9pdGVtPg0KCS8vLyA8L2xpc3Q+DQogICAgLy8vIDwvcmVtYXJrcz4NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnkoIkNvZGUiKV0NCiAgICBbU3lzdGVtLkNvbXBvbmVudE1vZGVsLlJ1bkluc3RhbGxlcih0cnVlKV0NCiAgICBwdWJsaWMgY2xhc3MgTWFuaWZlc3RJbnN0YWxsZXIgOiBJbnN0YWxsZXINCgl7DQoJCSNyZWdpb24gUGFyYW1ldGVyIG5hbWVzDQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gUGFyYW1ldGVyIHJlY2VpdmVkIGJ5IHRoZSBpbnN0YWxsZXIgdGhhdCBjb250YWlucyB0aGUgaG9zdCBuYW1lIGJlaW5nIGluc3RhbGxlZC4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIGNvbnN0IHN0cmluZyBQYXJhbWV0ZXJIb3N0ID0gIkhvc3QiOw0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBQYXJhbWV0ZXIgcmVjZWl2ZWQgYnkgdGhlIGluc3RhbGxlciB0aGF0IGNvbnRhaW5zIHRoZSBob3N0IGluc3RhbGxlciBjbGFzcyBuYW1lLg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgY29uc3Qgc3RyaW5nIFBhcmFtZXRlckluc3RhbGxlciA9ICJJbnN0YWxsZXIiOw0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBQYXJhbWV0ZXIgcmVjZWl2ZWQgYnkgdGhlIGluc3RhbGxlciB0aGF0IGNvbnRhaW5zIHRoZSBwYWNrYWdlIGNvbmZpZ3VyYXRpb24gZmlsZSBiZWluZyBpbnN0YWxsZWQuDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyBjb25zdCBzdHJpbmcgUGFyYW1ldGVyQ29uZmlndXJhdGlvbiA9ICJDb25maWd1cmF0aW9uIjsNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gUGFyYW1ldGVyIHJlY2VpdmVkIGJ5IHRoZSBpbnN0YWxsZXIgdGhhdCBkaXNhYmxlcyB0aGUgY2hlY2sgZm9yIGEgcHJldmlvdXMgdmVyc2lvbiBvZiB0aGUgDQogICAgICAgIC8vLyBwYWNrYWdlIGJlaW5nIGluc3RhbGxlZCwgYW5kIGFsc28gcmVtb3ZlcyB0aGUgcmVxdWlyZW1lbnQgdGhhdCBubyBpbnN0YW5jZSBvZiBWaXN1YWwgU3R1ZGlvIG11c3QgYmUgcnVubmluZy4gVXNlZnVsIA0KICAgICAgICAvLy8gd2hlbiBhdXRob3JpbmcgZ3VpZGFuY2UgcGFja2FnZXMuDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyBjb25zdCBzdHJpbmcgUGFyYW1ldGVyRGVzaWduTW9kZSA9ICJEZXNpZ25Nb2RlIjsNCiAgICAgICAgY29uc3Qgc3RyaW5nIFBhcmFtZXRlckRlYnVnSW5zdGFsbGVyID0gIkRlYnVnSW5zdGFsbGVyIjsNCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBQYXJhbWV0ZXIgcmVjZWl2ZWQgYnkgdGhlIGluc3RhbGxlciB0aGF0IGluZGljYXRlcyB0aGUgaW5zdGFsbGF0aW9uIGlzIHByb2dyZXNzaW5nIHVuZGVyIE1pY3Jvc29mdCBXaW5kb3dzIEluc3RhbGxlciBjb25kaXRpb25zDQoJCS8vLyBVc2VmdWwgZm9yIHJlcGFpcmluZyBpbnN0YWxsYXRpb24sIHRvIGNoZWNrIHdoZXRoZXIgdGhlIHBhY2thZ2UgYWxyZWFkeSBleGlzdHMNCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIGNvbnN0IHN0cmluZyBQYXJhbWV0ZXJNc2lLZXkgPSAiaW5zdGFsbHR5cGUiOw0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBWYWx1ZSBvZiB0aGUgcGFyYW1ldGVyIHRvIGNvbXBsZXRlIHRoZSBjaGVjayB0aGF0IHdlIGFyZSBydW5uaW5nIHVuZGVyIE1TSSBjb25kaXRpb25zDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBjb25zdCBzdHJpbmcgUGFyYW1ldGVyTXNpVmFsdWUgPSAibm90cmFuc2FjdGlvbiI7DQoNCgkJI2VuZHJlZ2lvbiBQYXJhbWV0ZXIgbmFtZXMNCg0KCQkjcmVnaW9uIFhQYXRoIEV4cHJlc3Npb25zDQoNCgkJY29uc3Qgc3RyaW5nIFhQYXRoSG9zdHMgPSAiZ2F4OlJlY2lwZUZyYW1ld29yay9nYXg6SG9zdHMiOw0KCQljb25zdCBzdHJpbmcgWFBhdGhIb3N0QnlOYW1lID0gImdheDpSZWNpcGVGcmFtZXdvcmsvZ2F4Okhvc3RzL2dheDpIb3N0W0BOYW1lPSRuYW1lXSI7DQoJCWNvbnN0IHN0cmluZyBYUGF0aFBhY2thZ2UgPSAiZ2F4OlJlY2lwZUZyYW1ld29yay9nYXg6R3VpZGFuY2VQYWNrYWdlcyI7DQogICAgICAgIC8vIFVORE9ORTogY2hlY2tzIGZvciBwYWNrYWdlIGd1aWQgKyB2ZXJzaW9uLg0KCQkvL2NvbnN0IHN0cmluZyBYUGF0aFBhY2thZ2VCeUd1aWRBbmRWZXJzaW9uID0gImdheDpSZWNpcGVGcmFtZXdvcmsvZ2F4Okd1aWRhbmNlUGFja2FnZXMvZ2F4Okd1aWRhbmNlUGFja2FnZVtAR3VpZD0kZ3VpZCBhbmQgQFZlcnNpb249JHZlcnNpb25dIjsNCiAgICAgICAgY29uc3Qgc3RyaW5nIFhQYXRoUGFja2FnZUJ5R3VpZCA9ICJnYXg6UmVjaXBlRnJhbWV3b3JrL2dheDpHdWlkYW5jZVBhY2thZ2VzL2dheDpHdWlkYW5jZVBhY2thZ2VbQEd1aWQ9JGd1aWRdIjsNCiAgICAgICAgY29uc3Qgc3RyaW5nIFhQYXRoUGFja2FnZU5hbWVzQnlIb3N0ID0gImdheDpSZWNpcGVGcmFtZXdvcmsvZ2F4Okd1aWRhbmNlUGFja2FnZXMvZ2F4Okd1aWRhbmNlUGFja2FnZVtASG9zdD0kaG9zdF0vQE5hbWUiOw0KDQoJCSNlbmRyZWdpb24gWFBhdGggRXhwcmVzc2lvbnMNCg0KICAgICAgICAjcmVnaW9uIEluc3RhbGxlciBPdmVycmlkZXMNCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBQZXJmb3JtcyBpbnN0YWxsYXRpb24gb2YgYSBob3N0IG9yIHBhY2thZ2UuDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0ic3RhdGVTYXZlciI+VGhlIGRpY3Rpb25hcnkgdG8gc2F2ZSBzdGF0ZSByZWxhdGVkIHRvIHRoZSBpbnN0YWxsYXRpb24gcHJvY2Vzcy48L3BhcmFtPg0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBJbnN0YWxsKElEaWN0aW9uYXJ5IHN0YXRlU2F2ZXIpDQogICAgICAgIHsNCgkJCWJhc2UuSW5zdGFsbChzdGF0ZVNhdmVyKTsNCgkJCVN0cmVhbSBtYW5pZmVzdFN0cmVhbSA9IG51bGw7DQoJCQl0cnkNCgkJCXsNCgkJCQkvL1NhdmluZyB0aGUgbWFuaWZlc3QgaXMgZG9uZSBpbiB0aGUgQ29tbWl0IGNhbGwuDQoJCQkJLy8gRW5zdXJlIHdlJ2xsIGJlIGFibGUgdG8gc2F2ZS4NCgkJCQkvLyBhbmQgbG9jayB0aGUgZmlsZQ0KCQkJCW1hbmlmZXN0U3RyZWFtID0gbmV3IEZpbGVTdHJlYW0obmV3IFVyaShSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdC5CYXNlVVJJKS5Mb2NhbFBhdGgsIEZpbGVNb2RlLk9wZW4sIEZpbGVBY2Nlc3MuV3JpdGUsIEZpbGVTaGFyZS5Ob25lKTsNCgkJCQlDaGVja0RlYnVnZ2VyKCk7DQoJCQkJQ2hlY2tEZXZlbnYoKTsNCgkJCQlpZiAoQ29udGV4dC5QYXJhbWV0ZXJzLkNvbnRhaW5zS2V5KFBhcmFtZXRlckhvc3QpICYmIENvbnRleHQuUGFyYW1ldGVycy5Db250YWluc0tleShQYXJhbWV0ZXJJbnN0YWxsZXIpKQ0KCQkJCXsNCgkJCQkJSW5zdGFsbEhvc3QoQ29udGV4dC5QYXJhbWV0ZXJzW1BhcmFtZXRlckhvc3RdLCBDb250ZXh0LlBhcmFtZXRlcnNbUGFyYW1ldGVySW5zdGFsbGVyXSk7DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKENvbnRleHQuUGFyYW1ldGVycy5Db250YWluc0tleShQYXJhbWV0ZXJDb25maWd1cmF0aW9uKSkNCgkJCQl7DQoJCQkJCUluc3RhbGxQYWNrYWdlKENvbnRleHQuUGFyYW1ldGVyc1tQYXJhbWV0ZXJDb25maWd1cmF0aW9uXSk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCXRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihQcm9wZXJ0aWVzLlJlc291cmNlcy5NYW5pZmVzdEluc3RhbGxlcl9CYWRBcmd1bWVudHMpOw0KCQkJCX0NCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlpZiAobWFuaWZlc3RTdHJlYW0gIT0gbnVsbCkNCgkJCQl7DQoJCQkJCW1hbmlmZXN0U3RyZWFtLkNsb3NlKCk7DQoJCQkJfQ0KCQkJfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gVW5pbnN0YWxscyBlaXRoZXIgYSBob3N0IG9yIGEgcGFja2FnZSwgZGVwZW5kaW5nIG9uIHRoZSBwYXJhbWV0ZXJzIHJlY2VpdmVkLg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9InNhdmVkU3RhdGUiPlRoZSBkaWN0aW9uYXJ5IG9mIHN0YXRlIHJlbGF0ZWQgdG8gdGhlIGluc3RhbGxhdGlvbiBwcm9jZXNzIGFzIHNhdmVkIGR1cmluZyB0aGUgPHNlZSBjcmVmPSJJbnN0YWxsIi8+IHBoYXNlLjwvcGFyYW0+DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFVuaW5zdGFsbChJRGljdGlvbmFyeSBzYXZlZFN0YXRlKQ0KICAgICAgICB7DQoJCQliYXNlLlVuaW5zdGFsbChzYXZlZFN0YXRlKTsNCgkJCVN0cmVhbSBtYW5pZmVzdFN0cmVhbSA9IG51bGw7DQoJCQl0cnkNCgkJCXsNCgkJCQkvLyBMZXQncyBob2xkIHRoZSBmaWxlIGxvY2tlZA0KCQkJCW1hbmlmZXN0U3RyZWFtID0gbmV3IEZpbGVTdHJlYW0obmV3IFVyaShSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdC5CYXNlVVJJKS5Mb2NhbFBhdGgsIEZpbGVNb2RlLk9wZW4sIEZpbGVBY2Nlc3MuUmVhZCwgRmlsZVNoYXJlLk5vbmUpOw0KCQkJCUNoZWNrRGVidWdnZXIoKTsNCgkJCQlDaGVja0RldmVudigpOw0KCQkJCWlmIChDb250ZXh0LlBhcmFtZXRlcnMuQ29udGFpbnNLZXkoUGFyYW1ldGVySG9zdCkpDQoJCQkJew0KCQkJCQlVbmluc3RhbGxIb3N0KENvbnRleHQuUGFyYW1ldGVyc1tQYXJhbWV0ZXJIb3N0XSk7DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKENvbnRleHQuUGFyYW1ldGVycy5Db250YWluc0tleShQYXJhbWV0ZXJDb25maWd1cmF0aW9uKSkNCgkJCQl7DQoJCQkJCVVuaW5zdGFsbFBhY2thZ2UoQ29udGV4dC5QYXJhbWV0ZXJzW1BhcmFtZXRlckNvbmZpZ3VyYXRpb25dKTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFByb3BlcnRpZXMuUmVzb3VyY2VzLk1hbmlmZXN0SW5zdGFsbGVyX0JhZEFyZ3VtZW50cyk7DQoJCQkJfQ0KCQkJCQ0KCQkJCW1hbmlmZXN0U3RyZWFtLkNsb3NlKCk7DQoJCQkJLy9Ob3cgb3BlbiB0aGUgZmlsZSBmb3Igd3JpdGluZyBhbGwgdGhlIHhtbA0KCQkJCW1hbmlmZXN0U3RyZWFtID0gbmV3IEZpbGVTdHJlYW0obmV3IFVyaShSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdC5CYXNlVVJJKS5Mb2NhbFBhdGgsIEZpbGVNb2RlLkNyZWF0ZSwgRmlsZUFjY2Vzcy5Xcml0ZSwgRmlsZVNoYXJlLk5vbmUpOw0KCQkJCS8vIFNhdmUgdGhlIG1hbmlmZXN0IGZpbGUuDQoJCQkJWG1sVGV4dFdyaXRlciB3cml0ZXIgPSBuZXcgWG1sVGV4dFdyaXRlcihtYW5pZmVzdFN0cmVhbSwgbnVsbCk7DQoJCQkJd3JpdGVyLkZvcm1hdHRpbmcgPSBGb3JtYXR0aW5nLkluZGVudGVkOw0KCQkJCXRyeQ0KCQkJCXsNCgkJCQkJUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuV3JpdGVUbyh3cml0ZXIpOw0KCQkJCX0NCgkJCQlmaW5hbGx5DQoJCQkJew0KCQkJCQl3cml0ZXIuQ2xvc2UoKTsNCgkJCQl9DQoJCQl9DQoJCQljYXRjaCAoU3lzdGVtLklPLkZpbGVOb3RGb3VuZEV4Y2VwdGlvbiBlKQ0KCQkJew0KCQkJCXRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKA0KCQkJCQlzdHJpbmcuRm9ybWF0KEN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5NYW5pZmVzdEluc3RhbGxlcl9WU1JlbW92ZWQsIGUuRmlsZU5hbWUpLCBlKTsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlpZiAobWFuaWZlc3RTdHJlYW0gIT0gbnVsbCkNCgkJCQl7DQoJCQkJCW1hbmlmZXN0U3RyZWFtLkNsb3NlKCk7DQoJCQkJfQ0KCQkJfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gQ29tbWl0cyB0aGUgaW5zdGFsbGF0aW9uIG9mIGEgaG9zdCBvciBhIHBhY2thZ2UsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVycyByZWNlaXZlZC4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJzYXZlZFN0YXRlIj5UaGUgZGljdGlvbmFyeSBvZiBzdGF0ZSByZWxhdGVkIHRvIHRoZSBpbnN0YWxsYXRpb24gcHJvY2VzcyBhcyBzYXZlZCBkdXJpbmcgdGhlIDxzZWUgY3JlZj0iSW5zdGFsbCIvPiBwaGFzZS48L3BhcmFtPg0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBDb21taXQoSURpY3Rpb25hcnkgc2F2ZWRTdGF0ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgYmFzZS5Db21taXQoc2F2ZWRTdGF0ZSk7DQoJCQlTdHJlYW0gbWFuaWZlc3RTdHJlYW0gPSBudWxsOw0KCQkJdHJ5DQoJCQl7DQoJCQkJbWFuaWZlc3RTdHJlYW0gPSBuZXcgRmlsZVN0cmVhbShuZXcgVXJpKFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkJhc2VVUkkpLkxvY2FsUGF0aCwgRmlsZU1vZGUuQ3JlYXRlLCBGaWxlQWNjZXNzLldyaXRlLCBGaWxlU2hhcmUuTm9uZSk7DQoJCQkJWG1sVGV4dFdyaXRlciB3cml0ZXIgPSBuZXcgWG1sVGV4dFdyaXRlcihtYW5pZmVzdFN0cmVhbSwgbnVsbCk7DQoJCQkJd3JpdGVyLkZvcm1hdHRpbmcgPSBGb3JtYXR0aW5nLkluZGVudGVkOw0KCQkJCXRyeQ0KCQkJCXsNCgkJCQkJUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuV3JpdGVUbyh3cml0ZXIpOw0KCQkJCX0NCgkJCQljYXRjaA0KCQkJCXsNCgkJCQkJLy8gUmV2ZXJ0IGNhbGwgdG8gaW5zdGFsbGF0aW9uLg0KCQkJCQlpZiAoQ29udGV4dC5QYXJhbWV0ZXJzLkNvbnRhaW5zS2V5KFBhcmFtZXRlckhvc3QpKQ0KCQkJCQl7DQoJCQkJCQlVbmluc3RhbGxIb3N0KENvbnRleHQuUGFyYW1ldGVyc1tQYXJhbWV0ZXJIb3N0XSk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQlVbmluc3RhbGxQYWNrYWdlKENvbnRleHQuUGFyYW1ldGVyc1tQYXJhbWV0ZXJDb25maWd1cmF0aW9uXSk7DQoJCQkJCX0NCgkJCQkJdGhyb3c7DQoJCQkJfQ0KCQkJCWZpbmFsbHkNCgkJCQl7DQoJCQkJCXdyaXRlci5DbG9zZSgpOw0KCQkJCX0NCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlpZiAobWFuaWZlc3RTdHJlYW0gIT0gbnVsbCkNCgkJCQl7DQoJCQkJCW1hbmlmZXN0U3RyZWFtLkNsb3NlKCk7DQoJCQkJfQ0KCQkJfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSB2b2lkIENoZWNrRGV2ZW52KCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFDb250ZXh0LklzUGFyYW1ldGVyVHJ1ZShQYXJhbWV0ZXJEZXNpZ25Nb2RlKSAmJiBQcm9jZXNzLkdldFByb2Nlc3Nlc0J5TmFtZSgiZGV2ZW52IikuTGVuZ3RoICE9IDApDQogICAgICAgICAgICB7DQoJCQkJdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oUHJvcGVydGllcy5SZXNvdXJjZXMuTWFuaWZlc3RJbnN0YWxsZXJfRGV2ZW52UnVubmluZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAjZW5kcmVnaW9uIEluc3RhbGxlciBPdmVycmlkZXMNCg0KICAgICAgICAjcmVnaW9uIEhvc3QgQmluZGluZyBJbnN0YWxsYXRpb24NCg0KICAgICAgICB2b2lkIEluc3RhbGxIb3N0KHN0cmluZyBob3N0TmFtZSwgc3RyaW5nIGluc3RhbGxlclR5cGUpDQogICAgICAgIHsNCgkJCVhtbE5hbWVzcGFjZU1hbmFnZXIgY29udGV4dCA9IG5ldyBYbWxOYW1lc3BhY2VNYW5hZ2VyKFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0Lk5hbWVUYWJsZSk7DQoJCQljb250ZXh0LkFkZE5hbWVzcGFjZShDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uUHJlZml4LCBDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uTWFuaWZlc3ROYW1lc3BhY2UpOw0KDQoJCQkvLyBDaGVjayB3aGV0aGVyIHRoZSBob3N0IGJlaW5nIGluc3RhbGxlZCBhbHJlYWR5IGV4aXN0cy4NCgkJCVhtbE5vZGUgaG9zdCA9IFhQYXRoQ2FjaGUuU2VsZWN0U2luZ2xlTm9kZShYUGF0aEhvc3RCeU5hbWUsDQoJCQkJUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QsIGNvbnRleHQsDQoJCQkJbmV3IFhQYXRoVmFyaWFibGVbXSB7IG5ldyBYUGF0aFZhcmlhYmxlKCJuYW1lIiwgaG9zdE5hbWUpIH0pOw0KDQoJCQkvLyBIb3N0IGJpbmRpbmcgaW5zdGFsbGF0aW9uIGlzIG9ubHkgYWxsb3dlZC9jaGVja2VkIHBlci1tYWNoaW5lLg0KCQkJaWYgKGhvc3QgIT0gbnVsbCAmJiAhQ29udGV4dC5Jc1BhcmFtZXRlclRydWUoUGFyYW1ldGVyRGVzaWduTW9kZSkpDQoJCQl7DQoJCQkJLy8gSXNzdWUgYSB3YXJuaW5nIGFuZCByZXR1cm4uDQoJCQkJQ29udGV4dC5Mb2dNZXNzYWdlKFN0cmluZy5Gb3JtYXQoDQoJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5NYW5pZmVzdEluc3RhbGxlcl9Ib3N0QWxyZWFkeUluc3RhbGxlZCwgaG9zdE5hbWUpKTsNCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCWlmIChob3N0ICE9IG51bGwpDQoJCQl7DQoJCQkJLy8gV2lsbCBiZSBEZXNpZ25Nb2RlPXRydWUuIEp1c3QgcmVtb3ZlIGFuZCByZXdyaXRlIHRoZSBub2RlLg0KCQkJCWhvc3QuUGFyZW50Tm9kZS5SZW1vdmVDaGlsZChob3N0KTsNCgkJCX0NCg0KCQkJLy8gQ2hlY2sgdGhhdCByZWNlaXZlZCB0eXBlIGlzIGEgdmFsaWQgaW5zdGFsbGVyLg0KCQkJLy8gSXQgbXVzdCBiZSByZXNvbHZhYmxlIGZyb20gdGhlIGN1cnJlbnQgbG9jYXRpb24gb3IgYSBzdWJmb2xkZXIgZm9yIA0KCQkJLy8gdGhlIGhvc3QgbmFtZS4NCgkJCVR5cGVSZXNvbHV0aW9uU2VydmljZSBtYWluc3ZjID0gbmV3IFR5cGVSZXNvbHV0aW9uU2VydmljZSgNCgkJCQlSZWZsZWN0aW9uSGVscGVyLkdldEFzc2VtYmx5UGF0aCh0aGlzLkdldFR5cGUoKS5Bc3NlbWJseSkpOw0KCQkJVHlwZVJlc29sdXRpb25TZXJ2aWNlIGhvc3RzdmMgPSBuZXcgVHlwZVJlc29sdXRpb25TZXJ2aWNlKA0KCQkJCVBhdGguQ29tYmluZShtYWluc3ZjLkJhc2VQYXRoLCBob3N0TmFtZSksIG1haW5zdmMpOw0KCQkJVHlwZSBpbnN0YWxsZXIgPSBob3N0c3ZjLkdldFR5cGUoaW5zdGFsbGVyVHlwZSwgdHJ1ZSk7DQoJCQlpZiAoIXR5cGVvZihJSG9zdEluc3RhbGxlcikuSXNBc3NpZ25hYmxlRnJvbShpbnN0YWxsZXIpKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KCQkJCQlTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuTWFuaWZlc3RJbnN0YWxsZXJfSW52YWxpZEhvc3RJbnN0YWxsZXIsDQoJCQkJCWluc3RhbGxlclR5cGUpKTsNCgkJCX0NCg0KCQkJSUhvc3RJbnN0YWxsZXIgaG9zdGluc3RhbGxlciA9IChJSG9zdEluc3RhbGxlcilBY3RpdmF0b3IuQ3JlYXRlSW5zdGFuY2UoaW5zdGFsbGVyKTsNCgkJCWhvc3RpbnN0YWxsZXIuSW5zdGFsbEhvc3QodGhpcy5Db250ZXh0KTsNCg0KCQkJLy8gQ3JlYXRlIHRoZSBuZXcgbm9kZS4NCgkJCVhtbE5vZGUgaG9zdHNub2RlID0gWFBhdGhDYWNoZS5TZWxlY3RTaW5nbGVOb2RlKFhQYXRoSG9zdHMsDQoJCQkJUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QsIGNvbnRleHQpOw0KICAgICAgICAgICAgaWYgKGhvc3Rzbm9kZSA9PSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFByb3BlcnRpZXMuUmVzb3VyY2VzLk1hbmlmZXN0SW5zdGFsbGVyX05vSG9zdHMpOw0KICAgICAgICAgICAgfQ0KCQkJaG9zdCA9IFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkNyZWF0ZUVsZW1lbnQoDQoJCQkJQ29uZmlndXJhdGlvbi5FbGVtZW50TmFtZXMuSG9zdCwgQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLk1hbmlmZXN0TmFtZXNwYWNlKTsNCgkJCVhtbEF0dHJpYnV0ZSBhdHRyID0gUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuQ3JlYXRlQXR0cmlidXRlKA0KCQkJCUNvbmZpZ3VyYXRpb24uQXR0cmlidXRlTmFtZXMuTmFtZSk7DQoJCQlhdHRyLlZhbHVlID0gaG9zdE5hbWU7DQoJCQlob3N0LkF0dHJpYnV0ZXMuQXBwZW5kKGF0dHIpOw0KCQkJYXR0ciA9IFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkNyZWF0ZUF0dHJpYnV0ZSgNCgkJCQlDb25maWd1cmF0aW9uLkF0dHJpYnV0ZU5hbWVzLkluc3RhbGxlclR5cGUpOw0KCQkJYXR0ci5WYWx1ZSA9IGluc3RhbGxlclR5cGU7DQoJCQlob3N0LkF0dHJpYnV0ZXMuQXBwZW5kKGF0dHIpOw0KCQkJaG9zdHNub2RlLkFwcGVuZENoaWxkKGhvc3QpOw0KCQl9DQoNCiAgICAgICAgdm9pZCBVbmluc3RhbGxIb3N0KHN0cmluZyBob3N0TmFtZSkNCgkJew0KCQkJWG1sTmFtZXNwYWNlTWFuYWdlciBjb250ZXh0ID0gbmV3IFhtbE5hbWVzcGFjZU1hbmFnZXIoUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuTmFtZVRhYmxlKTsNCgkJCWNvbnRleHQuQWRkTmFtZXNwYWNlKENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5QcmVmaXgsIENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5NYW5pZmVzdE5hbWVzcGFjZSk7DQoNCgkJCS8vIENoZWNrIHdoZXRoZXIgdGhlIGhvc3QgYmVpbmcgdW5pbnN0YWxsZWQgZXhpc3RzLg0KCQkJWG1sTm9kZSBob3N0ID0gWFBhdGhDYWNoZS5TZWxlY3RTaW5nbGVOb2RlKFhQYXRoSG9zdEJ5TmFtZSwNCgkJCQlSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdCwgY29udGV4dCwNCgkJCQluZXcgWFBhdGhWYXJpYWJsZVtdIHsgbmV3IFhQYXRoVmFyaWFibGUoIm5hbWUiLCBob3N0TmFtZSkgfSk7DQoJCQlpZiAoaG9zdCA9PSBudWxsKQ0KCQkJew0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJLy8gQ2hlY2sgdGhhdCBzcGVjaWZpZWQgdHlwZSBpcyBhIHZhbGlkIGluc3RhbGxlci4NCgkJCS8vIEl0IG11c3QgYmUgcmVzb2x2YWJsZSBmcm9tIHRoZSBjdXJyZW50IGxvY2F0aW9uIG9yIGEgc3ViZm9sZGVyIGZvciANCgkJCS8vIHRoZSBob3N0IG5hbWUuDQoJCQlUeXBlUmVzb2x1dGlvblNlcnZpY2UgbWFpbnN2YyA9IG5ldyBUeXBlUmVzb2x1dGlvblNlcnZpY2UoDQoJCQkJUmVmbGVjdGlvbkhlbHBlci5HZXRBc3NlbWJseVBhdGgodGhpcy5HZXRUeXBlKCkuQXNzZW1ibHkpKTsNCgkJCVR5cGVSZXNvbHV0aW9uU2VydmljZSBob3N0c3ZjID0gbmV3IFR5cGVSZXNvbHV0aW9uU2VydmljZSgNCgkJCQlQYXRoLkNvbWJpbmUobWFpbnN2Yy5CYXNlUGF0aCwgaG9zdE5hbWUpLCBtYWluc3ZjKTsNCgkJCVR5cGUgaW5zdGFsbGVyID0gaG9zdHN2Yy5HZXRUeXBlKGhvc3QuQXR0cmlidXRlc1tDb25maWd1cmF0aW9uLkF0dHJpYnV0ZU5hbWVzLkluc3RhbGxlclR5cGVdLlZhbHVlLCB0cnVlKTsNCgkJCWlmICghdHlwZW9mKElIb3N0SW5zdGFsbGVyKS5Jc0Fzc2lnbmFibGVGcm9tKGluc3RhbGxlcikpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5NYW5pZmVzdEluc3RhbGxlcl9JbnZhbGlkSG9zdEluc3RhbGxlciwNCgkJCQkJaW5zdGFsbGVyKSk7DQoJCQl9DQoNCgkJCUlIb3N0SW5zdGFsbGVyIGhvc3RpbnN0YWxsZXIgPSAoSUhvc3RJbnN0YWxsZXIpQWN0aXZhdG9yLkNyZWF0ZUluc3RhbmNlKGluc3RhbGxlcik7DQoNCgkJCS8vIFVuaW5zdGFsbCBhbGwgcGFja2FnZXMgZm9yIHRoaXMgaG9zdCBmaXJzdC4NCiAgICAgICAgICAgIFhtbE5vZGVMaXN0IHBhY2thZ2VzID0gWFBhdGhDYWNoZS5TZWxlY3ROb2RlcyhYUGF0aFBhY2thZ2VOYW1lc0J5SG9zdCwNCgkJCQlSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdCwgY29udGV4dCwNCgkJCQluZXcgWFBhdGhWYXJpYWJsZVtdIHsgbmV3IFhQYXRoVmFyaWFibGUoImhvc3QiLCBob3N0TmFtZSkgfSk7DQogICAgICAgICAgICBpZiAocGFja2FnZXMuQ291bnQgPiAwKQ0KICAgICAgICAgICAgew0KCQkJCVN0cmluZ0J1aWxkZXIgcGFja2FnZWxpc3QgPSBuZXcgU3RyaW5nQnVpbGRlcigpOw0KICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGFja2FnZXMuQ291bnQ7IGkrKykNCiAgICAgICAgICAgICAgICB7DQoJCQkJCXBhY2thZ2VsaXN0LkFwcGVuZChwYWNrYWdlc1tpXS5WYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChpICsgMSA8IHBhY2thZ2VzLkNvdW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFja2FnZWxpc3QuQXBwZW5kKCIsICIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihzdHJpbmcuRm9ybWF0KFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0aWVzLlJlc291cmNlcy5NYW5pZmVzdEluc3RhbGxlcl9FcnJvclBhY2thZ2VJbnN0YWxsZWQsDQogICAgICAgICAgICAgICAgICAgIHBhY2thZ2VsaXN0LlRvU3RyaW5nKCkpKTsNCiAgICAgICAgICAgIH0NCg0KCQkJaG9zdGluc3RhbGxlci5Vbmluc3RhbGxIb3N0KHRoaXMuQ29udGV4dCk7DQoJCQlob3N0LlBhcmVudE5vZGUuUmVtb3ZlQ2hpbGQoaG9zdCk7DQoJCX0NCg0KCSAgICAjZW5kcmVnaW9uDQoNCiAgICAgICAgI3JlZ2lvbiBQYWNrYWdlIEluc3RhbGxhdGlvbg0KDQogICAgICAgIHZvaWQgSW5zdGFsbFBhY2thZ2Uoc3RyaW5nIGNvbmZpZ3VyYXRpb24pDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIE1ha2UgcGF0aCBhYnNvbHV0ZS4NCiAgICAgICAgICAgIGlmICghUGF0aC5Jc1BhdGhSb290ZWQoY29uZmlndXJhdGlvbikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbiA9IG5ldyBGaWxlSW5mbyhjb25maWd1cmF0aW9uKS5GdWxsTmFtZTsNCiAgICAgICAgICAgIH0NCgkJCUNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2U7DQoJCQlJSG9zdEluc3RhbGxlciBpbnN0YWxsZXI7DQoJCQlYbWxOb2RlIGFsbHBhY2thZ2VzOw0KICAgICAgICAgICAgWG1sTmFtZXNwYWNlTWFuYWdlciBjb250ZXh0ID0gbmV3IFhtbE5hbWVzcGFjZU1hbmFnZXIoUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuTmFtZVRhYmxlKTsNCiAgICAgICAgICAgIGNvbnRleHQuQWRkTmFtZXNwYWNlKENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5QcmVmaXgsIENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5NYW5pZmVzdE5hbWVzcGFjZSk7DQoNCgkJCUluaXRQYWNrYWdlKGNvbmZpZ3VyYXRpb24sIG91dCBwYWNrYWdlLCBvdXQgaW5zdGFsbGVyLCBvdXQgYWxscGFja2FnZXMsIHRydWUpOw0KICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgaG9zdCB0aGUgcGFja2FnZSBhcHBsaWVzIHRvIGV4aXN0cywgZGVub3RlZCBieSB0aGUgZXhpc3RlbmNlIG9mIHRoZSBpbnN0YWxsZXIgdHlwZS4NCiAgICAgICAgICAgIGlmIChpbnN0YWxsZXIgPT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIGhvc3QgYmluZGluZyBpbnN0YWxsZWQsIHRocm93Lg0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCiAgICAgICAgICAgICAgICAgICAgUHJvcGVydGllcy5SZXNvdXJjZXMuTWFuaWZlc3RJbnN0YWxsZXJfSG9zdEJpbmRpbmdOb3RGb3VuZCwgcGFja2FnZS5Ib3N0KSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBJbnN0YWxsIHBhY2thZ2Ugd2l0aCBob3N0IGluc3RhbGxlci4NCgkJCWluc3RhbGxlci5JbnN0YWxsUGFja2FnZShiYXNlLkNvbnRleHQsIHBhY2thZ2UpOw0KDQoJCQlYbWxOb2RlIHBhY2thZ2Vub2RlID0gUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuQ3JlYXRlRWxlbWVudCgNCgkJCQlDb25maWd1cmF0aW9uLkVsZW1lbnROYW1lcy5HdWlkYW5jZVBhY2thZ2UsDQoJCQkJQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLk1hbmlmZXN0TmFtZXNwYWNlKTsNCgkJCVhtbEF0dHJpYnV0ZSBndWlkID0gUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuQ3JlYXRlQXR0cmlidXRlKENvbmZpZ3VyYXRpb24uQXR0cmlidXRlTmFtZXMuR3VpZCk7DQoJCQlndWlkLlZhbHVlID0gcGFja2FnZS5HdWlkOw0KCQkJcGFja2FnZW5vZGUuQXR0cmlidXRlcy5BcHBlbmQoZ3VpZCk7DQoJCQlYbWxBdHRyaWJ1dGUgdmVyc2lvbiA9IFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkNyZWF0ZUF0dHJpYnV0ZShDb25maWd1cmF0aW9uLkF0dHJpYnV0ZU5hbWVzLlZlcnNpb24pOw0KCQkJdmVyc2lvbi5WYWx1ZSA9IHBhY2thZ2UuVmVyc2lvbjsNCgkJCXBhY2thZ2Vub2RlLkF0dHJpYnV0ZXMuQXBwZW5kKHZlcnNpb24pOw0KCQkJWG1sQXR0cmlidXRlIGNhcHRpb24gPSBSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdC5DcmVhdGVBdHRyaWJ1dGUoQ29uZmlndXJhdGlvbi5BdHRyaWJ1dGVOYW1lcy5DYXB0aW9uKTsNCgkJCWNhcHRpb24uVmFsdWUgPSBwYWNrYWdlLkNhcHRpb247DQoJCQlwYWNrYWdlbm9kZS5BdHRyaWJ1dGVzLkFwcGVuZChjYXB0aW9uKTsNCgkJCVhtbEF0dHJpYnV0ZSBkZXNjcmlwdGlvbiA9IFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkNyZWF0ZUF0dHJpYnV0ZShDb25maWd1cmF0aW9uLkF0dHJpYnV0ZU5hbWVzLkRlc2NyaXB0aW9uKTsNCgkJCWRlc2NyaXB0aW9uLlZhbHVlID0gcGFja2FnZS5EZXNjcmlwdGlvbjsNCgkJCXBhY2thZ2Vub2RlLkF0dHJpYnV0ZXMuQXBwZW5kKGRlc2NyaXB0aW9uKTsNCgkJCVhtbEF0dHJpYnV0ZSBob3N0ID0gUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuQ3JlYXRlQXR0cmlidXRlKENvbmZpZ3VyYXRpb24uQXR0cmlidXRlTmFtZXMuSG9zdCk7DQoJCQlob3N0LlZhbHVlID0gcGFja2FnZS5Ib3N0Ow0KCQkJcGFja2FnZW5vZGUuQXR0cmlidXRlcy5BcHBlbmQoaG9zdCk7DQogICAgICAgICAgICBYbWxBdHRyaWJ1dGUgY29uZmlnZmlsZSA9IFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkNyZWF0ZUF0dHJpYnV0ZShDb25maWd1cmF0aW9uLkF0dHJpYnV0ZU5hbWVzLkNvbmZpZ3VyYXRpb25GaWxlKTsNCgkJCWNvbmZpZ2ZpbGUuVmFsdWUgPSBjb25maWd1cmF0aW9uOw0KCQkJcGFja2FnZW5vZGUuQXR0cmlidXRlcy5BcHBlbmQoY29uZmlnZmlsZSk7DQogICAgICAgICAgICBYbWxBdHRyaWJ1dGUgc3RhbXAgPSBSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdC5DcmVhdGVBdHRyaWJ1dGUoQ29uZmlndXJhdGlvbi5BdHRyaWJ1dGVOYW1lcy5UaW1lc3RhbXAsIFN0cmluZy5FbXB0eSk7DQogICAgICAgICAgICBzdGFtcC5WYWx1ZSA9IG5ldyBGaWxlSW5mbyhjb25maWd1cmF0aW9uKS5MYXN0V3JpdGVUaW1lLlRpY2tzLlRvU3RyaW5nKCk7DQogICAgICAgICAgICBwYWNrYWdlbm9kZS5BdHRyaWJ1dGVzLkFwcGVuZChzdGFtcCk7DQoNCgkJCWFsbHBhY2thZ2VzLkFwcGVuZENoaWxkKHBhY2thZ2Vub2RlKTsNCgkJfQ0KDQoJCXZvaWQgVW5pbnN0YWxsUGFja2FnZShzdHJpbmcgY29uZmlndXJhdGlvbikNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gTWFrZSBwYXRoIGFic29sdXRlLg0KICAgICAgICAgICAgaWYgKCFQYXRoLklzUGF0aFJvb3RlZChjb25maWd1cmF0aW9uKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gbmV3IEZpbGVJbmZvKGNvbmZpZ3VyYXRpb24pLkZ1bGxOYW1lOw0KICAgICAgICAgICAgfQ0KCQkJQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgcGFja2FnZTsNCgkJCUlIb3N0SW5zdGFsbGVyIGluc3RhbGxlcjsNCgkJCVhtbE5vZGUgcGFja2FnZXNub2RlOw0KDQoJCQlJbml0UGFja2FnZShjb25maWd1cmF0aW9uLCBvdXQgcGFja2FnZSwgb3V0IGluc3RhbGxlciwgb3V0IHBhY2thZ2Vzbm9kZSwgZmFsc2UpOw0KCQkJQ29udGV4dC5Mb2dNZXNzYWdlKFN0cmluZy5Gb3JtYXQoDQoJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuTWFuaWZlc3RJbnN0YWxsZXJfVW5pbnN0YWxsaW5nUGFja2FnZSwNCgkJCQlwYWNrYWdlLkNhcHRpb24pKTsNCg0KICAgICAgICAgICAgWG1sTmFtZXNwYWNlTWFuYWdlciBjb250ZXh0ID0gbmV3IFhtbE5hbWVzcGFjZU1hbmFnZXIoUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuTmFtZVRhYmxlKTsNCiAgICAgICAgICAgIGNvbnRleHQuQWRkTmFtZXNwYWNlKENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5QcmVmaXgsIENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5NYW5pZmVzdE5hbWVzcGFjZSk7DQoNCiAgICAgICAgICAgIC8vIFVORE9ORTogc3VwcG9ydCBmb3IgcGFja2FnZSBuYW1lICsgdmVyc2lvbi4NCiAgICAgICAgICAgIFhtbE5vZGUgcGFja2FnZW5vZGUgPSBYUGF0aENhY2hlLlNlbGVjdFNpbmdsZU5vZGUoWFBhdGhQYWNrYWdlQnlHdWlkLA0KICAgICAgICAgICAgICAgIFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LCBjb250ZXh0LA0KICAgICAgICAgICAgICAgIG5ldyBYUGF0aFZhcmlhYmxlW10geyBuZXcgWFBhdGhWYXJpYWJsZSgiZ3VpZCIsIHBhY2thZ2UuR3VpZCkgfSk7DQogICAgICAgICAgICAvLyBPbmx5IGNvbnRpbnVlIHdpdGggdW5pbnN0YWxsYXRpb24gaWYgdGhlIHBhY2thZ2Ugd2FzIGFjdHVhbGx5IGluc3RhbGxlZC4NCiAgICAgICAgICAgIGlmIChwYWNrYWdlbm9kZSA9PSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gU2V0IHRoZSBwYWNrYWdlIGZpbGUgaW4gdGhlIGNvbnRleHQgaW4gY2FzZSBob3N0IGluc3RhbGxlciBuZWVkcyBpdC4NCiAgICAgICAgICAgIGJhc2UuQ29udGV4dC5QYXJhbWV0ZXJzW1BhcmFtZXRlckNvbmZpZ3VyYXRpb25dID0gY29uZmlndXJhdGlvbjsNCgkJCWluc3RhbGxlci5Vbmluc3RhbGxQYWNrYWdlKGJhc2UuQ29udGV4dCwgcGFja2FnZSk7DQoNCgkJCS8vIFJlbW92ZSB0aGUgbm9kZSBhbmQgcGVyc2lzdCB0aGUgY29uZmlnIGlmIG5lY2Vzc2FyeS4NCgkJCXBhY2thZ2Vzbm9kZS5SZW1vdmVDaGlsZChwYWNrYWdlbm9kZSk7DQogICAgICAgIH0NCg0KCQlwcml2YXRlIHZvaWQgSW5pdFBhY2thZ2Uoc3RyaW5nIGNvbmZpZ3VyYXRpb24sIG91dCBDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlLA0KCQkJb3V0IElIb3N0SW5zdGFsbGVyIGluc3RhbGxlciwgb3V0IFhtbE5vZGUgcGFja2FnZXNOb2RlLCBib29sIGluc3RhbGxpbmcpDQogICAgICAgIHsNCiAgICAgICAgICAgIHBhY2thZ2UgPSBHdWlkYW5jZVBhY2thZ2UuUmVhZENvbmZpZ3VyYXRpb24oY29uZmlndXJhdGlvbik7DQoNCiAgICAgICAgICAgIFhtbE5hbWVzcGFjZU1hbmFnZXIgY29udGV4dCA9IG5ldyBYbWxOYW1lc3BhY2VNYW5hZ2VyKFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0Lk5hbWVUYWJsZSk7DQogICAgICAgICAgICBjb250ZXh0LkFkZE5hbWVzcGFjZShDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uUHJlZml4LCBDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uTWFuaWZlc3ROYW1lc3BhY2UpOw0KDQogICAgICAgICAgICAvLyBVTkRPTkU6IHN1cHBvcnQgZm9yIHBhY2thZ2UgKyB2ZXJzaW9uDQogICAgICAgICAgICAvL1htbE5vZGUgZXhpc3RpbmcgPSBYUGF0aENhY2hlLlNlbGVjdFNpbmdsZU5vZGUoWFBhdGhQYWNrYWdlQnlOYW1lQW5kVmVyc2lvbiwNCiAgICAgICAgICAgIC8vICAgIFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LCBjb250ZXh0LA0KICAgICAgICAgICAgLy8gICAgbmV3IFhQYXRoVmFyaWFibGVbXSB7IG5ldyBYUGF0aFZhcmlhYmxlKCJuYW1lIiwgcGFja2FnZS5OYW1lKSwgDQogICAgICAgICAgICAvLyAgICAgICAgbmV3IFhQYXRoVmFyaWFibGUoInZlcnNpb24iLCBwYWNrYWdlLlZlcnNpb24pIH0pOw0KDQoJCQkvLyBXZSBhbHdheXMgaGF2ZSB0byBjaGVjayBpZiB0aGUgbm9kZSBleGlzdHMNCgkJCS8vIGluIGNhc2Ugb2YgaW5zdGFsbGF0aW9uIG9yIHVuaW5zdGFsbGF0aW9uDQogICAgICAgICAgICBYbWxOb2RlIGV4aXN0aW5nID0gWFBhdGhDYWNoZS5TZWxlY3RTaW5nbGVOb2RlKFhQYXRoUGFja2FnZUJ5R3VpZCwNCiAgICAgICAgICAgICAgICBSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdCwgY29udGV4dCwNCiAgICAgICAgICAgICAgICBuZXcgWFBhdGhWYXJpYWJsZVtdIHsgbmV3IFhQYXRoVmFyaWFibGUoImd1aWQiLCBwYWNrYWdlLkd1aWQpIH0pOw0KCQkJaWYgKGluc3RhbGxpbmcpDQoJCQl7DQoJCQkJaWYgKGV4aXN0aW5nICE9IG51bGwgJiYgIUNvbnRleHQuSXNQYXJhbWV0ZXJUcnVlKFBhcmFtZXRlckRlc2lnbk1vZGUpKQ0KCQkJCXsNCgkJCQkJLy8gSWYgdGhpcyBpcyBhIG1zaSBJbnN0YWxsYXRpb24gd2UgaGF2ZSB0byBjb250aW51ZQ0KCQkJCQkvLyBiZWNhdXNlIGl0IGlzIHRoZSBjYXNlIHdoZW4gdGhlIHVzZXIgaXMgdHJ5aW5nIHRvIHJlcGFpciANCgkJCQkJYm9vbCBtc2lJbnN0YWxsYXRpb24gPSBDb250ZXh0LlBhcmFtZXRlcnMuQ29udGFpbnNLZXkoUGFyYW1ldGVyTXNpS2V5KSAmJg0KCQkJCQkJKENvbnRleHQuUGFyYW1ldGVyc1tQYXJhbWV0ZXJNc2lLZXldID09IFBhcmFtZXRlck1zaVZhbHVlKTsNCgkJCQkJaWYgKCFtc2lJbnN0YWxsYXRpb24pDQoJCQkJCXsNCgkJCQkJCXRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KCQkJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLk1hbmlmZXN0SW5zdGFsbGVyX1BhY2thZ2VBbHJlYWR5SW5zdGFsbGVkLA0KCQkJCQkJCXBhY2thZ2UuQ2FwdGlvbikpOw0KCQkJCQl9DQoJCQkJfQ0KICAgICAgICAgICAgICAgIC8vIENoZWNrIEd1aWQgc28gdGhhdCB1c2VyIGNhbm5vdCBjaGFuZ2UgZ3VpZCBvZiBhIHJlZ2lzdGVyZWQgcGFja2FnZS4NCiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcgIT0gbnVsbCAmJiBleGlzdGluZy5BdHRyaWJ1dGVzWyJHdWlkIl0gIT0gbnVsbCAmJiBleGlzdGluZy5BdHRyaWJ1dGVzWyJHdWlkIl0uVmFsdWUuTGVuZ3RoID4gMCAmJg0KICAgICAgICAgICAgICAgICAgICBwYWNrYWdlLkd1aWQgIT0gbnVsbCAmJiBwYWNrYWdlLkd1aWQuTGVuZ3RoID4gMCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZy5BdHRyaWJ1dGVzWyJHdWlkIl0uVmFsdWUgIT0gcGFja2FnZS5HdWlkKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0aWVzLlJlc291cmNlcy5NYW5pZmVzdEluc3RhbGxlcl9DYW5ub3RDaGFuZ2VHdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhY2thZ2UuQ2FwdGlvbikpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChleGlzdGluZyAhPSBudWxsKQ0KCQkJCXsNCgkJCQkJLy8gV2lsbCBiZSBEZXNpZ25Nb2RlPXRydWUuIEp1c3QgcmVtb3ZlIGFuZCByZXdyaXRlIHRoZSBub2RlLg0KCQkJCQlleGlzdGluZy5QYXJlbnROb2RlLlJlbW92ZUNoaWxkKGV4aXN0aW5nKTsNCgkJCQl9DQoNCgkJCQkvLyBDaGVjayBHdWlkDQoJCQkJaWYgKHBhY2thZ2UuR3VpZCAhPSBudWxsICYmIHBhY2thZ2UuR3VpZC5MZW5ndGggPiAwKQ0KCQkJCXsNCgkJCQkJZXhpc3RpbmcgPSBYUGF0aENhY2hlLlNlbGVjdFNpbmdsZU5vZGUoWFBhdGhQYWNrYWdlQnlHdWlkLA0KCQkJCQkJUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QsIGNvbnRleHQsDQoJCQkJCQluZXcgWFBhdGhWYXJpYWJsZVtdIHsgbmV3IFhQYXRoVmFyaWFibGUoImd1aWQiLCBwYWNrYWdlLkd1aWQpIH0pOw0KCQkJCQlpZiAoZXhpc3RpbmcgIT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuTWFuaWZlc3RJbnN0YWxsZXJfRHVwbGljYXRlZFBhY2thZ2VHdWlkLA0KCQkJCQkJCXBhY2thZ2UuR3VpZCkpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZSBpZiAoKGV4aXN0aW5nID09IG51bGwpICYmICFDb250ZXh0LklzUGFyYW1ldGVyVHJ1ZShQYXJhbWV0ZXJEZXNpZ25Nb2RlKSkNCgkJCXsNCgkJCQkvLyBXZSBhcmUgdW5pbnN0YWxsaW5nIGFuZCB0aGUgcGFja2FnZSBpcyBub3QgaW4gdGhlIG1hbmlmZXN0DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5NYW5pZmVzdEluc3RhbGxlcl9QYWNrYWdlVW5pbnN0YWxsTm90SW5NYW5pZmVzdCwNCgkJCQkJcGFja2FnZS5DYXB0aW9uKSk7DQoJCQl9DQoNCiAgICAgICAgICAgIFhtbE5vZGUgaG9zdCA9IFhQYXRoQ2FjaGUuU2VsZWN0U2luZ2xlTm9kZShYUGF0aEhvc3RCeU5hbWUsDQogICAgICAgICAgICAgICAgUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QsIGNvbnRleHQsDQogICAgICAgICAgICAgICAgbmV3IFhQYXRoVmFyaWFibGVbXSB7IG5ldyBYUGF0aFZhcmlhYmxlKCJuYW1lIiwgcGFja2FnZS5Ib3N0KSB9KTsNCiAgICAgICAgICAgIGlmIChob3N0ID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaW5zdGFsbGVyID0gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IGV4aXN0aW5nIHR5cGUgaXMgYSB2YWxpZCBpbnN0YWxsZXIuDQogICAgICAgICAgICAgICAgLy8gSXQgbXVzdCBiZSByZXNvbHZhYmxlIGZyb20gdGhlIGN1cnJlbnQgbG9jYXRpb24gb3IgYSBzdWJmb2xkZXIgZm9yIA0KICAgICAgICAgICAgICAgIC8vIHRoZSBob3N0IG5hbWUuDQogICAgICAgICAgICAgICAgVHlwZVJlc29sdXRpb25TZXJ2aWNlIG1haW5zdmMgPSBuZXcgVHlwZVJlc29sdXRpb25TZXJ2aWNlKA0KICAgICAgICAgICAgICAgICAgICBSZWZsZWN0aW9uSGVscGVyLkdldEFzc2VtYmx5UGF0aCh0aGlzLkdldFR5cGUoKS5Bc3NlbWJseSkpOw0KICAgICAgICAgICAgICAgIFR5cGVSZXNvbHV0aW9uU2VydmljZSBob3N0c3ZjID0gbmV3IFR5cGVSZXNvbHV0aW9uU2VydmljZSgNCiAgICAgICAgICAgICAgICAgICAgUGF0aC5Db21iaW5lKG1haW5zdmMuQmFzZVBhdGgsIHBhY2thZ2UuSG9zdCksIG1haW5zdmMpOw0KICAgICAgICAgICAgICAgIFR5cGUgaW5zdGFsbGVydHlwZSA9IGhvc3RzdmMuR2V0VHlwZShob3N0LkF0dHJpYnV0ZXNbQ29uZmlndXJhdGlvbi5BdHRyaWJ1dGVOYW1lcy5JbnN0YWxsZXJUeXBlXS5WYWx1ZSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgaWYgKCF0eXBlb2YoSUhvc3RJbnN0YWxsZXIpLklzQXNzaWduYWJsZUZyb20oaW5zdGFsbGVydHlwZSkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KICAgICAgICAgICAgICAgICAgICAgICAgUHJvcGVydGllcy5SZXNvdXJjZXMuTWFuaWZlc3RJbnN0YWxsZXJfSW52YWxpZEhvc3RJbnN0YWxsZXIsDQogICAgICAgICAgICAgICAgICAgICAgICBob3N0LkF0dHJpYnV0ZXNbQ29uZmlndXJhdGlvbi5BdHRyaWJ1dGVOYW1lcy5JbnN0YWxsZXJUeXBlXS5WYWx1ZSkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpbnN0YWxsZXIgPSAoSUhvc3RJbnN0YWxsZXIpQWN0aXZhdG9yLkNyZWF0ZUluc3RhbmNlKGluc3RhbGxlcnR5cGUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwYWNrYWdlc05vZGUgPSBYUGF0aENhY2hlLlNlbGVjdFNpbmdsZU5vZGUoWFBhdGhQYWNrYWdlLA0KICAgICAgICAgICAgICAgIFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LCBjb250ZXh0KTsNCiAgICAgICAgfQ0KDQogICAgICAgICNlbmRyZWdpb24NCg0KCQlwcml2YXRlIHZvaWQgQ2hlY2tEZWJ1Z2dlcigpDQoJCXsNCgkJCWlmIChDb250ZXh0LklzUGFyYW1ldGVyVHJ1ZSgiRGVidWdJbnN0YWxsZXIiKSkNCgkJCXsNCgkJCQlpZiAoIVN5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlci5Jc0F0dGFjaGVkKQ0KCQkJCXsNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkRpYWdub3N0aWNzLkRlYnVnLkFzc2VydChmYWxzZSwgIkRlYnVnIGluc3RhbGxhdGlvbiBwcm9jZXNzPyIpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KICAgIH0NCn0NCg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>35</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Framework/RecipeManager.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDsNCnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ247DQp1c2luZyBTeXN0ZW0uSU87DQp1c2luZyBTeXN0ZW0uWG1sOw0KdXNpbmcgU3lzdGVtLlhtbC5TY2hlbWE7DQp1c2luZyBTeXN0ZW0uWG1sLlhQYXRoOw0KDQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLkNvbXBvbmVudE1vZGVsOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb247DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5TZXJ2aWNlczsNCg0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuSW50ZXJuYWw7DQp1c2luZyBNdnAuWG1sLlhJbmNsdWRlOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb24uU2VydmljZXM7DQp1c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7DQp1c2luZyBTeXN0ZW0uU2VjdXJpdHkuUG9saWN5Ow0KdXNpbmcgU3lzdGVtLlNlY3VyaXR5Ow0KdXNpbmcgU3lzdGVtLkNvbmZpZ3VyYXRpb247DQp1c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjsNCnVzaW5nIE12cC5YbWwuQ29tbW9uOw0KdXNpbmcgTXZwLlhtbC5Db21tb24uWFBhdGg7DQoNCiNlbmRyZWdpb24gVXNpbmcgZGlyZWN0aXZlcw0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsNCnsNCgkvLy8gPHN1bW1hcnk+DQoJLy8vIE1haW4gY29udGFpbmVyIHRoYXQgdWx0aW1hdGVseSBob3N0cyBhbGwgZnJhbWV3b3JrIGNvbXBvbmVudHMgYW5kIGNoaWxkIA0KCS8vLyBjb250YWluZXJzLiBQcm92aWRlcyBwYWNrYWdlIG1hbmFnZW1lbnQgZmVhdHVyZXMuDQoJLy8vIDwvc3VtbWFyeT4NCglwdWJsaWMgY2xhc3MgUmVjaXBlTWFuYWdlciA6IENvbXBvbmVudE1vZGVsLlNlcnZpY2VDb250YWluZXIsIElSZWNpcGVNYW5hZ2VyU2VydmljZQ0KCXsNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRW1iZWRkZWQgcmVzb3VyY2Ugd2l0aCBlbXB0eSBtYW5pZmVzdCBpZiBubyBtYW5pZmVzdCBpcyBwcmVzZW50Lg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlzdGF0aWMgcmVhZG9ubHkgc3RyaW5nIEVtcHR5TWFuaWZlc3QgPSBDb21tb24uUmVmbGVjdGlvbkhlbHBlci5HZXRBc3NlbWJseU5hbWUoDQoJCQl0eXBlb2YoUmVjaXBlTWFuYWdlcikpICsgIi5FbXB0eU1hbmlmZXN0LnhtbCI7DQoJCWNvbnN0IHN0cmluZyBNYW5pZmVzdEZpbGUgPSAiUmVjaXBlRnJhbWV3b3JrLnhtbCI7DQoNCgkJI3JlZ2lvbiBYUGF0aCBleHByZXNzaW9ucw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFJldHJpZXZlcyB0aGUgaG9zdCB0aGUgcGFja2FnZSBpcyByZWdpc3RlcmVkIGZvciBpbiB0aGUgbWFuaWZlc3QgZmlsZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJY29uc3Qgc3RyaW5nIFhQYXRoUGFja2FnZUhvc3QgPSAic3RyaW5nKGdheDpSZWNpcGVGcmFtZXdvcmsvZ2F4Okd1aWRhbmNlUGFja2FnZXMvZ2F4Okd1aWRhbmNlUGFja2FnZVtAR3VpZD0kZ3VpZF0vQEhvc3QpIjsNCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBSZXRyaWV2ZXMgdGhlIHBhY2thZ2UgZGF0YSB3aXRoIGEgc3BlY2lmaWVkIGd1aWQgZnJvbSB0aGUgZnJhbWV3b3JrIG1hbmlmZXN0IGZpbGUuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCWNvbnN0IHN0cmluZyBYUGF0aFBhY2thZ2UgPSAiZ2F4OlJlY2lwZUZyYW1ld29yay9nYXg6R3VpZGFuY2VQYWNrYWdlcy9nYXg6R3VpZGFuY2VQYWNrYWdlW0BHdWlkPSRndWlkXSI7DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gUmV0cmlldmVzIGFsbCB0aGUgcGFja2FnZXMgdGhhdCBhcmUgaW5zdGFsbGVkIGZvciBhIGhvc3QuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCWNvbnN0IHN0cmluZyBYUGF0aFBhY2thZ2VCeUhvc3QgPSAiZ2F4OlJlY2lwZUZyYW1ld29yay9nYXg6R3VpZGFuY2VQYWNrYWdlcy9nYXg6R3VpZGFuY2VQYWNrYWdlW0BIb3N0PSRob3N0XSI7DQoNCgkJI2VuZHJlZ2lvbiBYUGF0aCBleHByZXNzaW9ucw0KDQoJCSNyZWdpb24gQ29uc3RydWN0b3JzDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIDxzZWUgY3JlZj0iUmVjaXBlTWFuYWdlciIvPiBjbGFzcy4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxyZW1hcmtzPlRvIGxldCBjb250YWluZWQgY29tcG9uZW50cyBwdWJsaXNoIGFkZGl0aW9uYWwgc2VydmljZXMsIHVzZSANCgkJLy8vIHRoZSBvdmVybG9hZCByZWNlaXZpbmcgdGhlIDxjPmV4cG9zZVNlcnZpY2VDb250YWluZXJTZXJ2aWNlPC9jPiBmbGFnLjwvcmVtYXJrcz4NCgkJcHVibGljIFJlY2lwZU1hbmFnZXIoKQ0KCQl7DQoJCQlJbml0aWFsaXplU2VydmljZXMoKTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSA8c2VlIGNyZWY9IlJlY2lwZU1hbmFnZXIiLz4gY2xhc3MgdXNpbmcgdGhlIHNwZWNpZmllZCBwYXJlbnQgc2VydmljZSBwcm92aWRlci4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJleHBvc2VTZXJ2aWNlQ29udGFpbmVyU2VydmljZSI+SW5kaWNhdGVzIHdoZXRoZXIgdGhlIDxzZWUgY3JlZj0iQ29tcG9uZW50TW9kZWwuU2VydmljZUNvbnRhaW5lciIvPiBzZXJ2aWNlIA0KCQkvLy8gZm9yIHRoaXMgY29udGFpbmVyIHNob3VsZCBiZSBleHBvc2VkIHRvIGFsbG93IGNvbnRhaW5lZCBjb21wb25lbnQgdG8gcHVibGlzaCBuZXcgc2VydmljZXMuPC9wYXJhbT4NCgkJcHVibGljIFJlY2lwZU1hbmFnZXIoYm9vbCBleHBvc2VTZXJ2aWNlQ29udGFpbmVyU2VydmljZSkNCgkJCTogYmFzZShleHBvc2VTZXJ2aWNlQ29udGFpbmVyU2VydmljZSkNCgkJew0KCQkJSW5pdGlhbGl6ZVNlcnZpY2VzKCk7DQoJCX0NCg0KCQkjZW5kcmVnaW9uIENvbnN0cnVjdG9ycw0KDQoJCSNyZWdpb24gSW5pdGlhbGl6YXRpb24NCg0KCQlwcml2YXRlIHZvaWQgSW5pdGlhbGl6ZVNlcnZpY2VzKCkNCgkJew0KCQkJQWRkU2VydmljZSh0eXBlb2YoSVJlY2lwZU1hbmFnZXJTZXJ2aWNlKSwgdGhpcyk7DQoJCQkvLyBVTkRPTkU6IGltcGxlbWVudCBHQUMgc3VwcG9ydCBieSB0YWtpbmcgdGhpcyBwYXRoIGZyb20gdGhlIGZyYW1ld29yayBtYW5pZmVzdC4NCgkJCUFkZFNlcnZpY2UodHlwZW9mKElUeXBlUmVzb2x1dGlvblNlcnZpY2UpLCBuZXcgVHlwZVJlc29sdXRpb25TZXJ2aWNlKA0KCQkJCVBhdGguR2V0RGlyZWN0b3J5TmFtZShDb21tb24uUmVmbGVjdGlvbkhlbHBlci5HZXRBc3NlbWJseVBhdGgodGhpcy5HZXRUeXBlKCkuQXNzZW1ibHkpKSkpOw0KCQl9DQoNCgkJI2VuZHJlZ2lvbiBJbml0aWFsaXphdGlvbg0KDQoJCSNyZWdpb24gQ29udGFpbmVyIE92ZXJyaWRlcyAoYWN0dWFsIGltcGxlbWVudGF0aW9ucykNCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBBZGRzIGEgcGFja2FnZSB0byB0aGUgbWFuYWdlciwgZW5hYmxpbmcgaXQgZm9yIHVzZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJjb21wb25lbnQiPlRoZSBwYWNrYWdlIGNvbXBvbmVudC48L3BhcmFtPg0KCQkvLy8gPHBhcmFtIG5hbWU9Im5hbWUiPk9wdGlvbmFsIG5hbWUgKGNhbiBiZSA8c2VlIGxhbmd3b3JkPSJudWxsIi8+KSANCgkJLy8vIHRoYXQgbXVzdCBtYXRjaCB0aGUgcGFja2FnZSBuYW1lLjwvcGFyYW0+DQoJCS8vLyA8cmVtYXJrcz4NCgkJLy8vIFRoaXMgbWV0aG9kIGlzIGFsc28gY2FsbGVkIHRvIGFkZCB0byB0aGUgY29udGFpbmVyIHNlcnZpY2VzIHRoYXQgDQoJCS8vLyBpbmhlcml0IGZyb20gPHNlZSBjcmVmPSJJQ29tcG9uZW50Ii8+LCBzbyB0aGUgdHlwZSBvZiB0aGUgY29tcG9uZW50IA0KCQkvLy8gaXMgbm90IGVuZm9yY2VkLiBKdXN0IHNwZWNpYWwgbG9naWMgaXMgYXBwbGllZCB0byBwYWNrYWdlIGNvbXBvbmVudCB0eXBlcy4NCgkJLy8vIDwvcmVtYXJrcz4NCgkJcHVibGljIG92ZXJyaWRlIHZvaWQgQWRkKElDb21wb25lbnQgY29tcG9uZW50LCBzdHJpbmcgbmFtZSkNCgkJew0KCQkJaWYgKGNvbXBvbmVudCA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImNvbXBvbmVudCIpOw0KCQkJfQ0KCQkJaWYgKGNvbXBvbmVudCBpcyBHdWlkYW5jZVBhY2thZ2UpDQoJCQl7DQoJCQkJR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSAoR3VpZGFuY2VQYWNrYWdlKWNvbXBvbmVudDsNCgkJCQlpZiAobmFtZSAhPSBudWxsICYmIG5hbWUgIT0gcGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpDQoJCQkJew0KCQkJCQl0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuUmVjaXBlTWFuYWdlcl9OYW1lRG9lc250TWF0Y2gsDQoJCQkJCQluYW1lLCBwYWNrYWdlLkNvbmZpZ3VyYXRpb24uR3VpZCkpOw0KCQkJCX0NCgkJCQkvLyBJZiB0aGVyZSdzIGEgaG9zdCBsaXN0ZW5pbmcsIHF1ZXJ5IGZvciBuYW1lIHRvIHNlZSBpZiB0aGV5IG1hdGNoLg0KCQkJCUlIb3N0U2VydmljZSBob3N0ID0gR2V0U2VydmljZTxJSG9zdFNlcnZpY2U+KCk7DQoJCQkJaWYgKGhvc3QgIT0gbnVsbCAmJiBob3N0Lkhvc3ROYW1lICE9IHBhY2thZ2UuQ29uZmlndXJhdGlvbi5Ib3N0KQ0KCQkJCXsNCgkJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCQlTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlY2lwZU1hbmFnZXJfUGFja2FnZUhvc3RNaXNtYXRjaCwNCgkJCQkJCXBhY2thZ2UuQ29uZmlndXJhdGlvbi5DYXB0aW9uLA0KCQkJCQkJcGFja2FnZS5Db25maWd1cmF0aW9uLkhvc3QsDQoJCQkJCQlob3N0Lkhvc3ROYW1lKSk7DQoJCQkJfQ0KDQoJCQkJdHJ5DQoJCQkJew0KCQkJCQkvLyBGb3JjZSB0aGUgcGFja2FnZSB0byBiZSBzaXRlZCBhdCBFbmFibGluZyBldmVudCB0aW1lIGFsc28uDQoJCQkJCWJhc2UuQWRkKGNvbXBvbmVudCwgcGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpOw0KCQkJCQlib29sIGV4ZWN1dGViaW5kaW5nID0gdHJ1ZTsNCgkJCQkJaWYgKEVuYWJsaW5nUGFja2FnZSAhPSBudWxsKQ0KCQkJCQl7DQoJCQkJCQlDYW5jZWxQYWNrYWdlRXZlbnRBcmdzIGFyZ3MgPSBuZXcgQ2FuY2VsUGFja2FnZUV2ZW50QXJncygNCgkJCQkJCQlwYWNrYWdlLCBmYWxzZSk7DQoJCQkJCQlFbmFibGluZ1BhY2thZ2UodGhpcywgYXJncyk7DQoJCQkJCQlpZiAoYXJncy5DYW5jZWwpDQoJCQkJCQl7DQoJCQkJCQkJYmFzZS5SZW1vdmUoY29tcG9uZW50KTsNCgkJCQkJCQlyZXR1cm47DQoJCQkJCQl9DQoJCQkJCQlleGVjdXRlYmluZGluZyA9IGFyZ3MuRXhlY3V0ZUJpbmRpbmdSZWNpcGU7DQoJCQkJCX0NCgkJCQkJaWYgKGV4ZWN1dGViaW5kaW5nICYmIHBhY2thZ2UuQ29uZmlndXJhdGlvbi5CaW5kaW5nUmVjaXBlICE9IG51bGwgJiYNCgkJCQkJCXBhY2thZ2UuQ29uZmlndXJhdGlvbi5CaW5kaW5nUmVjaXBlLkxlbmd0aCA+IDApDQoJCQkJCXsNCgkJCQkJCXBhY2thZ2UuVHVybk9uT3V0cHV0KCk7DQoJCQkJCQlwYWNrYWdlLkV4ZWN1dGUocGFja2FnZS5Db25maWd1cmF0aW9uLkJpbmRpbmdSZWNpcGUpOw0KCQkJCQkJcGFja2FnZS5UdXJuT2ZmT3V0cHV0KCk7DQoJCQkJCX0NCgkJCQkJaWYgKEVuYWJsZWRQYWNrYWdlICE9IG51bGwpDQoJCQkJCXsNCgkJCQkJCUVuYWJsZWRQYWNrYWdlKHRoaXMsIG5ldyBQYWNrYWdlRXZlbnRBcmdzKHBhY2thZ2UpKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCQljYXRjaA0KCQkJCXsNCgkJCQkJSVBlcnNpc3RlbmNlU2VydmljZSBwZXJzaXN0YW5jZVNlcnZpY2UgPSBwYWNrYWdlLkdldFNlcnZpY2U8SVBlcnNpc3RlbmNlU2VydmljZT4odHJ1ZSk7DQoJCQkJCS8vIE5vdGlmeSBob3N0IHRoYXQgd2UncmUgZGlzYWJsaW5nLg0KCQkJCQlpZiAoRGlzYWJsaW5nUGFja2FnZSAhPSBudWxsKQ0KCQkJCQl7DQoJCQkJCQlEaXNhYmxpbmdQYWNrYWdlKHRoaXMsIG5ldyBDYW5jZWxQYWNrYWdlRXZlbnRBcmdzKHBhY2thZ2UsIGZhbHNlKSk7DQoJCQkJCX0NCgkJCQkJLy8gRG9uJ3QgbGV0IHRoZSBwYWNrYWdlIGJlIGVuYWJsZWQgaWYgYW4gZXhjZXB0aW9uIGhhcHBlbmVkLg0KCQkJCQliYXNlLlJlbW92ZShjb21wb25lbnQpOw0KCQkJCQlpZiAoRGlzYWJsZWRQYWNrYWdlICE9IG51bGwpDQoJCQkJCXsNCgkJCQkJCURpc2FibGVkUGFja2FnZSh0aGlzLCBuZXcgUGFja2FnZUV2ZW50QXJncyhwYWNrYWdlKSk7DQoJCQkJCX0NCgkJCQkJcGVyc2lzdGFuY2VTZXJ2aWNlLkNsZWFyU3RhdGUocGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpOw0KCQkJCQl0aHJvdzsNCgkJCQl9DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJLy8gSnVzdCBhZGQgdGhlIGNvbXBvbmVudCBzbyBpdCBnZXRzIHNpdGVkLiANCgkJCQkvLyBTZXJ2aWNlcyB0aGF0IGltcGxlbWVudCBJQ29tcG9uZW50IHdpbGwgYXJyaXZlIGhlcmUuDQoJCQkJYmFzZS5BZGQoY29tcG9uZW50LCBuYW1lKTsNCgkJCX0NCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFJlbW92ZXMgYSBjb21wb25lbnQgZnJvbSB0aGUgbWFuYWdlci4gSWYgdGhlIGNvbXBvbmVudCBpcyBhIA0KCQkvLy8gcGFja2FnZSwgaXQgaXMgZGlzYWJsZWQgZm9yIGV4ZWN1dGlvbi4gQWxsIGNvbXBvbmVudHMgYXJlIGRpc3Bvc2VkIHVwb24gcmVtb3ZhbC4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJjb21wb25lbnQiPlRoZSBjb21wb25lbnQgdG8gcmVtb3ZlLjwvcGFyYW0+DQoJCXB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbW92ZShJQ29tcG9uZW50IGNvbXBvbmVudCkNCgkJew0KCQkJaWYgKGNvbXBvbmVudCBpcyBHdWlkYW5jZVBhY2thZ2UpDQoJCQl7DQoJCQkJR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSAoR3VpZGFuY2VQYWNrYWdlKWNvbXBvbmVudDsNCg0KCQkJCWlmIChEaXNhYmxpbmdQYWNrYWdlICE9IG51bGwpDQoJCQkJew0KCQkJCQlDYW5jZWxQYWNrYWdlRXZlbnRBcmdzIGFyZ3MgPSBuZXcgQ2FuY2VsUGFja2FnZUV2ZW50QXJncygNCgkJCQkJCXBhY2thZ2UsIGZhbHNlKTsNCgkJCQkJRGlzYWJsaW5nUGFja2FnZSh0aGlzLCBhcmdzKTsNCgkJCQkJaWYgKGFyZ3MuQ2FuY2VsKQ0KCQkJCQl7DQoJCQkJCQlyZXR1cm47DQoJCQkJCX0NCgkJCQl9DQoNCgkJCQliYXNlLlJlbW92ZShwYWNrYWdlKTsNCg0KCQkJCWlmIChEaXNhYmxlZFBhY2thZ2UgIT0gbnVsbCkNCgkJCQl7DQoJCQkJCURpc2FibGVkUGFja2FnZSh0aGlzLCBuZXcgUGFja2FnZUV2ZW50QXJncyhwYWNrYWdlKSk7DQoJCQkJfQ0KDQoJCQkJcGFja2FnZS5EaXNwb3NlKCk7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJYmFzZS5SZW1vdmUoY29tcG9uZW50KTsNCgkJCQljb21wb25lbnQuRGlzcG9zZSgpOw0KCQkJfQ0KCQl9DQoNCgkJI2VuZHJlZ2lvbiBDb250YWluZXIgT3ZlcnJpZGVzIChhY3R1YWwgaW1wbGVtZW50YXRpb25zKQ0KDQoJCSNyZWdpb24gRXZlbnRzDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gT2NjdXJzIHdoZW4gYSBwYWNrYWdlIGlzIGFib3V0IHRvIGJlIGVuYWJsZWQuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBldmVudCBDYW5jZWxQYWNrYWdlRXZlbnRIYW5kbGVyIEVuYWJsaW5nUGFja2FnZTsNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gT2NjdXJzIGFmdGVyIGEgcGFja2FnZSBoYXMgYmVlbiBlbmFibGVkLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgZXZlbnQgUGFja2FnZUV2ZW50SGFuZGxlciBFbmFibGVkUGFja2FnZTsNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gT2NjdXJzIHdoZW4gYSBwYWNrYWdlIGlzIGFib3V0IHRvIGJlIGRpc2FibGVkLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgZXZlbnQgQ2FuY2VsUGFja2FnZUV2ZW50SGFuZGxlciBEaXNhYmxpbmdQYWNrYWdlOw0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBPY2N1cnMgYWZ0ZXIgYSBwYWNrYWdlIGhhcyBiZWVuIGRpc2FibGVkLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgZXZlbnQgUGFja2FnZUV2ZW50SGFuZGxlciBEaXNhYmxlZFBhY2thZ2U7DQoNCgkJI2VuZHJlZ2lvbiBFdmVudHMNCg0KCQkjcmVnaW9uIEdldHRlciBtZXRob2RzDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gR2V0cyBhbiBhbHJlYWR5IGxvYWRlZCBwYWNrYWdlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9Im5hbWUiPlRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRvIHJlY2VpdmUuPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPg0KCQkvLy8gQSBsb2FkZWQgcGFja2FnZSB3aXRoIHRoZSBnaXZlbiBuYW1lLCBvciA8c2VlIGxhbmd3b3JkPSJudWxsIi8+Lg0KCQkvLy8gPC9yZXR1cm5zPg0KCQlwdWJsaWMgR3VpZGFuY2VQYWNrYWdlIEdldFBhY2thZ2Uoc3RyaW5nIG5hbWUpDQoJCXsNCgkJCWlmIChuYW1lID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicGFja2FnZSIpOw0KCQkJfQ0KCQkJcmV0dXJuIENvbXBvbmVudHNbbmFtZV0gYXMgR3VpZGFuY2VQYWNrYWdlOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gR2V0cyBhbGwgZW5hYmxlZCBwYWNrYWdlcy4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxyZXR1cm5zPg0KCQkvLy8gQWxsIHRoZSBwYWNrYWdlcyB0aGF0IGhhdmUgYmVlbiBlbmFibGVkLg0KCQkvLy8gPC9yZXR1cm5zPg0KCQlwdWJsaWMgR3VpZGFuY2VQYWNrYWdlW10gR2V0RW5hYmxlZFBhY2thZ2VzKCkNCgkJew0KCQkJQXJyYXlMaXN0IHBhY2thZ2VzID0gbmV3IEFycmF5TGlzdChDb21wb25lbnRzLkNvdW50KTsNCgkJCWZvcmVhY2ggKElDb21wb25lbnQgY29tcG9uZW50IGluIENvbXBvbmVudHMpDQoJCQl7DQoJCQkJaWYgKGNvbXBvbmVudCBpcyBHdWlkYW5jZVBhY2thZ2UpDQoJCQkJew0KCQkJCQlwYWNrYWdlcy5BZGQoY29tcG9uZW50KTsNCgkJCQl9DQoJCQl9DQoNCgkJCXJldHVybiAoR3VpZGFuY2VQYWNrYWdlW10pcGFja2FnZXMuVG9BcnJheSh0eXBlb2YoR3VpZGFuY2VQYWNrYWdlKSk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIGFsbCBpbnN0YWxsZWQgcGFja2FnZXMuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cmV0dXJucz4NCgkJLy8vIFRoZSBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uIGZvciBhbGwgaW5zdGFsbGVkIHBhY2thZ2VzLg0KCQkvLy8gPC9yZXR1cm5zPg0KCQlwdWJsaWMgQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSBHZXRJbnN0YWxsZWRQYWNrYWdlcygpDQoJCXsNCgkJCUFycmF5TGlzdCBwYWNrYWdlczsNCg0KCQkJLy8gRGVzZXJpYWxpemUgdGhlIGdsb2JhbCBwYWNrYWdlcy4NCgkJCUNvbmZpZ3VyYXRpb24uTWFuaWZlc3QuUmVjaXBlRnJhbWV3b3JrU2VyaWFsaXplciBzZXJpYWxpemVyID0NCgkJCQluZXcgQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmtTZXJpYWxpemVyKCk7DQoJCQlDb25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yayBtYW5pZmVzdCA9IChDb25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yaylzZXJpYWxpemVyLkRlc2VyaWFsaXplKA0KCQkJCW5ldyBYbWxOb2RlUmVhZGVyKE1haW5NYW5pZmVzdC5Eb2N1bWVudEVsZW1lbnQpKTsNCgkJCXBhY2thZ2VzID0gbmV3IEFycmF5TGlzdChtYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VzLkxlbmd0aCk7DQoJCQlwYWNrYWdlcy5BZGRSYW5nZShtYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VzKTsNCg0KCQkJLy8gRGVzZXJpYWxpemUgdGhlIHBlci11c2VyIHBhY2thZ2VzLg0KCQkJLy9tYW5pZmVzdCA9IChDb25maWd1cmF0aW9uLk1hbmlmZXN0LlJlY2lwZUZyYW1ld29yaylzZXJpYWxpemVyLkRlc2VyaWFsaXplKA0KCQkJLy8gICAgbmV3IFhtbE5vZGVSZWFkZXIoVXNlck1hbmlmZXN0LkRvY3VtZW50RWxlbWVudCkpOw0KCQkJLy9wYWNrYWdlcy5BZGRSYW5nZShtYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VzKTsNCg0KCQkJcmV0dXJuIChDb25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVtdKQ0KCQkJCXBhY2thZ2VzLlRvQXJyYXkodHlwZW9mKENvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKSk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIGFsbCBpbnN0YWxsZWQgcGFja2FnZXMgZm9yIGEgY2VydGFpbiBob3N0Lg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9ImZvckhvc3QiPlRoZSBob3N0IHRvIGxvb2sgaW5zdGFsbGVkIHBhY2thZ2VzIGZvci48L3BhcmFtPg0KCQkvLy8gPHJldHVybnM+DQoJCS8vLyBUaGUgY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbiBmb3IgYWxsIGluc3RhbGxlZCBwYWNrYWdlcyBmb3IgYSBnaXZlbiBob3N0Lg0KCQkvLy8gPC9yZXR1cm5zPg0KCQlwdWJsaWMgQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VbXSBHZXRJbnN0YWxsZWRQYWNrYWdlcyhzdHJpbmcgZm9ySG9zdCkNCgkJew0KCQkJQXJyYXlMaXN0IHBhY2thZ2VzID0gbmV3IEFycmF5TGlzdCgpOw0KCQkJQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2VTZXJpYWxpemVyIHNlcmlhbGl6ZXIgPQ0KCQkJCW5ldyBDb25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVNlcmlhbGl6ZXIoKTsNCg0KCQkJLy8gRGVzZXJpYWxpemUgdGhlIGdsb2JhbCBwYWNrYWdlcy4NCgkJCVhtbE5vZGVMaXN0IG5vZGVzID0gWFBhdGhDYWNoZS5TZWxlY3ROb2RlcyhYUGF0aFBhY2thZ2VCeUhvc3QsDQoJCQkJUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QsDQoJCQkJbmV3IFhtbFByZWZpeFtdIHsgbmV3IFhtbFByZWZpeChDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uUHJlZml4LCBDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uTWFuaWZlc3ROYW1lc3BhY2UpIH0sDQoJCQkJbmV3IFhQYXRoVmFyaWFibGVbXSB7IG5ldyBYUGF0aFZhcmlhYmxlKCJob3N0IiwgZm9ySG9zdCkgfSk7DQoJCQlmb3JlYWNoIChYbWxOb2RlIG5vZGUgaW4gbm9kZXMpDQoJCQl7DQoJCQkJcGFja2FnZXMuQWRkKHNlcmlhbGl6ZXIuRGVzZXJpYWxpemUobmV3IFhtbE5vZGVSZWFkZXIobm9kZSkpKTsNCgkJCX0NCg0KCQkJLy8gRGVzZXJpYWxpemUgdGhlIHBlci11c2VyIHBhY2thZ2VzLg0KCQkJLy9ub2RlcyA9IFhQYXRoQ2FjaGUuU2VsZWN0Tm9kZXMoWFBhdGhQYWNrYWdlQnlIb3N0LA0KCQkJLy8gICAgUmVjaXBlTWFuYWdlci5Vc2VyTWFuaWZlc3QsDQoJCQkvLyAgICBuZXcgWG1sUHJlZml4W10geyBuZXcgWG1sUHJlZml4KENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5QcmVmaXgsIENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5NYW5pZmVzdE5hbWVzcGFjZSkgfSwNCgkJCS8vICAgIG5ldyBYUGF0aFZhcmlhYmxlW10geyBuZXcgWFBhdGhWYXJpYWJsZSgiaG9zdCIsIGZvckhvc3QpIH0pOw0KCQkJLy9mb3JlYWNoIChYbWxOb2RlIG5vZGUgaW4gbm9kZXMpDQoJCQkvL3sNCgkJCS8vICAgIHBhY2thZ2VzLkFkZChzZXJpYWxpemVyLkRlc2VyaWFsaXplKG5ldyBYbWxOb2RlUmVhZGVyKG5vZGUpKSk7DQoJCQkvL30NCg0KCQkJcmV0dXJuIChDb25maWd1cmF0aW9uLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZVtdKQ0KCQkJCXBhY2thZ2VzLlRvQXJyYXkodHlwZW9mKENvbmZpZ3VyYXRpb24uTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlKSk7DQoJCX0NCg0KCQkjZW5kcmVnaW9uIEdldHRlciBtZXRob2RzDQoNCgkJI3JlZ2lvbiBFbmFibGUvRGlzYWJsZQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEVuYWJsZXMgYSBwYWNrYWdlIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBpbnN0YWxsZWQgd2l0aCB0aGUgZnJhbWV3b3JrIA0KCQkvLy8gbWFuaWZlc3QuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0icGFja2FnZUd1aWQiPkd1aWQgb2YgdGhlIHBhY2thZ2UgdG8gZW5hYmxlLjwvcGFyYW0+DQoJCS8vLyA8cmVtYXJrcz4NCgkJLy8vIEVuYWJsaW5nIGEgcGFja2FnZSBieSBuYW1lIGltcGxpZXMgaXQgZXhpc3RzIGluIHRoZSBSZWNpcGUgRnJhbWV3b3JrIG1hbmlmZXN0IGZpbGUsIA0KCQkvLy8gYnkgbWVhbnMgb2YgYSBwcmV2aW91cyBpbnN0YWxsYXRpb24uDQoJCS8vLyA8L3JlbWFya3M+DQoJCS8vLyA8cmV0dXJucz4NCgkJLy8vIFNlZSA8c2VlIGNyZWY9IklSZWNpcGVNYW5hZ2VyU2VydmljZS5FbmFibGVQYWNrYWdlKHN0cmluZykiLz4uDQoJCS8vLyA8L3JldHVybnM+DQoJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2UgRW5hYmxlUGFja2FnZShzdHJpbmcgcGFja2FnZUd1aWQpDQoJCXsNCgkJCWlmIChwYWNrYWdlR3VpZCA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInBhY2thZ2VOYW1lIik7DQoJCQl9DQoJCQlYbWxSZWFkZXIgcmVhZGVyID0gR2V0Q29uZmlndXJhdGlvblJlYWRlcihwYWNrYWdlR3VpZCk7DQoJCQl0cnkNCgkJCXsNCgkJCQlyZXR1cm4gRW5hYmxlUGFja2FnZShyZWFkZXIpOw0KCQkJfQ0KCQkJZmluYWxseQ0KCQkJew0KCQkJCXJlYWRlci5DbG9zZSgpOw0KCQkJfQ0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRW5hYmxlcyBhIHBhY2thZ2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY29uZmlndXJhdGlvbiI+DQoJCS8vLyBDb25maWd1cmF0aW9uIHRvIHVzZSBmb3IgdGhlIG5ldyBwYWNrYWdlLg0KCQkvLy8gPC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPg0KCQkvLy8gUmV0dXJucyB0aGUgbG9hZGVkIGFuZCBlbmFibGVkIHBhY2thZ2UuDQoJCS8vLyA8L3JldHVybnM+DQoJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2UgRW5hYmxlUGFja2FnZShYbWxSZWFkZXIgY29uZmlndXJhdGlvbikNCgkJew0KCQkJaWYgKGNvbmZpZ3VyYXRpb24gPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJjb25maWd1cmF0aW9uIik7DQoJCQl9DQoJCQlHdWlkYW5jZVBhY2thZ2UgcGFja2FnZSA9IG5ldyBHdWlkYW5jZVBhY2thZ2UoY29uZmlndXJhdGlvbik7DQoJCQlDaGVja0hvc3QocGFja2FnZS5Db25maWd1cmF0aW9uKTsNCgkJCXRyeQ0KCQkJew0KCQkJCUFkZChwYWNrYWdlKTsNCgkJCX0NCgkJCWNhdGNoDQoJCQl7DQoJCQkJcGFja2FnZS5EaXNwb3NlKCk7DQoJCQkJdGhyb3c7DQoJCQl9DQoJCQlyZXR1cm4gcGFja2FnZTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEVuYWJsZXMgYSBwYWNrYWdlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9ImNvbmZpZ3VyYXRpb24iPg0KCQkvLy8gQ29uZmlndXJhdGlvbiB0byB1c2UgZm9yIHRoZSBuZXcgcGFja2FnZS4NCgkJLy8vIDwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz4NCgkJLy8vIFJldHVybnMgdGhlIGxvYWRlZCBhbmQgZW5hYmxlZCBwYWNrYWdlLg0KCQkvLy8gPC9yZXR1cm5zPg0KCQlwdWJsaWMgR3VpZGFuY2VQYWNrYWdlIEVuYWJsZVBhY2thZ2UoQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgY29uZmlndXJhdGlvbikNCgkJew0KCQkJaWYgKGNvbmZpZ3VyYXRpb24gPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJjb25maWd1cmF0aW9uIik7DQoJCQl9DQoJCQlHdWlkYW5jZVBhY2thZ2UgcGFja2FnZSA9IG5ldyBHdWlkYW5jZVBhY2thZ2UoY29uZmlndXJhdGlvbik7DQoJCQlDaGVja0hvc3QocGFja2FnZS5Db25maWd1cmF0aW9uKTsNCgkJCXRyeQ0KCQkJew0KCQkJCUFkZChwYWNrYWdlKTsNCgkJCX0NCgkJCWNhdGNoDQoJCQl7DQoJCQkJcGFja2FnZS5EaXNwb3NlKCk7DQoJCQkJdGhyb3c7DQoJCQl9DQoJCQlyZXR1cm4gcGFja2FnZTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEVuYWJsZXMgYSBwcmVsb2FkZWQgcGFja2FnZS4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJwYWNrYWdlIj4NCgkJLy8vIFRoZSBwYWNrYWdlIGluc3RhbmNlIHRvIGVuYWJsZSBvbiB0aGUgbWFuYWdlci4NCgkJLy8vIDwvcGFyYW0+DQoJCXB1YmxpYyB2b2lkIEVuYWJsZVBhY2thZ2UoR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UpDQoJCXsNCgkJCWlmIChwYWNrYWdlID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicGFja2FnZSIpOw0KCQkJfQ0KCQkJQ2hlY2tIb3N0KHBhY2thZ2UuQ29uZmlndXJhdGlvbik7DQoJCQlBZGQocGFja2FnZSk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBEaXNhYmxlcyBhIHBhY2thZ2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0icGFja2FnZU5hbWUiPk5hbWUgb2YgdGhlIHBhY2thZ2UgdG8gZGlzYWJsZS48L3BhcmFtPg0KCQkvLy8gPHJlbWFya3M+DQoJCS8vLyBEaXNhYmxpbmcgYSBwYWNrYWdlIGNhdXNlcyBpdCB0byBiZSBkaXNwb3NlZCBhbHNvLg0KCQkvLy8gPC9yZW1hcmtzPg0KCQlwdWJsaWMgdm9pZCBEaXNhYmxlUGFja2FnZShzdHJpbmcgcGFja2FnZU5hbWUpDQoJCXsNCgkJCWlmIChwYWNrYWdlTmFtZSA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInBhY2thZ2VOYW1lIik7DQoJCQl9DQoJCQlHdWlkYW5jZVBhY2thZ2UgcGFja2FnZSA9IEdldFBhY2thZ2UocGFja2FnZU5hbWUpOw0KCQkJaWYgKHBhY2thZ2UgIT0gbnVsbCkNCgkJCXsNCgkJCQlSZW1vdmUocGFja2FnZSk7DQoJCQl9DQoJCX0NCg0KCQlzdGF0aWMgcHJpdmF0ZSB2b2lkIENoZWNrSG9zdChDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlKQ0KCQl7DQoJCQlzdHJpbmcgaG9zdCA9IChzdHJpbmcpWFBhdGhDYWNoZS5FdmFsdWF0ZShYUGF0aFBhY2thZ2VIb3N0LA0KCQkJCVJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkNyZWF0ZU5hdmlnYXRvcigpLA0KCQkJCW5ldyBYbWxQcmVmaXhbXSB7IG5ldyBYbWxQcmVmaXgoQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLlByZWZpeCwgQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLk1hbmlmZXN0TmFtZXNwYWNlKSB9LA0KCQkJCW5ldyBYUGF0aFZhcmlhYmxlW10geyBuZXcgWFBhdGhWYXJpYWJsZSgiZ3VpZCIsIHBhY2thZ2UuR3VpZCkgfSk7DQoJCQkvLyBJZiBpdCdzIGEgcGFja2FnZSByZWdpc3RlcmVkIGluIHRoZSBtYW5pZmVzdCAoaS5lLiBub3QgcHJvZ3JhbW1hdGljYWxseSBjcmVhdGVkIA0KCQkJLy8gYW5kIGVuYWJsZWQpLCBjaGVjayBjb25zaXN0ZW5jeSB3aXRoIG1hbmlmZXN0Lg0KCQkJaWYgKGhvc3QgIT0gbnVsbCAmJiBob3N0Lkxlbmd0aCA+IDAgJiYgaG9zdCAhPSBwYWNrYWdlLkhvc3QpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWNpcGVNYW5hZ2VyX01hbmlmZXN0TWFuZ2xlZCwNCgkJCQkJcGFja2FnZS5DYXB0aW9uKSk7DQoJCQl9DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBEaXNhYmxlcyBhIHBhY2thZ2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0icGFja2FnZSI+DQoJCS8vLyBUaGUgcGFja2FnZSBpbnN0YW5jZSB0byBkaXNhYmxlLg0KCQkvLy8gPC9wYXJhbT4NCgkJLy8vIDxyZW1hcmtzPg0KCQkvLy8gRGlzYWJsaW5nIGEgcGFja2FnZSBjYXVzZXMgaXQgdG8gYmUgZGlzcG9zZWQgYWxzby4NCgkJLy8vIDwvcmVtYXJrcz4NCgkJcHVibGljIHZvaWQgRGlzYWJsZVBhY2thZ2UoR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UpDQoJCXsNCgkJCWlmIChwYWNrYWdlID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicGFja2FnZSIpOw0KCQkJfQ0KCQkJUmVtb3ZlKHBhY2thZ2UpOw0KCQl9DQoNCgkJI2VuZHJlZ2lvbiBFbmFibGUvRGlzYWJsZQ0KDQoJCSNyZWdpb24gTWFuaWZlc3QgTWFuYWdlbWVudA0KDQoJCUhhc2h0YWJsZSBjb25maWd1cmF0aW9uQ2FjaGUgPSBuZXcgSGFzaHRhYmxlKCk7DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gUmV0cmlldmVzIHRoZSBmdWxsIGluLW1lbW9yeSBtb2RlbCBvZiB0aGUgcGFja2FnZSBjb25maWd1cmF0aW9uLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InBhY2thZ2VOYW1lIj5UaGUgcGFja2FnZSB0byBnZXQgdGhlIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24gZm9yLjwvcGFyYW0+DQoJCS8vLyA8cmV0dXJucz4NCgkJLy8vIFRoZSBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uIGZvciB0aGUgZ2l2ZW4gcGFja2FnZS4NCgkJLy8vIDwvcmV0dXJucz4NCgkJLy8vIDxleGNlcHRpb24gY3JlZj0iQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiI+QSBwYWNrYWdlIHdpdGggdGhlIGdpdmVuIG5hbWUgaXMgbm90IGluc3RhbGxlZC48L2V4Y2VwdGlvbj4NCgkJcHVibGljIENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIEdldENvbmZpZ3VyYXRpb24oc3RyaW5nIHBhY2thZ2VOYW1lKQ0KCQl7DQoJCQlpZiAocGFja2FnZU5hbWUgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJwYWNrYWdlTmFtZSIpOw0KCQkJfQ0KCQkJR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSBHZXRQYWNrYWdlKHBhY2thZ2VOYW1lKTsNCgkJCWlmIChwYWNrYWdlICE9IG51bGwpDQoJCQl7DQoJCQkJcmV0dXJuIHBhY2thZ2UuQ29uZmlndXJhdGlvbjsNCgkJCX0NCgkJCWVsc2UNCgkJCXsNCgkJCQlpZiAoY29uZmlndXJhdGlvbkNhY2hlLkNvbnRhaW5zS2V5KHBhY2thZ2VOYW1lKSkNCgkJCQl7DQoJCQkJCXJldHVybiAoQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UpY29uZmlndXJhdGlvbkNhY2hlW3BhY2thZ2VOYW1lXTsNCgkJCQl9DQoNCgkJCQkvLyBPdGhlcndpc2UsIHdlIGhhdmUgdG8gcmVhZCB0aGUgZW50aXJlIGZpbGUuDQoJCQkJWG1sUmVhZGVyIHJlYWRlciA9IEdldENvbmZpZ3VyYXRpb25SZWFkZXIocGFja2FnZU5hbWUpOw0KCQkJCS8vIFdlIGRvbid0IHBlcmZvcm0gZXh0ZW5zaXZlIHZhbGlkYXRpb24gYXQgdGhpcyBwb2ludCwgYXMgdGhpcyBpcyBqdXN0IGZvciBkaXNwbGF5aW5nIA0KCQkJCS8vIHB1cnBvc2VzLiBKdXN0IFhTRCB2YWxpZGF0aW9uIHdpbGwgaGFwcGVuLg0KCQkJCUNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2Vjb25maWcgPSAoQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UpDQoJCQkJCW5ldyBDb25maWd1cmF0aW9uLlNlcmlhbGl6YXRpb24uR3VpZGFuY2VQYWNrYWdlU2VyaWFsaXplcigpLkRlc2VyaWFsaXplKHJlYWRlcik7DQoJCQkJLy8gQ2FjaGUgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIGxhdGVyIHJldHJpZXZhbHMuDQoJCQkJY29uZmlndXJhdGlvbkNhY2hlLkFkZChwYWNrYWdlTmFtZSwgcGFja2FnZWNvbmZpZyk7DQoJCQkJcmV0dXJuIHBhY2thZ2Vjb25maWc7DQoJCQl9DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBSZXRyaWV2ZXMgYW4gPHNlZSBjcmVmPSJYbWxSZWFkZXIiLz4gb3ZlciB0aGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBwYWNrYWdlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9InBhY2thZ2VHdWlkIj5UaGUgcGFja2FnZSB0byBnZXQgdGhlIGNvbmZpZ3VyYXRpb24gcmVhZGVyIGZvci48L3BhcmFtPg0KCQkvLy8gPHJldHVybnM+DQoJCS8vLyBUaGUgcmVhZGVyIG92ZXIgdGhlIGNvbmZpZ3VyYXRpb24uDQoJCS8vLyA8L3JldHVybnM+DQoJCS8vLyA8ZXhjZXB0aW9uIGNyZWY9IkFyZ3VtZW50RXhjZXB0aW9uIj5UaGUgZ2l2ZW4gcGFja2FnZSBpcyBub3QgaW5zdGFsbGVkLjwvZXhjZXB0aW9uPg0KCQkvLy8gPGV4Y2VwdGlvbiBjcmVmPSJDb25maWd1cmF0aW9uRXhjZXB0aW9uIj5UaGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbiBsb2NhdGlvbiANCgkJLy8vIGlzIG5vdCB2YWxpZCBvciB0aGUgcGFja2FnZSBjb25maWd1cmF0aW9uIHdhcyBtb2RpZmllZCBhZnRlciBpbnN0YWxsYWRpb24uPC9leGNlcHRpb24+DQoJCXB1YmxpYyBzdGF0aWMgWG1sUmVhZGVyIEdldENvbmZpZ3VyYXRpb25SZWFkZXIoc3RyaW5nIHBhY2thZ2VHdWlkKQ0KCQl7DQoJCQlpZiAocGFja2FnZUd1aWQgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJwYWNrYWdlR3VpZCIpOw0KCQkJfQ0KDQoJCQlYUGF0aE5vZGVJdGVyYXRvciBwYWNrYWdlY29uZmlnID0gWFBhdGhDYWNoZS5TZWxlY3QoWFBhdGhQYWNrYWdlLA0KCQkJCVJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkNyZWF0ZU5hdmlnYXRvcigpLA0KCQkJCW5ldyBYbWxQcmVmaXhbXSB7IG5ldyBYbWxQcmVmaXgoQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLlByZWZpeCwgDQogICAgICAgICAgICAgICAgICAgIENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5NYW5pZmVzdE5hbWVzcGFjZSkgfSwNCgkJCQluZXcgWFBhdGhWYXJpYWJsZVtdIHsgbmV3IFhQYXRoVmFyaWFibGUoImd1aWQiLCBwYWNrYWdlR3VpZCkgfSk7DQoJCQlpZiAoIXBhY2thZ2Vjb25maWcuTW92ZU5leHQoKSkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlY2lwZU1hbmFnZXJfUGFja2FnZU5vdEluc3RhbGxlZCwNCgkJCQkJcGFja2FnZUd1aWQpKTsNCgkJCX0NCg0KCQkJc3RyaW5nIGNvbmZpZ2ZpbGUgPSBwYWNrYWdlY29uZmlnLkN1cnJlbnQuR2V0QXR0cmlidXRlKA0KCQkJCUNvbmZpZ3VyYXRpb24uQXR0cmlidXRlTmFtZXMuQ29uZmlndXJhdGlvbkZpbGUsIFN0cmluZy5FbXB0eSk7DQoJCQlzdHJpbmcgc3RhbXAgPSBwYWNrYWdlY29uZmlnLkN1cnJlbnQuR2V0QXR0cmlidXRlKA0KCQkJCUNvbmZpZ3VyYXRpb24uQXR0cmlidXRlTmFtZXMuVGltZXN0YW1wLCBTdHJpbmcuRW1wdHkpOw0KCQkJaWYgKCFGaWxlLkV4aXN0cyhjb25maWdmaWxlKSkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgU3lzdGVtLkNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbkV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KCQkJCQlTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuUmVjaXBlTWFuYWdlcl9JbnZhbGlkUGFja2FnZUxvY2F0aW9uLA0KCQkJCQljb25maWdmaWxlLCBwYWNrYWdlR3VpZCkpOw0KCQkJfQ0KCQkJaWYgKG5ldyBGaWxlSW5mbyhjb25maWdmaWxlKS5MYXN0V3JpdGVUaW1lLlRpY2tzLlRvU3RyaW5nKCkgIT0gc3RhbXApDQoJCQl7DQoJCQkJdGhyb3cgbmV3IFN5c3RlbS5Db25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlY2lwZU1hbmFnZXJfUGFja2FnZU1vZGlmaWVkLA0KCQkJCQljb25maWdmaWxlLCBwYWNrYWdlR3VpZCkpOw0KCQkJfQ0KCQkJQ2hlY2tQYWNrYWdlU2VjdXJpdHkocGFja2FnZUd1aWQsIGNvbmZpZ2ZpbGUpOw0KDQoJCQlYbWxSZWFkZXIgY29uZmlncmVhZGVyID0gUmVzb2x2ZVhJbmNsdWRlKGNvbmZpZ2ZpbGUpOw0KDQoJCQkjcmVnaW9uIEluaXRpYWxpemUgdGhlIHJlYWRlciBhbmQgc2NoZW1hDQoNCgkJCVhtbFJlYWRlclNldHRpbmdzIHNldHRpbmdzID0gbmV3IFhtbFJlYWRlclNldHRpbmdzKCk7DQoJCQlzZXR0aW5ncy5WYWxpZGF0aW9uVHlwZSA9IFZhbGlkYXRpb25UeXBlLlNjaGVtYTsNCgkJCXNldHRpbmdzLkNvbmZvcm1hbmNlTGV2ZWwgPSBDb25mb3JtYW5jZUxldmVsLkF1dG87DQoNCgkJCS8vIFB1bGwgdGhlIFhTRCBmcm9tIHRoZSBjb25maWcgYXNzZW1ibHkgKGl0J3MgYW4gZW1iZWRkZWQgcmVzb3VyY2UpLg0KCQkJdXNpbmcgKFN0cmVhbSB4c2RzdHJlYW0gPSB0eXBlb2YoQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UpLkFzc2VtYmx5LkdldE1hbmlmZXN0UmVzb3VyY2VTdHJlYW0oDQoJCQkJQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UuU2NoZW1hUmVzb3VyY2VOYW1lKSkNCgkJCXsNCgkJCQlTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWcuQXNzZXJ0KHhzZHN0cmVhbSAhPSBudWxsLCAiWFNEIG5vdCBlbWJlZGRlZCBpbiBjb25maWcgYXNzZW1ibHkiKTsNCg0KCQkJCS8vIElmIHRoZSBzY2hlbWEgaXMgbm90IHZhbGlkICh3ZSBtdXN0IGNoZWNrIHRoYXQgYXQgZGVzaWduLXRpbWUpLCB0aGlzIHdpbGwgdGhyb3cuDQoJCQkJLy8gV2UgbmV2ZXIgY2FsbCBjbG9zZSBvbiB0aGUgc3RyZWFtIGFzIGl0J3MgYW4gdW5tYW5hZ2VkIHJlc291cmNlIHN0cmVhbS4gQ2xvc2luZyANCgkJCQkvLyBpdCB3aWxsIHJlbmRlciBpdCB1bnVzYWJsZSBmb3IgdGhlIHJlc3Qgb2YgdGhlIGxpZmUgb2YgdGhlIEFwcERvbWFpbi4NCgkJCQlYbWxTY2hlbWEgeHNkID0gWG1sU2NoZW1hLlJlYWQoeHNkc3RyZWFtLCBudWxsKTsNCgkJCQlzZXR0aW5ncy5TY2hlbWFzLkFkZCh4c2QpOw0KCQkJfQ0KDQoJCQlYbWxSZWFkZXIgdmFsaWRhdGluZ3JlYWRlciA9IFhtbFJlYWRlci5DcmVhdGUoDQoJCQkJY29uZmlncmVhZGVyLCBzZXR0aW5ncyk7DQoNCgkJCSNlbmRyZWdpb24gSW5pdGlhbGl6ZSB0aGUgcmVhZGVyIGFuZCBzY2hlbWENCg0KCQkJcmV0dXJuIHZhbGlkYXRpbmdyZWFkZXI7DQoJCX0NCg0KCQlwcml2YXRlIHN0YXRpYyBYbWxSZWFkZXIgUmVzb2x2ZVhJbmNsdWRlKHN0cmluZyBjb25maWdmaWxlKQ0KCQl7DQoJCQlNZW1vcnlTdHJlYW0gbWVtID0gbmV3IE1lbW9yeVN0cmVhbSgpOw0KCQkJWEluY2x1ZGluZ1JlYWRlciB4aXIgPSBuZXcgWEluY2x1ZGluZ1JlYWRlcihjb25maWdmaWxlKTsNCgkJCVhtbFdyaXRlciB3cml0ZXIgPSBYbWxXcml0ZXIuQ3JlYXRlKG1lbSk7DQoJCQl3cml0ZXIuV3JpdGVOb2RlKHhpciwgZmFsc2UpOw0KCQkJd3JpdGVyLkZsdXNoKCk7DQoNCgkJCW1lbS5Qb3NpdGlvbiA9IDA7DQoJCQlYbWxSZWFkZXJTZXR0aW5ncyBzZXR0aW5ncyA9IG5ldyBYbWxSZWFkZXJTZXR0aW5ncygpOw0KCQkJcmV0dXJuIG5ldyBGaXhlZEJhc2VVUklXcmFwcGluZ1JlYWRlcihYbWxSZWFkZXIuQ3JlYXRlKG1lbSksIGNvbmZpZ2ZpbGUpOw0KCQl9DQoNCgkJc3RhdGljIFRyYWNlU3dpdGNoIHRyYWNlU3dpdGNoOw0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEdldHMgdGhlIHN3aXRjaCBmb3IgdGhlIFJlY2lwZSBNYW5hZ2VyLCBzZXQgdG8gdGhlIA0KCQkvLy8gbGV2ZWwgc3BlY2lmaWVkIGluIHRoZSBtYW5pZmVzdCBmaWxlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgc3RhdGljIFRyYWNlU3dpdGNoIFRyYWNlU3dpdGNoDQoJCXsNCgkJCWdldA0KCQkJew0KCQkJCWlmICh0cmFjZVN3aXRjaCA9PSBudWxsKQ0KCQkJCXsNCgkJCQkJdHJhY2VTd2l0Y2ggPSBuZXcgVHJhY2VTd2l0Y2goVGhpc0Fzc2VtYmx5LlRpdGxlLCBUaGlzQXNzZW1ibHkuRGVzY3JpcHRpb24pOw0KCQkJCQl0cmFjZVN3aXRjaC5MZXZlbCA9IChUcmFjZUxldmVsKUVudW0uUGFyc2UodHlwZW9mKFRyYWNlTGV2ZWwpLA0KCQkJCQkJTWFpbk1hbmlmZXN0LkRvY3VtZW50RWxlbWVudC5BdHRyaWJ1dGVzW0NvbmZpZ3VyYXRpb24uQXR0cmlidXRlTmFtZXMuVHJhY2VMZXZlbF0uVmFsdWUpOw0KCQkJCX0NCgkJCQlyZXR1cm4gdHJhY2VTd2l0Y2g7DQoJCQl9DQoJCX0NCg0KCQlwcml2YXRlIHN0YXRpYyBYbWxEb2N1bWVudCBtYWluTWFuaWZlc3Q7DQoNCgkJaW50ZXJuYWwgc3RhdGljIFhtbERvY3VtZW50IE1haW5NYW5pZmVzdA0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlpZiAobWFpbk1hbmlmZXN0ID09IG51bGwpDQoJCQkJew0KCQkJCQlzdHJpbmcgbWFuaWZlc3RwYXRoID0gRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLkNvbW1vbkFwcGxpY2F0aW9uRGF0YSk7DQoJCQkJCW1hbmlmZXN0cGF0aCA9IFBhdGguQ29tYmluZShtYW5pZmVzdHBhdGgsIFRoaXNHbG9iYWxBc3NlbWJseS5Db21wYW55KTsNCgkJCQkJbWFuaWZlc3RwYXRoID0gUGF0aC5Db21iaW5lKG1hbmlmZXN0cGF0aCwgVGhpc0Fzc2VtYmx5LlRpdGxlKTsNCgkJCQkJbWFuaWZlc3RwYXRoID0gUGF0aC5Db21iaW5lKG1hbmlmZXN0cGF0aCwgTWFuaWZlc3RGaWxlKTsNCgkJCQkJaWYgKCFGaWxlLkV4aXN0cyhtYW5pZmVzdHBhdGgpKQ0KCQkJCQl7DQoJCQkJCQl0aHJvdyBuZXcgU3lzdGVtLkNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbkV4Y2VwdGlvbigNCgkJCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5HdWlkYW5jZVBhY2thZ2VfTWlzc2luZ01hbmlmZXN0KTsNCgkJCQkJfQ0KDQoJCQkJCW1haW5NYW5pZmVzdCA9IG5ldyBYbWxEb2N1bWVudCgpOw0KCQkJCQkvLyBMb2FkIGFuZCB2YWxpZGF0ZSBjb25maWd1cmF0aW9uLg0KCQkJCQlYbWxSZWFkZXIgcmVhZGVyID0gbnVsbDsNCgkJCQkJdHJ5DQoJCQkJCXsNCgkJCQkJCXJlYWRlciA9IEdldE1hbmlmZXN0UmVhZGVyKG1hbmlmZXN0cGF0aCk7DQoJCQkJCQltYWluTWFuaWZlc3QuTG9hZChyZWFkZXIpOw0KCQkJCQl9DQoJCQkJCWNhdGNoIChFeGNlcHRpb24gZSkNCgkJCQkJew0KCQkJCQkJdGhyb3cgbmV3IFN5c3RlbS5Db25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRpb24oDQoJCQkJCQkJc3RyaW5nLkZvcm1hdChDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5HdWlkYW5jZVBhY2thZ2VfQ29ycnVwdGVkTWFuaWZlc3QsDQoJCQkJCQkJZS5NZXNzYWdlKSwgZSk7DQoJCQkJCX0NCgkJCQkJZmluYWxseQ0KCQkJCQl7DQoJCQkJCQlpZiAocmVhZGVyICE9IG51bGwpDQoJCQkJCQl7DQoJCQkJCQkJcmVhZGVyLkNsb3NlKCk7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJLy8gVU5ET05FOiBpbiB0aGUgZnV0dXJlLCB0cmVhdCBzY2hlbWEgdXBncmFkZXMgaWYgdGhlIHNjaGVtYSBjaGFuZ2VzLg0KCQkJCX0NCgkJCQlyZXR1cm4gbWFpbk1hbmlmZXN0Ow0KCQkJfQ0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gQ2xlYXJzIHRoZSBsb2FkZWQgY29weSBvZiB0aGUgbWFuaWZlc3QuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCWludGVybmFsIHN0YXRpYyB2b2lkIFJlc2V0TWFpbk1hbmlmZXN0KCkNCgkJew0KCQkJbWFpbk1hbmlmZXN0ID0gbnVsbDsNCgkJfQ0KDQoJCXByaXZhdGUgc3RhdGljIHZvaWQgV3JpdGVFbXB0eU1hbmlmZXN0KHN0cmluZyB0b1BhdGgpDQoJCXsNCgkJCS8vIEVuc3VyZSBkaXJlY3RvcnkgZXhpc3RzLg0KCQkJRGlyZWN0b3J5LkNyZWF0ZURpcmVjdG9yeShQYXRoLkdldERpcmVjdG9yeU5hbWUodG9QYXRoKSk7DQoNCgkJCS8vIER1bXAgYW4gZW1wdHkgbWFuaWZlc3QgZmlsZSB0byB0aGUgdGFyZ2V0Lg0KCQkJdXNpbmcgKFN0cmVhbVdyaXRlciBtYW5pZmVzdHdyaXRlciA9IG5ldyBTdHJlYW1Xcml0ZXIodG9QYXRoLCBmYWxzZSkpDQoJCQl7DQoJCQkJdXNpbmcgKFN0cmVhbSBlbWJlZGRlZHJlc291cmNlID0gdHlwZW9mKFJlY2lwZU1hbmFnZXIpLkFzc2VtYmx5LkdldE1hbmlmZXN0UmVzb3VyY2VTdHJlYW0oRW1wdHlNYW5pZmVzdCkpDQoJCQkJew0KCQkJCQlTdHJlYW1SZWFkZXIgcmVzb3VyY2VyZWFkZXIgPSBuZXcgU3RyZWFtUmVhZGVyKGVtYmVkZGVkcmVzb3VyY2UpOw0KCQkJCQltYW5pZmVzdHdyaXRlci5Xcml0ZShyZXNvdXJjZXJlYWRlci5SZWFkVG9FbmQoKSk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSBzdGF0aWMgWG1sUmVhZGVyIEdldE1hbmlmZXN0UmVhZGVyKHN0cmluZyBtYW5pZmVzdEZpbGUpDQoJCXsNCgkJCVhtbFJlYWRlclNldHRpbmdzIHNldHRpbmdzID0gbmV3IFhtbFJlYWRlclNldHRpbmdzKCk7DQoJCQlzZXR0aW5ncy5WYWxpZGF0aW9uVHlwZSA9IFZhbGlkYXRpb25UeXBlLlNjaGVtYTsNCgkJCXNldHRpbmdzLkNvbmZvcm1hbmNlTGV2ZWwgPSBDb25mb3JtYW5jZUxldmVsLkF1dG87DQoNCgkJCS8vIFB1bGwgdGhlIFhTRCBmcm9tIHRoZSBjb25maWcgYXNzZW1ibHkgKGl0J3MgYW4gZW1iZWRkZWQgcmVzb3VyY2UpLg0KCQkJdXNpbmcgKFN0cmVhbSB4c2RzdHJlYW0gPSB0eXBlb2YoQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpLkFzc2VtYmx5LkdldE1hbmlmZXN0UmVzb3VyY2VTdHJlYW0oDQoJCQkJQ29uZmlndXJhdGlvbi5NYW5pZmVzdC5SZWNpcGVGcmFtZXdvcmsuU2NoZW1hUmVzb3VyY2VOYW1lKSkNCgkJCXsNCgkJCQlTeXN0ZW0uRGlhZ25vc3RpY3MuRGVidWcuQXNzZXJ0KHhzZHN0cmVhbSAhPSBudWxsLCAiWFNEIG5vdCBlbWJlZGRlZCBpbiBjb25maWcgYXNzZW1ibHkiKTsNCg0KCQkJCS8vIElmIHRoZSBzY2hlbWEgaXMgbm90IHZhbGlkICh3ZSBtdXN0IGNoZWNrIHRoYXQgYXQgZGVzaWduLXRpbWUpLCB0aGlzIHdpbGwgdGhyb3cuDQoJCQkJLy8gV2UgbmV2ZXIgY2FsbCBjbG9zZSBvbiB0aGUgc3RyZWFtIGFzIGl0J3MgYW4gdW5tYW5hZ2VkIHJlc291cmNlIHN0cmVhbS4gQ2xvc2luZyANCgkJCQkvLyBpdCB3aWxsIHJlbmRlciBpdCB1bnVzYWJsZSBmb3IgdGhlIHJlc3Qgb2YgdGhlIGxpZmUgb2YgdGhlIEFwcERvbWFpbi4NCgkJCQlYbWxTY2hlbWEgeHNkID0gWG1sU2NoZW1hLlJlYWQoeHNkc3RyZWFtLCBudWxsKTsNCgkJCQlzZXR0aW5ncy5TY2hlbWFzLkFkZCh4c2QpOw0KCQkJfQ0KDQoJCQlyZXR1cm4gWG1sUmVhZGVyLkNyZWF0ZShtYW5pZmVzdEZpbGUsIHNldHRpbmdzKTsNCgkJfQ0KDQoJCSNlbmRyZWdpb24gTWFuaWZlc3QgTWFuYWdlbWVudA0KDQoJCXByaXZhdGUgc3RhdGljIHZvaWQgQ2hlY2tQYWNrYWdlU2VjdXJpdHkoc3RyaW5nIHBhY2thZ2UsIHN0cmluZyBsb2NhdGlvbikNCgkJew0KCQkJLy8gRW5zdXJlcyB0aGF0IHRoZSBwYWNrYWdlIGxvY2F0aW9uIGlzIGluY2x1ZGVkIGluIHRoZSBNeUNvbXB1dGVyIHRydXN0ZWQgem9uZS4NCgkJCVpvbmVNZW1iZXJzaGlwQ29uZGl0aW9uIGNvbmRpdGlvbiA9IG5ldyBab25lTWVtYmVyc2hpcENvbmRpdGlvbihTZWN1cml0eVpvbmUuTXlDb21wdXRlcik7DQoJCQlFdmlkZW5jZSBldiA9IG5ldyBFdmlkZW5jZSgpOw0KCQkJWm9uZSB6b25lID0gWm9uZS5DcmVhdGVGcm9tVXJsKGxvY2F0aW9uKTsNCgkJCWV2LkFkZEhvc3Qoem9uZSk7DQoNCgkJCWlmICghY29uZGl0aW9uLkNoZWNrKGV2KSkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgU2VjdXJpdHlFeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlY2lwZU1hbmFnZXJfUGFja2FnZU5vdFRydXN0ZWQsDQoJCQkJCXBhY2thZ2UsIGxvY2F0aW9uKSk7DQoJCQl9DQoJCX0NCgl9DQp9</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>18</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/Framework/Services/AssetReferenceService.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbDsNCg0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21wb25lbnRNb2RlbDsNCnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljczsNCnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uOw0KDQojZW5kcmVnaW9uDQoNCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5TZXJ2aWNlcw0Kew0KCS8vLyA8c3VtbWFyeT4NCgkvLy8gSW1wbGVtZW50cyB0aGUgPHNlZSBjcmVmPSJJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlIi8+Lg0KCS8vLyA8L3N1bW1hcnk+DQoJLy8vIDxyZW1hcmtzPg0KCS8vLyBDb21lcyBidWlsdC1pbiB3aXRoIHRoZSA8c2VlIGNyZWY9IkluZGV4ZXJCb3VuZEFzc2V0Ii8+LA0KICAgIC8vLyA8c2VlIGNyZWY9IkluZGV4ZXJCb3VuZFRhcmdldCIvPiwgPHNlZSBjcmVmPSJJbmRleGVyQm91bmRBc3NldFRhcmdldCIvPiBhbmQNCiAgICAvLy8gPHNlZSBjcmVmPSJJbmRleGVyVW5ib3VuZEFzc2V0Ii8+IGluZGV4ZXJzLg0KCS8vLyA8L3JlbWFya3M+DQoJW1NlcnZpY2VEZXBlbmRlbmN5KHR5cGVvZihJUGVyc2lzdGVuY2VTZXJ2aWNlKSldDQoJW1NlcnZpY2VEZXBlbmRlbmN5KHR5cGVvZihJQ29uZmlndXJhdGlvblNlcnZpY2UpKV0NCglpbnRlcm5hbCBjbGFzcyBBc3NldFJlZmVyZW5jZVNlcnZpY2UgOiBDb250YWluZXJDb21wb25lbnQsIElBc3NldFJlZmVyZW5jZVNlcnZpY2UNCgl7DQoJCS8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIFNlZSA8c2VlIGNyZWY9IklBc3NldFJlZmVyZW5jZVNlcnZpY2UuQ2hhbmdlZCIvPi4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIGV2ZW50IEV2ZW50SGFuZGxlciBDaGFuZ2VkOw0KDQoJCXB1YmxpYyBBc3NldFJlZmVyZW5jZVNlcnZpY2UoKQ0KCQl7DQoJCQlBZGRJbmRleGVyKHR5cGVvZihJbmRleGVyQm91bmRBc3NldCksIG5ldyBJbmRleGVyQm91bmRBc3NldCgpKTsNCgkJCUFkZEluZGV4ZXIodHlwZW9mKEluZGV4ZXJCb3VuZFRhcmdldCksIG5ldyBJbmRleGVyQm91bmRUYXJnZXQoKSk7DQogICAgICAgICAgICBBZGRJbmRleGVyKHR5cGVvZihJbmRleGVyQm91bmRBc3NldFRhcmdldCksIG5ldyBJbmRleGVyQm91bmRBc3NldFRhcmdldCgpKTsNCiAgICAgICAgICAgIEFkZEluZGV4ZXIodHlwZW9mKEluZGV4ZXJVbmJvdW5kQXNzZXQpLCBuZXcgSW5kZXhlclVuYm91bmRBc3NldCgpKTsNCgkJfQ0KDQoJCSNyZWdpb24gRmllbGRzDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRmxhZ3Mgd2hldGhlciB0aGUgc2VydmljZSBoYXMgYmVlbiBkaXNwb3NlZC4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJYm9vbCBpc0Rpc3Bvc2VkID0gZmFsc2U7DQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEhvbGRzIHRoZSBzZXJ2aWNlIHRoYXQgcGVyc2lzdHMgdGhlIHJlZmVyZW5jZXMuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCUlQZXJzaXN0ZW5jZVNlcnZpY2UgcGVyc2lzdGVuY2U7DQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEZsYWdzIHdoZXRoZXIgd2UncmUgcGVyZm9ybWluZyBhIGJhdGNoIGxvYWQgb2YgcmVjaXBlcywgdGhlcmVmb3JlIA0KCQkvLy8gd2Ugc2hvdWxkIG5vdCBzYXZlIHRoZW0gYXQgZWFjaCBpdGVyYXRpb24uDQoJCS8vLyA8L3N1bW1hcnk+DQoJCWJvb2wgaXNMb2FkaW5nID0gZmFsc2U7DQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEhvbGRzIGluZGV4ZXJzIG9mIHJlZmVyZW5jZXMuDQoJCS8vLyA8L3N1bW1hcnk+DQogICAgICAgIElEaWN0aW9uYXJ5IGluZGV4ZXJzID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5IeWJyaWREaWN0aW9uYXJ5KCk7DQoNCgkJI2VuZHJlZ2lvbiBGaWVsZHMNCg0KICAgICAgICAjcmVnaW9uIE5vbi1wdWJsaWMgTWVtYmVycw0KDQoJCXByaXZhdGUgdm9pZCBPbkNoYW5nZWQoKQ0KCQl7DQoJCQlpZiAoQ2hhbmdlZCAhPSBudWxsKQ0KCQkJew0KCQkJCUNoYW5nZWQodGhpcywgRXZlbnRBcmdzLkVtcHR5KTsNCgkJCX0NCgkJfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCgkJLy8vIFNhdmVzIGFsbCB0aGUgY3VycmVudCByZWNpcGUgcmVmZXJlbmNlcy4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHJpdmF0ZSB2b2lkIFNhdmUoKQ0KCQl7DQoJCQlpZiAocGVyc2lzdGVuY2UgIT0gbnVsbCkNCgkJCXsNCgkJCQlJQXNzZXRSZWZlcmVuY2VbXSByZWZzID0gbmV3IElBc3NldFJlZmVyZW5jZVt0aGlzLkNvbXBvbmVudHMuQ291bnRdOw0KCQkJCXRoaXMuQ29tcG9uZW50cy5Db3B5VG8ocmVmcywgMCk7DQoJCQkJcGVyc2lzdGVuY2UuU2F2ZVJlZmVyZW5jZXMoUGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQsIHJlZnMpOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIENoZWNrU3RhdGUoKQ0KCQl7DQoJCQlpZiAoaXNEaXNwb3NlZCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgT2JqZWN0RGlzcG9zZWRFeGNlcHRpb24odGhpcy5HZXRUeXBlKCkuVG9TdHJpbmcoKSk7DQoJCQl9DQoJCQlpZiAodGhpcy5TaXRlID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLkdlbmVyYWxfQ29tcG9uZW50TXVzdEJlU2l0ZWQsIHRoaXMpKTsNCgkJCX0NCgkJCWlmIChwZXJzaXN0ZW5jZSA9PSBudWxsKQ0KCQkJew0KCQkJCXBlcnNpc3RlbmNlID0gR2V0U2VydmljZTxJUGVyc2lzdGVuY2VTZXJ2aWNlPih0cnVlKTsNCgkJCX0NCgkJfQ0KDQoJCSNlbmRyZWdpb24gTm9uLXB1YmxpYyBNZW1iZXJzDQoNCgkJI3JlZ2lvbiBDb250YWluZXIgT3ZlcnJpZGVzDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gRGlzcG9zZXMgdGhlIHNlcnZpY2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIERpc3Bvc2UoYm9vbCBkaXNwb3NpbmcpDQoJCXsNCgkJCWJhc2UuRGlzcG9zZShkaXNwb3NpbmcpOw0KCQkJaW5kZXhlcnMgPSBudWxsOw0KCQkJaXNEaXNwb3NlZCA9IHRydWU7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBPdmVycmlkZSB0byBwcm92aWRlIGEgbW9yZSBtZWFuaW5nZnVsIG1lc3NhZ2UuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFZhbGlkYXRlTmFtZShJQ29tcG9uZW50IGNvbXBvbmVudCwgc3RyaW5nIG5hbWUpDQoJCXsNCgkJCXRyeQ0KCQkJew0KCQkJCS8vIFdpbGwgY2F1c2UgYW4gQXJndW1lbnRFeGNlcHRpb24gaWYgdGhlIHJlZmVyZW5jZSBrZXkgYWxyZWFkeSBleGlzdHMuDQoJCQkJYmFzZS5WYWxpZGF0ZU5hbWUoY29tcG9uZW50LCBuYW1lKTsNCgkJCX0NCgkJCWNhdGNoIChBcmd1bWVudEV4Y2VwdGlvbikNCgkJCXsNCgkJCQlzdHJpbmcgYXBwbGllc1RvOw0KCQkJCXRyeQ0KCQkJCXsNCgkJCQkJYXBwbGllc1RvID0gKChJQXNzZXRSZWZlcmVuY2UpY29tcG9uZW50KS5BcHBsaWVzVG87DQoJCQkJfQ0KCQkJCWNhdGNoIChFeGNlcHRpb24gZSkNCgkJCQl7DQoJCQkJCVRyYWNlLlRyYWNlSW5mb3JtYXRpb24oZS5NZXNzYWdlKTsNCgkJCQkJYXBwbGllc1RvID0gUHJvcGVydGllcy5SZXNvdXJjZXMuUmVmZXJlbmNlX0FwcGxpZXNUb1RocmV3Ow0KCQkJCX0gDQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0aWVzLlJlc291cmNlcy5Bc3NldFJlZmVyZW5jZVNlcnZpY2VfRHVwbGljYXRlUmVmZXJlbmNlLA0KCQkJCQlhcHBsaWVzVG8sIA0KICAgICAgICAgICAgICAgICAgICAoKElBc3NldFJlZmVyZW5jZSljb21wb25lbnQpLktleSkpOw0KCQkJfQ0KCQl9DQoNCgkJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TaXRlZCgpDQoJCXsNCgkJCWJhc2UuT25TaXRlZCgpOw0KCQkJaWYgKCEoU2l0ZS5Db250YWluZXIgaXMgR3VpZGFuY2VQYWNrYWdlKSkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihQcm9wZXJ0aWVzLlJlc291cmNlcy5Bc3NldFJlZmVyZW5jZVNlcnZpY2VfTm90U2l0ZWRPblBhY2thZ2UpOw0KCQkJfQ0KCQkJLy8gTG9hZCBhbGwgcGVyc2lzdGVkIHJlZmVyZW5jZXMuDQoJCQlJUGVyc2lzdGVuY2VTZXJ2aWNlIHBlcnNpc3RlbmNlID0gR2V0U2VydmljZTxJUGVyc2lzdGVuY2VTZXJ2aWNlPih0cnVlKTsNCgkJCUFkZFJhbmdlKHBlcnNpc3RlbmNlLkxvYWRSZWZlcmVuY2VzKFBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKSwgZmFsc2UsIGZhbHNlKTsNCgkJfQ0KDQoJCSNlbmRyZWdpb24gQ29udGFpbmVyIE92ZXJyaWRlcw0KDQoJCSNyZWdpb24gQWRkL1JlbW92ZSByZWZlcmVuY2VzDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gQWRkcyBhIHJlZmVyZW5jZSB0byB0aGUgc2VydmljZS4gDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY29tcG9uZW50Ij5UaGUgcmVmZXJlbmNlIHRvIGFkZC48L3BhcmFtPg0KCQkvLy8gPHBhcmFtIG5hbWU9Im5hbWUiPlRoZSBuYW1lIGlzIGlnbm9yZWQsIGFzIHRoZSA8c2VlIGNyZWY9IklBc3NldFJlZmVyZW5jZS5LZXkiLz4gaXMgdXNlZCBpbnN0ZWFkLjwvcGFyYW0+DQoJCXB1YmxpYyBvdmVycmlkZSB2b2lkIEFkZChJQ29tcG9uZW50IGNvbXBvbmVudCwgc3RyaW5nIG5hbWUpDQoJCXsNCgkJCWlmIChjb21wb25lbnQgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJjb21wb25lbnQiKTsNCgkJCX0NCgkJCWlmICghKGNvbXBvbmVudCBpcyBJQXNzZXRSZWZlcmVuY2UpKQ0KCQkJew0KCQkJCXRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKCJjb21wb25lbnQiKTsNCgkJCX0NCg0KCQkJSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSA9IChJQXNzZXRSZWZlcmVuY2UpY29tcG9uZW50OwkJCQ0KCQkJYmFzZS5BZGQoY29tcG9uZW50LCByZWZlcmVuY2UuS2V5KTsNCgkJCS8vIEluZGV4ZXMgYW5kIHNhdmVzIHRoZSByZWZlcmVuY2UuDQoJCQlBZGRSZWZlcmVuY2UoKElBc3NldFJlZmVyZW5jZSljb21wb25lbnQpOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gU2VlIDxzZWUgY3JlZj0iSUFzc2V0UmVmZXJlbmNlU2VydmljZS5BZGQoSUFzc2V0UmVmZXJlbmNlKSIvPi4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIHZvaWQgQWRkKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UpDQoJCXsNCgkJCUFkZChyZWZlcmVuY2UsIG51bGwpOw0KCQl9DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gU2VlIDxzZWUgY3JlZj0iSUFzc2V0UmVmZXJlbmNlU2VydmljZS5BZGQoSUFzc2V0UmVmZXJlbmNlLCBib29sKSIvPi4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgcHVibGljIHZvaWQgQWRkKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UsIGJvb2wgdGhyb3dJZkR1cGxpY2F0ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgQWRkKHJlZmVyZW5jZSwgbnVsbCwgdGhyb3dJZkR1cGxpY2F0ZSk7DQogICAgICAgIH0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBTZWUgPHNlZSBjcmVmPSJJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlLkFkZChJQXNzZXRSZWZlcmVuY2UsIElEaWN0aW9uYXJ5KSIvPi4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIHZvaWQgQWRkKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UsIElEaWN0aW9uYXJ5IGluaXRpYWxTdGF0ZSkNCgkJew0KCQkJaWYgKHJlZmVyZW5jZSBpcyBSZWNpcGVSZWZlcmVuY2UpDQoJCQl7DQoJCQkJSUNvbmZpZ3VyYXRpb25TZXJ2aWNlIGNvbmZpZ3VyYXRpb24gPSBHZXRTZXJ2aWNlPElDb25maWd1cmF0aW9uU2VydmljZT4odHJ1ZSk7DQoJCQkJLy8gVGhlIGNvbmZpZ3VyYXRpb24gc2VydmljZSB3aWxsIHRocm93IGlmIHRoZSByZWNpcGUgZG9lc24ndCBleGlzdC4NCgkJCQlDb25maWd1cmF0aW9uLlJlY2lwZSByZWNpcGVSZWZlcmVuY2VkID0gY29uZmlndXJhdGlvbi5DdXJyZW50UGFja2FnZVtyZWZlcmVuY2UuQXNzZXROYW1lXTsNCgkJCX0NCgkJCUFkZChyZWZlcmVuY2UsIGluaXRpYWxTdGF0ZSwgZmFsc2UpOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gSXQgaXMgYWN0dWFsbHkgdGhlIGltcGxlbWVudGF0aW9uIG9mIGJhc2UuVmFsaWRhdGVOYW1lDQoJCS8vLyBidXQgaW4gdGhpcyBtb21lbnQgaXQgaGFzIGEgZmFpbHVyZSBpbiB0aGUgY29kZQ0KCQkvLy8gSXQgaXMgYXNzdW1pbmcgdGhhdCB0aGlzLnNpdGVzIGlzIG5vdCBudWxsLCBhbmQgaW4gdGhlIGZpcnN0IGNhbGwNCgkJLy8vIGJlZm9yZSBhbnkgQWRkIGlzIGNhbGxlZCB0aGUgdGhpcy5zaXRlcyBpcyBudWxsLg0KCQkvLy8gVGhlbiBjcmVhdGluZyBvdXIgb3duIGltcGxlbWVudGF0aW9uIHRvIGNoZWNrIGZvciBkdXBsaWNhdGVzDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iY29tcG9uZW50Ij48L3BhcmFtPg0KCQkvLy8gPHBhcmFtIG5hbWU9Im5hbWUiPjwvcGFyYW0+DQoJCXZvaWQgQmFzZVZhbGlkYXRlTmFtZShJQ29tcG9uZW50IGNvbXBvbmVudCwgc3RyaW5nIG5hbWUpDQoJCXsNCgkJCWlmIChjb21wb25lbnQgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJjb21wb25lbnQiKTsNCgkJCX0NCgkJCWlmIChuYW1lICE9IG51bGwpDQoJCQl7DQoJCQkJZm9yIChpbnQgbnVtID0gMDsgbnVtIDwgQ29tcG9uZW50cy5Db3VudDsgbnVtKyspDQoJCQkJew0KCQkJCQlJU2l0ZSBzaXRlID0gKElTaXRlKUNvbXBvbmVudHNbbnVtXS5TaXRlOw0KCQkJCQlpZiAoKChzaXRlICE9IG51bGwpICYmIChzaXRlLk5hbWUgIT0gbnVsbCkpICYmIA0KCQkJCQkJKHN0cmluZy5FcXVhbHMoc2l0ZS5OYW1lLCBuYW1lLCBTdHJpbmdDb21wYXJpc29uLk9yZGluYWxJZ25vcmVDYXNlKSAmJiANCgkJCQkJCShzaXRlLkNvbXBvbmVudCAhPSBjb21wb25lbnQpKSkNCgkJCQkJew0KCQkJCQkJc3RyaW5nIGFwcGxpZXNUbzsNCgkJCQkJCXRyeQ0KCQkJCQkJew0KCQkJCQkJCWFwcGxpZXNUbyA9ICgoSUFzc2V0UmVmZXJlbmNlKWNvbXBvbmVudCkuQXBwbGllc1RvOw0KCQkJCQkJfQ0KCQkJCQkJY2F0Y2ggKEV4Y2VwdGlvbiBlKQ0KCQkJCQkJew0KCQkJCQkJCVRyYWNlLlRyYWNlSW5mb3JtYXRpb24oZS5NZXNzYWdlKTsNCgkJCQkJCQlhcHBsaWVzVG8gPSBQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VfQXBwbGllc1RvVGhyZXc7DQoJCQkJCQl9IA0KCQkJCQkJdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCQkJU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuQXNzZXRSZWZlcmVuY2VTZXJ2aWNlX0R1cGxpY2F0ZVJlZmVyZW5jZSwNCgkJCQkJCQlhcHBsaWVzVG8sDQoJCQkJCQkJKChJQXNzZXRSZWZlcmVuY2UpY29tcG9uZW50KS5LZXkpKTsNCg0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gU2VlIDxzZWUgY3JlZj0iSUFzc2V0UmVmZXJlbmNlU2VydmljZS5BZGQoSUFzc2V0UmVmZXJlbmNlLCBJRGljdGlvbmFyeSkiLz4uDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyB2b2lkIEFkZChJQXNzZXRSZWZlcmVuY2UgcmVmZXJlbmNlLCBJRGljdGlvbmFyeSBpbml0aWFsU3RhdGUsIGJvb2wgdGhyb3dJZkR1cGxpY2F0ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQoJCQkJQmFzZVZhbGlkYXRlTmFtZShyZWZlcmVuY2UsIHJlZmVyZW5jZS5LZXkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKEFyZ3VtZW50RXhjZXB0aW9uKSAvLyBFeGNlcHRpb24gdGhyb3duIGJ5IHRoZSBWYWxpZGF0ZU5hbWUgbWV0aG9kIHdoZW4gZHVwbGljYXRlIGNvbXBvbmVudHMgYXJlIGFkZGVkLg0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmICh0aHJvd0lmRHVwbGljYXRlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3c7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCgkJCXRyeQ0KCQkJew0KCQkJCUFkZCgoSUNvbXBvbmVudClyZWZlcmVuY2UpOw0KCQkJfQ0KCQkJY2F0Y2ggKEFyZ3VtZW50RXhjZXB0aW9uKSAvLyBFeGNlcHRpb24gdGhyb3duIGJ5IHRoZSBPblNpdGVkIG9mIHRoZSByZWZlcmVuY2UNCgkJCXsNCgkJCQlSZW1vdmUocmVmZXJlbmNlKTsNCgkJCX0NCg0KICAgICAgICAgICAgaWYgKGluaXRpYWxTdGF0ZSAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlLlNhdmVTdGF0ZShQYWNrYWdlLkNvbmZpZ3VyYXRpb24uR3VpZCwgcmVmZXJlbmNlLCBpbml0aWFsU3RhdGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCgkJcHJpdmF0ZSB2b2lkIEFkZFJlZmVyZW5jZShJQXNzZXRSZWZlcmVuY2UgcmVmZXJlbmNlKQ0KCQl7DQoJCQlpZiAocmVmZXJlbmNlID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicmVmZXJlbmNlIik7DQoJCQl9DQoJCQlpZiAoKCEocmVmZXJlbmNlIGlzIElCb3VuZEFzc2V0UmVmZXJlbmNlKSAmJiAhKHJlZmVyZW5jZSBpcyBJVW5ib3VuZEFzc2V0UmVmZXJlbmNlKSkgfHwgDQoJCQkJKHJlZmVyZW5jZSBpcyBJQm91bmRBc3NldFJlZmVyZW5jZSAmJiByZWZlcmVuY2UgaXMgSVVuYm91bmRBc3NldFJlZmVyZW5jZSkpDQoJCQl7DQoJCQkJLy8gTXVzdCBpbXBsZW1lbnQgb25lIG9yIHRoZSBvdGhlci4NCgkJCQl0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihQcm9wZXJ0aWVzLlJlc291cmNlcy5Bc3NldFJlZmVyZW5jZVNlcnZpY2VfTXVzdEJlQm91bmRPclVuYm91bmQpOw0KCQkJfQ0KCQkJQ2hlY2tTdGF0ZSgpOw0KCQkJaWYgKHJlZmVyZW5jZSBpcyBSZWNpcGVSZWZlcmVuY2UpDQoJCQl7DQoJCQkJLy8gQ2hlY2sgY29tcGF0aWJpbGl0eSB3aXRoIHJlY2lwZSBkZWZpbml0aW9uLg0KCQkJCUlDb25maWd1cmF0aW9uU2VydmljZSBjb25maWd1cmF0aW9uID0gR2V0U2VydmljZTxJQ29uZmlndXJhdGlvblNlcnZpY2U+KHRydWUpOw0KCQkJCS8vIFRoZSBpbmRleGVyIHdpbGwgdGhyb3cgaWYgdGhlIHJlY2lwZSBkb2Vzbid0IGV4aXN0Lg0KCQkJCWJvb2wgaXNib3VuZCA9IGNvbmZpZ3VyYXRpb24uQ3VycmVudFBhY2thZ2VbKChSZWNpcGVSZWZlcmVuY2UpcmVmZXJlbmNlKS5Bc3NldE5hbWVdLkJvdW5kOw0KCQkJCWlmIChpc2JvdW5kICYmICEocmVmZXJlbmNlIGlzIElCb3VuZEFzc2V0UmVmZXJlbmNlKSkNCgkJCQl7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQoJCQkJCQlTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLkFzc2V0UmVmZXJlbmNlU2VydmljZV9Xcm9uZ0ZvckJvdW5kLA0KCQkJCQkJKChSZWNpcGVSZWZlcmVuY2UpcmVmZXJlbmNlKS5Bc3NldE5hbWUsIFBhY2thZ2UuQ29uZmlndXJhdGlvbi5DYXB0aW9uKSk7DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKCFpc2JvdW5kICYmICEocmVmZXJlbmNlIGlzIElVbmJvdW5kQXNzZXRSZWZlcmVuY2UpKQ0KCQkJCXsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCgkJCQkJCVN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuQXNzZXRSZWZlcmVuY2VTZXJ2aWNlX1dyb25nRm9yVW5ib3VuZCwNCgkJCQkJCSgoUmVjaXBlUmVmZXJlbmNlKXJlZmVyZW5jZSkuQXNzZXROYW1lLCBQYWNrYWdlLkNvbmZpZ3VyYXRpb24uQ2FwdGlvbikpOw0KCQkJCX0NCgkJCX0NCgkJCS8vIEluZGV4IHRoZSByZWZlcmVuY2UgZm9yIHJldHJpZXZhbC4NCgkJCWZvcmVhY2ggKElBc3NldFJlZmVyZW5jZUluZGV4ZXIgaW5kZXhlciBpbiBpbmRleGVycy5WYWx1ZXMpDQoJCQl7DQoJCQkJaW5kZXhlci5BZGQocmVmZXJlbmNlKTsNCgkJCX0NCgkJCWlmICghaXNMb2FkaW5nKQ0KCQkJew0KCQkJCVNhdmUoKTsNCgkJCQlPbkNoYW5nZWQoKTsNCgkJCX0NCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIFNlZSA8c2VlIGNyZWY9IklBc3NldFJlZmVyZW5jZVNlcnZpY2UuQWRkUmFuZ2UoSUFzc2V0UmVmZXJlbmNlW10pIi8+Lg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgdm9pZCBBZGRSYW5nZShJQXNzZXRSZWZlcmVuY2VbXSByZWZlcmVuY2VzKQ0KCQl7DQoJCQlBZGRSYW5nZShyZWZlcmVuY2VzLCBmYWxzZSk7DQoJCX0NCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBTZWUgPHNlZSBjcmVmPSJJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlLkFkZFJhbmdlKElBc3NldFJlZmVyZW5jZVtdLCBib29sKSIvPi4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgcHVibGljIHZvaWQgQWRkUmFuZ2UoSUFzc2V0UmVmZXJlbmNlW10gcmVmZXJlbmNlcywgYm9vbCB0aHJvd0lmRHVwbGljYXRlKQ0KICAgICAgICB7DQogICAgICAgICAgICBBZGRSYW5nZShyZWZlcmVuY2VzLCB0cnVlLCB0aHJvd0lmRHVwbGljYXRlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgdm9pZCBBZGRSYW5nZShJQXNzZXRSZWZlcmVuY2VbXSByZWZlcmVuY2VzLCBib29sIHNhdmUsIGJvb2wgdGhyb3dJZkR1cGxpY2F0ZSkNCgkJew0KCQkJaWYgKHJlZmVyZW5jZXMgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJyZWZlcmVuY2VzIik7DQoJCQl9DQoNCgkJCWlmIChyZWZlcmVuY2VzLkxlbmd0aCA9PSAwKSByZXR1cm47DQoNCgkJCWlzTG9hZGluZyA9IHRydWU7DQoJCQkvLyBLZWVwIHJlZmVyZW5jZXMgd2UgYWRkIHRvIHVuZG8gb24gZXJyb3IuDQoJCQlBcnJheUxpc3QgYWRkZWQgPSBuZXcgQXJyYXlMaXN0KHJlZmVyZW5jZXMuTGVuZ3RoKTsNCg0KCQkJdHJ5DQoJCQl7DQoJCQkJLy8gQWRkIGFsbCByZWZlcmVuY2VzLCBidXQgc2F2ZSBhdCB0aGUgZW5kLg0KCQkJCWZvcmVhY2ggKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UgaW4gcmVmZXJlbmNlcykNCgkJCQl7DQoJCQkJCWJvb2wgZmFpbHVyZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICAgICAgew0KCQkJCQkJQmFzZVZhbGlkYXRlTmFtZShyZWZlcmVuY2UsIHJlZmVyZW5jZS5LZXkpOw0KCQkJCQl9DQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChBcmd1bWVudEV4Y2VwdGlvbikgLy8gRXhjZXB0aW9uIHRocm93biBieSB0aGUgVmFsaWRhdGVOYW1lIG1ldGhvZCB3aGVuIGR1cGxpY2F0ZSBjb21wb25lbnRzIGFyZSBhZGRlZC4NCiAgICAgICAgICAgICAgICAgICAgew0KCQkJCQkJZmFpbHVyZSA9IHRydWU7DQoJCQkJCQlpZiAodGhyb3dJZkR1cGxpY2F0ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCgkJCQkJfQ0KCQkJCQl0cnkNCgkJCQkJew0KCQkJCQkJaWYgKCFmYWlsdXJlKQ0KCQkJCQkJew0KCQkJCQkJCUFkZCgoSUNvbXBvbmVudClyZWZlcmVuY2UpOw0KCQkJCQkJCWFkZGVkLkFkZChyZWZlcmVuY2UpOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWNhdGNoIChBcmd1bWVudEV4Y2VwdGlvbikgLy8gRXhjZXB0aW9uIHRocm93biBieSB0aGUgT25TaXRlZCBvZiB0aGUgcmVmZXJlbmNlDQoJCQkJCXsNCgkJCQkJCVJlbW92ZShyZWZlcmVuY2UpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJY2F0Y2gNCgkJCXsNCgkJCQkvLyBSZW1vdmUgdGhlIHJlZmVyZW5jZXMgd2UgYWRkZWQuDQoJCQkJZm9yZWFjaCAoSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSBpbiBhZGRlZCkNCgkJCQl7DQoJCQkJCVJlbW92ZShyZWZlcmVuY2UpOw0KCQkJCX0NCgkJCQl0aHJvdzsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlpc0xvYWRpbmcgPSBmYWxzZTsNCgkJCX0NCg0KCQkJaWYgKHNhdmUpDQoJCQl7DQoJCQkJU2F2ZSgpOw0KCQkJfQ0KCQkJT25DaGFuZ2VkKCk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBBZGRzIGEgcmVmZXJlbmNlIGZyb20gdGhlIHNlcnZpY2UuIA0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHBhcmFtIG5hbWU9ImNvbXBvbmVudCI+VGhlIHJlZmVyZW5jZSB0byByZW1vdmUuPC9wYXJhbT4NCgkJcHVibGljIG92ZXJyaWRlIHZvaWQgUmVtb3ZlKElDb21wb25lbnQgY29tcG9uZW50KQ0KCQl7DQoJCQlpZiAoY29tcG9uZW50ID09IG51bGwpDQoJCQl7DQoJCQkJdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigiY29tcG9uZW50Iik7DQoJCQl9DQoJCQlpZiAoIShjb21wb25lbnQgaXMgSUFzc2V0UmVmZXJlbmNlKSkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigiY29tcG9uZW50Iik7DQoJCQl9DQoNCgkJCUNoZWNrU3RhdGUoKTsNCgkJCWJhc2UuUmVtb3ZlKGNvbXBvbmVudCk7DQoJCQlJQXNzZXRSZWZlcmVuY2UgcmVmZXJlbmNlID0gKElBc3NldFJlZmVyZW5jZSljb21wb25lbnQ7DQoJCQkvLyBSZW1vdmUgc3RhdGUuDQoJCQlwZXJzaXN0ZW5jZS5SZW1vdmVTdGF0ZShQYWNrYWdlLkNvbmZpZ3VyYXRpb24uR3VpZCwgcmVmZXJlbmNlKTsNCgkJCS8vIFJlbW92ZSBmcm9tIGluZGV4ZXJzLg0KCQkJZm9yZWFjaCAoSUFzc2V0UmVmZXJlbmNlSW5kZXhlciBpbmRleGVyIGluIGluZGV4ZXJzLlZhbHVlcykNCgkJCXsNCgkJCQlpbmRleGVyLlJlbW92ZShyZWZlcmVuY2UpOw0KCQkJfQ0KDQoJCQlpZiAoIWlzTG9hZGluZykNCgkJCXsNCgkJCQlTYXZlKCk7DQoJCQkJT25DaGFuZ2VkKCk7DQoJCQl9DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBTZWUgPHNlZSBjcmVmPSJJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlLlJlbW92ZShJQXNzZXRSZWZlcmVuY2UpIi8+Lg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgSURpY3Rpb25hcnkgUmVtb3ZlKElBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UpDQoJCXsNCgkJCWlmIChyZWZlcmVuY2UgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJyZWZlcmVuY2UiKTsNCgkJCX0NCgkJCUNoZWNrU3RhdGUoKTsNCgkJCUlEaWN0aW9uYXJ5IHN0YXRlID0gcGVyc2lzdGVuY2UuUmVtb3ZlU3RhdGUoUGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQsIHJlZmVyZW5jZSk7DQoJCQkvLyBOb3JtYWwgcmVtb3ZhbCBwcm9jZWR1cmUuDQoJCQlSZW1vdmUoKElDb21wb25lbnQpcmVmZXJlbmNlKTsNCgkJCXJldHVybiBzdGF0ZTsNCgkJfQ0KDQoJCSNlbmRyZWdpb24gQWRkL1JlbW92ZSByZWZlcmVuY2VzDQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gU2VlIDxzZWUgY3JlZj0iSUFzc2V0UmVmZXJlbmNlU2VydmljZS5Jc0Fzc2V0RW5hYmxlZEZvciIvPi4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgcHVibGljIGJvb2wgSXNBc3NldEVuYWJsZWRGb3Ioc3RyaW5nIGFzc2V0LCBvYmplY3QgdGFyZ2V0KQ0KCQl7DQoJCQlJQXNzZXRSZWZlcmVuY2UgcmVmZXJlbmNlID0gR2V0UmVmZXJlbmNlRm9yKGFzc2V0LCB0YXJnZXQpOw0KCQkJaWYgKHJlZmVyZW5jZSBpcyBJQm91bmRBc3NldFJlZmVyZW5jZSkNCgkJCXsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJCWVsc2UgaWYgKHJlZmVyZW5jZSBpcyBJVW5ib3VuZEFzc2V0UmVmZXJlbmNlKQ0KCQkJew0KCQkJCXRyeQ0KCQkJCXsNCgkJCQkJcmV0dXJuICgoSVVuYm91bmRBc3NldFJlZmVyZW5jZSlyZWZlcmVuY2UpLklzRW5hYmxlZEZvcih0YXJnZXQpOw0KCQkJCX0NCgkJCQljYXRjaCAoRXhjZXB0aW9uIGUpDQoJCQkJew0KCQkJCQl0aHJvdyBuZXcgUmVjaXBlRXhlY3V0aW9uRXhjZXB0aW9uKGFzc2V0LA0KCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuQXNzZXRSZWZlcmVuY2VTZXJ2aWNlX0ZhaWxFbmFibGVkRm9yLGUpOw0KCQkJCX0NCgkJCX0NCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIFNlZSA8c2VlIGNyZWY9IklBc3NldFJlZmVyZW5jZVNlcnZpY2UuR2V0UmVmZXJlbmNlRm9yIi8+Lg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICBwdWJsaWMgSUFzc2V0UmVmZXJlbmNlIEdldFJlZmVyZW5jZUZvcihzdHJpbmcgYXNzZXQsIG9iamVjdCB0YXJnZXQpDQoJCXsNCgkJCUlBc3NldFJlZmVyZW5jZVtdIHJlZmVyZW5jZXMgPSBGaW5kKHR5cGVvZihJbmRleGVyQm91bmRBc3NldFRhcmdldCksIGFzc2V0LCB0YXJnZXQpOw0KCQkJaWYgKHJlZmVyZW5jZXMuTGVuZ3RoID09IDApDQoJCQl7DQoJCQkJLy8gSWYgdGhlcmUgYXJlIG5vIGJvdW5kIHJlZmVyZW5jZXMsIGxvb2sgZm9yIHVuYm91bmQgb25lcyAod2lsbCBiZSBvbmx5IG9uZSBmb3IgYSBnaXZlbiBhc3NldCkNCgkJCQlyZWZlcmVuY2VzID0gRmluZCh0eXBlb2YoSW5kZXhlclVuYm91bmRBc3NldCksIGFzc2V0KTsNCgkJCX0NCgkJCWlmIChyZWZlcmVuY2VzLkxlbmd0aCA9PSAwKQ0KCQkJew0KCQkJCXJldHVybiBudWxsOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXJldHVybiByZWZlcmVuY2VzWzBdOw0KCQkJfQ0KCQl9DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gU2VlIDxzZWUgY3JlZj0iSUFzc2V0UmVmZXJlbmNlU2VydmljZS5HZXRBbGwiLz4uDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyBJQXNzZXRSZWZlcmVuY2VbXSBHZXRBbGwoKQ0KCQl7DQoJCQlJQXNzZXRSZWZlcmVuY2VbXSByZWZzID0gbmV3IElBc3NldFJlZmVyZW5jZVt0aGlzLkNvbXBvbmVudHMuQ291bnRdOw0KCQkJdGhpcy5Db21wb25lbnRzLkNvcHlUbyhyZWZzLCAwKTsNCgkJCXJldHVybiByZWZzOw0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gU2VlIDxzZWUgY3JlZj0iSUFzc2V0UmVmZXJlbmNlU2VydmljZS5BZGRJbmRleGVyIi8+Lg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgdm9pZCBBZGRJbmRleGVyKFR5cGUgaW5kZXhlclR5cGUsIElBc3NldFJlZmVyZW5jZUluZGV4ZXIgaW5kZXhlckluc3RhbmNlKQ0KCQl7DQoJCQlpZiAoaW5kZXhlclR5cGUgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJpbmRleGVyVHlwZSIpOw0KCQkJfQ0KCQkJaWYgKGluZGV4ZXJJbnN0YW5jZSA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImluZGV4ZXJJbnN0YW5jZSIpOw0KCQkJfQ0KCQkJaW5kZXhlcnMuQWRkKGluZGV4ZXJUeXBlLCBpbmRleGVySW5zdGFuY2UpOw0KICAgICAgICAgICAgLy8gTm93LCBsZXQncyBpbmRleCB0aGUgZXhpc3RpbmcgcmVmZXJlbmNlcyBpbiB0aGUgbmV3IGluZGV4DQogICAgICAgICAgICBmb3JlYWNoIChJQXNzZXRSZWZlcmVuY2UgZXhpc3RpbmdSZWZlcmVuY2UgaW4gR2V0QWxsKCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaW5kZXhlckluc3RhbmNlLkFkZChleGlzdGluZ1JlZmVyZW5jZSk7DQogICAgICAgICAgICB9DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBTZWUgPHNlZSBjcmVmPSJJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlLkFkZEluZGV4ZXIiLz4uDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBJQXNzZXRSZWZlcmVuY2VbXSBGaW5kKFR5cGUgaW5kZXhlclR5cGUsIHBhcmFtcyBvYmplY3RbXSBjb25kaXRpb25zKQ0KCQl7DQoJCQlpZiAoaW5kZXhlclR5cGUgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJpbmRleGVyVHlwZSIpOw0KCQkJfQ0KCQkJSUFzc2V0UmVmZXJlbmNlSW5kZXhlciBpbmRleGVyID0gKElBc3NldFJlZmVyZW5jZUluZGV4ZXIpaW5kZXhlcnNbaW5kZXhlclR5cGVdOw0KCQkJaWYgKGluZGV4ZXIgPT0gbnVsbCkNCgkJCXsNCgkJCQl0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihTdHJpbmcuRm9ybWF0KA0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCiAgICAgICAgICAgICAgICAgICAgUHJvcGVydGllcy5SZXNvdXJjZXMuQXNzZXRSZWZlcmVuY2VTZXJ2aWNlX05vSW5kZXhlciwgaW5kZXhlclR5cGUpKTsNCgkJCX0NCgkJCXJldHVybiBpbmRleGVyLkZpbmQoY29uZGl0aW9ucyk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBTZWUgPHNlZSBjcmVmPSJJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlLkFkZEluZGV4ZXIiLz4uDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBJQXNzZXRSZWZlcmVuY2UgRmluZE9uZShUeXBlIGluZGV4ZXJUeXBlLCBwYXJhbXMgb2JqZWN0W10gY29uZGl0aW9ucykNCgkJew0KCQkJSUFzc2V0UmVmZXJlbmNlW10gcmVmZXJlbmNlcyA9IEZpbmQoaW5kZXhlclR5cGUsIGNvbmRpdGlvbnMpOw0KCQkJaWYgKHJlZmVyZW5jZXMuTGVuZ3RoID09IDApDQoJCQl7DQoJCQkJcmV0dXJuIG51bGw7DQoJCQl9DQoJCQllbHNlDQoJCQl7DQoJCQkJcmV0dXJuIHJlZmVyZW5jZXNbMF07DQoJCQl9DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBHZXRzIHRoZSBwYWNrYWdlIHRoZSBzZXJ2aWNlIGlzIHNpdGVkIG9uLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQkvLy8gPHJlbWFya3M+DQoJCS8vLyBSZXRyaWV2YWwgb2YgdGhpcyBwcm9wZXJ0eSBtdXN0IGJlIGRvbmUgYWZ0ZXIgdGhlIHNlcnZpY2UgaGFzIGJlZW4gDQoJCS8vLyBzaXRlZCBpbiBhIGNvbnRhaW5lci4NCgkJLy8vIDwvcmVtYXJrcz4NCgkJcHVibGljIEd1aWRhbmNlUGFja2FnZSBQYWNrYWdlDQoJCXsNCgkJCWdldA0KCQkJew0KCQkJCS8vIEVuc3VyZXMgc2l0ZS4NCgkJCQlDaGVja1N0YXRlKCk7DQoJCQkJLy8gRW5zdXJlZCBhdCBPblNpdGVkLg0KCQkJCXJldHVybiAoR3VpZGFuY2VQYWNrYWdlKXRoaXMuU2l0ZS5Db250YWluZXI7DQoJCQl9DQoJCX0NCgl9DQp9</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>3</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/RecipeFramework/PackageManagement/EnableDisablePackages.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5EcmF3aW5nOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOw0KdXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsOw0KdXNpbmcgU3lzdGVtLldpbmRvd3MuRm9ybXM7DQoNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuU2VydmljZXM7DQp1c2luZyBDb25maWcgPSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uOw0KdXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLkNvbW1vbjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tcG9uZW50TW9kZWw7DQp1c2luZyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EZXNpZ247DQoNCiNlbmRyZWdpb24gVXNpbmcgZGlyZWN0aXZlcw0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuUGFja2FnZU1hbmFnZW1lbnQNCnsNCglbU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbmVyQ2F0ZWdvcnkoIkZvcm0iKV0NCglpbnRlcm5hbCBjbGFzcyBFbmFibGVEaXNhYmxlUGFja2FnZXMgOiBNYW5hZ2VyRm9ybQ0KCXsNCgkJI3JlZ2lvbiBEZXNpZ25lciBzdHVmZg0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkNvbHVtbkhlYWRlciBjb2x1bW5IZWFkZXIzOw0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkNvbHVtbkhlYWRlciBjb2x1bW5IZWFkZXI0Ow0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkltYWdlTGlzdCBpbWFnZUxpc3QxOw0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkNvbHVtbkhlYWRlciBjb2x1bW5IZWFkZXIxOw0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkNvbHVtbkhlYWRlciBjb2x1bW5IZWFkZXIyOw0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkltYWdlTGlzdCBpbWFnZUxpc3QyOw0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkJ1dHRvbiBidG5FeHBsb3JlOw0KCQlwcml2YXRlIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkxhYmVsIGxhYmVsMTsNCgkJcHJpdmF0ZSBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5MaXN0VmlldyBsc3RQYWNrYWdlczsNCgkJcHJpdmF0ZSBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5Db2x1bW5IZWFkZXIgY29sdW1uSGVhZGVyNTsNCgkJcHJpdmF0ZSBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5Db2x1bW5IZWFkZXIgY29sdW1uSGVhZGVyNjsNCgkJcHJpdmF0ZSBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5CdXR0b24gYnRuT0s7DQoJCXByaXZhdGUgU3lzdGVtLldpbmRvd3MuRm9ybXMuQnV0dG9uIGJ0bkNhbmNlbDsNCgkJcHJpdmF0ZSBDb2x1bW5IZWFkZXIgY29sdW1uSGVhZGVyNzsNCgkJcHJpdmF0ZSBTeXN0ZW0uQ29tcG9uZW50TW9kZWwuSUNvbnRhaW5lciBjb21wb25lbnRzOw0KDQoJCXB1YmxpYyBFbmFibGVEaXNhYmxlUGFja2FnZXMoKQ0KCQl7DQoJCQlJbml0aWFsaXplQ29tcG9uZW50KCk7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBDbGVhbiB1cCBhbnkgcmVzb3VyY2VzIGJlaW5nIHVzZWQuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIERpc3Bvc2UoIGJvb2wgZGlzcG9zaW5nICkNCgkJew0KCQkJaWYoIGRpc3Bvc2luZyApDQoJCQl7DQoJCQkJaWYoY29tcG9uZW50cyAhPSBudWxsKQ0KCQkJCXsNCgkJCQkJY29tcG9uZW50cy5EaXNwb3NlKCk7DQoJCQkJfQ0KCQkJfQ0KCQkJYmFzZS5EaXNwb3NlKCBkaXNwb3NpbmcgKTsNCgkJfQ0KDQoJCSNyZWdpb24gV2luZG93cyBGb3JtIERlc2lnbmVyIGdlbmVyYXRlZCBjb2RlDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFJlcXVpcmVkIG1ldGhvZCBmb3IgRGVzaWduZXIgc3VwcG9ydCAtIGRvIG5vdCBtb2RpZnkNCgkJLy8vIHRoZSBjb250ZW50cyBvZiB0aGlzIG1ldGhvZCB3aXRoIHRoZSBjb2RlIGVkaXRvci4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHJpdmF0ZSB2b2lkIEluaXRpYWxpemVDb21wb25lbnQoKQ0KCQl7DQogICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBuZXcgU3lzdGVtLkNvbXBvbmVudE1vZGVsLkNvbnRhaW5lcigpOw0KICAgICAgICAgICAgU3lzdGVtLkNvbXBvbmVudE1vZGVsLkNvbXBvbmVudFJlc291cmNlTWFuYWdlciByZXNvdXJjZXMgPSBuZXcgU3lzdGVtLkNvbXBvbmVudE1vZGVsLkNvbXBvbmVudFJlc291cmNlTWFuYWdlcih0eXBlb2YoRW5hYmxlRGlzYWJsZVBhY2thZ2VzKSk7DQogICAgICAgICAgICB0aGlzLmNvbHVtbkhlYWRlcjMgPSBuZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuQ29sdW1uSGVhZGVyKCIiKTsNCiAgICAgICAgICAgIHRoaXMuY29sdW1uSGVhZGVyNCA9IG5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5Db2x1bW5IZWFkZXIoIiIpOw0KICAgICAgICAgICAgdGhpcy5pbWFnZUxpc3QxID0gbmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkltYWdlTGlzdCh0aGlzLmNvbXBvbmVudHMpOw0KICAgICAgICAgICAgdGhpcy5jb2x1bW5IZWFkZXIxID0gbmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkNvbHVtbkhlYWRlcigiIik7DQogICAgICAgICAgICB0aGlzLmNvbHVtbkhlYWRlcjIgPSBuZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuQ29sdW1uSGVhZGVyKCIiKTsNCiAgICAgICAgICAgIHRoaXMuaW1hZ2VMaXN0MiA9IG5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5JbWFnZUxpc3QodGhpcy5jb21wb25lbnRzKTsNCiAgICAgICAgICAgIHRoaXMuYnRuRXhwbG9yZSA9IG5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5CdXR0b24oKTsNCiAgICAgICAgICAgIHRoaXMubGFiZWwxID0gbmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkxhYmVsKCk7DQogICAgICAgICAgICB0aGlzLmxzdFBhY2thZ2VzID0gbmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkxpc3RWaWV3KCk7DQogICAgICAgICAgICB0aGlzLmNvbHVtbkhlYWRlcjUgPSBuZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuQ29sdW1uSGVhZGVyKHJlc291cmNlcy5HZXRTdHJpbmcoImxzdFBhY2thZ2VzLkNvbHVtbnMiKSk7DQogICAgICAgICAgICB0aGlzLmNvbHVtbkhlYWRlcjYgPSBuZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuQ29sdW1uSGVhZGVyKHJlc291cmNlcy5HZXRTdHJpbmcoImxzdFBhY2thZ2VzLkNvbHVtbnMxIikpOw0KICAgICAgICAgICAgdGhpcy5jb2x1bW5IZWFkZXI3ID0gbmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkNvbHVtbkhlYWRlcihyZXNvdXJjZXMuR2V0U3RyaW5nKCJsc3RQYWNrYWdlcy5Db2x1bW5zMiIpKTsNCiAgICAgICAgICAgIHRoaXMuYnRuT0sgPSBuZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuQnV0dG9uKCk7DQogICAgICAgICAgICB0aGlzLmJ0bkNhbmNlbCA9IG5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5CdXR0b24oKTsNCiAgICAgICAgICAgIHRoaXMuU3VzcGVuZExheW91dCgpOw0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICAvLyBjb2x1bW5IZWFkZXIzDQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIHJlc291cmNlcy5BcHBseVJlc291cmNlcyh0aGlzLmNvbHVtbkhlYWRlcjMsICJjb2x1bW5IZWFkZXIzIik7DQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIC8vIGNvbHVtbkhlYWRlcjQNCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgcmVzb3VyY2VzLkFwcGx5UmVzb3VyY2VzKHRoaXMuY29sdW1uSGVhZGVyNCwgImNvbHVtbkhlYWRlcjQiKTsNCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgLy8gaW1hZ2VMaXN0MQ0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICB0aGlzLmltYWdlTGlzdDEuSW1hZ2VTdHJlYW0gPSAoKFN5c3RlbS5XaW5kb3dzLkZvcm1zLkltYWdlTGlzdFN0cmVhbWVyKShyZXNvdXJjZXMuR2V0T2JqZWN0KCJpbWFnZUxpc3QxLkltYWdlU3RyZWFtIikpKTsNCiAgICAgICAgICAgIHRoaXMuaW1hZ2VMaXN0MS5JbWFnZXMuU2V0S2V5TmFtZSgwLCAiIik7DQogICAgICAgICAgICB0aGlzLmltYWdlTGlzdDEuSW1hZ2VzLlNldEtleU5hbWUoMSwgIiIpOw0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICAvLyBjb2x1bW5IZWFkZXIxDQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIHJlc291cmNlcy5BcHBseVJlc291cmNlcyh0aGlzLmNvbHVtbkhlYWRlcjEsICJjb2x1bW5IZWFkZXIxIik7DQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIC8vIGNvbHVtbkhlYWRlcjINCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgcmVzb3VyY2VzLkFwcGx5UmVzb3VyY2VzKHRoaXMuY29sdW1uSGVhZGVyMiwgImNvbHVtbkhlYWRlcjIiKTsNCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgLy8gaW1hZ2VMaXN0Mg0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICB0aGlzLmltYWdlTGlzdDIuSW1hZ2VTdHJlYW0gPSAoKFN5c3RlbS5XaW5kb3dzLkZvcm1zLkltYWdlTGlzdFN0cmVhbWVyKShyZXNvdXJjZXMuR2V0T2JqZWN0KCJpbWFnZUxpc3QyLkltYWdlU3RyZWFtIikpKTsNCiAgICAgICAgICAgIHRoaXMuaW1hZ2VMaXN0Mi5JbWFnZXMuU2V0S2V5TmFtZSgwLCAiIik7DQogICAgICAgICAgICB0aGlzLmltYWdlTGlzdDIuSW1hZ2VzLlNldEtleU5hbWUoMSwgIiIpOw0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICAvLyBidG5FeHBsb3JlDQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIHJlc291cmNlcy5BcHBseVJlc291cmNlcyh0aGlzLmJ0bkV4cGxvcmUsICJidG5FeHBsb3JlIik7DQogICAgICAgICAgICB0aGlzLmJ0bkV4cGxvcmUuTmFtZSA9ICJidG5FeHBsb3JlIjsNCiAgICAgICAgICAgIHRoaXMuYnRuRXhwbG9yZS5DbGljayArPSBuZXcgU3lzdGVtLkV2ZW50SGFuZGxlcih0aGlzLk9uRXhwbG9yZVBhY2thZ2UpOw0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICAvLyBsYWJlbDENCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgcmVzb3VyY2VzLkFwcGx5UmVzb3VyY2VzKHRoaXMubGFiZWwxLCAibGFiZWwxIik7DQogICAgICAgICAgICB0aGlzLmxhYmVsMS5OYW1lID0gImxhYmVsMSI7DQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIC8vIGxzdFBhY2thZ2VzDQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIHJlc291cmNlcy5BcHBseVJlc291cmNlcyh0aGlzLmxzdFBhY2thZ2VzLCAibHN0UGFja2FnZXMiKTsNCiAgICAgICAgICAgIHRoaXMubHN0UGFja2FnZXMuQ2hlY2tCb3hlcyA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmxzdFBhY2thZ2VzLkNvbHVtbnMuQWRkUmFuZ2UobmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkNvbHVtbkhlYWRlcltdIHsNCiAgICAgICAgICAgIHRoaXMuY29sdW1uSGVhZGVyNSwNCiAgICAgICAgICAgIHRoaXMuY29sdW1uSGVhZGVyNiwNCiAgICAgICAgICAgIHRoaXMuY29sdW1uSGVhZGVyN30pOw0KICAgICAgICAgICAgdGhpcy5sc3RQYWNrYWdlcy5NdWx0aVNlbGVjdCA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5sc3RQYWNrYWdlcy5OYW1lID0gImxzdFBhY2thZ2VzIjsNCiAgICAgICAgICAgIHRoaXMubHN0UGFja2FnZXMuU21hbGxJbWFnZUxpc3QgPSB0aGlzLmltYWdlTGlzdDE7DQogICAgICAgICAgICB0aGlzLmxzdFBhY2thZ2VzLlNvcnRpbmcgPSBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5Tb3J0T3JkZXIuQXNjZW5kaW5nOw0KICAgICAgICAgICAgdGhpcy5sc3RQYWNrYWdlcy5WaWV3ID0gU3lzdGVtLldpbmRvd3MuRm9ybXMuVmlldy5EZXRhaWxzOw0KICAgICAgICAgICAgdGhpcy5sc3RQYWNrYWdlcy5Nb3VzZURvdWJsZUNsaWNrICs9IG5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5Nb3VzZUV2ZW50SGFuZGxlcih0aGlzLmxzdFBhY2thZ2VzX01vdXNlRG91YmxlQ2xpY2spOw0KICAgICAgICAgICAgdGhpcy5sc3RQYWNrYWdlcy5JdGVtQ2hlY2tlZCArPSBuZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuSXRlbUNoZWNrZWRFdmVudEhhbmRsZXIodGhpcy5sc3RQYWNrYWdlc19JdGVtQ2hlY2tlZCk7DQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIC8vIGNvbHVtbkhlYWRlcjUNCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgcmVzb3VyY2VzLkFwcGx5UmVzb3VyY2VzKHRoaXMuY29sdW1uSGVhZGVyNSwgImNvbHVtbkhlYWRlcjUiKTsNCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgLy8gY29sdW1uSGVhZGVyNg0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICByZXNvdXJjZXMuQXBwbHlSZXNvdXJjZXModGhpcy5jb2x1bW5IZWFkZXI2LCAiY29sdW1uSGVhZGVyNiIpOw0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICAvLyBjb2x1bW5IZWFkZXI3DQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIHJlc291cmNlcy5BcHBseVJlc291cmNlcyh0aGlzLmNvbHVtbkhlYWRlcjcsICJjb2x1bW5IZWFkZXI3Iik7DQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIC8vIGJ0bk9LDQogICAgICAgICAgICAvLyANCiAgICAgICAgICAgIHJlc291cmNlcy5BcHBseVJlc291cmNlcyh0aGlzLmJ0bk9LLCAiYnRuT0siKTsNCiAgICAgICAgICAgIHRoaXMuYnRuT0suRGlhbG9nUmVzdWx0ID0gU3lzdGVtLldpbmRvd3MuRm9ybXMuRGlhbG9nUmVzdWx0Lk9LOw0KICAgICAgICAgICAgdGhpcy5idG5PSy5OYW1lID0gImJ0bk9LIjsNCiAgICAgICAgICAgIHRoaXMuYnRuT0suQ2xpY2sgKz0gbmV3IFN5c3RlbS5FdmVudEhhbmRsZXIodGhpcy5Pbk9rQ2xpY2spOw0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICAvLyBidG5DYW5jZWwNCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgcmVzb3VyY2VzLkFwcGx5UmVzb3VyY2VzKHRoaXMuYnRuQ2FuY2VsLCAiYnRuQ2FuY2VsIik7DQogICAgICAgICAgICB0aGlzLmJ0bkNhbmNlbC5EaWFsb2dSZXN1bHQgPSBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EaWFsb2dSZXN1bHQuQ2FuY2VsOw0KICAgICAgICAgICAgdGhpcy5idG5DYW5jZWwuTmFtZSA9ICJidG5DYW5jZWwiOw0KICAgICAgICAgICAgdGhpcy5idG5DYW5jZWwuQ2xpY2sgKz0gbmV3IFN5c3RlbS5FdmVudEhhbmRsZXIodGhpcy5idG5DYW5jZWxfQ2xpY2spOw0KICAgICAgICAgICAgLy8gDQogICAgICAgICAgICAvLyBFbmFibGVEaXNhYmxlUGFja2FnZXMNCiAgICAgICAgICAgIC8vIA0KICAgICAgICAgICAgdGhpcy5BY2NlcHRCdXR0b24gPSB0aGlzLmJ0bk9LOw0KICAgICAgICAgICAgdGhpcy5CYWNrQ29sb3IgPSBTeXN0ZW0uRHJhd2luZy5TeXN0ZW1Db2xvcnMuQ29udHJvbExpZ2h0Ow0KICAgICAgICAgICAgdGhpcy5DYW5jZWxCdXR0b24gPSB0aGlzLmJ0bkNhbmNlbDsNCiAgICAgICAgICAgIHJlc291cmNlcy5BcHBseVJlc291cmNlcyh0aGlzLCAiJHRoaXMiKTsNCiAgICAgICAgICAgIHRoaXMuQ29udHJvbHMuQWRkKHRoaXMuYnRuT0spOw0KICAgICAgICAgICAgdGhpcy5Db250cm9scy5BZGQodGhpcy5idG5FeHBsb3JlKTsNCiAgICAgICAgICAgIHRoaXMuQ29udHJvbHMuQWRkKHRoaXMubGFiZWwxKTsNCiAgICAgICAgICAgIHRoaXMuQ29udHJvbHMuQWRkKHRoaXMubHN0UGFja2FnZXMpOw0KICAgICAgICAgICAgdGhpcy5Db250cm9scy5BZGQodGhpcy5idG5DYW5jZWwpOw0KICAgICAgICAgICAgdGhpcy5NYXhpbWl6ZUJveCA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5NaW5pbWl6ZUJveCA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5OYW1lID0gIkVuYWJsZURpc2FibGVQYWNrYWdlcyI7DQogICAgICAgICAgICB0aGlzLlNob3dJY29uID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLlNob3dJblRhc2tiYXIgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuUmVzdW1lTGF5b3V0KGZhbHNlKTsNCg0KICAgICAgICB9DQoJCSNlbmRyZWdpb24NCg0KCQkjZW5kcmVnaW9uIERlc2lnbmVyIHN0dWZmDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gSW5pdGlhbGl6ZXMgdGhlIGZvcm0gd2l0aCBhIHBhcmVudCBwcm92aWRlci4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJwcm92aWRlciI+PC9wYXJhbT4NCgkJcHVibGljIEVuYWJsZURpc2FibGVQYWNrYWdlcyhJU2VydmljZVByb3ZpZGVyIHByb3ZpZGVyKSA6IGJhc2UocHJvdmlkZXIpDQoJCXsNCgkJCUluaXRpYWxpemVDb21wb25lbnQoKTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIEluaXRpYWxpemVzIHNlcnZpY2VzIGF0IHNpdGluZyB0aW1lLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgb3ZlcnJpZGUgSVNpdGUgU2l0ZQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gYmFzZS5TaXRlOyB9DQoJCQlzZXQNCgkJCXsNCgkJCQliYXNlLlNpdGUgPSB2YWx1ZTsNCgkJCQliYXNlLkluaXRTZXJ2aWNlcyh2YWx1ZSk7DQoJCQl9DQoJCX0NCg0KICAgICAgICBBcnJheUxpc3QgY2hhbmdlZCA9IG5ldyBBcnJheUxpc3QoKTsNCg0KCQlwcml2YXRlIHZvaWQgT25Pa0NsaWNrKG9iamVjdCBzZW5kZXIsIFN5c3RlbS5FdmVudEFyZ3MgZSkNCgkJew0KCQkJdHJ5DQoJCQl7DQoJCQkJaW50IGN1cnJlbnQgPSAwOw0KCQkJCS8vIEVuYWJsZS9EaXNhYmxlIGFzIGFwcHJvcHJpYXRlLg0KCQkJCWZvcmVhY2ggKExpc3RWaWV3SXRlbSBpdGVtIGluIGNoYW5nZWQpDQoJCQkJew0KCQkJCQlDb25maWcuTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIFBhY2thZ2UgPSAoQ29uZmlnLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSlpdGVtLlRhZzsNCgkJCQkJaWYgKGl0ZW0uQ2hlY2tlZCkNCgkJCQkJew0KCQkJCQkJLy8gT25seSBlbmFibGUgaWYgaXQgd2Fzbid0IHByZXZpb3VzbHkgZW5hYmxlZC4NCgkJCQkJCWlmIChiYXNlLlJlY2lwZU1hbmFnZXJTZXJ2aWNlLkdldFBhY2thZ2UoUGFja2FnZS5HdWlkKSA9PSBudWxsKQ0KCQkJCQkJew0KCQkJCQkJCWN1cnJlbnQrKzsNCgkJCQkJCQl0cnkNCgkJCQkJCQl7DQoJCQkJCQkJCWJhc2UuUmVjaXBlTWFuYWdlclNlcnZpY2UuRW5hYmxlUGFja2FnZShQYWNrYWdlLkd1aWQpOw0KCQkJCQkJCX0NCgkJCQkJCQljYXRjaCAoRXhjZXB0aW9uIGV4Y2VwdGlvbikNCgkJCQkJCQl7DQoJCQkJCQkJCS8vIEp1c3QgYXNrIGlmIGl0IGlzIG5lY2Vzc2FyeQ0KCQkJCQkJCQlib29sIGFza0ZvclRoZVJlc3QgPSAoKGNoYW5nZWQuQ291bnQgLSBjdXJyZW50KSA+IDApOw0KCQkJCQkJCQlzdHJpbmcgbWVzc2FnZSA9IHN0cmluZy5Gb3JtYXQoDQoJCQkJCQkJCQlDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCQkJCWFza0ZvclRoZVJlc3QgPyBDb25maWd1cmF0aW9uLlJlc291cmNlcy5QYWNrYWdlTWFuYWdlcl9DYW5ub3RMb2FkUGFja2FnZUFza2luZyA6DQoJCQkJCQkJCQlDb25maWd1cmF0aW9uLlJlc291cmNlcy5QYWNrYWdlTWFuYWdlcl9DYW5ub3RMb2FkUGFja2FnZSwNCgkJCQkJCQkJCVBhY2thZ2UuQ2FwdGlvbik7DQoJCQkJCQkJCURpYWxvZ1Jlc3VsdCByZXN1bHQgPSBFcnJvckhlbHBlci5TaG93KHRoaXMuU2l0ZSwgZXhjZXB0aW9uLCBtZXNzYWdlLCANCgkJCQkJCQkJCWFza0ZvclRoZVJlc3QgPyBNZXNzYWdlQm94QnV0dG9ucy5ZZXNObyA6IE1lc3NhZ2VCb3hCdXR0b25zLk9LKTsNCgkJCQkJCQkJaWYgKGFza0ZvclRoZVJlc3QgJiYgcmVzdWx0ID09IERpYWxvZ1Jlc3VsdC5ObykNCgkJCQkJCQkJew0KCQkJCQkJCQkJYnJlYWs7DQoJCQkJCQkJCX0NCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQliYXNlLlJlY2lwZU1hbmFnZXJTZXJ2aWNlLkRpc2FibGVQYWNrYWdlKFBhY2thZ2UuR3VpZCk7DQoJCQkJCX0NCgkJCQl9DQoJCQkJdGhpcy5DbG9zZSgpOw0KCQkJfQ0KCQkJY2F0Y2ggKEV4Y2VwdGlvbiBleCkNCgkJCXsNCgkJCQlFcnJvckhlbHBlci5TaG93KHRoaXMuU2l0ZSwgZXgpOw0KCQkJfQ0KCQkJZmluYWxseQ0KCQkJew0KCQkJCS8vIERvIG5vdCBjbG9zZSBpZiBzb21ldGhpbmcgd2VudCB3cm9uZy4NCgkJCX0NCgkJfQ0KDQogICAgICAgIHByaXZhdGUgdm9pZCBPbkV4cGxvcmVQYWNrYWdlKG9iamVjdCBzZW5kZXIsIFN5c3RlbS5FdmVudEFyZ3MgZSkNCiAgICAgICAgew0KCQkJdHJ5DQoJCQl7DQoJCQkJaWYgKGxzdFBhY2thZ2VzLlNlbGVjdGVkSXRlbXMuQ291bnQgPT0gMCkNCgkJCQl7DQoJCQkJCU1lc3NhZ2VCb3guU2hvdyh0aGlzLCBDb25maWd1cmF0aW9uLlJlc291cmNlcy5FbmFibGVEaXNhYmxlUGFja2FnZXNfTXVzdFNlbGVjdFBhY2thZ2UsDQoJCQkJCQl0aGlzLlRleHQsIE1lc3NhZ2VCb3hCdXR0b25zLk9LLCBNZXNzYWdlQm94SWNvbi5JbmZvcm1hdGlvbik7DQoJCQkJCXJldHVybjsNCgkJCQl9DQoNCgkJCQkvLyBNYWtlIHRoZSBmb3JtIHRlc3RhYmxlIGZyb20gTnVuaXQvTWF1aQ0KCQkJCWlmICh0aGlzLk1vZGFsKQ0KCQkJCXsNCgkJCQkJbmV3IFBhY2thZ2VWaWV3ZXIodGhpcy5TaXRlLCAoQ29uZmlnLk1hbmlmZXN0Lkd1aWRhbmNlUGFja2FnZSkNCgkJCQkJbHN0UGFja2FnZXMuU2VsZWN0ZWRJdGVtc1swXS5UYWcpLlNob3dEaWFsb2codGhpcyk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCW5ldyBQYWNrYWdlVmlld2VyKHRoaXMuU2l0ZSwgKENvbmZpZy5NYW5pZmVzdC5HdWlkYW5jZVBhY2thZ2UpDQoJCQkJCQlsc3RQYWNrYWdlcy5TZWxlY3RlZEl0ZW1zWzBdLlRhZykuU2hvdygpOw0KCQkJCX0NCgkJCX0NCgkJCWNhdGNoIChFeGNlcHRpb24gZXgpDQoJCQl7DQoJCQkJRXJyb3JIZWxwZXIuU2hvdygoSVVJU2VydmljZSlHZXRTZXJ2aWNlKHR5cGVvZihJVUlTZXJ2aWNlKSksIGV4KTsNCgkJCX0NCiAgICAgICAgfQ0KDQoJCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uTG9hZChFdmVudEFyZ3MgZSkNCgkJew0KICAgICAgICAgICAgdGhpcy5sc3RQYWNrYWdlcy5JdGVtQ2hlY2tlZCAtPSBuZXcgSXRlbUNoZWNrZWRFdmVudEhhbmRsZXIobHN0UGFja2FnZXNfSXRlbUNoZWNrZWQpOw0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYnRuT0suRW5hYmxlZCA9IChiYXNlLkhvc3RTZXJ2aWNlICE9IG51bGwpOw0KICAgICAgICAgICAgICAgIGxzdFBhY2thZ2VzLkl0ZW1zLkNsZWFyKCk7DQogICAgICAgICAgICAgICAgYmFzZS5PbkxvYWQoZSk7DQogICAgICAgICAgICAgICAgdGhpcy5TdXNwZW5kTGF5b3V0KCk7DQoNCiAgICAgICAgICAgICAgICBDb25maWcuTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlW10gUGFja2FnZXM7DQogICAgICAgICAgICAgICAgaWYgKGJhc2UuSG9zdFNlcnZpY2UgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFBhY2thZ2VzID0gYmFzZS5SZWNpcGVNYW5hZ2VyU2VydmljZS5HZXRJbnN0YWxsZWRQYWNrYWdlcyhiYXNlLkhvc3RTZXJ2aWNlLkhvc3ROYW1lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBzaG93IGFsbCBQYWNrYWdlcywgYnV0IHRoZSB1c2VyIHdpbGwgbm90IGJlIGFibGUgdG8gZW5hYmxlL2Rpc2FibGUgYW55b25lLg0KICAgICAgICAgICAgICAgICAgICBQYWNrYWdlcyA9IGJhc2UuUmVjaXBlTWFuYWdlclNlcnZpY2UuR2V0SW5zdGFsbGVkUGFja2FnZXMoKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBmb3JlYWNoIChDb25maWcuTWFuaWZlc3QuR3VpZGFuY2VQYWNrYWdlIFBhY2thZ2UgaW4gUGFja2FnZXMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBMaXN0Vmlld0l0ZW0gaXRlbSA9IG5ldyBMaXN0Vmlld0l0ZW0oDQogICAgICAgICAgICAgICAgICAgICAgICBuZXcgc3RyaW5nW10gew0KCQkJCQkJUGFja2FnZS5DYXB0aW9uLCANCgkJCQkJCVBhY2thZ2UuRGVzY3JpcHRpb24sDQoJCQkJCQlQYWNrYWdlLlZlcnNpb24gfSwgMCk7DQogICAgICAgICAgICAgICAgICAgIGl0ZW0uVGFnID0gUGFja2FnZTsNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5DaGVja2VkID0gKGJhc2UuUmVjaXBlTWFuYWdlclNlcnZpY2UuR2V0UGFja2FnZShQYWNrYWdlLkd1aWQpICE9IG51bGwpOw0KICAgICAgICAgICAgICAgICAgICBsc3RQYWNrYWdlcy5JdGVtcy5BZGQoaXRlbSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChsc3RQYWNrYWdlcy5JdGVtcy5Db3VudCA+IDApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsc3RQYWNrYWdlcy5JdGVtc1swXS5TZWxlY3RlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGJ0bkV4cGxvcmUuRW5hYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuUmVzdW1lTGF5b3V0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEVycm9ySGVscGVyLlNob3codGhpcy5TaXRlLCBleCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmaW5hbGx5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5sc3RQYWNrYWdlcy5JdGVtQ2hlY2tlZCArPSBuZXcgSXRlbUNoZWNrZWRFdmVudEhhbmRsZXIobHN0UGFja2FnZXNfSXRlbUNoZWNrZWQpOw0KICAgICAgICAgICAgfQ0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIGJ0bkNhbmNlbF9DbGljayhvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkNCgkJew0KCQkJdGhpcy5DbG9zZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSB2b2lkIGxzdFBhY2thZ2VzX01vdXNlRG91YmxlQ2xpY2sob2JqZWN0IHNlbmRlciwgTW91c2VFdmVudEFyZ3MgZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGxzdFBhY2thZ2VzLlNlbGVjdGVkSXRlbXMuQ291bnQgIT0gMCkNCiAgICAgICAgICAgIHsNCgkJCQlMaXN0Vmlld0hpdFRlc3RJbmZvIGluZm8gPSBsc3RQYWNrYWdlcy5IaXRUZXN0KGUuWCwgZS5ZKTsNCgkJCQlpZiAoaW5mbyAhPSBudWxsKQ0KCQkJCXsNCgkJCQkJTGlzdFZpZXdJdGVtIGl0ZW1Qb2ludGVkID0gaW5mby5JdGVtOw0KCQkJCQlpZiAoaXRlbVBvaW50ZWQgIT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJaXRlbVBvaW50ZWQuQ2hlY2tlZCA9ICFpdGVtUG9pbnRlZC5DaGVja2VkOw0KCQkJCQl9DQoJCQkJfQ0KICAgICAgICAgICAgICAgIE9uRXhwbG9yZVBhY2thZ2Uoc2VuZGVyLCBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgdm9pZCBsc3RQYWNrYWdlc19JdGVtQ2hlY2tlZChvYmplY3Qgc2VuZGVyLCBJdGVtQ2hlY2tlZEV2ZW50QXJncyBlKQ0KICAgICAgICB7DQoJCQl0cnkNCgkJCXsNCgkJCQlpZiAoY2hhbmdlZC5JbmRleE9mKGUuSXRlbSkgPT0gLTEpDQoJCQkJew0KCQkJCQljaGFuZ2VkLkFkZChlLkl0ZW0pOw0KCQkJCX0NCgkJCX0NCgkJCWNhdGNoIChFeGNlcHRpb24gZXgpDQoJCQl7DQoJCQkJRXJyb3JIZWxwZXIuU2hvdygoSVVJU2VydmljZSlHZXRTZXJ2aWNlKHR5cGVvZihJVUlTZXJ2aWNlKSksIGV4KTsNCgkJCX0NCiAgICAgICAgfQ0KCX0NCn0NCg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>37</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/VisualStudio/Package/CTC/CTCBuilder.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBEaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOw0KdXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbjsNCnVzaW5nIFN5c3RlbS5JTzsNCnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuU2VydmljZXM7DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uU2VydmljZXM7DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVtcGxhdGVzOw0KdXNpbmcgTWljcm9zb2Z0LlZpc3VhbFN0dWRpby5TaGVsbC5JbnRlcm9wOw0KdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uQ29tbW9uOw0KdXNpbmcgU3lzdGVtLldpbmRvd3MuRm9ybXM7DQp1c2luZyBTeXN0ZW0uRHJhd2luZzsNCg0KI2VuZHJlZ2lvbg0KDQovLy8vDQovLy8vICBUaGlzIGlzIGEgdGVtcGxhdGUgb2YgYSBDVEMgZ2VuZXJhdGVkIGZyb20gYSBndWlkYW5jZSBwYWNrYWdlDQovLy8vICBUaGUgY29uc3RhbnRzIGhhdmUgYmVlbiByZXBsYWNlIGJ5ICNkZWZpbmUgZm9yIHJlYWRhYmlsaXR5DQovLy8vDQovLyNkZWZpbmUgUFJJXzAgIDB4MDAxDQovLyNkZWZpbmUgUFJJXzEgIDB4MDEwDQovLyNkZWZpbmUgUFJJXzIgIDB4NDAwDQovLyNkZWZpbmUgREVGX0JUDQovLy8vI2RlZmluZSBERUZfQlQgRFlOQU1JQ1ZJU0lCSUxJVFkgfCBERUZBVUxURElTQUJMRUQgfCBERUZBVUxUSU5WSVNJQkxFIHwgQ09NTUFORFdFTExPTkxZDQovLyNkZWZpbmUgbXlHdWlkIGd1aWRCc2NQa2dNZW51R3JwDQovLyNkZWZpbmUgR3JvdXBfVW5kZWZpbmVkICAgeyAweDgzMjg1OTI5LCAweDIyN2MsIDB4MTFkMywgeyAweGI4LCAweDcwLCAweDAwLCAweGMwLCAweDRmLCAweDc5LCAweGY4LCAweDAyIH0gfQ0KLy9DTURTX1NFQ1RJT04gZ3VpZEJzY1BrZ1BrZw0KLy9NRU5VU19CRUdJTg0KLy8gICAgbXlHdWlkOjB4MjAwMDAsbXlHdWlkOjB4MTAwMDMsUFJJXzIsMHgwMDAwMDQwMCwiU2xuTWVudSIsIk15IFNvbHV0aW9uIENhc2NhZGUgTWVudSI7DQovLyAgICBteUd1aWQ6MHgyMDAwMSxteUd1aWQ6MHgxMDAwNCxQUklfMCwweDAwMDAwNDAwLCJOZXN0ZWRTbG5NZW51IiwiTXkgbmVzdGVkIFNvbHV0aW9uIENhc2NhZGUgTWVudSI7DQovL01FTlVTX0VORA0KLy9ORVdHUk9VUFNfQkVHSU4NCi8vICAgIC8vIEdBVCBQYWNrYWdlIGdyb3VwDQovLyAgICBteUd1aWQ6MHgxMDAwMCxndWlkU0hMTWFpbk1lbnU6SURNX1ZTX01FTlVfVE9PTFMsMHgwOw0KLy8gICAgLy8gVGVtcGxhdGUgUGFja2FnZSBncm91cA0KLy8gICAgbXlHdWlkOjB4MTAxMDAsZ3VpZFNITE1haW5NZW51OklETV9WU19NRU5VX1RPT0xTLDB4MDsNCi8vICAgIC8vQ29tbWFuZCBiYXIgZ3JvdXBzDQovLyAgICBteUd1aWQ6MHgxMDAwMyxndWlkU0hMTWFpbk1lbnU6MHgwNDEzLFBSSV8wOwkJLy9Hcm91cCBmb3IgU29sdXRpb24gcm9vdA0KLy8gICAgbXlHdWlkOjB4MTAwMDQsbXlHdWlkOjB4MjAwMDAsUFJJXzE7CQkJCS8vR3JvdXAgZm9yIFNsbk1lbnUNCi8vICAgIG15R3VpZDoweDEwMDA1LG15R3VpZDoweDIwMDAxLFBSSV8yOwkJCQkvL0dyb3VwIGZvciBOZXN0ZWRTbG5NZW51DQovLyAgICBteUd1aWQ6MHgxMDAwNixndWlkU0hMTWFpbk1lbnU6MHg0MTQsUFJJXzA7CQkJLy9Hcm91cCBmb3IgU29sdXRpb24gZm9sZGVyDQovL05FV0dST1VQU19FTkQNCi8vQlVUVE9OU19CRUdJTg0KLy8gICAgbXlHdWlkOjB4MDEwMCxteUd1aWQ6MHgxMDAwMCxQUklfMCxndWlkT2ZmaWNlSWNvbjoweDAxNUEsQlVUVE9OLERFRl9CVCwiQ2FzY2FkaW5nTWVudVRlc3RDbHVzdGVyLlJlY2lwZUluU29sdXRpb25Db250ZXh0TWVudU9uZSI7DQovLyAgICBteUd1aWQ6MHgwMjAwLG15R3VpZDoweDEwMTAwLFBSSV8xLGd1aWRPZmZpY2VJY29uOjB4MDE1QSxCVVRUT04sREVGX0JULCJDYXNjYWRpbmdNZW51VGVzdENsdXN0ZXIuUmVjaXBlSW5Tb2x1dGlvbkNvbnRleHRNZW51VHdvIjsNCi8vICAgIG15R3VpZDoweDAzMDAsbXlHdWlkOjB4MTAwMDAsUFJJXzIsZ3VpZE9mZmljZUljb246MHgwMTVBLEJVVFRPTixERUZfQlQsIkNhc2NhZGluZ01lbnVUZXN0Q2x1c3Rlci5SZWNpcGVJblNvbHV0aW9uQ29udGV4dE1lbnVUaHJlZSI7DQovL0JVVFRPTlNfRU5EDQovL0JJVE1BUFNfQkVHSU4NCi8vQklUTUFQU19FTkQNCi8vQ01EU19FTkQNCi8vQ01EVVNFRF9TRUNUSU9ODQovL0NNRFVTRURfRU5EDQovL0NNRFBMQUNFTUVOVF9TRUNUSU9ODQovLy8vIENvbW1hbmQgcGxhY2VtZW50cw0KLy9teUd1aWQ6MHgwMTAwLG15R3VpZDoweDEwMDAzLFBSSV8wOyAvLyBTbG5Sb290DQovL215R3VpZDoweDAyMDAsbXlHdWlkOjB4MTAwMDQsUFJJXzE7IC8vIFNsblJvb3R8TWVudQ0KLy9teUd1aWQ6MHgwMzAwLG15R3VpZDoweDEwMDA1LFBSSV8yOyAvLyBTbG5Sb290fE1lbnV8TWVudQ0KLy9teUd1aWQ6MHgwMTAwLG15R3VpZDoweDEwMDA2LFBSSV8yOyAvLyBTbG5Gb2xkZXINCi8vbXlHdWlkOjB4MDIwMCxteUd1aWQ6MHgxMDAwNixQUklfMTsgLy8gU2xuRm9sZGVyDQovL215R3VpZDoweDAzMDAsbXlHdWlkOjB4MTAwMDYsUFJJXzA7IC8vIFNsbkZvbGRlcg0KLy9DTURQTEFDRU1FTlRfRU5EDQovL1ZJU0lCSUxJVFlfU0VDVElPTg0KLy9WSVNJQklMSVRZX0VORA0KLy9LRVlCSU5ESU5HU19TRUNUSU9ODQovL0tFWUJJTkRJTkdTX0VORA0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLkNUQw0Kew0KCS8vLyA8c3VtbWFyeT4NCgkvLy8gVGhpcyBjbGFzcyBidWlsZHMgYSBDVEMgdHJlZSBnaXZlIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBndWlkYW5jZSBwYWNrYWdlDQoJLy8vIDwvc3VtbWFyeT4NCglpbnRlcm5hbCBjbGFzcyBDVENCdWlsZGVyDQoJew0KCQljb25zdCBpbnQgZGVmYXVsdFByaW9yaXR5ID0gMHg2MDA7DQoJCUNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIGd1aWRhbmNlUGFja2FnZTsNCgkJc3RyaW5nIGJhc2VQYXRoOw0KCQlHdWlkIGd1aWRSZWNpcGVGcmFtZXdvcmtQa2c7DQoJCUd1aWQgZ3VpZFJlY2lwZUZyYW1ld29ya1BrZ0NtZFNldDsNCgkJQ29tbWFuZElEIGRlZmF1bHRQYXJlbnRDb21tYW5kOw0KCQlDb21tYW5kSUQgZGVmYXVsdEljb247DQoJCUNUQ0JpdG1hcCBjdGNCaXRtYXA7DQoJCURpY3Rpb25hcnk8c3RyaW5nLCBOZXdHcm91cD4gbmV3R3JvdXBzOw0KCQlEaWN0aW9uYXJ5PHN0cmluZywgTWVudUdyb3VwPiBtZW51czsNCgkJSGFzaHRhYmxlIHBsYWNlbWVudHM7DQoJCUFycmF5TGlzdCBidXR0b25zOw0KCQlBcnJheUxpc3QgdmlzaWJpbGl0aWVzOw0KCQlpbnQgZ3JvdXBDb3VudGVyOw0KCQlpbnQgbWVudUNvdW50ZXI7DQoJCU5ld0dyb3VwIHBhY2thZ2VHcm91cDsNCg0KCQlwdWJsaWMgQ1RDQnVpbGRlcihDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlLCBzdHJpbmcgYmFzZVBhdGgpDQoJCXsNCgkJCXRoaXMuZ3VpZGFuY2VQYWNrYWdlID0gcGFja2FnZTsNCgkJCXRoaXMuYmFzZVBhdGggPSBiYXNlUGF0aDsNCgkJCXRoaXMuZ3VpZFJlY2lwZUZyYW1ld29ya1BrZyA9IHR5cGVvZihSZWNpcGVNYW5hZ2VyUGFja2FnZSkuR1VJRDsNCgkJCXRoaXMuZ3VpZFJlY2lwZUZyYW1ld29ya1BrZ0NtZFNldCA9IG5ldyBHdWlkKGd1aWRhbmNlUGFja2FnZS5HdWlkKTsNCgkJCXRoaXMuZ3JvdXBDb3VudGVyID0gMHgxMDAwMDsNCgkJCXRoaXMubWVudUNvdW50ZXIgPSAweDIwMDAwOw0KCQkJdGhpcy5kZWZhdWx0UGFyZW50Q29tbWFuZCA9IG5ldyBDb21tYW5kSUQoU2hlbGxDbWREZWYuZ3VpZFNITE1haW5NZW51LCBTaGVsbENtZERlZi5JRE1fVlNfTUVOVV9UT09MUyk7DQoJCQl0aGlzLmN0Y0JpdG1hcCA9IG5ldyBDVENCaXRtYXAobmV3IENvbW1hbmRJRCh0aGlzLmd1aWRSZWNpcGVGcmFtZXdvcmtQa2dDbWRTZXQsIDEwMCkpOw0KCQkJdGhpcy5uZXdHcm91cHMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIE5ld0dyb3VwPig3KTsNCgkJCXRoaXMubWVudXMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIE1lbnVHcm91cD4oNyk7DQoJCQl0aGlzLnBsYWNlbWVudHMgPSBuZXcgSGFzaHRhYmxlKDcpOw0KCQkJdGhpcy5idXR0b25zID0gbmV3IEFycmF5TGlzdCgpOw0KCQkJdGhpcy52aXNpYmlsaXRpZXMgPSBuZXcgQXJyYXlMaXN0KCk7DQoJCQl0aGlzLmRlZmF1bHRJY29uID0gbmV3IENvbW1hbmRJRCh0aGlzLmd1aWRSZWNpcGVGcmFtZXdvcmtQa2csIFNoZWxsQ21kRGVmLmJtcGlkR2F4Tm9JY29uKTsNCgkJCWlmIChwYWNrYWdlLkhvc3REYXRhICE9IG51bGwgJiYgcGFja2FnZS5Ib3N0RGF0YS5JY29uICE9IG51bGwpDQoJCQl7DQoJCQkJdGhpcy5kZWZhdWx0SWNvbiA9IENyZWF0ZUJpdG1hcChwYWNrYWdlLkhvc3REYXRhLkljb24pOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSBDb21tYW5kSUQgR2V0SWNvbihDb25maWd1cmF0aW9uLkljb24gaWNvbikNCgkJew0KCQkJaWYgKGljb24gIT0gbnVsbCkNCgkJCXsNCgkJCQlHdWlkIGljb25HdWlkID0gdGhpcy5kZWZhdWx0SWNvbi5HdWlkOw0KCQkJCWludCBpY29uSWQgPSB0aGlzLmRlZmF1bHRJY29uLklEOw0KCQkJCWlmIChpY29uLklEU3BlY2lmaWVkKQ0KCQkJCXsNCgkJCQkJaWNvbklkID0gaWNvbi5JRDsNCgkJCQkJaWYgKGljb24uR3VpZCA9PSBudWxsKQ0KCQkJCQl7DQoJCQkJCQlpY29uR3VpZCA9IFNoZWxsQ21kRGVmLmd1aWRPZmZpY2VJY29uOw0KCQkJCQl9DQoJCQkJfQ0KCQkJCWlmIChpY29uLkd1aWQgIT0gbnVsbCkNCgkJCQl7DQoJCQkJCWljb25HdWlkID0gbmV3IEd1aWQoaWNvbi5HdWlkKTsNCgkJCQl9DQoJCQkJcmV0dXJuIFNoZWxsQ21kRGVmLk1hcEljb25Ub0JpdG1hcChuZXcgQ29tbWFuZElEKGljb25HdWlkLGljb25JZCkpOw0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCXJldHVybiB0aGlzLmRlZmF1bHRJY29uOw0KCQkJfQ0KCQl9DQoNCg0KCQlwcml2YXRlIHZvaWQgQWRkQ29tbWFuZChCdXR0b24gYnV0dG9uLCBDb25maWd1cmF0aW9uLlJlY2lwZUhvc3REYXRhIGhvc3REYXRhKQ0KCQl7DQoJCQlidXR0b25zLkFkZChidXR0b24pOw0KCQkJLy9VbmNvbW1lbnQgaWYgeW91IG5lZWQgdG8gc3VwcG9ydCB2aXNpYmlsaXR5IGZvciBhIGNvbW1hbmQNCgkJCS8vdmlzaWJpbGl0aWVzLkFkZChuZXcgVmlzaWJpbGl0eShidXR0b24uQ29tbWFuZCwgbmV3IEd1aWQoVUlDb250ZXh0R3VpZHMuU29sdXRpb25FeGlzdHMpKSk7DQoJCQlpZiAoaG9zdERhdGEgIT0gbnVsbCAmJiBob3N0RGF0YS5Db21tYW5kQmFyICE9IG51bGwpDQoJCQl7DQoJCQkJaWYgKGhvc3REYXRhLkNvbW1hbmRCYXIuTGVuZ3RoID09IDApDQoJCQkJew0KCQkJCQkvLyBDaGVjayB0aGF0IHdlIGFsd2F5cyBnZXQgYXQgbGVhc3Qgb25lIGNvbW1hbmQgYmFyDQoJCQkJCXJldHVybjsNCgkJCQl9DQoJCQkJRGljdGlvbmFyeTxDb21tYW5kSUQsIHN0cmluZz4gaW5zdGFsbGVkQmFycyA9IG5ldyBEaWN0aW9uYXJ5PENvbW1hbmRJRCwgc3RyaW5nPigpOw0KCQkJCWZvciAoaW50IGlDb21tYW5kID0gMDsgaUNvbW1hbmQgPCBob3N0RGF0YS5Db21tYW5kQmFyLkxlbmd0aDsgaUNvbW1hbmQrKykNCgkJCQl7DQoJCQkJCUNvbmZpZ3VyYXRpb24uQ29tbWFuZEJhciBjb25maWdDb21tYW5kQmFyID0gaG9zdERhdGEuQ29tbWFuZEJhcltpQ29tbWFuZF07DQoJCQkJCUNvbW1hbmRJRCBjb21tYW5kQmFyID0gR2V0Q29tbWFuZElEKGNvbmZpZ0NvbW1hbmRCYXIpOw0KCQkJCQlDb21tYW5kSUQgcGFyZW50Q29tbWFuZEJhciA9IEdldENvbW1hbmRQYXJlbnRJRChjb25maWdDb21tYW5kQmFyKTsNCgkJCQkJaWYgKGluc3RhbGxlZEJhcnMuQ29udGFpbnNLZXkocGFyZW50Q29tbWFuZEJhcikpDQoJCQkJCXsNCgkJCQkJCXRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKA0KCQkJCQkJCVN0cmluZy5Gb3JtYXQoUHJvcGVydGllcy5SZXNvdXJjZXMuQ1RDX1JlcGVhdGVkQ29tbWFuZEJhciwgcGFyZW50Q29tbWFuZEJhci5Ub1N0cmluZygpKSk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQlBZGRHcm91cFBsYWNlbWVudChidXR0b24sIGNvbW1hbmRCYXIpOw0KCQkJCQkJaW5zdGFsbGVkQmFycy5BZGQocGFyZW50Q29tbWFuZEJhciwgY29tbWFuZEJhci5Ub1N0cmluZygpKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBCdWlsdFJlY2lwZUNvbW1hbmRzKCkNCgkJew0KCQkJaWYgKGd1aWRhbmNlUGFja2FnZS5SZWNpcGVzID09IG51bGwpDQoJCQl7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KCQkJZm9yIChpbnQgaVJlY2lwZSA9IDA7IGlSZWNpcGUgPCBndWlkYW5jZVBhY2thZ2UuUmVjaXBlcy5MZW5ndGg7IGlSZWNpcGUrKykNCgkJCXsNCgkJCQlDb25maWd1cmF0aW9uLlJlY2lwZSByZWNpcGUgPSBndWlkYW5jZVBhY2thZ2UuUmVjaXBlc1tpUmVjaXBlXTsNCgkJCQlpZiAocmVjaXBlLkhvc3REYXRhICE9IG51bGwgJiYgcmVjaXBlLkhvc3REYXRhLkNvbW1hbmRCYXIgIT0gbnVsbCkNCgkJCQl7DQoJCQkJCUNvbW1hbmRJRCBteUNvbW1hbmQgPSBuZXcgQ29tbWFuZElEKGd1aWRSZWNpcGVGcmFtZXdvcmtQa2dDbWRTZXQsIChpUmVjaXBlICsgMSkgKiAweDEwMCk7DQoJCQkJCUNvbW1hbmRJRCBpY29uID0gQ3JlYXRlQml0bWFwKHJlY2lwZS5Ib3N0RGF0YS5JY29uKTsNCgkJCQkJQnV0dG9uIG15QnV0dG9uID0gbmV3IEJ1dHRvbihteUNvbW1hbmQsDQoJCQkJCQl0aGlzLlBhY2thZ2VHcm91cC5Hcm91cCwNCgkJCQkJCXJlY2lwZS5Ib3N0RGF0YS5Qcmlvcml0eSwNCgkJCQkJCWljb24sDQoJCQkJCQlDb21tYW5kVHlwZS5CdXR0b24sDQoJCQkJCQlVdGlsLkRpc2FibGVkRGVmYXVsdCwNCgkJCQkJCWd1aWRhbmNlUGFja2FnZS5DYXB0aW9uICsgIi4iICsgcmVjaXBlLk5hbWUpOw0KCQkJCQlBZGRDb21tYW5kKG15QnV0dG9uLCByZWNpcGUuSG9zdERhdGEpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXByaXZhdGUgTmV3R3JvdXAgR2V0TmV3R3JvdXAoc3RyaW5nIGNvbW1hbmRCYXIpDQoJCXsNCgkJCWlmIChuZXdHcm91cHMuQ29udGFpbnNLZXkoY29tbWFuZEJhcikpDQoJCQl7DQoJCQkJcmV0dXJuIG5ld0dyb3Vwc1tjb21tYW5kQmFyXTsNCgkJCX0NCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJcHJpdmF0ZSBOZXdHcm91cCBDcmVhdGVOZXdHcm91cChzdHJpbmcgZ3JvdXBOYW1lLCBpbnQgcHJpb3JpdHksIENvbW1hbmRJRCBwYXJlbnRDb21tYW5kKQ0KCQl7DQoJCQlpZiAoIW5ld0dyb3Vwcy5Db250YWluc0tleShncm91cE5hbWUpKQ0KCQkJew0KCQkJCUNvbW1hbmRJRCBuZXdHcm91cENvbW1hbmQgPSBuZXcgQ29tbWFuZElEKGd1aWRSZWNpcGVGcmFtZXdvcmtQa2dDbWRTZXQsIHRoaXMuZ3JvdXBDb3VudGVyKyspOw0KCQkJCU5ld0dyb3VwIG15TmV3R3JvdXAgPSBuZXcgTmV3R3JvdXAoDQoJCQkJCW5ld0dyb3VwQ29tbWFuZCwNCgkJCQkJcGFyZW50Q29tbWFuZCwNCgkJCQkJcHJpb3JpdHkpOw0KCQkJCW5ld0dyb3Vwcy5BZGQoZ3JvdXBOYW1lLCBteU5ld0dyb3VwKTsNCgkJCX0NCgkJCXJldHVybiBuZXdHcm91cHNbZ3JvdXBOYW1lXTsNCgkJfQ0KDQoJCXByaXZhdGUgTmV3R3JvdXAgQ3JlYXRlTmV3R3JvdXAoc3RyaW5nIGdyb3VwTmFtZSwgaW50IHByaW9yaXR5KQ0KCQl7DQoJCQlyZXR1cm4gQ3JlYXRlTmV3R3JvdXAoZ3JvdXBOYW1lLCBwcmlvcml0eSwgdGhpcy5kZWZhdWx0UGFyZW50Q29tbWFuZCk7DQoJCX0NCg0KCQlwcml2YXRlIHZvaWQgQWRkR3JvdXBQbGFjZW1lbnQoQnV0dG9uIGJ1dHRvbiwgQ29tbWFuZElEIGNvbW1hbmRCYXIpDQoJCXsNCgkJCXN0cmluZyBrZXkgPSBidXR0b24uQ29tbWFuZC5Ub1N0cmluZygpICsgY29tbWFuZEJhci5Ub1N0cmluZygpOw0KCQkJaWYgKCFwbGFjZW1lbnRzLkNvbnRhaW5zS2V5KGtleSkpDQoJCQl7DQoJCQkJLy8gQ3JlYXRlIG9yIGdldCB0aGUgZ3J1b3AgYXNzb2NpdGVkIHdpdGggY29tbWFuZEJhcg0KCQkJCU5ld0dyb3VwIG5ld0dyb3VwID0gQ3JlYXRlTmV3R3JvdXAoY29tbWFuZEJhci5Ub1N0cmluZygpLCBidXR0b24uUHJpb3JpdHksIGNvbW1hbmRCYXIpOw0KCQkJCUNNRFBsYWNlbWVudCBwbGFjZW1lbnQgPSBuZXcgQ01EUGxhY2VtZW50KGJ1dHRvbi5Db21tYW5kLCBuZXdHcm91cC5Hcm91cCwgYnV0dG9uLlByaW9yaXR5KTsNCgkJCQlwbGFjZW1lbnRzLkFkZChrZXksIHBsYWNlbWVudCk7DQoJCQl9DQoJCX0NCg0KCQlwdWJsaWMgQ1RDRmlsZSBDcmVhdGUoKQ0KCQl7DQoJCQkjcmVnaW9uIFN0YW5kYXJkIGdyb3VwIEluaXQNCgkJCS8vIE1ha2Ugc3VyZSB0byBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGdyb3Vwcw0KCQkJdGhpcy5wYWNrYWdlR3JvdXAgPSB0aGlzLlBhY2thZ2VHcm91cDsNCgkJCSNlbmRyZWdpb24NCg0KCQkJI3JlZ2lvbiBOZXcgTWVudSBjcmVhdGlvbg0KCQkJLy8gQ3JlYXRlIHRoZSBuZXcgbWVudXMgZmlyc3QgYmVmb3JlIGNyZWF0aW5nIGFueSBjb21tYW5kDQoJCQlCdWlsZE1lbnVHcm91cHMoKTsNCgkJCSNlbmRyZWdpb24NCg0KCQkJI3JlZ2lvbiBDb21tYW5kIGNyZWF0aW9uDQoJCQkvLyBUZW1wbGF0ZXMgY29tbWFuZHMgbXVzdCBiZSBjcmVhdGVkIGZpcnN0IHRoYW4gcmVjaXBlIGNvbW1hbmRzDQoJCQkvLyBiZWN1YXNlIGEgdGVtcGxhdGUgY2FuIHN0ZWFsIHRoZSBjb21tYW5kIGJhcnMgZnJvbSB0aGUgcmVjaXBlIGl0IGlzIHJlbGF0ZWQgdG8NCgkJCUJ1aWxkVGVtcGxhdGVDb21tYW5kcygpOw0KCQkJLy8gQnVpbGQgcmVjaXBlcyBjb21tYW5kcw0KCQkJQnVpbHRSZWNpcGVDb21tYW5kcygpOw0KCQkJI2VuZHJlZ2lvbg0KDQoJCQkjcmVnaW9uIEJ1aWxkIENUQyBUcmVlDQoJCQlOZXdHcm91cFtdIG5ld0dyb3Vwc0FycmF5ID0gbmV3IE5ld0dyb3VwW25ld0dyb3Vwcy5WYWx1ZXMuQ291bnRdOw0KCQkJbmV3R3JvdXBzLlZhbHVlcy5Db3B5VG8obmV3R3JvdXBzQXJyYXksIDApOw0KCQkJTWVudUdyb3VwW10gbWVudUdyb3Vwc0FycmF5ID0gbmV3IE1lbnVHcm91cFttZW51cy5WYWx1ZXMuQ291bnRdOw0KCQkJbWVudXMuVmFsdWVzLkNvcHlUbyhtZW51R3JvdXBzQXJyYXksIDApOw0KCQkJQ01EUGxhY2VtZW50W10gcGxhY2VtZW50c0FycmF5ID0gbmV3IENNRFBsYWNlbWVudFtwbGFjZW1lbnRzLkNvdW50XTsNCgkJCXBsYWNlbWVudHMuVmFsdWVzLkNvcHlUbyhwbGFjZW1lbnRzQXJyYXksIDApOw0KCQkJQnV0dG9uW10gYnV0dG9uc0FycmF5ID0gbmV3IEJ1dHRvbltidXR0b25zLkNvdW50XTsNCgkJCWJ1dHRvbnMuQ29weVRvKGJ1dHRvbnNBcnJheSk7DQoJCQlWaXNpYmlsaXR5W10gdmlzaWJpbHRpZXNBcnJheSA9IG5ldyBWaXNpYmlsaXR5W3Zpc2liaWxpdGllcy5Db3VudF07DQoJCQl2aXNpYmlsaXRpZXMuQ29weVRvKHZpc2liaWx0aWVzQXJyYXkpOw0KCQkJQ1RDRmlsZSBjdGNGaWxlID0gbmV3IENUQ0ZpbGUoDQoJCQkJbmV3IENNRFNTZWN0aW9uKGd1aWRSZWNpcGVGcmFtZXdvcmtQa2csDQoJCQkJCW5ldyBNZW51c1N1YlNlY3Rpb24obWVudUdyb3Vwc0FycmF5KSwNCgkJCQkJbmV3IE5ld0dyb3Vwc1N1YlNlY3Rpb24obmV3R3JvdXBzQXJyYXkpLA0KCQkJCQluZXcgQnV0dG9uc1N1YlNlY3Rpb24oYnV0dG9uc0FycmF5KSwNCgkJCQkJbmV3IEJpdG1hcHNTdWJTZWN0aW9uKG5ldyBDVENCaXRtYXBbXSB7IGN0Y0JpdG1hcCB9KSksDQoJCQkJbmV3IENNRFVzZWRTZWN0aW9uKCksDQoJCQkJbmV3IENNRFBsYWNlbWVudFNlY3Rpb24ocGxhY2VtZW50c0FycmF5KSwNCgkJCQluZXcgVmlzaWJpbGl0eVNlY3Rpb24odmlzaWJpbHRpZXNBcnJheSksDQoJCQkJbmV3IEtleWJpbmRpbmdzU2VjdGlvbigpKTsNCgkJCXJldHVybiBjdGNGaWxlOw0KCQkJI2VuZHJlZ2lvbg0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIEJ1aWxkTWVudUdyb3VwcygpDQoJCXsNCgkJCWlmIChndWlkYW5jZVBhY2thZ2UuSG9zdERhdGEgIT0gbnVsbCAmJiBndWlkYW5jZVBhY2thZ2UuSG9zdERhdGEuTWVudSAhPSBudWxsKQ0KCQkJew0KCQkJCWZvcmVhY2ggKENvbmZpZ3VyYXRpb24uTWVudSBjb25maWdNZW51IGluIGd1aWRhbmNlUGFja2FnZS5Ib3N0RGF0YS5NZW51KQ0KCQkJCXsNCgkJCQkJQWRkTWVudUdyb3VwKGNvbmZpZ01lbnUpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBBZGRNZW51R3JvdXAoQ29uZmlndXJhdGlvbi5NZW51IGNvbmZpZ01lbnUpDQoJCXsNCgkJCUFkZE1lbnVHcm91cChjb25maWdNZW51Lk5hbWUsIGNvbmZpZ01lbnUuVGV4dCwgY29uZmlnTWVudS5Qcmlvcml0eSwgY29uZmlnTWVudS5Db21tYW5kQmFyKTsNCgkJfQ0KDQoJCXByaXZhdGUgQ29tbWFuZElEIEdldENvbW1hbmRQYXJlbnRJRChDb25maWd1cmF0aW9uLkNvbW1hbmRCYXIgY29tbWFuZEJhcikNCgkJew0KCQkJd2hpbGUgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShjb21tYW5kQmFyLk1lbnUpKQ0KCQkJew0KCQkJCWJvb2wgZm91bmQgPSBmYWxzZTsNCgkJCQlmb3JlYWNoIChDb25maWd1cmF0aW9uLk1lbnUgbWVudSBpbiBndWlkYW5jZVBhY2thZ2UuSG9zdERhdGEuTWVudSkNCgkJCQl7DQoJCQkJCWlmIChtZW51Lk5hbWUuRXF1YWxzKGNvbW1hbmRCYXIuTWVudSwgU3RyaW5nQ29tcGFyaXNvbi5JbnZhcmlhbnRDdWx0dXJlSWdub3JlQ2FzZSkpDQoJCQkJCXsNCgkJCQkJCWNvbW1hbmRCYXIgPSBtZW51LkNvbW1hbmRCYXI7DQoJCQkJCQlmb3VuZCA9IHRydWU7DQoJCQkJCQlicmVhazsNCgkJCQkJfQ0KCQkJCX0NCgkJCQlpZiAoIWZvdW5kKQ0KCQkJCXsNCgkJCQkJdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oDQoJCQkJCQlTdHJpbmcuRm9ybWF0KFByb3BlcnRpZXMuUmVzb3VyY2VzLkNUQ19NZW51RG9lc05vdEV4aXN0LCBjb21tYW5kQmFyLk1lbnUpKTsNCgkJCQl9DQoJCQl9DQoJCQlyZXR1cm4gR2V0Q29tbWFuZElEKGNvbW1hbmRCYXIpOw0KCQl9DQoNCgkJcHJpdmF0ZSBDb21tYW5kSUQgR2V0Q29tbWFuZElEKENvbmZpZ3VyYXRpb24uQ29tbWFuZEJhciBjb21tYW5kQmFyKQ0KCQl7DQoJCQlpZiAoY29tbWFuZEJhci5OYW1lU3BlY2lmaWVkKQ0KCQkJew0KCQkJCXJldHVybiBTaGVsbENtZERlZi5HZXRQcmVkZWZpbmVkQ29tbWFuZElEKGNvbW1hbmRCYXIuTmFtZSk7DQoJCQl9DQoJCQllbHNlIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoY29tbWFuZEJhci5NZW51KSkNCgkJCXsNCgkJCQlpZiAobWVudXMuQ29udGFpbnNLZXkoY29tbWFuZEJhci5NZW51KSkNCgkJCQl7DQoJCQkJCU1lbnVHcm91cCBtZW51R3JvdXAgPSAoTWVudUdyb3VwKW1lbnVzW2NvbW1hbmRCYXIuTWVudV07DQoJCQkJCXJldHVybiBtZW51R3JvdXAuR3JvdXA7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCXRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKA0KCQkJCQkJU3RyaW5nLkZvcm1hdChQcm9wZXJ0aWVzLlJlc291cmNlcy5DVENfTWVudURvZXNOb3RFeGlzdCwgY29tbWFuZEJhci5NZW51KSk7DQoJCQkJfQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWludCBjb21tYW5kSWQgPSAwOw0KCQkJCUd1aWQgZ3VpZCA9IFNoZWxsQ21kRGVmLmd1aWRTSExNYWluTWVudTsNCgkJCQlpZiAoY29tbWFuZEJhci5JRFNwZWNpZmllZCkNCgkJCQl7DQoJCQkJCWNvbW1hbmRJZCA9IGNvbW1hbmRCYXIuSUQ7DQoJCQkJfQ0KCQkJCWlmIChjb21tYW5kQmFyLkd1aWQgIT0gbnVsbCkNCgkJCQl7DQoJCQkJCWd1aWQgPSBuZXcgR3VpZChjb21tYW5kQmFyLkd1aWQpOw0KCQkJCX0NCgkJCQlyZXR1cm4gbmV3IENvbW1hbmRJRChndWlkLCBjb21tYW5kSWQpOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSBOZXdHcm91cCBQYWNrYWdlR3JvdXANCgkJew0KCQkJZ2V0DQoJCQl7DQoJCQkJaWYgKHBhY2thZ2VHcm91cCA9PSBudWxsKQ0KCQkJCXsNCgkJCQkJcGFja2FnZUdyb3VwID0gQ3JlYXRlTmV3R3JvdXAoIl9fUGFja2FnZUdyb3VwIiwgMCk7DQoJCQkJfQ0KCQkJCXJldHVybiBwYWNrYWdlR3JvdXA7DQoJCQl9DQoJCX0NCg0KCQlwcml2YXRlIE1lbnVHcm91cCBBZGRNZW51R3JvdXAoc3RyaW5nIG1lbnVOYW1lLCBzdHJpbmcgbWVudVRleHQsIGludCBwcmlvcml0eSwgQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyIGNvbW1hbmRCYXIpDQoJCXsNCgkJCWlmICghbWVudXMuQ29udGFpbnNLZXkobWVudU5hbWUpKQ0KCQkJew0KCQkJCUNvbW1hbmRJRCBjb21tYW5kSUQgPSBHZXRDb21tYW5kSUQoY29tbWFuZEJhcik7DQoJCQkJTmV3R3JvdXAgbmV3R3JvdXAgPSBDcmVhdGVOZXdHcm91cChjb21tYW5kSUQuVG9TdHJpbmcoKSwgcHJpb3JpdHksIGNvbW1hbmRJRCk7DQoJCQkJQ29tbWFuZElEIG5ld01lbnVDb21tYW5kID0gbmV3IENvbW1hbmRJRChndWlkUmVjaXBlRnJhbWV3b3JrUGtnQ21kU2V0LCB0aGlzLm1lbnVDb3VudGVyKyspOw0KCQkJCU1lbnVHcm91cCBteU5ld01lbnUgPSBuZXcgTWVudUdyb3VwKA0KCQkJCQluZXdNZW51Q29tbWFuZCwNCgkJCQkJbmV3R3JvdXAuR3JvdXAsDQoJCQkJCXByaW9yaXR5LA0KCQkJCQlDb21tYW5kVHlwZS5NZW51Q29udGV4dCwNCgkJCQkJbWVudU5hbWUsDQoJCQkJCW1lbnVUZXh0KTsNCgkJCQltZW51cy5BZGQobWVudU5hbWUsIG15TmV3TWVudSk7DQoJCQl9DQoJCQlyZXR1cm4gbWVudXNbbWVudU5hbWVdOw0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIEFkZFRlbXBsYXRlQ29tbWFuZChJVnNUZW1wbGF0ZSB0ZW1wbGF0ZSkNCgkJew0KCQkJaWYgKHRlbXBsYXRlLktpbmQgPT0gVGVtcGxhdGVLaW5kLlNvbHV0aW9uKQ0KCQkJew0KCQkJCXJldHVybjsNCgkJCX0NCgkJCUNvbmZpZ3VyYXRpb24uUmVjaXBlSG9zdERhdGEgaG9zdERhdGEgPSBudWxsOw0KCQkJaWYgKHRlbXBsYXRlLkV4dGVuc2lvbkRhdGEgIT0gbnVsbCAmJiAhc3RyaW5nLklzTnVsbE9yRW1wdHkodGVtcGxhdGUuRXh0ZW5zaW9uRGF0YS5SZWNpcGUpKQ0KCQkJew0KCQkJCUNvbmZpZ3VyYXRpb24uUmVjaXBlIHJlY2lwZUNvbmZpZyA9IEdldFJlY2lwZUNvbmZpZyh0ZW1wbGF0ZS5FeHRlbnNpb25EYXRhLlJlY2lwZSk7DQoJCQkJaWYgKHJlY2lwZUNvbmZpZyAhPSBudWxsICYmIHJlY2lwZUNvbmZpZy5Ib3N0RGF0YSAhPSBudWxsICYmIHJlY2lwZUNvbmZpZy5Ib3N0RGF0YS5Db21tYW5kQmFyICE9IG51bGwpDQoJCQkJew0KCQkJCQlob3N0RGF0YSA9IHJlY2lwZUNvbmZpZy5Ib3N0RGF0YTsNCgkJCQkJLy8gU2V0IHRoZSBob3N0IGRhdGEgdG8gbnVsbCB0byBhdm9pZCByZWdpc3RlcmluZyB0d28gY29tbWFuZHMNCgkJCQkJcmVjaXBlQ29uZmlnLkhvc3REYXRhID0gbnVsbDsNCgkJCQl9DQoJCQl9DQoJCQlpbnQgcHJpb3JpdHkgPSBDVENCdWlsZGVyLmRlZmF1bHRQcmlvcml0eTsNCgkJCUNvbW1hbmRJRCBpY29uID0gQ3JlYXRlQml0bWFwKHRlbXBsYXRlKTsNCgkJCWlmIChob3N0RGF0YSAhPSBudWxsKQ0KCQkJew0KCQkJCWhvc3REYXRhLkljb24gPSBuZXcgQ29uZmlndXJhdGlvbi5JY29uKCk7DQoJCQkJaG9zdERhdGEuSWNvbi5HdWlkID0gaWNvbi5HdWlkLlRvU3RyaW5nKCk7DQoJCQkJaG9zdERhdGEuSWNvbi5JRCA9IGljb24uSUQ7DQoJCQkJcHJpb3JpdHkgPSBob3N0RGF0YS5Qcmlvcml0eTsNCgkJCX07DQoJCQlCdXR0b24gbXlCdXR0b24gPSBuZXcgQnV0dG9uKHRlbXBsYXRlLkNvbW1hbmQsDQoJCQkJdGhpcy5QYWNrYWdlR3JvdXAuR3JvdXAsDQoJCQkJcHJpb3JpdHksDQoJCQkJaWNvbiwNCgkJCQlDb21tYW5kVHlwZS5CdXR0b24sDQoJCQkJVXRpbC5EaXNhYmxlZERlZmF1bHQsDQoJCQkJdGhpcy5ndWlkYW5jZVBhY2thZ2UuQ2FwdGlvbiArICIuIiArIHRlbXBsYXRlLk5hbWUpOw0KCQkJQWRkQ29tbWFuZChteUJ1dHRvbiwgaG9zdERhdGEpOw0KCQkJaWYgKGhvc3REYXRhID09IG51bGwpDQoJCQl7DQoJCQkJLy8gQWRkIHRoZSB0ZW1wbGF0ZSBjb21tYW5kIGluIHRoZSBzdGFuZGFyZCBwbGFjZXMNCgkJCQlDb21tYW5kSUQgcGFyZW50Q29tbWFuZCA9IG51bGw7DQoJCQkJaWYgKHRlbXBsYXRlLktpbmQgPT0gVGVtcGxhdGVLaW5kLlByb2plY3RJdGVtKQ0KCQkJCXsNCgkJCQkJcGFyZW50Q29tbWFuZCA9IFNoZWxsQ21kRGVmLkdldFByZWRlZmluZWRDb21tYW5kSUQoQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5Qcm9qZWN0QWRkKTsNCgkJCQkJQWRkR3JvdXBQbGFjZW1lbnQobXlCdXR0b24sIHBhcmVudENvbW1hbmQpOw0KCQkJCX0NCgkJCQllbHNlIGlmICh0ZW1wbGF0ZS5LaW5kID09IFRlbXBsYXRlS2luZC5Qcm9qZWN0KQ0KCQkJCXsNCgkJCQkJcGFyZW50Q29tbWFuZCA9IFNoZWxsQ21kRGVmLkdldFByZWRlZmluZWRDb21tYW5kSUQoQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5Tb2x1dGlvbkFkZCk7DQoJCQkJCUFkZEdyb3VwUGxhY2VtZW50KG15QnV0dG9uLCBwYXJlbnRDb21tYW5kKTsNCgkJCQl9DQoJCQkJcGFyZW50Q29tbWFuZCA9IFNoZWxsQ21kRGVmLkdldFByZWRlZmluZWRDb21tYW5kSUQoQ29uZmlndXJhdGlvbi5Db21tYW5kQmFyTmFtZS5Tb2x1dGlvbkZvbGRlckFkZCk7DQoJCQkJQWRkR3JvdXBQbGFjZW1lbnQobXlCdXR0b24sIHBhcmVudENvbW1hbmQpOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSBDb21tYW5kSUQgTG9hZEJpdG1hcChTdHJpbmcgZmlsZUljb24pDQoJCXsNCgkJCURlYnVnLlByaW50KCJDVEM6IExvYWRpbmcgaWNvIHswfSIsIGZpbGVJY29uKTsNCgkJCUljb24gaWNvbiA9IG5ldyBJY29uKGZpbGVJY29uLCBDVENCaXRtYXAuSW1hZ2VTaXplLCBDVENCaXRtYXAuSW1hZ2VTaXplKTsNCgkJCWludCBpZCA9IHRoaXMuY3RjQml0bWFwLkFkZChpY29uKTsNCgkJCXJldHVybiBuZXcgQ29tbWFuZElEKHRoaXMuZ3VpZFJlY2lwZUZyYW1ld29ya1BrZ0NtZFNldCxpZCk7DQoJCX0NCg0KCQlwcml2YXRlIENvbW1hbmRJRCBDcmVhdGVCaXRtYXAoQ29uZmlndXJhdGlvbi5JY29uIGljb24pDQoJCXsNCgkJCWlmIChpY29uICE9IG51bGwgJiYgIXN0cmluZy5Jc051bGxPckVtcHR5KGljb24uRmlsZSkpDQoJCQl7DQoJCQkJc3RyaW5nIGZpbGVJY29uID0gUGF0aC5Db21iaW5lKHRoaXMuYmFzZVBhdGgsaWNvbi5GaWxlKTsNCgkJCQlyZXR1cm4gTG9hZEJpdG1hcChmaWxlSWNvbik7DQoJCQl9DQoJCQlyZXR1cm4gR2V0SWNvbihpY29uKTsNCgkJfQ0KDQoJCXByaXZhdGUgQ29tbWFuZElEIENyZWF0ZUJpdG1hcChJVnNUZW1wbGF0ZSB0ZW1wbGF0ZSkNCgkJew0KCQkJaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eSh0ZW1wbGF0ZS5JY29uRmlsZU5hbWUpKQ0KCQkJew0KCQkJCXN0cmluZyBmaWxlSWNvbiA9IG5ldyBGaWxlSW5mbyh0ZW1wbGF0ZS5GaWxlTmFtZSkuRGlyZWN0b3J5ICsgIlxcIiArIHRlbXBsYXRlLkljb25GaWxlTmFtZTsNCgkJCQlyZXR1cm4gTG9hZEJpdG1hcChmaWxlSWNvbik7DQoJCQl9DQoJCQlyZXR1cm4gU2hlbGxDbWREZWYuTWFwSWNvblRvQml0bWFwKHRlbXBsYXRlLkljb24pOw0KCQl9DQoNCgkJcHJpdmF0ZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLlJlY2lwZSBHZXRSZWNpcGVDb25maWcoc3RyaW5nIHJlY2lwZU5hbWUpDQoJCXsNCgkJCWZvcmVhY2ggKENvbmZpZ3VyYXRpb24uUmVjaXBlIHJlY2lwZSBpbiB0aGlzLmd1aWRhbmNlUGFja2FnZS5SZWNpcGVzKQ0KCQkJew0KCQkJCWlmIChyZWNpcGUuTmFtZS5FcXVhbHMocmVjaXBlTmFtZSwgU3RyaW5nQ29tcGFyaXNvbi5JbnZhcmlhbnRDdWx0dXJlSWdub3JlQ2FzZSkpDQoJCQkJew0KCQkJCQlyZXR1cm4gcmVjaXBlOw0KCQkJCX0NCgkJCX0NCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIEJ1aWxkVGVtcGxhdGVDb21tYW5kcygpDQoJCXsNCgkJCUlWc1RlbXBsYXRlc1NlcnZpY2UgdGVtcGxhdGVJbmZvID0gbmV3IFZTVGVtcGxhdGVzU2VydmljZSgpOw0KCQkJSUFzc2V0RGVzY3JpcHRpb25bXSB0ZW1wbGF0ZXMgPSB0ZW1wbGF0ZUluZm8uR2V0SG9zdEFzc2V0cyh0aGlzLmJhc2VQYXRoKTsNCgkJCWZvcmVhY2ggKElWc1RlbXBsYXRlIHRlbXBsYXRlIGluIHRlbXBsYXRlcykNCgkJCXsNCgkJCQlBZGRUZW1wbGF0ZUNvbW1hbmQodGVtcGxhdGUpOw0KCQkJfQ0KCQl9DQoJfQ0KfQ0K</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>27</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/VisualStudio/Package/RecipeFrameworkInstaller.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBEaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgTWljcm9zb2Z0LlZpc3VhbFN0dWRpby5TaGVsbDsNCnVzaW5nIE1pY3Jvc29mdC5XaW4zMjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tbW9uOw0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgU3lzdGVtLlJlZmxlY3Rpb247DQp1c2luZyBDb25maWd1cmF0aW9uID0gTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlNlcnZpY2VzOw0KdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOw0KdXNpbmcgU3lzdGVtLkNvbmZpZ3VyYXRpb24uSW5zdGFsbDsNCnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uOw0KdXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLkNvbW1vbjsNCg0KI2VuZHJlZ2lvbg0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvDQp7DQogICAgLy8vIDxzdW1tYXJ5Pg0KICAgIC8vLyBJbnN0YWxsZXIgY2xhc3MgZm9yIHRoZSBWaXN1YWwgU3R1ZGlvIGhvc3QgYW5kIGZvciBhIHBhY2thZ2UgaW4gVmlzdWFsIFN0dWRpbw0KICAgIC8vLyA8c2VlYWxzbyBjcmVmPSJJSG9zdEluc3RhbGxlciIvPg0KICAgIC8vLyA8L3N1bW1hcnk+DQoJcHVibGljIHNlYWxlZCBjbGFzcyBSZWNpcGVGcmFtZXdvcmtJbnN0YWxsZXIgOiBJSG9zdEluc3RhbGxlcg0KCXsNCgkJaW50ZXJuYWwgc2VhbGVkIGNsYXNzIEtleSA6IFJlZ2lzdHJhdGlvbkF0dHJpYnV0ZS5LZXkNCgkJew0KCQkJUmVnaXN0cnlLZXkgcmVnaXN0cnlLZXk7DQoNCgkJCXB1YmxpYyBSZWdpc3RyeUtleSBSZWdpc3RyeUtleQ0KCQkJew0KCQkJCWdldA0KCQkJCXsNCgkJCQkJcmV0dXJuIHJlZ2lzdHJ5S2V5Ow0KCQkJCX0NCgkJCX0NCg0KCQkJcHVibGljIEtleShSZWdpc3RyeUtleSByZWdpc3RyeUtleSkNCgkJCXsNCgkJCQl0aGlzLnJlZ2lzdHJ5S2V5ID0gcmVnaXN0cnlLZXk7DQoJCQl9DQoNCgkJCXB1YmxpYyBvdmVycmlkZSB2b2lkIENsb3NlKCkNCgkJCXsNCgkJCQl0aGlzLnJlZ2lzdHJ5S2V5LkNsb3NlKCk7DQoJCQl9DQoNCgkJCXB1YmxpYyBvdmVycmlkZSBSZWdpc3RyYXRpb25BdHRyaWJ1dGUuS2V5IENyZWF0ZVN1YmtleShzdHJpbmcgbmFtZSkNCgkJCXsNCgkJCQlyZXR1cm4gbmV3IEtleShyZWdpc3RyeUtleS5DcmVhdGVTdWJLZXkobmFtZSkpOw0KCQkJfQ0KDQoJCQlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTZXRWYWx1ZShzdHJpbmcgdmFsdWVOYW1lLCBvYmplY3QgdmFsdWUpDQoJCQl7DQoJCQkJaWYgKHZhbHVlIGlzIHNob3J0KQ0KCQkJCXsNCgkJCQkJdmFsdWUgPSBpbnQuUGFyc2UodmFsdWUuVG9TdHJpbmcoKSwgTnVtYmVyRm9ybWF0SW5mby5DdXJyZW50SW5mbyk7DQoJCQkJfQ0KCQkJCXJlZ2lzdHJ5S2V5LlNldFZhbHVlKHZhbHVlTmFtZSwgdmFsdWUpOw0KCQkJfQ0KDQogICAgICAgICAgICBwdWJsaWMgS2V5IE9wZW5TdWJLZXkoc3RyaW5nIG5hbWUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVnaXN0cnlLZXkgc3ViS2V5PXJlZ2lzdHJ5S2V5Lk9wZW5TdWJLZXkobmFtZSx0cnVlKTsNCiAgICAgICAgICAgICAgICBpZiAoc3ViS2V5ID09IG51bGwpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBLZXkoc3ViS2V5KTsNCiAgICAgICAgICAgIH0NCgkJfQ0KDQoJCWludGVybmFsIGNsYXNzIFJlY2lwZUZyYW1ld29ya1JlZ0NvbnRleHQgOiBSZWdpc3RyYXRpb25BdHRyaWJ1dGUuUmVnaXN0cmF0aW9uQ29udGV4dA0KCQl7DQoJCQkjcmVnaW9uIEZpZWxkcw0KDQoJCQlLZXkgcm9vdDsNCgkJCVR5cGUgY29tcG9uZW50VHlwZTsNCg0KCQkJI2VuZHJlZ2lvbg0KDQoJCQkjcmVnaW9uIENvbnN0cnVjdG9yDQoNCgkJCXB1YmxpYyBSZWNpcGVGcmFtZXdvcmtSZWdDb250ZXh0KFR5cGUgY29tcG9uZW50VHlwZSkNCgkJCXsNCgkJCQl0aGlzLmNvbXBvbmVudFR5cGUgPSBjb21wb25lbnRUeXBlOw0KCQkJCURlZmF1bHRSZWdpc3RyeVJvb3RBdHRyaWJ1dGUgcm9vdEF0dHJpYiA9IChEZWZhdWx0UmVnaXN0cnlSb290QXR0cmlidXRlKQ0KCQkJCQlBdHRyaWJ1dGUuR2V0Q3VzdG9tQXR0cmlidXRlKA0KCQkJCQkJdHlwZW9mKFJlY2lwZU1hbmFnZXJQYWNrYWdlKSwgDQoJCQkJCQl0eXBlb2YoRGVmYXVsdFJlZ2lzdHJ5Um9vdEF0dHJpYnV0ZSkpOw0KCQkJCWlmIChyb290QXR0cmliID09IG51bGwpDQoJCQkJew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihQcm9wZXJ0aWVzLlJlc291cmNlcy5NaXNzaW5nX1JlZ1Jvb3QpOw0KICAgICAgICAgICAgICAgIH0NCgkJCQlyb290ID0gbmV3IEtleShSZWdpc3RyeS5Mb2NhbE1hY2hpbmUuT3BlblN1YktleShyb290QXR0cmliLlJvb3QsIHRydWUpKTsNCgkJCX0NCg0KCQkJI2VuZHJlZ2lvbg0KDQoJCQkjcmVnaW9uIE92ZXJyaWRlcw0KDQoJCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIENvZGVCYXNlDQoJCQl7DQoJCQkJZ2V0DQoJCQkJew0KCQkJCQlyZXR1cm4gY29tcG9uZW50VHlwZS5Bc3NlbWJseS5Db2RlQmFzZTsNCgkJCQl9DQoJCQl9DQoNCgkJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgQ29tcG9uZW50UGF0aA0KCQkJew0KCQkJCWdldA0KCQkJCXsNCgkJCQkJcmV0dXJuIFBhdGguR2V0RGlyZWN0b3J5TmFtZShuZXcgVXJpKGNvbXBvbmVudFR5cGUuQXNzZW1ibHkuQ29kZUJhc2UpLkxvY2FsUGF0aCk7DQoJCQkJfQ0KCQkJfQ0KDQoJCQlwdWJsaWMgb3ZlcnJpZGUgVHlwZSBDb21wb25lbnRUeXBlDQoJCQl7DQoJCQkJZ2V0DQoJCQkJew0KCQkJCQlyZXR1cm4gY29tcG9uZW50VHlwZTsNCgkJCQl9DQoJCQl9DQoNCgkJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgSW5wcm9jU2VydmVyUGF0aA0KCQkJew0KCQkJCWdldA0KCQkJCXsNCgkJCQkJaWYgKGNvbXBvbmVudFR5cGUgPT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJcmV0dXJuIG51bGw7DQoJCQkJCX0NCgkJCQkJc3RyaW5nIHRleHRNU0NvcmVlID0gIm1zY29yZWUuZGxsIjsNCgkJCQkJc3RyaW5nIG1zY29yZWVGaWxlTmFtZSA9IHRleHRNU0NvcmVlOw0KCQkJCQl0cnkNCgkJCQkJew0KCQkJCQkJZm9yZWFjaCAoUHJvY2Vzc01vZHVsZSBtb2R1bGUgaW4gUHJvY2Vzcy5HZXRDdXJyZW50UHJvY2VzcygpLk1vZHVsZXMpDQoJCQkJCQl7DQoJCQkJCQkJaWYgKHN0cmluZy5Db21wYXJlKG1vZHVsZS5Nb2R1bGVOYW1lLCB0ZXh0TVNDb3JlZSwgdHJ1ZSwgQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSkgPT0gMCkNCgkJCQkJCQl7DQoJCQkJCQkJCW1zY29yZWVGaWxlTmFtZSA9IG1vZHVsZS5GaWxlTmFtZTsNCgkJCQkJCQkJYnJlYWs7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0KCQkJCQkJcmV0dXJuIG1zY29yZWVGaWxlTmFtZTsNCgkJCQkJfQ0KCQkJCQljYXRjaCAoRXhjZXB0aW9uKQ0KCQkJCQl7DQoJCQkJCX0NCgkJCQkJcmV0dXJuIG1zY29yZWVGaWxlTmFtZTsNCgkJCQl9DQoJCQl9DQoNCgkJCXB1YmxpYyBvdmVycmlkZSBUZXh0V3JpdGVyIExvZw0KCQkJew0KCQkJCWdldA0KCQkJCXsNCgkJCQkJcmV0dXJuIENvbnNvbGUuT3V0Ow0KCQkJCX0NCgkJCX0NCg0KCQkJcHVibGljIG92ZXJyaWRlIFJlZ2lzdHJhdGlvbk1ldGhvZCBSZWdpc3RyYXRpb25NZXRob2QNCgkJCXsNCgkJCQlnZXQNCgkJCQl7DQoJCQkJCXJldHVybiBSZWdpc3RyYXRpb25NZXRob2QuQ29kZUJhc2U7DQoJCQkJfQ0KCQkJfQ0KDQoJCQlwdWJsaWMgb3ZlcnJpZGUgUmVnaXN0cmF0aW9uQXR0cmlidXRlLktleSBDcmVhdGVLZXkoc3RyaW5nIG5hbWUpDQoJCQl7DQoJCQkJcmV0dXJuIG5ldyBLZXkodGhpcy5yb290LlJlZ2lzdHJ5S2V5LkNyZWF0ZVN1YktleShuYW1lKSk7DQoJCQl9DQoNCgkJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgRXNjYXBlUGF0aChzdHJpbmcgc3RyKQ0KCQkJew0KCQkJCXJldHVybiBzdHI7DQoJCQl9DQoNCgkJCXB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbW92ZUtleShzdHJpbmcgbmFtZSkNCgkJCXsNCgkJCQl1c2luZyAoUmVnaXN0cnlLZXkga2V5ID0gdGhpcy5yb290LlJlZ2lzdHJ5S2V5Lk9wZW5TdWJLZXkobmFtZSkpDQoJCQkJew0KCQkJCQlpZiAoa2V5ICE9IG51bGwpDQoJCQkJCXsNCgkJCQkJCXRoaXMucm9vdC5SZWdpc3RyeUtleS5EZWxldGVTdWJLZXlUcmVlKG5hbWUpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KDQoJCQlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW1vdmVWYWx1ZShzdHJpbmcga2V5bmFtZSwgc3RyaW5nIHZhbHVlbmFtZSkNCgkJCXsNCgkJCQl1c2luZyAoUmVnaXN0cnlLZXkga2V5ID0gdGhpcy5yb290LlJlZ2lzdHJ5S2V5Lk9wZW5TdWJLZXkoa2V5bmFtZSwgdHJ1ZSkpDQoJCQkJew0KCQkJCQlpZiAoa2V5ICE9IG51bGwpDQoJCQkJCXsNCgkJCQkJCWtleS5EZWxldGVWYWx1ZSh2YWx1ZW5hbWUsIGZhbHNlKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCg0KICAgICAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVtb3ZlS2V5SWZFbXB0eShzdHJpbmcgbmFtZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB1c2luZyhSZWdpc3RyeUtleSBrZXkgPSB0aGlzLnJvb3QuUmVnaXN0cnlLZXkuT3BlblN1YktleShuYW1lKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICgoa2V5LkdldFN1YktleU5hbWVzKCkuTGVuZ3RoID09IDApICYmIChrZXkuR2V0VmFsdWVOYW1lcygpLkxlbmd0aCA9PSAwKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290LlJlZ2lzdHJ5S2V5LkRlbGV0ZVN1YktleShuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KCQkJI2VuZHJlZ2lvbg0KCQl9DQoNCgkJaW50ZXJuYWwgc2VhbGVkIGNsYXNzIEd1aWRhbmNlUGFja2FnZVJlZ0NvbnRleHQgOiBSZWNpcGVGcmFtZXdvcmtSZWdDb250ZXh0LCBJQ29uZmlndXJhdGlvblNlcnZpY2UNCgkJew0KCQkJI3JlZ2lvbiBQcm9wZXJ0aWVzDQoNCiAgICAgICAgICAgIHB1YmxpYyBDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBHdWlkYW5jZVBhY2thZ2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gZ3VpZGFuY2VQYWNrYWdlOyB9DQogICAgICAgICAgICB9IENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIGd1aWRhbmNlUGFja2FnZTsNCg0KCQkJI2VuZHJlZ2lvbg0KDQoJCQkjcmVnaW9uIENvbnN0cnVjdG9yDQoNCgkJCXB1YmxpYyBHdWlkYW5jZVBhY2thZ2VSZWdDb250ZXh0KENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIGd1aWRhbmNlUGFja2FnZSxzdHJpbmcgYmFzZVBhdGgpOmJhc2UobmV3IFZzR3VpZGFuY2VQYWNrYWdlVHlwZShndWlkYW5jZVBhY2thZ2UpKQ0KCQkJew0KCQkJCXRoaXMuZ3VpZGFuY2VQYWNrYWdlID0gZ3VpZGFuY2VQYWNrYWdlOw0KCQkJCXRoaXMuYmFzZVBhdGggPSBiYXNlUGF0aDsNCgkJCX0NCg0KCQkJI2VuZHJlZ2lvbg0KDQoJCQkjcmVnaW9uIE92ZXJyaWRlcw0KDQoJCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIENvbXBvbmVudFBhdGggDQoJCQl7IA0KCQkJCWdldA0KCQkJCXsNCgkJCQkJcmV0dXJuIGJhc2VQYXRoOw0KCQkJCX0NCiAgICAgICAgICAgIH0gc3RyaW5nIGJhc2VQYXRoOw0KDQoJCQkjZW5kcmVnaW9uDQoNCgkJCSNyZWdpb24gSUNvbmZpZ3VyYXRpb25TZXJ2aWNlIE1lbWJlcnMNCg0KCQkJQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgSUNvbmZpZ3VyYXRpb25TZXJ2aWNlLkN1cnJlbnRQYWNrYWdlDQoJCQl7DQoJCQkJZ2V0IHsgcmV0dXJuIGd1aWRhbmNlUGFja2FnZTsgfQ0KCQkJfQ0KDQoJCQlDb25maWd1cmF0aW9uLlJlY2lwZSBJQ29uZmlndXJhdGlvblNlcnZpY2UuQ3VycmVudFJlY2lwZQ0KCQkJew0KCQkJCWdldCB7IHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpOyB9DQoJCQl9DQoNCgkJCW9iamVjdCBJQ29uZmlndXJhdGlvblNlcnZpY2UuQ3VycmVudEdhdGhlcmluZ1NlcnZpY2VEYXRhDQoJCQl7DQoJCQkJZ2V0IHsgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXhjZXB0aW9uKCk7IH0NCgkJCX0NCg0KCQkJc3RyaW5nIElDb25maWd1cmF0aW9uU2VydmljZS5CYXNlUGF0aA0KCQkJew0KCQkJCWdldCB7IHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpOyB9DQoJCQl9DQoNCgkJCSNlbmRyZWdpb24NCg0KCQl9DQoNCgkJaW50ZXJuYWwgc2VhbGVkIGNsYXNzIFZzR3VpZGFuY2VQYWNrYWdlVHlwZSA6IFR5cGVEZWxlZ2F0b3INCgkJew0KCQkJQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgcGFja2FnZUNvbmZpZzsNCg0KCQkJcHVibGljIFZzR3VpZGFuY2VQYWNrYWdlVHlwZShDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlQ29uZmlnKQ0KCQkJCTogYmFzZSh0eXBlb2YoVnNHdWlkYW5jZVBhY2thZ2UpKQ0KCQkJew0KCQkJCXRoaXMucGFja2FnZUNvbmZpZyA9IHBhY2thZ2VDb25maWc7DQoJCQl9DQoNCgkJCSNyZWdpb24gT3ZlcnJpZGVzDQoNCgkJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgTmFtZQ0KCQkJew0KCQkJCWdldCANCgkJCQl7DQoJCQkJCXJldHVybiBwYWNrYWdlQ29uZmlnLkd1aWQ7IA0KCQkJCX0NCgkJCX0NCgkJCXB1YmxpYyBvdmVycmlkZSBHdWlkIEdVSUQNCgkJCXsNCgkJCQlnZXQgDQoJCQkJew0KCQkJCQlyZXR1cm4gbmV3IEd1aWQocGFja2FnZUNvbmZpZy5HdWlkKTsgDQoJCQkJfQ0KCQkJfQ0KDQoJCQkjZW5kcmVnaW9uDQoJCX0NCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBSZXF1aXJlZCBkZWZhdWx0IGNvbnN0cnVjdG9yDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBSZWNpcGVGcmFtZXdvcmtJbnN0YWxsZXIoKQ0KCQl7DQogICAgICAgIH0NCg0KICAgICAgICAjcmVnaW9uIFByaXZhdGUgSW1wbGVtZW50YXRpb24NCg0KICAgICAgICBpbnRlcm5hbCBzdGF0aWMgdm9pZCBSZWdpc3RlckludGVybmFsKFJlY2lwZUZyYW1ld29ya1JlZ0NvbnRleHQgY29udGV4dCwgYm9vbCByZWdpc3RlcikNCgkJew0KCQkJb2JqZWN0W10gYXR0cmlicyA9IGNvbnRleHQuQ29tcG9uZW50VHlwZS5HZXRDdXN0b21BdHRyaWJ1dGVzKHRydWUpOw0KCQkJZm9yZWFjaCAob2JqZWN0IGF0dHJpYiBpbiBhdHRyaWJzKQ0KCQkJew0KCQkJCWlmIChhdHRyaWIgaXMgUmVnaXN0cmF0aW9uQXR0cmlidXRlKQ0KCQkJCXsNCgkJCQkJUmVnaXN0cmF0aW9uQXR0cmlidXRlIHJlZ2lzdGVyQXR0cmlidXRlID0gKFJlZ2lzdHJhdGlvbkF0dHJpYnV0ZSlhdHRyaWI7DQoJCQkJCWlmIChyZWdpc3RlcikNCgkJCQkJew0KCQkJCQkJcmVnaXN0ZXJBdHRyaWJ1dGUuUmVnaXN0ZXIoY29udGV4dCk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQlyZWdpc3RlckF0dHJpYnV0ZS5VbnJlZ2lzdGVyKGNvbnRleHQpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSB2b2lkIFJlZ2lzdGVyVGVtcGxhdGVzKEd1aWRhbmNlUGFja2FnZVJlZ0NvbnRleHQgY29udGV4dCwgYm9vbCByZWdpc3RlcikNCiAgICAgICAgew0KICAgICAgICAgICAgSVZzVGVtcGxhdGVzU2VydmljZSB0ZW1wbGF0ZVNlcnZpY2UgPSBuZXcgVGVtcGxhdGVzLlZTVGVtcGxhdGVzU2VydmljZSgpOw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChyZWdpc3RlcikNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlU2VydmljZS5SZWdpc3RlclRlbXBsYXRlcyhjb250ZXh0LkNvbXBvbmVudFBhdGgsIGNvbnRleHQuR3VpZGFuY2VQYWNrYWdlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVTZXJ2aWNlLlVucmVnaXN0ZXJUZW1wbGF0ZXMoY29udGV4dC5Db21wb25lbnRQYXRoLCBjb250ZXh0Lkd1aWRhbmNlUGFja2FnZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSB2b2lkIFJlZ2lzdGVyQXNzZW1ibHkoYm9vbCByZWdpc3RlcikNCiAgICAgICAgew0KICAgICAgICAgICAgUmVnaXN0cmF0aW9uU2VydmljZXMgcmVnU2VydmljZXMgPSBuZXcgUmVnaXN0cmF0aW9uU2VydmljZXMoKTsNCiAgICAgICAgICAgIGlmIChyZWdpc3RlcikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZWdTZXJ2aWNlcy5SZWdpc3RlckFzc2VtYmx5KEdldFR5cGUoKS5Bc3NlbWJseSwgQXNzZW1ibHlSZWdpc3RyYXRpb25GbGFncy5TZXRDb2RlQmFzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmVnU2VydmljZXMuVW5yZWdpc3RlckFzc2VtYmx5KEdldFR5cGUoKS5Bc3NlbWJseSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KCQlwcml2YXRlIHZvaWQgUmVnaXN0ZXJQYWNrYWdlKEluc3RhbGxDb250ZXh0IGluc3RhbGxDb250ZXh0LCBib29sIHJlZ2lzdGVyLCBDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlQ29uZmlnKQ0KCQl7DQogICAgICAgICAgICBpZiAocGFja2FnZUNvbmZpZy5HdWlkID09IG51bGwgfHwgcGFja2FnZUNvbmZpZy5HdWlkLkxlbmd0aCA9PSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeXN0ZW0uQ29uZmlndXJhdGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uKFN0cmluZy5Gb3JtYXQoDQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0aWVzLlJlc291cmNlcy5QYWNrYWdlX1BhY2thZ2VOZWVkc0d1aWQsDQogICAgICAgICAgICAgICAgICAgIHBhY2thZ2VDb25maWcuQ2FwdGlvbikpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHBhY2thZ2VDb25maWcuUmVjaXBlcy5MZW5ndGggPiAyNTUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oUHJvcGVydGllcy5SZXNvdXJjZXMuUmVjaXBlc19NYXhpbXVtRXhjZWVkZWQpOw0KICAgICAgICAgICAgfQ0KCQkgICAgaWYgKGluc3RhbGxDb250ZXh0ID09IG51bGwpDQoJCSAgICB7DQoJCQkgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigiaW5zdGFsbENvbnRleHQiKTsNCgkJICAgIH0NCgkJICAgIGlmICghaW5zdGFsbENvbnRleHQuUGFyYW1ldGVycy5Db250YWluc0tleShNYW5pZmVzdEluc3RhbGxlci5QYXJhbWV0ZXJDb25maWd1cmF0aW9uKSkNCgkJICAgIHsNCgkJCSAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKE1hbmlmZXN0SW5zdGFsbGVyLlBhcmFtZXRlckNvbmZpZ3VyYXRpb24pOw0KCQkgICAgfQ0KICAgICAgICAgICAgc3RyaW5nIGJhc2VQYXRoID0gaW5zdGFsbENvbnRleHQuUGFyYW1ldGVyc1tNYW5pZmVzdEluc3RhbGxlci5QYXJhbWV0ZXJDb25maWd1cmF0aW9uXTsNCiAgICAgICAgICAgIGlmICghUGF0aC5Jc1BhdGhSb290ZWQoYmFzZVBhdGgpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJhc2VQYXRoID0gbmV3IEZpbGVJbmZvKGJhc2VQYXRoKS5EaXJlY3RvcnlOYW1lOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJhc2VQYXRoID0gUGF0aC5HZXREaXJlY3RvcnlOYW1lKGJhc2VQYXRoKTsNCiAgICAgICAgICAgIH0NCgkJICAgIEd1aWRhbmNlUGFja2FnZVJlZ0NvbnRleHQgY29udGV4dCA9IG5ldyBHdWlkYW5jZVBhY2thZ2VSZWdDb250ZXh0KHBhY2thZ2VDb25maWcsIGJhc2VQYXRoKTsNCiAgICAgICAgICAgIGlmIChyZWdpc3RlcikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBSZWdpc3RlclRlbXBsYXRlcyhjb250ZXh0LCByZWdpc3Rlcik7DQogICAgICAgICAgICAgICAgUmVnaXN0ZXJJbnRlcm5hbChjb250ZXh0LCByZWdpc3Rlcik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgUmVnaXN0ZXJJbnRlcm5hbChjb250ZXh0LCByZWdpc3Rlcik7DQogICAgICAgICAgICAgICAgUmVnaXN0ZXJUZW1wbGF0ZXMoY29udGV4dCwgcmVnaXN0ZXIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCgkJcHJpdmF0ZSB2b2lkIFJlZ2lzdGVySG9zdChJbnN0YWxsQ29udGV4dCBpbnN0YWxsQ29udGV4dCwgYm9vbCByZWdpc3RlcikNCgkJew0KICAgICAgICAgICAgUmVnaXN0ZXJBc3NlbWJseShyZWdpc3Rlcik7DQogICAgICAgICAgICBSZWNpcGVGcmFtZXdvcmtSZWdDb250ZXh0IGNvbnRleHQgPSBuZXcgUmVjaXBlRnJhbWV3b3JrUmVnQ29udGV4dCh0eXBlb2YoUmVjaXBlTWFuYWdlclBhY2thZ2UpKTsNCiAgICAJCVJlZ2lzdGVySW50ZXJuYWwoY29udGV4dCwgcmVnaXN0ZXIpOw0KICAgICAgICB9DQoNCiAgICAgICAgI2VuZHJlZ2lvbg0KICAgICAgICANCiAgICAgICAgI3JlZ2lvbiBJSG9zdEluc3RhbGxlciBNZW1iZXJzDQoNCiAgICAgICAgdm9pZCBJSG9zdEluc3RhbGxlci5JbnN0YWxsSG9zdChJbnN0YWxsQ29udGV4dCBjb250ZXh0KQ0KCQl7DQogICAgICAgICAgICBSZWdpc3Rlckhvc3QoY29udGV4dCwgdHJ1ZSk7DQoJCX0NCg0KCQl2b2lkIElIb3N0SW5zdGFsbGVyLlVuaW5zdGFsbEhvc3QoSW5zdGFsbENvbnRleHQgY29udGV4dCkNCgkJew0KICAgICAgICAgICAgUmVnaXN0ZXJIb3N0KGNvbnRleHQsIGZhbHNlKTsNCgkJfQ0KDQoJCXZvaWQgSUhvc3RJbnN0YWxsZXIuSW5zdGFsbFBhY2thZ2UoSW5zdGFsbENvbnRleHQgY29udGV4dCwgQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgcGFja2FnZUNvbmZpZykNCgkJew0KCQkJUmVnaXN0ZXJQYWNrYWdlKGNvbnRleHQsIHRydWUsIHBhY2thZ2VDb25maWcpOw0KCQl9DQoNCgkJdm9pZCBJSG9zdEluc3RhbGxlci5Vbmluc3RhbGxQYWNrYWdlKEluc3RhbGxDb250ZXh0IGNvbnRleHQsIENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2VDb25maWcpDQoJCXsNCgkJCVJlZ2lzdGVyUGFja2FnZShjb250ZXh0LCBmYWxzZSwgcGFja2FnZUNvbmZpZyk7DQoJCX0NCg0KCQkjZW5kcmVnaW9uDQoJfQ0KfQ0K</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>20</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/VisualStudio/Package/Services/ReferenceRestoreService.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">I3JlZ2lvbiB1c2luZw0KdXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLlRleHQ7DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7DQp1c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tbW9uOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21wb25lbnRNb2RlbDsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlNlcnZpY2VzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlNlcnZpY2VzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5XaXphcmRGcmFtZXdvcmsuQ29uZmlndXJhdGlvbjsNCnVzaW5nIENvbmZpZyA9IE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbmZpZ3VyYXRpb247DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLldpemFyZEZyYW1ld29yazsNCnVzaW5nIFN5c3RlbS5YbWw7DQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVtcGxhdGVzOw0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgRW52RFRFOw0KdXNpbmcgRW52RFRFODA7DQp1c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7DQp1c2luZyBTeXN0ZW0uV2luZG93cy5Gb3JtczsNCnVzaW5nIE1pY3Jvc29mdC5XaW4zMjsNCnVzaW5nIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkRlc2lnbjsNCiNlbmRyZWdpb24NCg0KbmFtZXNwYWNlIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5TZXJ2aWNlcw0Kew0KCS8vLyA8c3VtbWFyeT4NCiAgICAvLy8gQ2xhc3MgaW4gY2hhcmdlIG9mIGNvbGxlY3RpbmcgdGhlIGJyb2tlbiByZWZlcmVuY2VzDQogICAgLy8vIGFuZCB0byBzaG93IGEgd2l6YXJkIHdpdGggdGhlIGRhbmdsaW5nIHJlZmVyZW5jZXMNCiAgICAvLy8gPC9zdW1tYXJ5Pg0KCVtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduZXJDYXRlZ29yeSgiQ29kZSIpXQ0KCVtTZXJ2aWNlRGVwZW5kZW5jeSh0eXBlb2YoSVJlY2lwZU1hbmFnZXJTZXJ2aWNlKSldDQoJW1NlcnZpY2VEZXBlbmRlbmN5KHR5cGVvZihEVEUpKV0NCglbU2VydmljZURlcGVuZGVuY3kodHlwZW9mKElIb3N0U2VydmljZSkpXQ0KCVtTZXJ2aWNlRGVwZW5kZW5jeSh0eXBlb2YoSVBlcnNpc3RlbmNlU2VydmljZSkpXQ0KCWludGVybmFsIGNsYXNzIFJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlIDogQ29tcG9uZW50DQogICAgew0KCQkjcmVnaW9uIEZpZWxkcw0KCQlwcml2YXRlIElSZWNpcGVNYW5hZ2VyU2VydmljZSBtYW5hZ2VyOw0KCQlwcml2YXRlIEVudkRURS5EVEUgdnM7DQoJCXByaXZhdGUgQXJyYXlMaXN0IHJlZmVyZW5jZXNUb0ZpeDsNCgkJI2VuZHJlZ2lvbg0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFBlcmZvcm1zIHRoZSB2YWxpZGF0aW9uIG9mIGFsbCByZWZlcmVuY2VzDQoJCS8vLyBhbmQgZm9yIHRoZSBvbmVzIHRoYXQgYXJlIGRhbmdsaW5nDQoJCS8vLyBJdCB3aWxsIGNyZWF0ZSBhIGRpYWxvZyBpbiBvcmRlciB0byBnZXQgdGhlIG5ldyB2YWxpZA0KCQkvLy8gdGFyZ2V0cw0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgdm9pZCBQZXJmb3JtVmFsaWRhdGlvbigpDQoJCXsNCgkJCW1hbmFnZXIgPSAoSVJlY2lwZU1hbmFnZXJTZXJ2aWNlKQ0KCQkJCVNlcnZpY2VIZWxwZXIuR2V0U2VydmljZSh0aGlzLCB0eXBlb2YoSVJlY2lwZU1hbmFnZXJTZXJ2aWNlKSk7DQoJCQl2cyA9IChFbnZEVEUuRFRFKUdldFNlcnZpY2UodHlwZW9mKEVudkRURS5EVEUpKTsNCgkJCXJlZmVyZW5jZXNUb0ZpeCA9IG5ldyBBcnJheUxpc3QoKTsNCgkJCXRyeQ0KCQkJew0KCQkJCUNoZWNrUmVmZXJlbmNlcygpOw0KCQkJCVBlcmZvcm1SZXN0b3JlKCk7DQoJCQl9DQoJCQljYXRjaCAoRXhjZXB0aW9uIGV4KQ0KCQkJew0KCQkJCUVycm9ySGVscGVyLlNob3coZXgsIFByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX0Vycm9yKTsNCgkJCX0NCgkJfQ0KDQoJCSNyZWdpb24gUGVyZm9ybXMgUmVzdG9yZQ0KCQlwcml2YXRlIHZvaWQgQ2hlY2tSZWZlcmVuY2VzKCkNCgkJew0KCQkJU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lciBjb250YWluZXIgPSAoU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lcilHZXRTZXJ2aWNlKHR5cGVvZihJSG9zdFNlcnZpY2UpKTsNCgkJCUlQZXJzaXN0ZW5jZVNlcnZpY2UgcGVyc2lzdCA9IChJUGVyc2lzdGVuY2VTZXJ2aWNlKWNvbnRhaW5lci5HZXRTZXJ2aWNlKHR5cGVvZihJUGVyc2lzdGVuY2VTZXJ2aWNlKSwgdHJ1ZSk7DQoJCQkNCgkJCWZvcmVhY2ggKG9iamVjdCBvYmogaW4gY29udGFpbmVyLkNvbXBvbmVudHMpDQoJCQl7DQoJCQkJaWYgKG9iaiBpcyBWc0d1aWRhbmNlUGFja2FnZSkNCgkJCQl7DQoJCQkJCUd1aWRhbmNlUGFja2FnZSBwYWNrYWdlID0gKChWc0d1aWRhbmNlUGFja2FnZSlvYmopLkd1aWRhbmNlUGFja2FnZTsNCg0KCQkJCQlpZiAoKHBhY2thZ2UgPT0gbnVsbCkgfHwgKHBhY2thZ2UuQ29uZmlndXJhdGlvbiA9PSBudWxsKSkNCgkJCQkJew0KCQkJCQkJY29udGludWU7DQoJCQkJCX0NCg0KCQkJCQlmb3JlYWNoIChJQXNzZXRSZWZlcmVuY2UgcmVmZXJlbmNlIGluIHBlcnNpc3QuTG9hZFJlZmVyZW5jZXMocGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpKQ0KCQkJCQl7DQoJCQkJCQlpZiAocmVmZXJlbmNlIGlzIElCb3VuZEFzc2V0UmVmZXJlbmNlKQ0KCQkJCQkJew0KCQkJCQkJCUlCb3VuZEFzc2V0UmVmZXJlbmNlIGJvdW5kUmVmZXJlbmNlID0gKElCb3VuZEFzc2V0UmVmZXJlbmNlKXJlZmVyZW5jZTsNCgkJCQkJCQlpZiAoYm91bmRSZWZlcmVuY2UuVGFyZ2V0ID09IG51bGwpDQoJCQkJCQkJew0KCQkJCQkJCQlyZWZlcmVuY2VzVG9GaXguQWRkKA0KCQkJCQkJCQkJbmV3IEZpeHVwUmVmZXJlbmNlKHBhY2thZ2UsIHJlZmVyZW5jZS5Bc3NldE5hbWUsIGJvdW5kUmVmZXJlbmNlKSk7DQoJCQkJCQkJfQ0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9CQkJCQ0KCQkNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gSXQgY3JlYXRlcyBhIGR5bmFtaWMgcmVjaXBlIGluIG9yZGVyIHRvIHNob3cgYSBkaWFsb2cgdGhhdCBhc2tzIHRoZSB1c2VyDQoJCS8vLyB0byBpbnRyb2R1Y2UgbmV3IHRhcmdldHMgZm9yIGFsbCBkYW5nbGluZyByZWZlcmVuY2VzDQoJCS8vLyA8L3N1bW1hcnk+DQogICAgICAgIHByaXZhdGUgdm9pZCBQZXJmb3JtUmVzdG9yZSgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChyZWZlcmVuY2VzVG9GaXguQ291bnQgPT0gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCgkJCSNyZWdpb24gQXNraW5nIHRvIHRoZSB1c2VyDQoNCgkJCXN0cmluZyBtc2c7DQoJCQlzdHJpbmcgZGV0YWlsczsNCgkJCUJ1aWxkTWVzc2FnZShvdXQgbXNnLCBvdXQgZGV0YWlscyk7DQoNCgkJCWlmIChFcnJvckhlbHBlci5Bc2soUHJvcGVydGllcy5SZXNvdXJjZXMuUmVmZXJlbmNlUmVzdG9yZVNlcnZpY2VfU3RhcnRUaXRsZSwgbXNnLCBkZXRhaWxzLCANCgkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VSZXN0b3JlU2VydmljZV9SZXNvbHZlQnV0dG9uLCANCgkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VSZXN0b3JlU2VydmljZV9SZW1vdmVCdXR0b24pDQoJCQkJPT0gU3lzdGVtLldpbmRvd3MuRm9ybXMuRGlhbG9nUmVzdWx0Lk5vKQ0KICAgICAgICAgICAgew0KCQkJCUlBc3NldFJlZmVyZW5jZVNlcnZpY2UgcmVmZXJlbmNlU2VydmljZSA9IG51bGw7DQoJCQkJR3VpZGFuY2VQYWNrYWdlIGxhc3RQYWNrYWdlID0gbnVsbDsNCgkJCQlmb3JlYWNoIChGaXh1cFJlZmVyZW5jZSBsb3N0UmVmZXJlbmNlIGluIHJlZmVyZW5jZXNUb0ZpeCkNCgkJCQl7DQoJCQkJCWlmIChsYXN0UGFja2FnZSAhPSBsb3N0UmVmZXJlbmNlLk93bmluZ1BhY2thZ2UpDQoJCQkJCXsNCgkJCQkJCXJlZmVyZW5jZVNlcnZpY2UgPQ0KCQkJCQkJCShJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlKVNlcnZpY2VIZWxwZXIuR2V0U2VydmljZShsb3N0UmVmZXJlbmNlLk93bmluZ1BhY2thZ2UsDQoJCQkJCQkJdHlwZW9mKElBc3NldFJlZmVyZW5jZVNlcnZpY2UpLCB0aGlzKTsNCgkJCQkJfQ0KCQkJCQlyZWZlcmVuY2VTZXJ2aWNlLlJlbW92ZShsb3N0UmVmZXJlbmNlLk9sZFJlZmVyZW5jZSk7DQoJCQkJfQ0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJI2VuZHJlZ2lvbg0KDQoJCQkvLyBUaGUgcGVuZGluZyBGaXh1cFJlZmVyZW5jZXMgd2UgYWRkZWQgdG8gdGhlIGxpc3Qgd2lsbCBiZSBvcmRlcmVkIA0KICAgICAgICAgICAgLy8gYnkgdGhlIHRlbXBsYXRlIHRoZXkgd2VyZSBpbiwgc28gd2UgY2FuIGp1c3QgYnVpbGQgYSB3aXphcmQgcGFnZQ0KICAgICAgICAgICAgLy8gZm9yIGVhY2ggZ3JvdXAgb2YgWCBvZiBmaWVsZHMgZm9yIGZpeHVwLg0KICAgICAgICAgICAgaW50IG1heGZpZWxkcyA9IDU7DQoNCiAgICAgICAgICAgIC8vIFVzZWQgdG8gY3JlYXRlIGNvbmZpZ3VyYXRpb24gYXR0cmlidXRlcw0KICAgICAgICAgICAgWG1sRG9jdW1lbnQgeG1sZmFjdG9yeSA9IG5ldyBYbWxEb2N1bWVudCgpOw0KDQogICAgICAgICAgICAvLyBDcmVhdGUgYSBwYWNrYWdlIGR5bmFtaWNhbGx5Lg0KCQkJQ29uZmlnLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlID0gQ3JlYXRlRHluYW1pY1BhY2thZ2UoKTsNCg0KCQkJQ29uZmlnLlJlY2lwZSByZWNpcGU7DQoJCQlBcnJheUxpc3QgYXJndW1lbnRzOw0KCQkJQXJyYXlMaXN0IGFjdGlvbnM7DQoJCQlDcmVhdGVEeW5hbWljUmVjaXBlKHBhY2thZ2UsIG91dCByZWNpcGUsIG91dCBhcmd1bWVudHMsIG91dCBhY3Rpb25zKTsNCg0KICAgICAgICAgICAgUGFnZSBsYXN0cGFnZSA9IG51bGw7DQogICAgICAgICAgICBBcnJheUxpc3QgcGFnZXMgPSBuZXcgQXJyYXlMaXN0KCk7DQogICAgICAgICAgICBBcnJheUxpc3QgZmllbGRzID0gbmV3IEFycmF5TGlzdChtYXhmaWVsZHMpOw0KICAgICAgICAgICAgSGFzaHRhYmxlIGFyZ3VtZW50TmFtZXNVc2VkID0gbmV3IEhhc2h0YWJsZSg3KTsNCg0KICAgICAgICAgICAgaW50IG5QYWdlcyA9IHJlZmVyZW5jZXNUb0ZpeC5Db3VudCAvIG1heGZpZWxkczsNCgkJCWlmICgocmVmZXJlbmNlc1RvRml4LkNvdW50ICUgbWF4ZmllbGRzKSAhPSAwKQ0KCQkJew0KCQkJCW5QYWdlcysrOw0KCQkJfQ0KDQoJCQlIYXNodGFibGUgcmVmZXJlbmNlRGljdGlvbmFyeSA9IENyZWF0ZUZpeHVwUGFnZXMobWF4ZmllbGRzLCB4bWxmYWN0b3J5LCANCgkJCQlhcmd1bWVudHMsIGFjdGlvbnMsIHJlZiBsYXN0cGFnZSwgcGFnZXMsIHJlZiBmaWVsZHMsIG5QYWdlcyk7DQoNCiAgICAgICAgICAgIGxhc3RwYWdlLkZpZWxkcyA9IG5ldyBGaWVsZFtmaWVsZHMuQ291bnRdOw0KICAgICAgICAgICAgZmllbGRzLkNvcHlUbyhsYXN0cGFnZS5GaWVsZHMsIDApOw0KDQogICAgICAgICAgICByZWNpcGUuQXJndW1lbnRzID0gbmV3IENvbmZpZy5Bcmd1bWVudFthcmd1bWVudHMuQ291bnRdOw0KICAgICAgICAgICAgYXJndW1lbnRzLkNvcHlUbyhyZWNpcGUuQXJndW1lbnRzLCAwKTsNCgkJCWlmIChyZWNpcGUuQWN0aW9ucyA9PSBudWxsKSByZWNpcGUuQWN0aW9ucyA9IG5ldyBDb25maWcuUmVjaXBlQWN0aW9ucygpOw0KICAgICAgICAgICAgcmVjaXBlLkFjdGlvbnMuQWN0aW9uID0gbmV3IENvbmZpZy5BY3Rpb25bYWN0aW9ucy5Db3VudF07DQogICAgICAgICAgICBhY3Rpb25zLkNvcHlUbyhyZWNpcGUuQWN0aW9ucy5BY3Rpb24sIDApOw0KDQogICAgICAgICAgICBXaXphcmQgd2l6YXJkID0gbmV3IFdpemFyZCgpOw0KICAgICAgICAgICAgd2l6YXJkLlNjaGVtYVZlcnNpb24gPSAiMS4wIjsNCiAgICAgICAgICAgIHdpemFyZC5QYWdlcyA9IG5ldyBQYWdlW3BhZ2VzLkNvdW50XTsNCiAgICAgICAgICAgIHBhZ2VzLkNvcHlUbyh3aXphcmQuUGFnZXMsIDApOw0KDQogICAgICAgICAgICAvLyBHZXQgdGhlIHdpemFyZCBpbiBYTUwgZm9ybSBzbyB0aGF0IGl0J3MgcGFzc2VkIHRvIHRoZSByZWNpcGUgZXhlY3V0aW9uLg0KCQkJU2VyaWFsaXplVG9BbnkocmVjaXBlLCB3aXphcmQpOw0KDQoJCQlFbmFibGVBbmRFeGVjdXRlKHBhY2thZ2UsIHJlZmVyZW5jZURpY3Rpb25hcnkpOw0KICAgICAgICB9DQoNCgkJcHJpdmF0ZSB2b2lkIEJ1aWxkTWVzc2FnZShvdXQgc3RyaW5nIG1zZywgb3V0IHN0cmluZyBkZXRhaWxzKQ0KCQl7DQoJCQlzdHJpbmcgbGlzdHJlZnMgPSBFbnZpcm9ubWVudC5OZXdMaW5lOw0KCQkJZm9yZWFjaCAoRml4dXBSZWZlcmVuY2UgZml4dXAgaW4gcmVmZXJlbmNlc1RvRml4KQ0KCQkJew0KCQkJCWlmIChmaXh1cC5PbGRSZWZlcmVuY2UgaXMgQm91bmRUZW1wbGF0ZVJlZmVyZW5jZSkNCgkJCQl7DQoJCQkJCWxpc3RyZWZzICs9IHN0cmluZy5Gb3JtYXQoUHJvcGVydGllcy5SZXNvdXJjZXMuUmVmZXJlbmNlUmVzdG9yZVNlcnZpY2VfVGVtcGxhdGVPbGRQYXRoLCBmaXh1cC5SZWZlcmVuY2VkQXNzZXQsIGZpeHVwLlNhdmVkVGFyZ2V0KTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJbGlzdHJlZnMgKz0gc3RyaW5nLkZvcm1hdChQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VSZXN0b3JlU2VydmljZV9SZWNpcGVPbGRQYXRoLCBmaXh1cC5SZWZlcmVuY2VkQXNzZXQsIGZpeHVwLlNhdmVkVGFyZ2V0KTsNCgkJCQl9DQoJCQl9DQoJCQltc2cgPSBzdHJpbmcuRm9ybWF0KEN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCXJlZmVyZW5jZXNUb0ZpeC5Db3VudCA+IDEgPw0KCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX1N0YXJ0RGFuZ2xpbmdSZWZlcmVuY2VzDQoJCQkJOiBQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VSZXN0b3JlU2VydmljZV9TdGFydERhbmdsaW5nUmVmZXJlbmNlLCBzdHJpbmcuRW1wdHkpOw0KCQkJZGV0YWlscyA9IHN0cmluZy5Gb3JtYXQoQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkgIHJlZmVyZW5jZXNUb0ZpeC5Db3VudCA+IDEgPw0KCQkJICBQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VSZXN0b3JlU2VydmljZV9TdGFydERhbmdsaW5nUmVmZXJlbmNlcw0KCQkJICA6IFByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX1N0YXJ0RGFuZ2xpbmdSZWZlcmVuY2UsDQoJCQkgIGxpc3RyZWZzKTsNCgkJfQ0KDQoJCXByaXZhdGUgc3RhdGljIHZvaWQgU2VyaWFsaXplVG9BbnkoQ29uZmlnLlJlY2lwZSByZWNpcGUsIFdpemFyZCB3aXphcmQpDQoJCXsNCgkJCVN0cmluZ1dyaXRlciBzdyA9IG5ldyBTdHJpbmdXcml0ZXIoKTsNCgkJCW5ldyBTeXN0ZW0uWG1sLlNlcmlhbGl6YXRpb24uWG1sU2VyaWFsaXplcih0eXBlb2YoV2l6YXJkKSkuU2VyaWFsaXplKHN3LCB3aXphcmQpOw0KCQkJWG1sRG9jdW1lbnQgZG9jID0gbmV3IFhtbERvY3VtZW50KCk7DQoJCQlkb2MuTG9hZFhtbChzdy5Ub1N0cmluZygpKTsNCgkJCXJlY2lwZS5HYXRoZXJpbmdTZXJ2aWNlRGF0YSA9IG5ldyBDb25maWd1cmF0aW9uLlJlY2lwZUdhdGhlcmluZ1NlcnZpY2VEYXRhKCk7DQoJCQlyZWNpcGUuR2F0aGVyaW5nU2VydmljZURhdGEuQW55ID0gZG9jLkRvY3VtZW50RWxlbWVudDsNCgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBFbmFibGVBbmRFeGVjdXRlKENvbmZpZy5HdWlkYW5jZVBhY2thZ2UgcGFja2FnZSwgSGFzaHRhYmxlIHJlZmVyZW5jZURpY3Rpb25hcnkpDQoJCXsNCgkJCUd1aWRhbmNlUGFja2FnZSBsb2FkZWRwYWNrYWdlID0gbnVsbDsNCg0KCQkJdHJ5DQoJCQl7DQoJCQkJbG9hZGVkcGFja2FnZSA9IG1hbmFnZXIuRW5hYmxlUGFja2FnZShwYWNrYWdlKTsNCgkJCQlib29sIHN0b3AgPSB0cnVlOw0KCQkJCWRvDQoJCQkJew0KCQkJCQlzdG9wID0gKGxvYWRlZHBhY2thZ2UuRXhlY3V0ZSgiUmVmZXJlbmNlUmVzdG9yZVJlY2lwZSIsIHJlZmVyZW5jZURpY3Rpb25hcnkpID09IEV4ZWN1dGlvblJlc3VsdC5GaW5pc2gpOw0KCQkJCQlpZiAoIXN0b3ApDQoJCQkJCXsNCgkJCQkJCXN0b3AgPSAoTWVzc2FnZUJveC5TaG93KFByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX0NhbmNlbGxlZCwNCgkJCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VSZXN0b3JlU2VydmljZV9EaWFsb2dUaXRsZSwNCgkJCQkJCQlNZXNzYWdlQm94QnV0dG9ucy5ZZXNObywgTWVzc2FnZUJveEljb24uUXVlc3Rpb24pID09IERpYWxvZ1Jlc3VsdC5Obyk7DQoJCQkJCX0NCgkJCQl9IHdoaWxlICghc3RvcCk7DQoJCQl9DQoJCQlmaW5hbGx5DQoJCQl7DQoJCQkJdHJ5DQoJCQkJew0KCQkJCQlpZiAobG9hZGVkcGFja2FnZSAhPSBudWxsKQ0KCQkJCQl7DQoJCQkJCQltYW5hZ2VyLkRpc2FibGVQYWNrYWdlKGxvYWRlZHBhY2thZ2UpOw0KCQkJCQkJbG9hZGVkcGFja2FnZS5EaXNwb3NlKCk7DQoJCQkJCX0NCgkJCQl9DQoJCQkJY2F0Y2ggKEV4Y2VwdGlvbiBleCkNCgkJCQl7DQoJCQkJCUVycm9ySGVscGVyLlNob3coZXgpOw0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXByaXZhdGUgdm9pZCBDcmVhdGVEeW5hbWljUmVjaXBlKENvbmZpZy5HdWlkYW5jZVBhY2thZ2UgcGFja2FnZSwgb3V0IENvbmZpZy5SZWNpcGUgcmVjaXBlLCBvdXQgQXJyYXlMaXN0IGFyZ3VtZW50cywgb3V0IEFycmF5TGlzdCBhY3Rpb25zKQ0KCQl7DQoJCQkvLyBSZWNpcGUgdG8gZXhlY3V0ZSBhbmQgYWRkIHJlZmVyZW5jZXMuDQoJCQlyZWNpcGUgPSBuZXcgQ29uZmlnLlJlY2lwZSgpOw0KCQkJcGFja2FnZS5SZWNpcGVzID0gbmV3IENvbmZpZy5SZWNpcGVbXSB7IHJlY2lwZSB9Ow0KCQkJcmVjaXBlLk5hbWUgPSAiUmVmZXJlbmNlUmVzdG9yZVJlY2lwZSI7DQoJCQlyZWNpcGUuQ2FwdGlvbiA9IFByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX0RpYWxvZ1RpdGxlOw0KCQkJYXJndW1lbnRzID0gbmV3IEFycmF5TGlzdChyZWZlcmVuY2VzVG9GaXguQ291bnQpOw0KCQkJYWN0aW9ucyA9IG5ldyBBcnJheUxpc3QocmVmZXJlbmNlc1RvRml4LkNvdW50KTsNCgkJfQ0KDQoJCXByaXZhdGUgc3RhdGljIENvbmZpZy5HdWlkYW5jZVBhY2thZ2UgQ3JlYXRlRHluYW1pY1BhY2thZ2UoKQ0KCQl7DQoJCQlDb25maWcuR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSBuZXcgQ29uZmlnLkd1aWRhbmNlUGFja2FnZSgpOw0KCQkJcGFja2FnZS5TY2hlbWFWZXJzaW9uID0gIjEuMCI7DQoJCQlwYWNrYWdlLlRyYWNlTGV2ZWwgPSBDb25maWcuVHJhY2VMZXZlbC5PZmY7DQoJCQlwYWNrYWdlLkhvc3QgPSAiVmlzdWFsU3R1ZGlvIjsNCgkJCXBhY2thZ2UuQ2FwdGlvbiA9ICJEeW5hbWljUGFja2FnZSI7DQoJCQlwYWNrYWdlLkd1aWQgPSBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpOw0KCQkJcmV0dXJuIHBhY2thZ2U7DQoJCX0NCg0KCQlwcml2YXRlIEhhc2h0YWJsZSBDcmVhdGVGaXh1cFBhZ2VzKGludCBtYXhmaWVsZHMsIFhtbERvY3VtZW50IHhtbGZhY3RvcnksIEFycmF5TGlzdCBhcmd1bWVudHMsIEFycmF5TGlzdCBhY3Rpb25zLCByZWYgUGFnZSBsYXN0cGFnZSwgQXJyYXlMaXN0IHBhZ2VzLCByZWYgQXJyYXlMaXN0IGZpZWxkcywgaW50IG5QYWdlcykNCgkJew0KCQkJaW50IGlQYWdlID0gMTsNCgkJCWludCBpQXJndW1lbnQgPSAxOw0KCQkJYm9vbCBmaXJzdFBhZ2UgPSB0cnVlOw0KDQoJCQlIYXNodGFibGUgcmVmZXJlbmNlRGljdGlvbmFyeSA9IG5ldyBIYXNodGFibGUoKTsNCg0KCQkJZm9yZWFjaCAoRml4dXBSZWZlcmVuY2UgZml4dXAgaW4gcmVmZXJlbmNlc1RvRml4KQ0KCQkJew0KCQkJCWlmIChmaXJzdFBhZ2UgfHwNCgkJCQkJKGxhc3RwYWdlICE9IG51bGwpICYmIChmaWVsZHMuQ291bnQgPT0gbWF4ZmllbGRzKSkNCgkJCQl7DQoJCQkJCSNyZWdpb24gQ3JlYXRlIG5ldyBwYWdlDQoJCQkJCWZpcnN0UGFnZSA9IGZhbHNlOw0KDQoJCQkJCS8vIElmIHdlIGhhdmUgZmllbGRzIGFuZCBhIHByZXZpb3VzIHBhZ2UsIHNldCBhbGwgZmllbGRzIGluIG9uZSBzaG90Lg0KCQkJCQlpZiAobGFzdHBhZ2UgIT0gbnVsbCAmJiBmaWVsZHMgIT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJbGFzdHBhZ2UuRmllbGRzID0gbmV3IEZpZWxkW2ZpZWxkcy5Db3VudF07DQoJCQkJCQlmaWVsZHMuQ29weVRvKGxhc3RwYWdlLkZpZWxkcywgMCk7DQoJCQkJCX0NCg0KCQkJCQkvLyBTdGFydCBhIG5ldyBwYWdlIGZvciB0aGUgZmllbGRzLg0KCQkJCQlsYXN0cGFnZSA9IG5ldyBQYWdlKCk7DQoJCQkJCXBhZ2VzLkFkZChsYXN0cGFnZSk7DQoJCQkJCWZpZWxkcyA9IG5ldyBBcnJheUxpc3QobWF4ZmllbGRzKTsNCgkJCQkJbGFzdHBhZ2UuVGl0bGUgPSBTdHJpbmcuRm9ybWF0KA0KCQkJCQkJQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5SZWZlcmVuY2VSZXN0b3JlU2VydmljZV9QYWdlVGl0bGUsDQoJCQkJCQlpUGFnZSwgblBhZ2VzKTsNCgkJCQkJbGFzdHBhZ2UuSGVscCA9IFN0cmluZy5Gb3JtYXQoDQoJCQkJCQlDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX1BhZ2VIZWxwKTsNCgkJCQkJbGFzdHBhZ2UuTGlua1RpdGxlID0gU3RyaW5nLkZvcm1hdCgNCgkJCQkJCUN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuUmVmZXJlbmNlUmVzdG9yZVNlcnZpY2VfUGFnZUxpbmtUaXRsZSwNCgkJCQkJCWlQYWdlLCBuUGFnZXMpOw0KCQkJCQlpUGFnZSsrOw0KDQoJCQkJCSNlbmRyZWdpb24gQ3JlYXRlIG5ldyBwYWdlDQoJCQkJfQ0KDQoJCQkJI3JlZ2lvbiBTZXR1cCByZWNpcGUgYXJndW1lbnRzDQoNCgkJCQlDb25maWcuQXJndW1lbnQgYXJndW1lbnQgPSBuZXcgQ29uZmlnLkFyZ3VtZW50KCk7DQoNCgkJCQlhcmd1bWVudC5OYW1lID0gc3RyaW5nLkZvcm1hdChDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlLCAiQXJndW1lbnR7MH0iLCBpQXJndW1lbnQpOw0KCQkJCWFyZ3VtZW50LlR5cGUgPSBHZXRUYXJnZXRUeXBlKGZpeHVwLkV4cGVjdGVkVGFyZ2V0S2luZCkuQXNzZW1ibHlRdWFsaWZpZWROYW1lOw0KCQkJCWFyZ3VtZW50LkNvbnZlcnRlciA9IG5ldyBDb25maWcuQ29udmVydGVyKCk7DQoJCQkJYXJndW1lbnQuQ29udmVydGVyLlR5cGUgPSBHZXRDb252ZXJ0ZXJUeXBlKGZpeHVwLkV4cGVjdGVkVGFyZ2V0S2luZCk7DQoJCQkJYXJndW1lbnRzLkFkZChhcmd1bWVudCk7DQoNCgkJCQlDb25maWcuQXJndW1lbnQgYXJndW1lbnRLZXlSZWYgPSBuZXcgQ29uZmlnLkFyZ3VtZW50KCk7DQoJCQkJYXJndW1lbnRLZXlSZWYuTmFtZSA9IHN0cmluZy5Gb3JtYXQoQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSwgIlJlZmVyZW5jZXswfSIsIGlBcmd1bWVudCk7DQoJCQkJYXJndW1lbnRLZXlSZWYuVHlwZSA9ICJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5JQXNzZXRSZWZlcmVuY2UsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkNvbW1vbiI7DQoJCQkJcmVmZXJlbmNlRGljdGlvbmFyeS5BZGQoYXJndW1lbnRLZXlSZWYuTmFtZSwgZml4dXAuT2xkUmVmZXJlbmNlKTsNCg0KCQkJCWFyZ3VtZW50cy5BZGQoYXJndW1lbnRLZXlSZWYpOw0KCQkJCWlBcmd1bWVudCsrOw0KDQoJCQkJI2VuZHJlZ2lvbiBTZXR1cCByZWNpcGUgYXJndW1lbnRzDQoNCgkJCQkjcmVnaW9uIENyZWF0ZSBuZXcgZmllbGQNCg0KDQoNCgkJCQlGaWVsZCBmaWVsZCA9IG5ldyBGaWVsZCgpOw0KCQkJCWlmIChmaXh1cC5PbGRSZWZlcmVuY2UgaXMgQm91bmRUZW1wbGF0ZVJlZmVyZW5jZSkNCgkJCQl7DQoJCQkJCWludCB0ZW1wbGF0ZUxlbmd0aCA9IGZpeHVwLk93bmluZ1BhY2thZ2UuQmFzZVBhdGguTGVuZ3RoICsgMTE7IC8vMTEgY29ycmVzcG9uZHMgdG8gTGVuZ2h0IG9mIHN0cmluZyAiXFRlbXBsYXRlXCINCgkJCQkJaWYgKHRlbXBsYXRlTGVuZ3RoID4gZml4dXAuUmVmZXJlbmNlZEFzc2V0Lkxlbmd0aCkNCgkJCQkJew0KCQkJCQkJdGVtcGxhdGVMZW5ndGggPSAwOw0KCQkJCQl9DQoJCQkJCWZpZWxkLkxhYmVsID0gc3RyaW5nLkZvcm1hdCgiezB9ICh7MX0pIiwgZml4dXAuUmVmZXJlbmNlZEFzc2V0LlN1YnN0cmluZyh0ZW1wbGF0ZUxlbmd0aCksIGZpeHVwLlNhdmVkVGFyZ2V0KTsNCgkJCQkJZmllbGQuSGVscCA9IFN0cmluZy5Gb3JtYXQoDQoJCQkJCQlDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX0ZpZWxkVGVtcGxhdGVIZWxwLA0KCQkJCQkJZml4dXAuRXhwZWN0ZWRUYXJnZXRLaW5kLCBmaXh1cC5SZWZlcmVuY2VkQXNzZXQuU3Vic3RyaW5nKHRlbXBsYXRlTGVuZ3RoKSk7DQoJCQkJfQ0KCQkJCWVsc2UgLy8gY2FzZSBvZiByZWNpcGUgcmVmZXJlbmNlDQoJCQkJew0KCQkJCQlJQ29uZmlndXJhdGlvblNlcnZpY2UgY29uZmlnU2VydmljZSA9DQoJCQkJCQkoSUNvbmZpZ3VyYXRpb25TZXJ2aWNlKWZpeHVwLk93bmluZ1BhY2thZ2UuR2V0U2VydmljZSh0eXBlb2YoSUNvbmZpZ3VyYXRpb25TZXJ2aWNlKSwgdHJ1ZSk7DQoJCQkJCUNvbmZpZy5SZWNpcGUgcmVjaXBlUmVmZXJlbmNlID0gY29uZmlnU2VydmljZS5DdXJyZW50UGFja2FnZVtmaXh1cC5PbGRSZWZlcmVuY2UuQXNzZXROYW1lXTsNCgkJCQkJZmllbGQuTGFiZWwgPSBzdHJpbmcuRm9ybWF0KCJ7MH0gKHsxfSkiLCByZWNpcGVSZWZlcmVuY2UuQ2FwdGlvbiwgZml4dXAuU2F2ZWRUYXJnZXQpOw0KCQkJCQlmaWVsZC5IZWxwID0gU3RyaW5nLkZvcm1hdCgNCgkJCQkJCUN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuUmVmZXJlbmNlUmVzdG9yZVNlcnZpY2VfRmllbGRSZWNpcGVIZWxwLA0KCQkJCQkJZml4dXAuRXhwZWN0ZWRUYXJnZXRLaW5kLCByZWNpcGVSZWZlcmVuY2UuQ2FwdGlvbik7DQoJCQkJfQ0KCQkJCWZpZWxkLlRvb2x0aXAgPSBTdHJpbmcuRm9ybWF0KA0KCQkJCQlDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuUmVmZXJlbmNlUmVzdG9yZVNlcnZpY2VfRmllbGRUb29sdGlwLA0KCQkJCQlmaXh1cC5TYXZlZFRhcmdldCwgZml4dXAuRXhwZWN0ZWRUYXJnZXRLaW5kKTsNCgkJCQlmaWVsZC5JbnZhbGlkVmFsdWVNZXNzYWdlID0gU3RyaW5nLkZvcm1hdCgNCgkJCQkJQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlJlZmVyZW5jZVJlc3RvcmVTZXJ2aWNlX0ZpZWxkSW52YWxpZCwNCgkJCQkJZml4dXAuRXhwZWN0ZWRUYXJnZXRLaW5kKTsNCgkJCQlmaWVsZC5WYWx1ZU5hbWUgPSBhcmd1bWVudC5OYW1lOw0KCQkJCWZpZWxkLkVkaXRvciA9IG5ldyBFZGl0b3IoKTsNCgkJCQkvLyBBZ2Fpbiwgd2UgY2FuJ3QgdXNlIHRoZSB0eXBlIGRpcmVjdGx5IHRvIGF2b2lkIGNpcmN1bGFyIHJlZmVyZW5jZXMuDQoJCQkJZmllbGQuRWRpdG9yLlR5cGUgPSAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5FZGl0b3JzLlNvbHV0aW9uUGlja2VyRWRpdG9yLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IjsNCgkJCQlmaWVsZC5QYW5lbFR5cGUgPSAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlNlcnZpY2VzLkN1c3RvbUFyZ3VtZW50UGFuZWwsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpbyI7DQoJCQkJZmllbGRzLkFkZChmaWVsZCk7DQoNCgkJCQkjZW5kcmVnaW9uIENyZWF0ZSBuZXcgZmllbGQNCg0KCQkJCSNyZWdpb24gU2V0dXAgYW4gYWN0aW9uIGZvciBpdA0KDQoJCQkJQ29uZmlnLkFjdGlvbiBhY3Rpb24gPSBuZXcgQ29uZmlnLkFjdGlvbigpOw0KCQkJCS8vIE5hbWUgd2lsbCBiZSB1Z2x5LCBidXQgd2UgbmVlZCB0byBlbnN1cmUgdW5pcXVlbmVzcyB0b28uDQoJCQkJYWN0aW9uLk5hbWUgPSBhcmd1bWVudC5OYW1lOw0KCQkJCWFjdGlvbi5UeXBlID0gdHlwZW9mKEFkZEZpeGVkUmVmZXJlbmNlQWN0aW9uKS5Bc3NlbWJseVF1YWxpZmllZE5hbWU7DQoJCQkJWG1sQXR0cmlidXRlIGFzc2V0YXR0cjsNCgkJCQlhc3NldGF0dHIgPSB4bWxmYWN0b3J5LkNyZWF0ZUF0dHJpYnV0ZSgiUmVjaXBlIik7DQoJCQkJYXNzZXRhdHRyLlZhbHVlID0gZml4dXAuUmVmZXJlbmNlZEFzc2V0Ow0KDQoJCQkJWG1sQXR0cmlidXRlIHBhY2thZ2VhdHRyID0geG1sZmFjdG9yeS5DcmVhdGVBdHRyaWJ1dGUoIlRhcmdldFBhY2thZ2UiKTsNCgkJCQlwYWNrYWdlYXR0ci5WYWx1ZSA9IGZpeHVwLk93bmluZ1BhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkOw0KCQkJCWFjdGlvbi5BbnlBdHRyID0gbmV3IFhtbEF0dHJpYnV0ZVtdIHsgYXNzZXRhdHRyLCBwYWNrYWdlYXR0ciB9Ow0KCQkJCS8vIFN5bmMgYWN0aW9uIGlucHV0IHdpdGggY29sbGVjdGVkIGFyZ3VtZW50IGZvciB0aGUgdGFyZ2V0Lg0KCQkJCUNvbmZpZy5JbnB1dCBpbnB1dCA9IG5ldyBDb25maWcuSW5wdXQoKTsNCgkJCQlpbnB1dC5OYW1lID0gIlRhcmdldCI7DQoJCQkJaW5wdXQuUmVjaXBlQXJndW1lbnQgPSBhcmd1bWVudC5OYW1lOw0KCQkJCUNvbmZpZy5JbnB1dCBpbnB1dFJlZiA9IG5ldyBDb25maWcuSW5wdXQoKTsNCgkJCQlpbnB1dFJlZi5OYW1lID0gIk9sZFJlZmVyZW5jZSI7DQoJCQkJaW5wdXRSZWYuUmVjaXBlQXJndW1lbnQgPSBhcmd1bWVudEtleVJlZi5OYW1lOw0KCQkJCWFjdGlvbi5JbnB1dCA9IG5ldyBDb25maWcuSW5wdXRbXSB7IGlucHV0LCBpbnB1dFJlZiB9Ow0KCQkJCWFjdGlvbnMuQWRkKGFjdGlvbik7DQoNCgkJCQkjZW5kcmVnaW9uIFNldHVwIGFuIGFjdGlvbiBmb3IgaXQNCgkJCX0NCgkJCXJldHVybiByZWZlcmVuY2VEaWN0aW9uYXJ5Ow0KCQl9DQoNCiAgICAgICAgI2VuZHJlZ2lvbg0KDQogICAgICAgICNyZWdpb24gRml4dXBSZWZlcmVuY2UNCg0KICAgICAgICBwcml2YXRlIGVudW0gVGFyZ2V0S2luZA0KICAgICAgICB7DQogICAgICAgICAgICBTb2x1dGlvbiwNCiAgICAgICAgICAgIFNvbHV0aW9uRm9sZGVyLA0KICAgICAgICAgICAgUHJvamVjdCwNCiAgICAgICAgICAgIFByb2plY3RJdGVtDQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBEZXRlcm1pbmVzIHRoZSB0eXBlIG9mIGNvbnZlcnRlciB0byB1c2UgZm9yIHRoZSB0YXJnZXQgYmFzZWQgb24gaXRzIGtpbmQuDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHByaXZhdGUgc3RhdGljIHN0cmluZyBHZXRDb252ZXJ0ZXJUeXBlKFRhcmdldEtpbmQga2luZCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gV0FSTjogd2UgY2FuJ3QgcmVmZXJlbmNlIHRoZSBsaWJyYXJ5IGJlY2F1c2UgaXQncyBhbHJlYWR5IHJlZmVycmluZyB0byB1cy4gDQogICAgICAgICAgICAvLyBXZSBkZXBlbmQgb24gaXRzIGNsYXNzZXMsIGhvd2V2ZXIuDQogICAgICAgICAgICBzd2l0Y2ggKGtpbmQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY2FzZSBUYXJnZXRLaW5kLlByb2plY3Q6DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5Db252ZXJ0ZXJzLlByb2plY3RPckVtcHR5Q29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IjsNCiAgICAgICAgICAgICAgICBjYXNlIFRhcmdldEtpbmQuUHJvamVjdEl0ZW06DQoJCQkJCXJldHVybiAiTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5Db252ZXJ0ZXJzLlByb2plY3RJdGVtT3JFbXB0eUNvbnZlcnRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSI7DQogICAgICAgICAgICAgICAgY2FzZSBUYXJnZXRLaW5kLlNvbHV0aW9uOg0KCQkJCQlyZXR1cm4gIk1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQ29udmVydGVycy5Tb2x1dGlvbk9yRW1wdHlDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiOw0KICAgICAgICAgICAgICAgIGNhc2UgVGFyZ2V0S2luZC5Tb2x1dGlvbkZvbGRlcjoNCgkJCQkJcmV0dXJuICJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuU29sdXRpb25Gb2xkZXJPckVtcHR5Q29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IjsNCgkJCQlkZWZhdWx0Og0KCQkJCQl0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXhjZXB0aW9uKGtpbmQuVG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBEZXRlcm1pbmVzIHRoZSB0eXBlIG9mIHRoZSB0YXJnZXQgYmFzZWQgb24gaXRzIGtpbmQuDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHByaXZhdGUgc3RhdGljIFR5cGUgR2V0VGFyZ2V0VHlwZShUYXJnZXRLaW5kIGtpbmQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHN3aXRjaCAoa2luZCkNCiAgICAgICAgICAgIHsNCgkJCQljYXNlIFRhcmdldEtpbmQuU29sdXRpb25Gb2xkZXI6DQoJCQkJCXJldHVybiB0eXBlb2YoU29sdXRpb25Gb2xkZXIpOw0KCQkJCWNhc2UgVGFyZ2V0S2luZC5Qcm9qZWN0Og0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mKFByb2plY3QpOw0KICAgICAgICAgICAgICAgIGNhc2UgVGFyZ2V0S2luZC5Qcm9qZWN0SXRlbToNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZihQcm9qZWN0SXRlbSk7DQogICAgICAgICAgICAgICAgY2FzZSBUYXJnZXRLaW5kLlNvbHV0aW9uOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mKFNvbHV0aW9uKTsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXhjZXB0aW9uKGtpbmQuVG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBSZWZlcmVuY2UgaW5mb3JtYXRpb24gb2YgYSBicm9rZW4gcmVmZXJlbmNlDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHByaXZhdGUgY2xhc3MgRml4dXBSZWZlcmVuY2UNCiAgICAgICAgew0KICAgICAgICAgICAgcHVibGljIEZpeHVwUmVmZXJlbmNlKEd1aWRhbmNlUGFja2FnZSBvd25pbmdQYWNrYWdlLA0KICAgICAgICAgICAgICAgIHN0cmluZyBhc3NldCwgIA0KICAgICAgICAgICAgICAgIElCb3VuZEFzc2V0UmVmZXJlbmNlIG9sZFJlZmVyZW5jZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLk93bmluZ1BhY2thZ2UgPSBvd25pbmdQYWNrYWdlOw0KCQkJCXRoaXMuUmVmZXJlbmNlZEFzc2V0ID0gYXNzZXQ7DQoJCQkJVnNCb3VuZFJlZmVyZW5jZSByZWFsUmVmZXJlbmNlID0gbnVsbDsNCgkJCQlpZiAob2xkUmVmZXJlbmNlIGlzIFZzQm91bmRSZWZlcmVuY2UpDQoJCQkJew0KCQkJCQlyZWFsUmVmZXJlbmNlID0gKFZzQm91bmRSZWZlcmVuY2Upb2xkUmVmZXJlbmNlOw0KCQkJCX0NCgkJCQllbHNlIGlmIChvbGRSZWZlcmVuY2UgaXMgQm91bmRUZW1wbGF0ZVJlZmVyZW5jZSkNCgkJCQl7DQoJCQkJCXJlYWxSZWZlcmVuY2UgPSAoVnNCb3VuZFJlZmVyZW5jZSkoKEJvdW5kVGVtcGxhdGVSZWZlcmVuY2Upb2xkUmVmZXJlbmNlKS5Cb3VuZFJlZmVyZW5jZTsNCgkJCQl9DQoJCQkJdGhpcy5TYXZlZFRhcmdldCA9IHJlYWxSZWZlcmVuY2UuU3ViUGF0aDsNCgkJCQl0aGlzLkV4cGVjdGVkVGFyZ2V0S2luZCA9IEdldFRhcmdldEtpbmQocmVhbFJlZmVyZW5jZSk7DQoJCQkJdGhpcy5PbGRSZWZlcmVuY2UgPSBvbGRSZWZlcmVuY2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHB1YmxpYyBHdWlkYW5jZVBhY2thZ2UgT3duaW5nUGFja2FnZTsNCiAgICAgICAgICAgIHB1YmxpYyBzdHJpbmcgUmVmZXJlbmNlZEFzc2V0Ow0KICAgICAgICAgICAgcHVibGljIHN0cmluZyBTYXZlZFRhcmdldDsNCiAgICAgICAgICAgIHB1YmxpYyBUYXJnZXRLaW5kIEV4cGVjdGVkVGFyZ2V0S2luZDsNCgkJCXB1YmxpYyBJQm91bmRBc3NldFJlZmVyZW5jZSBPbGRSZWZlcmVuY2U7DQoNCiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgICAgIC8vLyBEZXRlcm1pbmVzIHRoZSBraW5kIG9mIHRhcmdldCBiYXNlZCBvbiB0aGUgdHlwZSBvZiB0aGUgcmVmZXJlbmNlLg0KICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT4NCgkJCXByaXZhdGUgVGFyZ2V0S2luZCBHZXRUYXJnZXRLaW5kKElCb3VuZEFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAocmVmZXJlbmNlIGlzIFNvbHV0aW9uUmVmZXJlbmNlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRhcmdldEtpbmQuU29sdXRpb247DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlZmVyZW5jZSBpcyBQcm9qZWN0UmVmZXJlbmNlKQ0KICAgICAgICAgICAgICAgIHsNCgkJCQkJaWYgKCgoUHJvamVjdFJlZmVyZW5jZSlyZWZlcmVuY2UpLklzU29sdXRpb25Gb2xkZXIpDQoJCQkJCXsNCgkJCQkJCXJldHVybiBUYXJnZXRLaW5kLlNvbHV0aW9uRm9sZGVyOw0KCQkJCQl9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBUYXJnZXRLaW5kLlByb2plY3Q7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlZmVyZW5jZSBpcyBQcm9qZWN0SXRlbVJlZmVyZW5jZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBUYXJnZXRLaW5kLlByb2plY3RJdGVtOw0KICAgICAgICAgICAgICAgIH0NCgkJCQllbHNlIGlmIChyZWZlcmVuY2UgaXMgQm91bmRUZW1wbGF0ZVJlZmVyZW5jZSkNCgkJCQl7DQoJCQkJCXJldHVybiBUYXJnZXRLaW5kLlNvbHV0aW9uRm9sZGVyOw0KCQkJCX0NCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXhjZXB0aW9uKHJlZmVyZW5jZS5Ub1N0cmluZygpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICNlbmRyZWdpb24gRml4dXBSZWZlcmVuY2UNCg0KICAgICAgICAjcmVnaW9uIEFkZEZpeGVkUmVmZXJlbmNlDQogICAgICAgIFtTZXJ2aWNlRGVwZW5kZW5jeSh0eXBlb2YoSVJlY2lwZU1hbmFnZXJTZXJ2aWNlKSldDQogICAgICAgIHByaXZhdGUgY2xhc3MgQWRkRml4ZWRSZWZlcmVuY2VBY3Rpb24gOiBDb25maWd1cmFibGVBY3Rpb24NCiAgICAgICAgew0KICAgICAgICAgICAgLy8gUHJvcGVydGllcyBvdGhlciB0aGFuIHRoZSBUYXJnZXQgYXJlIHNldCB0aHJvdWdoICJjb25maWd1cmF0aW9uIg0KICAgICAgICAgICAgcHJpdmF0ZSBzdHJpbmcgcmVjaXBlOw0KDQogICAgICAgICAgICBwdWJsaWMgc3RyaW5nIFJlY2lwZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiByZWNpcGU7IH0NCiAgICAgICAgICAgICAgICBzZXQgeyByZWNpcGUgPSB2YWx1ZTsgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwcml2YXRlIHN0cmluZyB0ZW1wbGF0ZTsNCg0KICAgICAgICAgICAgcHVibGljIHN0cmluZyBUZW1wbGF0ZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiB0ZW1wbGF0ZTsgfQ0KICAgICAgICAgICAgICAgIHNldCB7IHRlbXBsYXRlID0gdmFsdWU7IH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcHJpdmF0ZSBzdHJpbmcgdGFyZ2V0UGFja2FnZTsNCg0KICAgICAgICAgICAgcHVibGljIHN0cmluZyBUYXJnZXRQYWNrYWdlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHRhcmdldFBhY2thZ2U7IH0NCiAgICAgICAgICAgICAgICBzZXQgeyB0YXJnZXRQYWNrYWdlID0gdmFsdWU7IH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcHJpdmF0ZSBvYmplY3QgdGFyZ2V0Ow0KDQoJCQlbSW5wdXRdDQoJCQlwdWJsaWMgSUJvdW5kQXNzZXRSZWZlcmVuY2UgT2xkUmVmZXJlbmNlDQoJCQl7DQoJCQkJZ2V0IHsgcmV0dXJuIGJvdW5kUmVmZXJlbmNlOyB9DQoJCQkJc2V0IHsgYm91bmRSZWZlcmVuY2UgPSB2YWx1ZTsgfQ0KCQkJfQ0KCQkJcHJpdmF0ZSBJQm91bmRBc3NldFJlZmVyZW5jZSBib3VuZFJlZmVyZW5jZTsNCg0KICAgICAgICAgICAgW0lucHV0XQ0KICAgICAgICAgICAgcHVibGljIG9iamVjdCBUYXJnZXQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gdGFyZ2V0OyB9DQogICAgICAgICAgICAgICAgc2V0IHsgdGFyZ2V0ID0gdmFsdWU7IH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgRXhlY3V0ZSgpDQogICAgICAgICAgICB7DQoJCQkJaWYgKE9sZFJlZmVyZW5jZSA9PSBudWxsKQ0KCQkJCXsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCgkJCQlJUmVjaXBlTWFuYWdlclNlcnZpY2UgbWFuYWdlciA9IChJUmVjaXBlTWFuYWdlclNlcnZpY2UpDQoJCQkJCVNlcnZpY2VIZWxwZXIuR2V0U2VydmljZSh0aGlzLCB0eXBlb2YoSVJlY2lwZU1hbmFnZXJTZXJ2aWNlKSk7DQoJCQkJLy8gQWRkIHRoZSByZWZlcmVuY2VzIHRvIHRoZSB0YXJnZXQgcGFja2FnZS4NCgkJCQlHdWlkYW5jZVBhY2thZ2UgcGFja2FnZSA9IG1hbmFnZXIuR2V0UGFja2FnZSh0YXJnZXRQYWNrYWdlKTsNCgkJCQlJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlIHJlZmVyZW5jZVNlcnZpY2UgPSAoSUFzc2V0UmVmZXJlbmNlU2VydmljZSkNCgkJCQkJU2VydmljZUhlbHBlci5HZXRTZXJ2aWNlKHBhY2thZ2UsIHR5cGVvZihJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlKSwgdGhpcyk7DQoJCQkJSVBlcnNpc3RlbmNlU2VydmljZSBwZXJzaXN0ID0gKElQZXJzaXN0ZW5jZVNlcnZpY2UpDQoJCQkJCVNlcnZpY2VIZWxwZXIuR2V0U2VydmljZSh0aGlzLCB0eXBlb2YoSVBlcnNpc3RlbmNlU2VydmljZSkpOw0KDQoJCQkJdHJ5DQoJCQkJew0KDQoJCQkJCUlEaWN0aW9uYXJ5IHN0YXRlID0gcGVyc2lzdC5Mb2FkU3RhdGUocGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQsIE9sZFJlZmVyZW5jZSk7DQoJCQkJCWlmICgodGFyZ2V0ICE9IG51bGwpICYmICEodGFyZ2V0IGlzIER1bW15RFRFLkVtcHR5RHRlRWxlbWVudCkpDQoJCQkJCXsNCgkJCQkJCS8vV2UgaGF2ZSB0byBnZXQgdGhlIHJlYWwgb2JqZWN0IFByb2plY3QgZm9yIGNhc2Ugb2YgU29sdXRpb24gRm9sZGVyDQoJCQkJCQlvYmplY3QgcmVhbFRhcmdldCA9IHRhcmdldDsNCgkJCQkJCWlmICh0YXJnZXQgaXMgU29sdXRpb25Gb2xkZXIpDQoJCQkJCQl7DQoJCQkJCQkJcmVhbFRhcmdldCA9ICgoU29sdXRpb25Gb2xkZXIpdGFyZ2V0KS5QYXJlbnQ7DQoJCQkJCQl9DQoNCgkJCQkJCWlmIChPbGRSZWZlcmVuY2UgaXMgVnNCb3VuZFJlZmVyZW5jZSkNCgkJCQkJCXsNCgkJCQkJCQkoKFZzQm91bmRSZWZlcmVuY2UpT2xkUmVmZXJlbmNlKS5TZXRUYXJnZXQocmVhbFRhcmdldCk7DQoJCQkJCQl9DQoJCQkJCQllbHNlIGlmIChPbGRSZWZlcmVuY2UgaXMgQm91bmRUZW1wbGF0ZVJlZmVyZW5jZSkNCgkJCQkJCXsNCgkJCQkJCQkoKEJvdW5kVGVtcGxhdGVSZWZlcmVuY2UpT2xkUmVmZXJlbmNlKS5Cb3VuZFJlZmVyZW5jZS5TZXRUYXJnZXQocmVhbFRhcmdldCk7DQoJCQkJCQl9DQoJCQkJCQlyZWZlcmVuY2VTZXJ2aWNlLkFkZChPbGRSZWZlcmVuY2UsIHN0YXRlKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCQljYXRjaCAoRXhjZXB0aW9uIGV4KQ0KCQkJCXsNCgkJCQkJaWYgKE9sZFJlZmVyZW5jZSAhPSBudWxsKQ0KCQkJCQl7DQoJCQkJCQlyZWZlcmVuY2VTZXJ2aWNlLlJlbW92ZShPbGRSZWZlcmVuY2UpOw0KCQkJCQl9DQoJCQkJCUVycm9ySGVscGVyLlNob3coKElVSVNlcnZpY2UpR2V0U2VydmljZSh0eXBlb2YoSVVJU2VydmljZSkpLGV4KTsNCgkJCQl9DQogICAgICAgICAgICB9DQoNCgkJCS8vLyA8c3VtbWFyeT4NCgkJCS8vLyBXZSBhcmUgZ29pbmcgdG8gaGFuZGxlIHRoZSBlcnJvcnMgaW5zaWRlIHRoZSBzYW1lIGV4ZWN1dGUNCgkJCS8vLyBJbiBvcmRlciB0byBjb250aW51ZSBiaW5kaW5nIGFzIG11Y2ggcmVmZXJlbmNlcyBhcyBwb3NzaWJsZQ0KCQkJLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFVuZG8oKQ0KICAgICAgICAgICAgew0KCQkJfQ0KICAgICAgICB9DQogICAgICAgICNlbmRyZWdpb24gQWRkRml4ZWRSZWZlcmVuY2UNCg0KCX0NCgkjcmVnaW9uIENsYXNzIHRoYXQgaW1wbGVtZW50cyBkdGUgcHJvamVjdCwgc29sdXRpb24sIHNvbHV0aW9uZm9sZGVyDQp9DQoNCm5hbWVzcGFjZSBEdW1teURURQ0Kew0KCWludGVybmFsIGNsYXNzIEVtcHR5RHRlRWxlbWVudCA6IEVudkRURS5Tb2x1dGlvbiwgRW52RFRFLlByb2plY3RJdGVtLCBFbnZEVEUuUHJvamVjdCwgRW52RFRFODAuU29sdXRpb25Gb2xkZXINCgl7DQoJCSNyZWdpb24gX1NvbHV0aW9uIE1lbWJlcnMNCg0KCQlQcm9qZWN0IF9Tb2x1dGlvbi5BZGRGcm9tRmlsZShzdHJpbmcgRmlsZU5hbWUsIGJvb2wgRXhjbHVzaXZlKQ0KCQl7DQoJCQlyZXR1cm4gbnVsbDsNCgkJfQ0KDQoJCVByb2plY3QgX1NvbHV0aW9uLkFkZEZyb21UZW1wbGF0ZShzdHJpbmcgRmlsZU5hbWUsIHN0cmluZyBEZXN0aW5hdGlvbiwgc3RyaW5nIFByb2plY3ROYW1lLCBib29sIEV4Y2x1c2l2ZSkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQlBZGRJbnMgX1NvbHV0aW9uLkFkZElucw0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJdm9pZCBfU29sdXRpb24uQ2xvc2UoYm9vbCBTYXZlRmlyc3QpDQoJCXsNCg0KCQl9DQoNCgkJaW50IF9Tb2x1dGlvbi5Db3VudA0KCQl7DQoJCQlnZXQgeyByZXR1cm4gMDsgfQ0KCQl9DQoNCgkJdm9pZCBfU29sdXRpb24uQ3JlYXRlKHN0cmluZyBEZXN0aW5hdGlvbiwgc3RyaW5nIE5hbWUpDQoJCXsNCg0KCQl9DQoNCgkJRFRFIF9Tb2x1dGlvbi5EVEUNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCXN0cmluZyBfU29sdXRpb24uRXh0ZW5kZXJDQVRJRA0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJb2JqZWN0IF9Tb2x1dGlvbi5FeHRlbmRlck5hbWVzDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlzdHJpbmcgX1NvbHV0aW9uLkZpbGVOYW1lDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlQcm9qZWN0SXRlbSBfU29sdXRpb24uRmluZFByb2plY3RJdGVtKHN0cmluZyBGaWxlTmFtZSkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQlzdHJpbmcgX1NvbHV0aW9uLkZ1bGxOYW1lDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlJRW51bWVyYXRvciBfU29sdXRpb24uR2V0RW51bWVyYXRvcigpDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJR2xvYmFscyBfU29sdXRpb24uR2xvYmFscw0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJYm9vbCBfU29sdXRpb24uSXNEaXJ0eQ0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCQlzZXQNCgkJCXsNCg0KCQkJfQ0KCQl9DQoNCgkJYm9vbCBfU29sdXRpb24uSXNPcGVuDQoJCXsNCgkJCWdldCB7IHJldHVybiBmYWxzZTsgfQ0KCQl9DQoNCgkJUHJvamVjdCBfU29sdXRpb24uSXRlbShvYmplY3QgaW5kZXgpDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJdm9pZCBfU29sdXRpb24uT3BlbihzdHJpbmcgRmlsZU5hbWUpDQoJCXsNCg0KCQl9DQoNCgkJRFRFIF9Tb2x1dGlvbi5QYXJlbnQNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCXN0cmluZyBfU29sdXRpb24uUHJvamVjdEl0ZW1zVGVtcGxhdGVQYXRoKHN0cmluZyBQcm9qZWN0S2luZCkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQlQcm9qZWN0cyBfU29sdXRpb24uUHJvamVjdHMNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCUVudkRURS5Qcm9wZXJ0aWVzIF9Tb2x1dGlvbi5Qcm9wZXJ0aWVzDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQl2b2lkIF9Tb2x1dGlvbi5SZW1vdmUoUHJvamVjdCBwcm9qKQ0KCQl7DQoNCgkJfQ0KDQoJCXZvaWQgX1NvbHV0aW9uLlNhdmVBcyhzdHJpbmcgRmlsZU5hbWUpDQoJCXsNCg0KCQl9DQoNCgkJYm9vbCBfU29sdXRpb24uU2F2ZWQNCgkJew0KCQkJZ2V0DQoJCQl7DQoJCQkJcmV0dXJuIGZhbHNlOw0KCQkJfQ0KCQkJc2V0DQoJCQl7DQoNCgkJCX0NCgkJfQ0KDQoJCVNvbHV0aW9uQnVpbGQgX1NvbHV0aW9uLlNvbHV0aW9uQnVpbGQNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCW9iamVjdCBfU29sdXRpb24uZ2V0X0V4dGVuZGVyKHN0cmluZyBFeHRlbmRlck5hbWUpDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJc3RyaW5nIF9Tb2x1dGlvbi5nZXRfVGVtcGxhdGVQYXRoKHN0cmluZyBQcm9qZWN0VHlwZSkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQkjZW5kcmVnaW9uDQoNCgkJI3JlZ2lvbiBJRW51bWVyYWJsZSBNZW1iZXJzDQoNCgkJSUVudW1lcmF0b3IgSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJI2VuZHJlZ2lvbg0KDQoJCSNyZWdpb24gUHJvamVjdEl0ZW0gTWVtYmVycw0KDQoJCVByb2plY3RJdGVtcyBQcm9qZWN0SXRlbS5Db2xsZWN0aW9uDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlDb25maWd1cmF0aW9uTWFuYWdlciBQcm9qZWN0SXRlbS5Db25maWd1cmF0aW9uTWFuYWdlcg0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJUHJvamVjdCBQcm9qZWN0SXRlbS5Db250YWluaW5nUHJvamVjdA0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJRFRFIFByb2plY3RJdGVtLkRURQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJdm9pZCBQcm9qZWN0SXRlbS5EZWxldGUoKQ0KCQl7DQoNCgkJfQ0KDQoJCURvY3VtZW50IFByb2plY3RJdGVtLkRvY3VtZW50DQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQl2b2lkIFByb2plY3RJdGVtLkV4cGFuZFZpZXcoKQ0KCQl7DQoNCgkJfQ0KDQoJCXN0cmluZyBQcm9qZWN0SXRlbS5FeHRlbmRlckNBVElEDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlvYmplY3QgUHJvamVjdEl0ZW0uRXh0ZW5kZXJOYW1lcw0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJRmlsZUNvZGVNb2RlbCBQcm9qZWN0SXRlbS5GaWxlQ29kZU1vZGVsDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlzaG9ydCBQcm9qZWN0SXRlbS5GaWxlQ291bnQNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIDA7IH0NCgkJfQ0KDQoJCWJvb2wgUHJvamVjdEl0ZW0uSXNEaXJ0eQ0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCQlzZXQNCgkJCXsNCg0KCQkJfQ0KCQl9DQoNCgkJc3RyaW5nIFByb2plY3RJdGVtLktpbmQNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCXN0cmluZyBQcm9qZWN0SXRlbS5OYW1lDQoJCXsNCgkJCWdldA0KCQkJew0KCQkJCXJldHVybiAiPDxEZWxldGVkIFJlZmVyZW5jZT4+IjsNCgkJCX0NCgkJCXNldA0KCQkJew0KDQoJCQl9DQoJCX0NCg0KCQlvYmplY3QgUHJvamVjdEl0ZW0uT2JqZWN0DQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlXaW5kb3cgUHJvamVjdEl0ZW0uT3BlbihzdHJpbmcgVmlld0tpbmQpDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJUHJvamVjdEl0ZW1zIFByb2plY3RJdGVtLlByb2plY3RJdGVtcw0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJRW52RFRFLlByb3BlcnRpZXMgUHJvamVjdEl0ZW0uUHJvcGVydGllcw0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJdm9pZCBQcm9qZWN0SXRlbS5SZW1vdmUoKQ0KCQl7DQoNCgkJfQ0KDQoJCXZvaWQgUHJvamVjdEl0ZW0uU2F2ZShzdHJpbmcgRmlsZU5hbWUpDQoJCXsNCg0KCQl9DQoNCgkJYm9vbCBQcm9qZWN0SXRlbS5TYXZlQXMoc3RyaW5nIE5ld0ZpbGVOYW1lKQ0KCQl7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQlib29sIFByb2plY3RJdGVtLlNhdmVkDQoJCXsNCgkJCWdldA0KCQkJew0KCQkJCXJldHVybiBmYWxzZTsNCgkJCX0NCgkJCXNldA0KCQkJew0KDQoJCQl9DQoJCX0NCg0KCQlQcm9qZWN0IFByb2plY3RJdGVtLlN1YlByb2plY3QNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCW9iamVjdCBQcm9qZWN0SXRlbS5nZXRfRXh0ZW5kZXIoc3RyaW5nIEV4dGVuZGVyTmFtZSkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQlzdHJpbmcgUHJvamVjdEl0ZW0uZ2V0X0ZpbGVOYW1lcyhzaG9ydCBpbmRleCkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQlib29sIFByb2plY3RJdGVtLmdldF9Jc09wZW4oc3RyaW5nIFZpZXdLaW5kKQ0KCQl7DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQkjZW5kcmVnaW9uDQoNCgkJI3JlZ2lvbiBQcm9qZWN0IE1lbWJlcnMNCg0KCQlDb2RlTW9kZWwgUHJvamVjdC5Db2RlTW9kZWwNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCVByb2plY3RzIFByb2plY3QuQ29sbGVjdGlvbg0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJQ29uZmlndXJhdGlvbk1hbmFnZXIgUHJvamVjdC5Db25maWd1cmF0aW9uTWFuYWdlcg0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJRFRFIFByb2plY3QuRFRFDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQl2b2lkIFByb2plY3QuRGVsZXRlKCkNCgkJew0KDQoJCX0NCg0KCQlzdHJpbmcgUHJvamVjdC5FeHRlbmRlckNBVElEDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlvYmplY3QgUHJvamVjdC5FeHRlbmRlck5hbWVzDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlzdHJpbmcgUHJvamVjdC5GaWxlTmFtZQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJc3RyaW5nIFByb2plY3QuRnVsbE5hbWUNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCUdsb2JhbHMgUHJvamVjdC5HbG9iYWxzDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlib29sIFByb2plY3QuSXNEaXJ0eQ0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCQlzZXQNCgkJCXsNCg0KCQkJfQ0KCQl9DQoNCgkJc3RyaW5nIFByb2plY3QuS2luZA0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJc3RyaW5nIFByb2plY3QuTmFtZQ0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlyZXR1cm4gIjw8RGVsZXRlZCBSZWZlcmVuY2U+PiI7DQoJCQl9DQoJCQlzZXQNCgkJCXsNCg0KCQkJfQ0KCQl9DQoNCgkJb2JqZWN0IFByb2plY3QuT2JqZWN0DQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlQcm9qZWN0SXRlbSBQcm9qZWN0LlBhcmVudFByb2plY3RJdGVtDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlQcm9qZWN0SXRlbXMgUHJvamVjdC5Qcm9qZWN0SXRlbXMNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCUVudkRURS5Qcm9wZXJ0aWVzIFByb2plY3QuUHJvcGVydGllcw0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJdm9pZCBQcm9qZWN0LlNhdmUoc3RyaW5nIEZpbGVOYW1lKQ0KCQl7DQoNCgkJfQ0KDQoJCXZvaWQgUHJvamVjdC5TYXZlQXMoc3RyaW5nIE5ld0ZpbGVOYW1lKQ0KCQl7DQoNCgkJfQ0KDQoJCWJvb2wgUHJvamVjdC5TYXZlZA0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCQlzZXQNCgkJCXsNCg0KCQkJfQ0KCQl9DQoNCgkJc3RyaW5nIFByb2plY3QuVW5pcXVlTmFtZQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gbnVsbDsgfQ0KCQl9DQoNCgkJb2JqZWN0IFByb2plY3QuZ2V0X0V4dGVuZGVyKHN0cmluZyBFeHRlbmRlck5hbWUpDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJI2VuZHJlZ2lvbg0KDQoJCSNyZWdpb24gU29sdXRpb25Gb2xkZXIgTWVtYmVycw0KDQoJCVByb2plY3QgU29sdXRpb25Gb2xkZXIuQWRkRnJvbUZpbGUoc3RyaW5nIEZpbGVOYW1lKQ0KCQl7DQoJCQlyZXR1cm4gbnVsbDsNCgkJfQ0KDQoJCVByb2plY3QgU29sdXRpb25Gb2xkZXIuQWRkRnJvbVRlbXBsYXRlKHN0cmluZyBGaWxlTmFtZSwgc3RyaW5nIERlc3RpbmF0aW9uLCBzdHJpbmcgUHJvamVjdE5hbWUpDQoJCXsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoNCgkJUHJvamVjdCBTb2x1dGlvbkZvbGRlci5BZGRTb2x1dGlvbkZvbGRlcihzdHJpbmcgTmFtZSkNCgkJew0KCQkJcmV0dXJuIG51bGw7DQoJCX0NCg0KCQlEVEUgU29sdXRpb25Gb2xkZXIuRFRFDQoJCXsNCgkJCWdldCB7IHJldHVybiBudWxsOyB9DQoJCX0NCg0KCQlib29sIFNvbHV0aW9uRm9sZGVyLkhpZGRlbg0KCQl7DQoJCQlnZXQNCgkJCXsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCQlzZXQNCgkJCXsNCg0KCQkJfQ0KCQl9DQoNCgkJUHJvamVjdCBTb2x1dGlvbkZvbGRlci5QYXJlbnQNCgkJew0KCQkJZ2V0IHsgcmV0dXJuIG51bGw7IH0NCgkJfQ0KDQoJCSNlbmRyZWdpb24NCg0KCQkjcmVnaW9uIEVtcHR5IFZhbHVlDQoNCgkJc3RhdGljIEVtcHR5RHRlRWxlbWVudCBpbnN0YW5jZTsNCg0KCQlzdGF0aWMgRW1wdHlEdGVFbGVtZW50KCkNCgkJew0KCQkJaW5zdGFuY2UgPSBuZXcgRW1wdHlEdGVFbGVtZW50KCk7DQoJCX0NCg0KCQlzdGF0aWMgaW50ZXJuYWwgRW1wdHlEdGVFbGVtZW50IEVtcHR5VmFsdWUoKQ0KCQl7DQoJCQlyZXR1cm4gaW5zdGFuY2U7DQoJCX0NCg0KCQkjZW5kcmVnaW9uDQoJfQ0KDQoJI2VuZHJlZ2lvbg0KfQ0K</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>19</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/VisualStudio/Package/SolutionPackagesContainer.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBEaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgU3lzdGVtLlhtbDsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljczsNCnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uOw0KdXNpbmcgU3lzdGVtLldpbmRvd3MuRm9ybXM7DQp1c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCnVzaW5nIFN5c3RlbS5XaW5kb3dzLkZvcm1zLkRlc2lnbjsNCnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ247DQp1c2luZyBTeXN0ZW0uUnVudGltZS5TZXJpYWxpemF0aW9uOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkOw0KdXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzOw0KdXNpbmcgU3lzdGVtLlJ1bnRpbWUuU2VyaWFsaXphdGlvbi5Gb3JtYXR0ZXJzLkJpbmFyeTsNCg0KdXNpbmcgTWljcm9zb2Z0LldpbjMyOw0KdXNpbmcgTWljcm9zb2Z0LlZpc3VhbFN0dWRpbzsNCnVzaW5nIE1pY3Jvc29mdC5WaXN1YWxTdHVkaW8uU2hlbGw7DQp1c2luZyBNaWNyb3NvZnQuVmlzdWFsU3R1ZGlvLlNoZWxsLkludGVyb3A7DQp1c2luZyBNaWNyb3NvZnQuVmlzdWFsU3R1ZGlvLk9MRS5JbnRlcm9wOw0KdXNpbmcgRW52RFRFOw0KdXNpbmcgRW52RFRFODA7DQoNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tbW9uOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21wb25lbnRNb2RlbDsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tbW9uLlNlcnZpY2VzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeTsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlNlcnZpY2VzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5FZGl0b3JzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLkNvbW1vbjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5TZXJ2aWNlczsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZW1wbGF0ZXM7DQoNCg0KI2VuZHJlZ2lvbg0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvDQp7DQoJW1NlcnZpY2VEZXBlbmRlbmN5KHR5cGVvZihJUmVjaXBlTWFuYWdlclNlcnZpY2UpKV0NCglbU2VydmljZURlcGVuZGVuY3kodHlwZW9mKElWc1NvbHV0aW9uKSldDQogICAgW1NlcnZpY2VEZXBlbmRlbmN5KHR5cGVvZihEVEUpKV0NCglbU2VydmljZURlcGVuZGVuY3kodHlwZW9mKElWc1RlbXBsYXRlc1NlcnZpY2UpKV0NCglpbnRlcm5hbCBzZWFsZWQgY2xhc3MgU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lciA6IE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tcG9uZW50TW9kZWwuU2VydmljZUNvbnRhaW5lciwgSUhvc3RTZXJ2aWNlLCBJVnNTb2x1dGlvbkV2ZW50cywgSVZzU29sdXRpb25FdmVudHM0LCBJUGVyc2lzdGVuY2VTZXJ2aWNlLCBJT2xlQ29tcG9uZW50IA0KCXsNCgkJI3JlZ2lvbiBGaWVsZHMNCg0KCQlJUmVjaXBlTWFuYWdlclNlcnZpY2UgcmVjaXBlTWFuYWdlcjsNCgkJT2xlTWVudUNvbW1hbmQgbWVudUNtZDsNCgkJdWludCBjb21wb25lbnRJRDsNCgkJSU9sZUNvbXBvbmVudE1hbmFnZXIgb2xlQ29tcG9uZW50TWFuYWdlcjsNCg0KCQkjcmVnaW9uIEV2ZW50IGhhbmRsZXJzDQoNCiAgICAgICAgLy8gU2VlIFZTV2hpZGJleSBidWcgIzQ0NTkzMCBvbiB3aHkgd2Uga2VlcCB0aGVzZSByZWZlcmVuY2VzLg0KCQlTb2x1dGlvbkV2ZW50cyBzb2x1dGlvbkV2ZW50czsNCgkJUHJvamVjdEl0ZW1zRXZlbnRzIHByb2plY3RJdGVtc0V2ZW50czsNCiAgICAgICAgUHJvamVjdEl0ZW1zRXZlbnRzIHNvbHV0aW9uSXRlbXNFdmVudHM7DQoNCgkJI2VuZHJlZ2lvbg0KDQoJCSNlbmRyZWdpb24NCg0KCQkjcmVnaW9uIERlZmF1bHQgY29uc3RydWN0b3INCg0KCQlwdWJsaWMgU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lcigpOmJhc2UodHJ1ZSkNCgkJew0KCQkJdGhpcy5vbGVDb21wb25lbnRNYW5hZ2VyID0gbnVsbDsNCgkJCXRoaXMuY29tcG9uZW50SUQgPSAwOw0KICAgICAgICAgICAgdGhpcy5wYWNrYWdlUGVyc2lzdGVuY2VEYXRhID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLFBhY2thZ2VTdGF0ZT4oNyk7DQoJCQl0aGlzLnBhY2thZ2VzVG9QcmVzZXJ2ZSA9IG5ldyBBcnJheUxpc3QoKTsNCiAgICAgICAgICAgIEFkZFNlcnZpY2UodHlwZW9mKElQZXJzaXN0ZW5jZVNlcnZpY2UpLCB0aGlzKTsNCgkJfQ0KDQoJCSNlbmRyZWdpb24NCg0KCQkjcmVnaW9uIE92ZXJyaWRlcw0KDQoJCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU2l0ZWQoKQ0KCQl7DQoJCQliYXNlLk9uU2l0ZWQoKTsNCg0KICAgICAgICAgICAgLy9TZXR1cCBEVEUgRXZlbnRzDQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCgkJCQlvbGVDb21wb25lbnRNYW5hZ2VyID0gDQoJCQkJCShJT2xlQ29tcG9uZW50TWFuYWdlcilHZXRTZXJ2aWNlKHR5cGVvZihTT2xlQ29tcG9uZW50TWFuYWdlcikpOw0KCQkJCWlmIChvbGVDb21wb25lbnRNYW5hZ2VyICE9IG51bGwpDQoJCQkJew0KCQkJCQlPTEVDUklORk8gY3JpbmZvID0gbmV3IE9MRUNSSU5GTygpOw0KCQkJCQljcmluZm8uY2JTaXplID0gKHVpbnQpTWFyc2hhbC5TaXplT2YoY3JpbmZvKTsNCgkJCQkJY3JpbmZvLmdyZmNyZiA9ICh1aW50KShfT0xFQ1JGLm9sZWNyZk5lZWRJZGxlVGltZSB8IF9PTEVDUkYub2xlY3JmTmVlZFBlcmlvZGljSWRsZVRpbWUpOw0KCQkJCQljcmluZm8uZ3JmY2FkdmYgPSAodWludCkoX09MRUNBRFZGLm9sZWNhZHZmTW9kYWwgfCBfT0xFQ0FEVkYub2xlY2FkdmZSZWRyYXdPZmYgfCBfT0xFQ0FEVkYub2xlY2FkdmZXYXJuaW5nc09mZik7DQoJCQkJCWNyaW5mby51SWRsZVRpbWVJbnRlcnZhbCA9IDEwMDA7DQoJCQkJCW9sZUNvbXBvbmVudE1hbmFnZXIuRlJlZ2lzdGVyQ29tcG9uZW50KHRoaXMsDQoJCQkJCQluZXcgT0xFQ1JJTkZPW10geyBjcmluZm8gfSwNCgkJCQkJCW91dCB0aGlzLmNvbXBvbmVudElEKTsNCgkJCQl9DQoNCgkJCSAgICAvLyBBZGQgb3VyIGNvbW1hbmQgaGFuZGxlcnMgZm9yIG1lbnUgKGNvbW1hbmRzIG11c3QgZXhpc3QgaW4gdGhlIC5jdGMgZmlsZSkNCgkJCSAgICBPbGVNZW51Q29tbWFuZFNlcnZpY2UgbWNzID0gR2V0U2VydmljZSh0eXBlb2YoSU1lbnVDb21tYW5kU2VydmljZSksdHJ1ZSkgYXMgT2xlTWVudUNvbW1hbmRTZXJ2aWNlOw0KCQkJICAgIGlmIChtY3MgIT0gbnVsbCkNCgkJCSAgICB7DQoJCQkJICAgIENvbW1hbmRJRCBjbWQgPSBuZXcgQ29tbWFuZElEKENUQy5ndWlkUmVjaXBlTWFuYWdlckNtZFNldCwgQ1RDLmljbWRSZWNpcGVNYW5hZ2VyQ29tbWFuZCk7DQoJCQkJICAgIG1lbnVDbWQgPSBuZXcgT2xlTWVudUNvbW1hbmQobmV3IEV2ZW50SGFuZGxlcihPblJlY2lwZU1hbmFnZXJDb21tYW5kKSwgY21kKTsNCgkJCQkgICAgbWVudUNtZC5TdXBwb3J0ZWQgPSB0cnVlOw0KCQkJCSAgICBtZW51Q21kLlZpc2libGUgPSB0cnVlOw0KCQkJCSAgICBtZW51Q21kLkVuYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBtZW51Q21kLkJlZm9yZVF1ZXJ5U3RhdHVzICs9IG5ldyBFdmVudEhhbmRsZXIoT25SZWNpcGVNYW5hZ2VyUXVlcnlTdGF0dXMpOw0KCQkJCSAgICBtY3MuQWRkQ29tbWFuZChtZW51Q21kKTsNCgkJCSAgICB9DQoNCgkJCSAgICAvL1NldHVwIHJlY2lwZSBtYW5hZ2VyIGV2ZW50cw0KCQkJICAgIHJlY2lwZU1hbmFnZXIgPSBHZXRTZXJ2aWNlPElSZWNpcGVNYW5hZ2VyU2VydmljZT4odHJ1ZSk7DQoJCQkgICAgcmVjaXBlTWFuYWdlci5FbmFibGVkUGFja2FnZSArPSBuZXcgUGFja2FnZUV2ZW50SGFuZGxlcihPbkVuYWJsZWRQYWNrYWdlKTsNCgkJCSAgICByZWNpcGVNYW5hZ2VyLkRpc2FibGluZ1BhY2thZ2UgKz0gbmV3IENhbmNlbFBhY2thZ2VFdmVudEhhbmRsZXIoT25EaXNhYmxpbmdQYWNrYWdlKTsNCiAgICAgICAgICAgICAgICByZWNpcGVNYW5hZ2VyLkVuYWJsaW5nUGFja2FnZSArPSBuZXcgQ2FuY2VsUGFja2FnZUV2ZW50SGFuZGxlcihPbkVuYWJsaW5nUGFja2FnZSk7DQoNCgkJCQlEVEUgZHRlID0gR2V0U2VydmljZTxEVEU+KHRydWUpOw0KICAgICAgICAgICAgICAgIERURTIgZHRlMiA9IChEVEUyKWR0ZTsNCg0KCQkJCXRoaXMuc29sdXRpb25FdmVudHMgPSBkdGUuRXZlbnRzLlNvbHV0aW9uRXZlbnRzOw0KICAgICAgICAgICAgICAgIHNvbHV0aW9uRXZlbnRzLlByb2plY3RSZW1vdmVkICs9IG5ldyBfZGlzcFNvbHV0aW9uRXZlbnRzX1Byb2plY3RSZW1vdmVkRXZlbnRIYW5kbGVyKE9uUHJvamVjdFJlbW92ZWQpOw0KICAgICAgICAgICAgICAgIHNvbHV0aW9uRXZlbnRzLlByb2plY3RSZW5hbWVkICs9IG5ldyBfZGlzcFNvbHV0aW9uRXZlbnRzX1Byb2plY3RSZW5hbWVkRXZlbnRIYW5kbGVyKE9uUHJvamVjdFJlbmFtZWQpOw0KICAgICAgICAgICAgICAgIHNvbHV0aW9uRXZlbnRzLlByb2plY3RBZGRlZCArPSBuZXcgX2Rpc3BTb2x1dGlvbkV2ZW50c19Qcm9qZWN0QWRkZWRFdmVudEhhbmRsZXIoT25Qcm9qZWN0QWRkZWQpOw0KDQoJCQkJdGhpcy5wcm9qZWN0SXRlbXNFdmVudHMgPSAoKEV2ZW50czIpZHRlMi5FdmVudHMpLlByb2plY3RJdGVtc0V2ZW50czsNCiAgICAgICAgICAgICAgICBwcm9qZWN0SXRlbXNFdmVudHMuSXRlbVJlbmFtZWQgKz0gbmV3IF9kaXNwUHJvamVjdEl0ZW1zRXZlbnRzX0l0ZW1SZW5hbWVkRXZlbnRIYW5kbGVyKE9uUHJvamVjdEl0ZW1SZW5hbWVkKTsNCiAgICAgICAgICAgICAgICBwcm9qZWN0SXRlbXNFdmVudHMuSXRlbVJlbW92ZWQgKz0gbmV3IF9kaXNwUHJvamVjdEl0ZW1zRXZlbnRzX0l0ZW1SZW1vdmVkRXZlbnRIYW5kbGVyKE9uUHJvamVjdEl0ZW1SZW1vdmVkKTsNCg0KICAgICAgICAgICAgICAgIHRoaXMuc29sdXRpb25JdGVtc0V2ZW50cyA9IGR0ZS5FdmVudHMuU29sdXRpb25JdGVtc0V2ZW50czsNCiAgICAgICAgICAgICAgICBzb2x1dGlvbkl0ZW1zRXZlbnRzLkl0ZW1SZW1vdmVkICs9IG5ldyBfZGlzcFByb2plY3RJdGVtc0V2ZW50c19JdGVtUmVtb3ZlZEV2ZW50SGFuZGxlcihPblByb2plY3RJdGVtUmVtb3ZlZCk7DQogICAgICAgICAgICAgICAgc29sdXRpb25JdGVtc0V2ZW50cy5JdGVtUmVuYW1lZCArPSBuZXcgX2Rpc3BQcm9qZWN0SXRlbXNFdmVudHNfSXRlbVJlbmFtZWRFdmVudEhhbmRsZXIoT25Qcm9qZWN0SXRlbVJlbmFtZWQpOyANCg0KCQkJfQ0KCQkJY2F0Y2ggKEV4Y2VwdGlvbiBleCkNCgkJCXsNCgkJCQlUcmFjZS5UcmFjZUVycm9yKGV4LlRvU3RyaW5nKCkpOw0KCQkJCXRocm93IG5ldyBSZWNpcGVGcmFtZXdvcmtFeGNlcHRpb24oDQoJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlBhY2thZ2VfRmFpbGVkVG9Mb2FkLCBleCk7DQoJCQl9DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIE9uUmVjaXBlTWFuYWdlclF1ZXJ5U3RhdHVzKG9iamVjdCBzZW5kZXIsIEV2ZW50QXJncyBlKQ0KICAgICAgICB7DQogICAgICAgICAgICBEVEUgZHRlID0gR2V0U2VydmljZTxEVEU+KHRydWUpOw0KICAgICAgICAgICAgbWVudUNtZC5WaXNpYmxlID0gZHRlLlNvbHV0aW9uLklzT3BlbjsNCiAgICAgICAgfQ0KDQoJCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIERpc3Bvc2UoYm9vbCBkaXNwb3NpbmcpDQoJCXsNCgkJCWlmIChwYWNrYWdlc1RvUHJlc2VydmUgIT0gbnVsbCkNCgkJCXsNCgkJCQlwYWNrYWdlc1RvUHJlc2VydmUuQ2xlYXIoKTsNCgkJCQlwYWNrYWdlc1RvUHJlc2VydmUgPSBudWxsOw0KCQkJfQ0KICAgICAgICAgICAgaWYgKHBhY2thZ2VQZXJzaXN0ZW5jZURhdGEgIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBMZXQncyByZW1vdmUgdGhlIGJhZyBvZiBzdGF0ZSB0b28uDQogICAgICAgICAgICAgICAgcGFja2FnZVBlcnNpc3RlbmNlRGF0YS5DbGVhcigpOw0KICAgICAgICAgICAgICAgIHBhY2thZ2VQZXJzaXN0ZW5jZURhdGEgPSBudWxsOw0KICAgICAgICAgICAgfQ0KCQkJaWYgKHJlY2lwZU1hbmFnZXIgIT0gbnVsbCkNCgkJCXsNCgkJCQlyZWNpcGVNYW5hZ2VyLkVuYWJsZWRQYWNrYWdlIC09IG5ldyBQYWNrYWdlRXZlbnRIYW5kbGVyKE9uRW5hYmxlZFBhY2thZ2UpOw0KICAgICAgICAgICAgICAgIHJlY2lwZU1hbmFnZXIuRW5hYmxpbmdQYWNrYWdlIC09IG5ldyBDYW5jZWxQYWNrYWdlRXZlbnRIYW5kbGVyKE9uRW5hYmxpbmdQYWNrYWdlKTsNCgkJCQlyZWNpcGVNYW5hZ2VyLkRpc2FibGluZ1BhY2thZ2UgLT0gbmV3IENhbmNlbFBhY2thZ2VFdmVudEhhbmRsZXIoT25EaXNhYmxpbmdQYWNrYWdlKTsNCgkJCQlyZWNpcGVNYW5hZ2VyID0gbnVsbDsNCgkJCX0NCiAgICAgICAgICAgIC8vIFRoZSBEVEUgb2JqZWN0IGlzIGludmFsaWQgd2hlbiBleGl0aW5nIFZTLg0KICAgICAgICAgICAgLy8gQW55IGFjY2VzcyB0byBpdCB3aWxsIHRocm93IGFuIEFWIGV4Y2VwdGlvbg0KICAgICAgICAgICAgLy9pZiAoc29sdXRpb25FdmVudHMgIT0gbnVsbCkNCiAgICAgICAgICAgIC8vew0KICAgICAgICAgICAgLy8gICAgc29sdXRpb25FdmVudHMuUHJvamVjdFJlbW92ZWQgLT0gbmV3IF9kaXNwU29sdXRpb25FdmVudHNfUHJvamVjdFJlbW92ZWRFdmVudEhhbmRsZXIoT25Qcm9qZWN0UmVtb3ZlZCk7DQogICAgICAgICAgICAvLyAgICBzb2x1dGlvbkV2ZW50cy5Qcm9qZWN0UmVuYW1lZCAtPSBuZXcgX2Rpc3BTb2x1dGlvbkV2ZW50c19Qcm9qZWN0UmVuYW1lZEV2ZW50SGFuZGxlcihPblByb2plY3RSZW5hbWVkKTsNCiAgICAgICAgICAgIC8vICAgIHRoaXMuc29sdXRpb25FdmVudHMgPSBudWxsOw0KICAgICAgICAgICAgLy99DQogICAgICAgICAgICAvL2lmICggcHJvamVjdEl0ZW1zRXZlbnRzICE9IG51bGwgKQ0KICAgICAgICAgICAgLy97DQogICAgICAgICAgICAvLyAgICBwcm9qZWN0SXRlbXNFdmVudHMuSXRlbVJlbW92ZWQgLT0gbmV3IF9kaXNwUHJvamVjdEl0ZW1zRXZlbnRzX0l0ZW1SZW1vdmVkRXZlbnRIYW5kbGVyKE9uUHJvamVjdEl0ZW1SZW1vdmVkKTsNCiAgICAgICAgICAgIC8vICAgIHByb2plY3RJdGVtc0V2ZW50cy5JdGVtUmVuYW1lZCAtPSBuZXcgX2Rpc3BQcm9qZWN0SXRlbXNFdmVudHNfSXRlbVJlbmFtZWRFdmVudEhhbmRsZXIoT25Qcm9qZWN0SXRlbVJlbmFtZWQpOw0KICAgICAgICAgICAgLy8gICAgdGhpcy5wcm9qZWN0SXRlbXNFdmVudHMgPSBudWxsOw0KICAgICAgICAgICAgLy99DQogICAgICAgICAgICAvL2lmIChzb2x1dGlvbkl0ZW1zRXZlbnRzICE9IG51bGwpDQogICAgICAgICAgICAvL3sNCiAgICAgICAgICAgIC8vICAgIHNvbHV0aW9uSXRlbXNFdmVudHMuSXRlbVJlbW92ZWQgLT0gbmV3IF9kaXNwUHJvamVjdEl0ZW1zRXZlbnRzX0l0ZW1SZW1vdmVkRXZlbnRIYW5kbGVyKE9uUHJvamVjdEl0ZW1SZW1vdmVkKTsNCiAgICAgICAgICAgIC8vICAgIHNvbHV0aW9uSXRlbXNFdmVudHMuSXRlbVJlbmFtZWQgLT0gbmV3IF9kaXNwUHJvamVjdEl0ZW1zRXZlbnRzX0l0ZW1SZW5hbWVkRXZlbnRIYW5kbGVyKE9uUHJvamVjdEl0ZW1SZW5hbWVkKTsNCiAgICAgICAgICAgIC8vICAgIHRoaXMuc29sdXRpb25JdGVtc0V2ZW50cyA9IG51bGw7DQogICAgICAgICAgICAvL30NCiAgICAgICAgICAgIC8vaWYgKG1lbnVDbWQgIT0gbnVsbCkNCiAgICAgICAgICAgIC8vew0KICAgICAgICAgICAgLy8gICAgbWVudUNtZC5CZWZvcmVRdWVyeVN0YXR1cyAtPSBuZXcgRXZlbnRIYW5kbGVyKE9uUmVjaXBlTWFuYWdlclF1ZXJ5U3RhdHVzKTsNCiAgICAgICAgICAgIC8vICAgIE9sZU1lbnVDb21tYW5kU2VydmljZSBtY3MgPSBHZXRTZXJ2aWNlKHR5cGVvZihJTWVudUNvbW1hbmRTZXJ2aWNlKSwgZmFsc2UpIGFzIE9sZU1lbnVDb21tYW5kU2VydmljZTsNCiAgICAgICAgICAgIC8vICAgIGlmIChtY3MgIT0gbnVsbCkNCiAgICAgICAgICAgIC8vICAgIHsNCiAgICAgICAgICAgIC8vICAgICAgICBtY3MuUmVtb3ZlQ29tbWFuZChtZW51Q21kKTsNCiAgICAgICAgICAgIC8vICAgIH0NCiAgICAgICAgICAgIC8vICAgIG1lbnVDbWQgPSBudWxsOw0KICAgICAgICAgICAgLy99DQoNCgkJCWlmIChvbGVDb21wb25lbnRNYW5hZ2VyICE9IG51bGwpDQoJCQl7DQoJCQkJb2xlQ29tcG9uZW50TWFuYWdlci5GUmV2b2tlQ29tcG9uZW50KHRoaXMuY29tcG9uZW50SUQpOw0KCQkJCXRoaXMub2xlQ29tcG9uZW50TWFuYWdlciA9IG51bGw7DQoJCQkJdGhpcy5jb21wb25lbnRJRCA9IDA7DQoJCQl9DQoJCQliYXNlLkRpc3Bvc2UoZGlzcG9zaW5nKTsJDQoJCX0NCg0KCQkjZW5kcmVnaW9uDQoJCQ0KCQkjcmVnaW9uIFN0YW5kYXJkIChOb24tZ3VpZGFuY2VwYWNrYWdlKSBDb21tYW5kIEhhbmRsZXJzDQoNCgkJaW50ZXJuYWwgY2xhc3MgQ1RDDQoJCXsNCgkJCXB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR3VpZCBndWlkUmVjaXBlTWFuYWdlclBrZyA9IHR5cGVvZihSZWNpcGVNYW5hZ2VyUGFja2FnZSkuR1VJRDsNCg0KCQkJcHVibGljIHN0YXRpYyByZWFkb25seSBHdWlkIGd1aWRSZWNpcGVNYW5hZ2VyQ21kU2V0ID0gbmV3IEd1aWQoIns5NjExOTU4NC04QzRCLTQ5MTAtOTIxMS03MUQ0OEZBNTlGQUZ9Iik7DQoJCQlwdWJsaWMgY29uc3QgaW50IGljbWRSZWNpcGVNYW5hZ2VyQ29tbWFuZCA9IDB4MTAwOw0KDQoJCX07DQoNCgkJcHJpdmF0ZSB2b2lkIE9uUmVjaXBlTWFuYWdlckNvbW1hbmQob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGV2ZW50QXJncykNCgkJew0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgSVVJU2VydmljZSB1aVNlcnZpY2UgPSBHZXRTZXJ2aWNlPElVSVNlcnZpY2U+KCk7DQogICAgICAgICAgICAgICAgSVJlY2lwZU1hbmFnZXJTZXJ2aWNlIG1hbmFnZXIgPSBHZXRTZXJ2aWNlPElSZWNpcGVNYW5hZ2VyU2VydmljZT4oKTsNCiAgICAgICAgICAgICAgICBpZiAobWFuYWdlciA9PSBudWxsKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgVHJhY2UuVHJhY2VFcnJvcigNCiAgICAgICAgICAgICAgICAgICAgICAgIFByb3BlcnRpZXMuUmVzb3VyY2VzLlBhY2thZ2VfQ2FudEdldE1hbmFnZXJTZXJ2aWNlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHVpU2VydmljZSAhPSBudWxsKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB1aVNlcnZpY2UuU2hvd0Vycm9yKFByb3BlcnRpZXMuUmVzb3VyY2VzLlBhY2thZ2VfQ2FudEdldE1hbmFnZXJTZXJ2aWNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEVudkRURS5EVEUgdnMgPSBHZXRTZXJ2aWNlPEVudkRURS5EVEU+KCk7DQogICAgICAgICAgICAgICAgaWYgKHZzICE9IG51bGwgJiYgdnMuU29sdXRpb24gIT0gbnVsbCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIG9iamVjdCBjdXJyZW50U2VsZWN0aW9uID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZzLlNlbGVjdGVkSXRlbXMuQ291bnQgIT0gMCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWRJdGVtIGl0ZW0gPSB2cy5TZWxlY3RlZEl0ZW1zLkl0ZW0oMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGFyZ2V0Lg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uUHJvamVjdCAhPSBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3Rpb24gPSBpdGVtLlByb2plY3Q7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLlByb2plY3RJdGVtICE9IG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdGlvbiA9IGl0ZW0uUHJvamVjdEl0ZW07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdGlvbiA9IHZzLlNvbHV0aW9uOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHVzaW5nKFBhY2thZ2VNYW5hZ2VtZW50LlBhY2thZ2VNYW5hZ2VyIGZvcm0gPSBuZXcgUGFja2FnZU1hbmFnZW1lbnQuUGFja2FnZU1hbmFnZXIoDQogICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyIGFzIFN5c3RlbS5JU2VydmljZVByb3ZpZGVyLCBjdXJyZW50U2VsZWN0aW9uKSkNCgkJCQkJew0KCQkJCQkJaWYgKHVpU2VydmljZSA9PSBudWxsKQ0KCQkJCQkJew0KCQkJCQkJCWZvcm0uU2hvd0RpYWxvZygpOw0KCQkJCQkJfQ0KCQkJCQkJZWxzZQ0KCQkJCQkJew0KCQkJCQkJCXVpU2VydmljZS5TaG93RGlhbG9nKGZvcm0pOw0KCQkJCQkJfQ0KCQkJCQl9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICh1aVNlcnZpY2UgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdWlTZXJ2aWNlLlNob3dNZXNzYWdlKFByb3BlcnRpZXMuUmVzb3VyY2VzLlBhY2thZ2VfTm9Tb2x1dGlvbk9wZW5lZCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpDQogICAgICAgICAgICB7DQoJCQkJRXJyb3JIZWxwZXIuU2hvdyhHZXRTZXJ2aWNlPElVSVNlcnZpY2U+KCksIGUpOw0KICAgICAgICAgICAgfQ0KCQl9DQoNCgkJI2VuZHJlZ2lvbg0KDQoJCSNyZWdpb24gSVZzU29sdXRpb25FdmVudHMgbWVtYmVycw0KDQoJCWludCBJVnNTb2x1dGlvbkV2ZW50cy5PbkFmdGVyQ2xvc2VTb2x1dGlvbihvYmplY3QgcFVua1Jlc2VydmVkKQ0KCQl7DQoJCQl0cnkNCgkJCXsNCgkJCQltZW51Q21kLkVuYWJsZWQgPSBmYWxzZTsNCgkJCQltZW51Q21kLlZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBwYWNrYWdlUGVyc2lzdGVuY2VEYXRhLkNsZWFyKCk7DQoJCQkJcGFja2FnZXNUb1ByZXNlcnZlLkNsZWFyKCk7DQoJCQkJcmV0dXJuIFZTQ29uc3RhbnRzLlNfT0s7DQoJCQl9DQoJCQljYXRjaCAoRXhjZXB0aW9uIGUpDQoJCQl7DQoJCQkJRXJyb3JIZWxwZXIuU2hvdyhHZXRTZXJ2aWNlPElVSVNlcnZpY2U+KCksIGUpOw0KCQkJCXJldHVybiBWU0NvbnN0YW50cy5FX0ZBSUw7DQoJCQl9DQoJCX0NCg0KCQlpbnQgSVZzU29sdXRpb25FdmVudHMuT25BZnRlckxvYWRQcm9qZWN0KElWc0hpZXJhcmNoeSBwU3R1YkhpZXJhcmNoeSwgSVZzSGllcmFyY2h5IHBSZWFsSGllcmFyY2h5KQ0KCQl7DQogICAgICAgICAgICByZXR1cm4gVlNDb25zdGFudHMuRV9OT1RJTVBMOw0KICAgICAgICB9DQoNCgkJaW50IElWc1NvbHV0aW9uRXZlbnRzLk9uQWZ0ZXJPcGVuUHJvamVjdChJVnNIaWVyYXJjaHkgcEhpZXJhcmNoeSwgaW50IGZBZGRlZCkNCgkJew0KICAgICAgICAgICAgcmV0dXJuIFZTQ29uc3RhbnRzLkVfTk9USU1QTDsNCiAgICAgICAgfQ0KDQoJCWludCBJVnNTb2x1dGlvbkV2ZW50cy5PbkFmdGVyT3BlblNvbHV0aW9uKG9iamVjdCBwVW5rUmVzZXJ2ZWQsIGludCBmTmV3U29sdXRpb24pDQoJCXsNCgkJCW1lbnVDbWQuRW5hYmxlZCA9IHRydWU7DQoJCQltZW51Q21kLlZpc2libGUgPSB0cnVlOw0KCQkJSVJlY2lwZU1hbmFnZXJTZXJ2aWNlIHJlY2lwZU1hbmFnZXIgPSBHZXRTZXJ2aWNlPElSZWNpcGVNYW5hZ2VyU2VydmljZT4odHJ1ZSk7DQoJCQkvL0FmdGVyIHRoZSBzb2x1dGlvbiBoYXZlIGJlZW4gbG9hZGVkLCBub3cgbGV0J3MgZW5hYmxlIGVhY2ggcGFja2FnZQ0KICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHBhY2thZ2VOYW1lIGluIHBhY2thZ2VQZXJzaXN0ZW5jZURhdGEuS2V5cykNCgkJCXsNCgkJCQl0cnkNCgkJCQl7DQoJCQkJCWlmIChyZWNpcGVNYW5hZ2VyLkdldFBhY2thZ2UocGFja2FnZU5hbWUpID09IG51bGwpDQoJCQkJCXsNCgkJCQkJCXJlY2lwZU1hbmFnZXIuRW5hYmxlUGFja2FnZShwYWNrYWdlTmFtZSk7DQoJCQkJCX0NCgkJCQl9DQoJCQkJY2F0Y2ggKEV4Y2VwdGlvbiBleCkNCgkJCQl7DQoJCQkJCURpYWxvZ1Jlc3VsdCByZXN1bHQgPSBFcnJvckhlbHBlci5TaG93KHRoaXMsIGV4LCBTdHJpbmcuRm9ybWF0KEN1bHR1cmVJbmZvLkN1cnJlbnRVSUN1bHR1cmUsDQoJCQkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlNvbHV0aW9uUGFja2FnZXNDb250YWluZXJfQ2Fubm90TG9hZFBhY2thZ2UsDQoJCQkJCQkJCXBhY2thZ2VOYW1lKSwgTWVzc2FnZUJveEJ1dHRvbnMuWWVzTm8pOw0KCQkJCQlpZiAocmVzdWx0ID09IERpYWxvZ1Jlc3VsdC5ZZXMpDQoJCQkJCXsNCgkJCQkJCXRyeQ0KCQkJCQkJew0KCQkJCQkJCWlmIChyZWNpcGVNYW5hZ2VyLkdldFBhY2thZ2UocGFja2FnZU5hbWUpICE9IG51bGwpDQoJCQkJCQkJew0KCQkJCQkJCQlyZWNpcGVNYW5hZ2VyLkRpc2FibGVQYWNrYWdlKHBhY2thZ2VOYW1lKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCQlmaW5hbGx5DQoJCQkJCQl7DQoJCQkJCQkJSVBlcnNpc3RlbmNlU2VydmljZSBwZXJzaXN0ID0gR2V0U2VydmljZTxJUGVyc2lzdGVuY2VTZXJ2aWNlPigpOw0KCQkJCQkJCWlmIChwZXJzaXN0ICE9IG51bGwpDQoJCQkJCQkJew0KCQkJCQkJCQlwZXJzaXN0LlJlbW92ZVJlZmVyZW5jZXMocGFja2FnZU5hbWUpOw0KCQkJCQkJCX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWNrYWdlUGVyc2lzdGVuY2VEYXRhLlJlbW92ZShwYWNrYWdlTmFtZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCQlpZiAoVW5mb2xkVGVtcGxhdGUuVW5mb2xkaW5nVGVtcGxhdGVzLkNvdW50ID09IDApDQoJCQl7DQoJCQkJUmVmZXJlbmNlUmVzdG9yZVNlcnZpY2UgcmVzdG9yZVNlcnZpY2UgPSBudWxsOw0KCQkJCXRyeQ0KCQkJCXsNCgkJCQkJcmVzdG9yZVNlcnZpY2UgPSBuZXcgUmVmZXJlbmNlUmVzdG9yZVNlcnZpY2UoKTsNCgkJCQkJQWRkKHJlc3RvcmVTZXJ2aWNlKTsNCgkJCQkJcmVzdG9yZVNlcnZpY2UuUGVyZm9ybVZhbGlkYXRpb24oKTsNCgkJCQl9DQoJCQkJZmluYWxseQ0KCQkJCXsNCgkJCQkJaWYgKHJlc3RvcmVTZXJ2aWNlICE9IG51bGwpDQoJCQkJCXsNCgkJCQkJCVJlbW92ZShyZXN0b3JlU2VydmljZSk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoNCgkJCXJldHVybiBWU0NvbnN0YW50cy5TX09LOw0KCQl9DQoNCgkJaW50IElWc1NvbHV0aW9uRXZlbnRzLk9uQmVmb3JlQ2xvc2VQcm9qZWN0KElWc0hpZXJhcmNoeSBwSGllcmFyY2h5LCBpbnQgZlJlbW92ZWQpDQoJCXsNCgkJCXJldHVybiBWU0NvbnN0YW50cy5FX05PVElNUEw7DQoJCX0NCg0KCQlpbnQgSVZzU29sdXRpb25FdmVudHMuT25CZWZvcmVDbG9zZVNvbHV0aW9uKG9iamVjdCBwVW5rUmVzZXJ2ZWQpDQoJCXsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vVW5sb2FkIGV2ZXJ5IHNpbmdsZSBwYWNrYWdlDQogICAgICAgICAgICAgICAgSVJlY2lwZU1hbmFnZXJTZXJ2aWNlIHJlY2lwZU1hbmFnZXIgPSBHZXRTZXJ2aWNlPElSZWNpcGVNYW5hZ2VyU2VydmljZT4odHJ1ZSk7DQogICAgICAgICAgICAgICAgSUNvbnRhaW5lciBwYWNrYWdlcyA9IChJQ29udGFpbmVyKXJlY2lwZU1hbmFnZXI7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoSUNvbXBvbmVudCBjb21wb25lbnQgaW4gcGFja2FnZXMuQ29tcG9uZW50cykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQgaXMgR3VpZGFuY2VQYWNrYWdlKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICByZWNpcGVNYW5hZ2VyLkRpc2FibGVQYWNrYWdlKChHdWlkYW5jZVBhY2thZ2UpY29tcG9uZW50KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gVlNDb25zdGFudHMuU19PSzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkNCiAgICAgICAgICAgIHsNCgkJCQlFcnJvckhlbHBlci5TaG93KEdldFNlcnZpY2U8SVVJU2VydmljZT4oKSwgZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIFZTQ29uc3RhbnRzLkVfRkFJTDsNCiAgICAgICAgICAgIH0NCgkJfQ0KDQoJCWludCBJVnNTb2x1dGlvbkV2ZW50cy5PbkJlZm9yZVVubG9hZFByb2plY3QoSVZzSGllcmFyY2h5IHBSZWFsSGllcmFyY2h5LCBJVnNIaWVyYXJjaHkgcFN0dWJIaWVyYXJjaHkpDQoJCXsNCgkJCXJldHVybiBWU0NvbnN0YW50cy5FX05PVElNUEw7DQoJCX0NCg0KCQlpbnQgSVZzU29sdXRpb25FdmVudHMuT25RdWVyeUNsb3NlUHJvamVjdChJVnNIaWVyYXJjaHkgcEhpZXJhcmNoeSwgaW50IGZSZW1vdmluZywgcmVmIGludCBwZkNhbmNlbCkNCgkJew0KCQkJcmV0dXJuIFZTQ29uc3RhbnRzLkVfTk9USU1QTDsNCgkJfQ0KDQoJCWludCBJVnNTb2x1dGlvbkV2ZW50cy5PblF1ZXJ5Q2xvc2VTb2x1dGlvbihvYmplY3QgcFVua1Jlc2VydmVkLCByZWYgaW50IHBmQ2FuY2VsKQ0KCQl7DQoJCQlyZXR1cm4gVlNDb25zdGFudHMuRV9OT1RJTVBMOw0KCQl9DQoNCgkJaW50IElWc1NvbHV0aW9uRXZlbnRzLk9uUXVlcnlVbmxvYWRQcm9qZWN0KElWc0hpZXJhcmNoeSBwUmVhbEhpZXJhcmNoeSwgcmVmIGludCBwZkNhbmNlbCkNCgkJew0KCQkJcmV0dXJuIFZTQ29uc3RhbnRzLkVfTk9USU1QTDsNCgkJfQ0KDQoNCgkJI2VuZHJlZ2lvbg0KDQogICAgICAgICNyZWdpb24gSVZzU29sdXRpb25FdmVudHM0IE1lbWJlcnMNCg0KICAgICAgICBpbnQgSVZzU29sdXRpb25FdmVudHM0Lk9uQWZ0ZXJBc3luY2hPcGVuUHJvamVjdChJVnNIaWVyYXJjaHkgcEhpZXJhcmNoeSwgaW50IGZBZGRlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIFZTQ29uc3RhbnRzLkVfTk9USU1QTDsNCiAgICAgICAgfQ0KDQogICAgICAgIGludCBJVnNTb2x1dGlvbkV2ZW50czQuT25BZnRlckNoYW5nZVByb2plY3RQYXJlbnQoSVZzSGllcmFyY2h5IHBIaWVyYXJjaHkpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vSGFuZGxlIERyYWcgYW5kIERyb3AgZXZlbnQNCiAgICAgICAgICAgIGlmIChwSGllcmFyY2h5ID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIFZTQ29uc3RhbnRzLkVfSU5WQUxJREFSRzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG9iamVjdCBoaWVyYXJjaHlPYmplY3QgPSBudWxsOw0KICAgICAgICAgICAgcEhpZXJhcmNoeS5HZXRQcm9wZXJ0eShEdGVIZWxwZXIuX19WU0lURU1JRC5ST09ULA0KICAgICAgICAgICAgICAgIChpbnQpX19WU0hQUk9QSUQuVlNIUFJPUElEX0V4dE9iamVjdCwNCiAgICAgICAgICAgICAgICBvdXQgaGllcmFyY2h5T2JqZWN0KTsNCiAgICAgICAgICAgIGlmIChoaWVyYXJjaHlPYmplY3QgIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoaGllcmFyY2h5T2JqZWN0IGlzIFByb2plY3QpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBPblByb2plY3RSZW5hbWVkKGhpZXJhcmNoeU9iamVjdCBhcyBQcm9qZWN0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaGllcmFyY2h5T2JqZWN0IGlzIFByb2plY3RJdGVtKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgT25Qcm9qZWN0SXRlbVJlbmFtZWQoaGllcmFyY2h5T2JqZWN0IGFzIFByb2plY3RJdGVtKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gVlNDb25zdGFudHMuU19PSzsNCiAgICAgICAgfQ0KDQogICAgICAgIGludCBJVnNTb2x1dGlvbkV2ZW50czQuT25BZnRlclJlbmFtZVByb2plY3QoSVZzSGllcmFyY2h5IHBIaWVyYXJjaHkpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRoaXMgb25lIGlzIGhhbmRsZWQgYnkgdGhlIGV2ZW50IGluIERURS5FdmVudHMNCiAgICAgICAgICAgIHJldHVybiBWU0NvbnN0YW50cy5FX05PVElNUEw7DQogICAgICAgIH0NCg0KICAgICAgICBpbnQgSVZzU29sdXRpb25FdmVudHM0Lk9uUXVlcnlDaGFuZ2VQcm9qZWN0UGFyZW50KElWc0hpZXJhcmNoeSBwSGllcmFyY2h5LCBJVnNIaWVyYXJjaHkgcE5ld1BhcmVudEhpZXIsIHJlZiBpbnQgcGZDYW5jZWwpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBWU0NvbnN0YW50cy5FX05PVElNUEw7DQogICAgICAgIH0NCg0KICAgICAgICAjZW5kcmVnaW9uDQoNCgkJI3JlZ2lvbiBJUmVjaXBlTWFuYWdlclNlcnZpY2UgZXZlbnRzDQoNCiAgICAgICAgdm9pZCBPbkVuYWJsaW5nUGFja2FnZShvYmplY3Qgc2VuZGVyLCBDYW5jZWxQYWNrYWdlRXZlbnRBcmdzIGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIE9ubHkgYWxsb3cgZXhlY3V0aW9uIG9mIHRoZSBiaW5kaW5nIHJlY2lwZSBpZiB0aGUgcGFja2FnZSBpcyBub3QgYWxyZWFkeSBhdHRhY2hlZCwNCgkJCQkvLyBvciBpZiB0aGUgdmVyc2lvbiBvZiB0aGUgcGFja2FnZSBkaWZmZXJzIGZyb20gdGhlIGluc3RhbGxlZCBvbmUNCiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgb25seSBoYXBwZW4gaWYgdGhlcmUgd2FzIG5vIHBhY2thZ2UtcmVsYXRlZCBwZXJzaXN0ZWQgc3RhdGUgaW4gdGhlIC5zdW8gZmlsZSBpbiB0aGUgYmVnaW5uaW5nLg0KICAgICAgICAgICAgICAgIC8vIFNlZSBSZWNpcGVNYW5hZ2VyUGFja2FnZS5jcywgT25Mb2FkT3B0aW9ucyBtZXRob2QsIGFyb3VuZCBsaW5lIDIzNy4gDQogICAgICAgICAgICAgICAgUGFja2FnZVN0YXRlIHBhY2thZ2VTdGF0ZSA9IEdldFBhY2thZ2VTdGF0ZShlLlBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKTsNCgkJCQlib29sIGRpZmZlcmVudFZlcnNpb24gPSAocGFja2FnZVN0YXRlLlZlcnNpb24uTGVuZ3RoID4gMCkgJiYgKHBhY2thZ2VTdGF0ZS5WZXJzaW9uICE9IGUuUGFja2FnZS5Db25maWd1cmF0aW9uLlZlcnNpb24pOw0KDQoJCQkJaWYgKGRpZmZlcmVudFZlcnNpb24pDQoJCQkJew0KCQkJCQlNZXNzYWdlQm94LlNob3coc3RyaW5nLkZvcm1hdChDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwNCgkJCQkJCVByb3BlcnRpZXMuUmVzb3VyY2VzLlNvbHV0aW9uUGFja2FnZXNDb250YWluZXJfUGFja2FnZVZlcnNpb25EaWZmZXJzLA0KCQkJCQkJZS5QYWNrYWdlLkNvbmZpZ3VyYXRpb24uQ2FwdGlvbiksDQoJCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5Tb2x1dGlvblBhY2thZ2VzQ29udGFpbmVyX1BhY2thZ2VWZXJzaW9uRGlmZmVyc1RpdGxlLA0KCQkJCQkJTWVzc2FnZUJveEJ1dHRvbnMuT0ssIE1lc3NhZ2VCb3hJY29uLkluZm9ybWF0aW9uKTsNCgkJCQl9DQoNCiAgICAgICAgICAgICAgICBlLkV4ZWN1dGVCaW5kaW5nUmVjaXBlID0gIXBhY2thZ2VTdGF0ZS5CaW5kaW5nUmVjaXBlUnVuIHx8IGRpZmZlcmVudFZlcnNpb247DQoJCQkJaWYgKGUuRXhlY3V0ZUJpbmRpbmdSZWNpcGUpDQoJCQkJew0KCQkJCQlJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlIHJlZmVyZW5jZVNlcnZpY2UgPSBlLlBhY2thZ2UuR2V0U2VydmljZTxJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlPih0cnVlKTsNCgkJCQkJaWYgKHJlZmVyZW5jZVNlcnZpY2UgIT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJZm9yZWFjaCAoSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSBpbiByZWZlcmVuY2VTZXJ2aWNlLkdldEFsbCgpKQ0KCQkJCQkJew0KCQkJCQkJCXJlZmVyZW5jZVNlcnZpY2UuUmVtb3ZlKHJlZmVyZW5jZSk7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQogICAgICAgICAgICAgICAgLy9BZGQgdGhlIElBcmd1bWVudEdhdGhlcmluZ1NlcnZpY2Ugc2VydmljZQ0KICAgICAgICAgICAgICAgIGUuUGFja2FnZS5BZGRTZXJ2aWNlKHR5cGVvZihJVmFsdWVHYXRoZXJpbmdTZXJ2aWNlKSwgbmV3IFdpemFyZEZyYW1ld29yay5XaXphcmRHYXRoZXJpbmdTZXJ2aWNlKCkpOw0KICAgICAgICAgICAgICAgIC8vIFNlcnZpY2Ugd2lsbCBiZSBkaXNwb3NlZCBpZiBpdCBmYWlscyB0byBsb2FkLg0KICAgICAgICAgICAgICAgIGUuUGFja2FnZS5BZGRTZXJ2aWNlKHR5cGVvZihJT3V0cHV0V2luZG93U2VydmljZSksIG5ldyBPdXRwdXRXaW5kb3dTZXJ2aWNlKA0KICAgICAgICAgICAgICAgICAgICBlLlBhY2thZ2UuQ29uZmlndXJhdGlvbi5DYXB0aW9uLCBlLlBhY2thZ2UuVHJhY2VTd2l0Y2gpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRXJyb3JIZWxwZXIuU2hvdyhHZXRTZXJ2aWNlPElVSVNlcnZpY2U+KCksIGV4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoJCXZvaWQgT25FbmFibGVkUGFja2FnZShvYmplY3Qgc2VuZGVyLCBQYWNrYWdlRXZlbnRBcmdzIGUpDQoJCXsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFZzR3VpZGFuY2VQYWNrYWdlIHZzUGFja2FnZSA9IG5ldyBWc0d1aWRhbmNlUGFja2FnZShlLlBhY2thZ2UpOw0KICAgICAgICAgICAgICAgIEFkZCh2c1BhY2thZ2UsIGUuUGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpOw0KICAgICAgICAgICAgICAgIFBhY2thZ2VTdGF0ZSBwYWNrYWdlU3RhdGUgPSBHZXRQYWNrYWdlU3RhdGUoZS5QYWNrYWdlLkNvbmZpZ3VyYXRpb24uR3VpZCk7DQogICAgICAgICAgICAgICAgcGFja2FnZVN0YXRlLkJpbmRpbmdSZWNpcGVSdW4gPSB0cnVlOw0KCQkJCXBhY2thZ2VTdGF0ZS5WZXJzaW9uID0gZS5QYWNrYWdlLkNvbmZpZ3VyYXRpb24uVmVyc2lvbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbiBleCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBFcnJvckhlbHBlci5TaG93KEdldFNlcnZpY2U8SVVJU2VydmljZT4oKSwgZXgpOw0KICAgICAgICAgICAgfQ0KCQl9DQoNCgkJdm9pZCBPbkRpc2FibGluZ1BhY2thZ2Uob2JqZWN0IHNlbmRlciwgQ2FuY2VsUGFja2FnZUV2ZW50QXJncyBlKQ0KCQl7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBWc0d1aWRhbmNlUGFja2FnZSB2c1BhY2thZ2UgPSAoVnNHdWlkYW5jZVBhY2thZ2UpdGhpcy5Db21wb25lbnRzW2UuUGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWRdOw0KICAgICAgICAgICAgICAgIGlmICh2c1BhY2thZ2UgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFJlbW92ZSh2c1BhY2thZ2UpOw0KICAgICAgICAgICAgICAgICAgICBJUGVyc2lzdGVuY2VTZXJ2aWNlIHBlcnNpc3QgPSBHZXRTZXJ2aWNlPElQZXJzaXN0ZW5jZVNlcnZpY2U+KCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwZXJzaXN0ICE9IG51bGwpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3QuQ2xlYXJTdGF0ZShlLlBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2c1BhY2thZ2UuRGlzcG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICB2c1BhY2thZ2UgPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRXJyb3JIZWxwZXIuU2hvdyhHZXRTZXJ2aWNlPElVSVNlcnZpY2U+KCksIGV4KTsNCiAgICAgICAgICAgIH0NCgkJfQ0KDQoJCSNlbmRyZWdpb24NCg0KCQkjcmVnaW9uIElIb3N0U2VydmljZSBNZW1iZXJzDQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gUmV0dXJucyB0aGUgc3RyaW5nICJWaXN1YWxTdHVkaW8iIHdoaWNoIGlzIHRoZSBuYW1lIG9mIHRoZSANCgkJLy8vIGhvc3QgaW1wbGVtZW50ZWQgYnkgdGhpcyBjbGFzcy4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJcHVibGljIHN0cmluZyBIb3N0TmFtZQ0KCQl7DQoJCQlnZXQgeyByZXR1cm4gIlZpc3VhbFN0dWRpbyI7IH0NCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFJldHJpZXZlcyB0aGUgdGVtcGxhdGVzIGV4cG9zZWQgYnkgYSBWUyBwYWNrYWdlLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlwdWJsaWMgSUFzc2V0RGVzY3JpcHRpb25bXSBHZXRIb3N0QXNzZXRzKHN0cmluZyBwYWNrYWdlUGF0aCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgcGFja2FnZUNvbmZpZ3VyYXRpb24pDQoJCXsNCiAgICAgICAgICAgIElWc1RlbXBsYXRlc1NlcnZpY2UgdGVtcGxhdGVzU2VydmljZSA9IEdldFNlcnZpY2U8SVZzVGVtcGxhdGVzU2VydmljZT4odHJ1ZSk7DQogICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVzU2VydmljZS5HZXRIb3N0QXNzZXRzKHBhY2thZ2VQYXRoKTsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFNlbGVjdHMgdGhlIHRhcmdldCBvZiBhbiA8c2VlIGNyZWY9IklCb3VuZEFzc2V0UmVmZXJlbmNlIi8+LCB1c3VhbGx5IA0KCQkvLy8gZG9uZSBwcmlvciB0byBleGVjdXRpb24uDQoJCS8vLyA8L3N1bW1hcnk+DQoJCXB1YmxpYyBib29sIFNlbGVjdFRhcmdldChvYmplY3QgdGFyZ2V0KQ0KCQl7DQoJCQlTb2x1dGlvbiBzb2x1dGlvbiA9IHRhcmdldCBhcyBTb2x1dGlvbjsNCgkJCVByb2plY3QgcHJvamVjdCA9IHRhcmdldCBhcyBQcm9qZWN0Ow0KCQkJUHJvamVjdEl0ZW0gaXRlbSA9IHRhcmdldCBhcyBQcm9qZWN0SXRlbTsNCgkJCVNvbHV0aW9uRm9sZGVyIGZvbGRlciA9IHRhcmdldCBhcyBTb2x1dGlvbkZvbGRlcjsNCg0KICAgICAgICAgICAgaWYgKHNvbHV0aW9uICE9IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIER0ZUhlbHBlci5TZWxlY3RTb2x1dGlvbihzb2x1dGlvbi5EVEUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocHJvamVjdCAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN0cmluZyBwYXRoID0gRHRlSGVscGVyLkJ1aWxkUGF0aChwcm9qZWN0KTsNCgkJCQlVSUhpZXJhcmNoeUl0ZW0gdWlJdGVtID0gRHRlSGVscGVyLlNlbGVjdEl0ZW0ocHJvamVjdC5EVEUsIHBhdGgpOw0KCQkJCWlmICh1aUl0ZW0gIT0gbnVsbCkNCgkJCQkJcmV0dXJuIHRydWU7DQoJCQkJZWxzZQ0KCQkJCQlyZXR1cm4gRHRlSGVscGVyLlNlbGVjdEl0ZW0ocHJvamVjdC5EVEUsIHRhcmdldCkgIT0gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0gIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdHJpbmcgcGF0aCA9IER0ZUhlbHBlci5CdWlsZFBhdGgoaXRlbSk7DQoJCQkJVUlIaWVyYXJjaHlJdGVtIHVpSXRlbSA9IER0ZUhlbHBlci5TZWxlY3RJdGVtKGl0ZW0uRFRFLCBwYXRoKTsNCgkJCQlpZiAodWlJdGVtICE9IG51bGwpDQoJCQkJCXJldHVybiB0cnVlOw0KCQkJCWVsc2UNCgkJCQkJcmV0dXJuIER0ZUhlbHBlci5TZWxlY3RJdGVtKGl0ZW0uRFRFLCB0YXJnZXQpICE9IG51bGw7DQoJCQl9DQoJCQllbHNlIGlmIChmb2xkZXIgIT0gbnVsbCkNCgkJCXsNCgkJCQlzdHJpbmcgcGF0aCA9IER0ZUhlbHBlci5CdWlsZFBhdGgoZm9sZGVyLlBhcmVudCk7DQoJCQkJVUlIaWVyYXJjaHlJdGVtIHVpSXRlbSA9IER0ZUhlbHBlci5TZWxlY3RJdGVtKGZvbGRlci5QYXJlbnQuRFRFLCBwYXRoKTsNCgkJCQlpZiAodWlJdGVtICE9IG51bGwpDQoJCQkJCXJldHVybiB0cnVlOw0KCQkJCWVsc2UNCgkJCQkJcmV0dXJuIER0ZUhlbHBlci5TZWxlY3RJdGVtKGZvbGRlci5QYXJlbnQuRFRFLCBmb2xkZXIuUGFyZW50KSAhPSBudWxsOw0KCQkJfSANCgkJCXJldHVybiBmYWxzZTsNCgkJfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIFBlcmZvcm1zIHNlbGVjdGlvbiBvZiBhIHRhcmdldCBmb3IgdGhlIGdpdmVuIHJlZmVyZW5jZS4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgcHVibGljIGJvb2wgU2VsZWN0VGFyZ2V0KElXaW4zMldpbmRvdyBvd25lcldpbmRvdywgSVVuYm91bmRBc3NldFJlZmVyZW5jZSBmb3JSZWZlcmVuY2UpDQogICAgICAgIHsNCiAgICAgICAgICAgIERURSBkdGUgPSBHZXRTZXJ2aWNlPERURT4odHJ1ZSk7DQogICAgICAgICAgICBTb2x1dGlvblBpY2tlckZvcm0gcGlja2VyID0gbmV3IFNvbHV0aW9uUGlja2VyRm9ybShkdGUsIGZvclJlZmVyZW5jZSk7DQogICAgICAgICAgICBEaWFsb2dSZXN1bHQgcmVzdWx0ID0gcGlja2VyLlNob3dEaWFsb2cob3duZXJXaW5kb3cpOw0KICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSBEaWFsb2dSZXN1bHQuT0spDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIFNlbGVjdFRhcmdldChwaWNrZXIuU2VsZWN0ZWRUYXJnZXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoJCSNlbmRyZWdpb24NCg0KCQkjcmVnaW9uIERURSBFdmVudCBIYW5kbGVycw0KDQoJCXByaXZhdGUgdm9pZCBPblJlZmVyZW5jZVJlbW92ZWQob2JqZWN0IHRhcmdldCkNCgkJew0KCQkJdHJ5DQoJCQl7DQoJCQkJZm9yZWFjaCAob2JqZWN0IG9iaiBpbiB0aGlzLkNvbXBvbmVudHMpDQoJCQkJew0KCQkJCQlpZiAob2JqIGlzIFZzR3VpZGFuY2VQYWNrYWdlKQ0KCQkJCQl7DQoJCQkJCQlQcmFjdGljZXMuQ29tcG9uZW50TW9kZWwuU2VydmljZUNvbnRhaW5lciB2c1BhY2thZ2UgPSAoUHJhY3RpY2VzLkNvbXBvbmVudE1vZGVsLlNlcnZpY2VDb250YWluZXIpb2JqOw0KCQkJCQkJSUFzc2V0UmVmZXJlbmNlU2VydmljZSByZWZlcmVuY2VTZXJ2aWNlID0gdnNQYWNrYWdlLkdldFNlcnZpY2U8SUFzc2V0UmVmZXJlbmNlU2VydmljZT4odHJ1ZSk7DQoJCQkJCQlpZiAocmVmZXJlbmNlU2VydmljZSA9PSBudWxsKQ0KCQkJCQkJew0KCQkJCQkJCWNvbnRpbnVlOw0KCQkJCQkJfQ0KCQkJCQkJSUFzc2V0UmVmZXJlbmNlW10gcmVmZXJlbmNlcyA9IHJlZmVyZW5jZVNlcnZpY2UuRmluZCh0eXBlb2YoSW5kZXhlckJvdW5kVGFyZ2V0KSwgdGFyZ2V0KTsNCgkJCQkJCWlmIChyZWZlcmVuY2VzICE9IG51bGwpDQoJCQkJCQl7DQoJCQkJCQkJZm9yZWFjaCAoSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSBpbiByZWZlcmVuY2VzKQ0KCQkJCQkJCXsNCgkJCQkJCQkJcmVmZXJlbmNlU2VydmljZS5SZW1vdmUocmVmZXJlbmNlKTsNCgkJCQkJCQkJcmVmZXJlbmNlLkRpc3Bvc2UoKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCQljYXRjaCAoRXhjZXB0aW9uIGUpDQoJCQl7DQoJCQkJRXJyb3JIZWxwZXIuU2hvdyhHZXRTZXJ2aWNlPElVSVNlcnZpY2U+KCksIGUpOw0KCQkJfQ0KCQl9DQoNCgkJcHJpdmF0ZSB2b2lkIE9uUmVmZXJlbmNlUmVuYW1lZChvYmplY3QgdGFyZ2V0KQ0KCQl7DQoJCQl0cnkNCgkJCXsNCgkJCQlmb3JlYWNoIChvYmplY3Qgb2JqIGluIHRoaXMuQ29tcG9uZW50cykNCgkJCQl7DQoJCQkJCWlmIChvYmogaXMgVnNHdWlkYW5jZVBhY2thZ2UpDQoJCQkJCXsNCgkJCQkJCVByYWN0aWNlcy5Db21wb25lbnRNb2RlbC5TZXJ2aWNlQ29udGFpbmVyIHZzUGFja2FnZSA9IChQcmFjdGljZXMuQ29tcG9uZW50TW9kZWwuU2VydmljZUNvbnRhaW5lcilvYmo7DQoJCQkJCQlJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlIHJlZmVyZW5jZVNlcnZpY2UgPSB2c1BhY2thZ2UuR2V0U2VydmljZTxJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlPih0cnVlKTsNCgkJCQkJCWlmIChyZWZlcmVuY2VTZXJ2aWNlID09IG51bGwpDQoJCQkJCQl7DQoJCQkJCQkJY29udGludWU7DQoJCQkJCQl9DQoJCQkJCQlJQXNzZXRSZWZlcmVuY2VbXSByZWZlcmVuY2VzID0gcmVmZXJlbmNlU2VydmljZS5GaW5kKHR5cGVvZihJbmRleGVyQm91bmRUYXJnZXQpLCB0YXJnZXQpOw0KCQkJCQkJaWYgKHJlZmVyZW5jZXMgIT0gbnVsbCkNCgkJCQkJCXsNCgkJCQkJCQlmb3JlYWNoIChJQXNzZXRSZWZlcmVuY2UgcmVmZXJlbmNlIGluIHJlZmVyZW5jZXMpDQoJCQkJCQkJew0KCQkJCQkJCQlpZiAocmVmZXJlbmNlIGlzIElCb3VuZEFzc2V0UmVmZXJlbmNlKQ0KCQkJCQkJCQl7DQoJCQkJCQkJCQlJRGljdGlvbmFyeSBzdGF0ZSA9IHJlZmVyZW5jZVNlcnZpY2UuUmVtb3ZlKHJlZmVyZW5jZSk7DQoJCQkJCQkJCQlpZiAocmVmZXJlbmNlIGlzIFZzQm91bmRSZWZlcmVuY2UpDQoJCQkJCQkJCQl7DQoJCQkJCQkJCQkJKChWc0JvdW5kUmVmZXJlbmNlKXJlZmVyZW5jZSkuU2V0VGFyZ2V0KHRhcmdldCk7DQoJCQkJCQkJCQl9DQoJCQkJCQkJCQllbHNlIGlmIChyZWZlcmVuY2UgaXMgQm91bmRUZW1wbGF0ZVJlZmVyZW5jZSkNCgkJCQkJCQkJCXsNCgkJCQkJCQkJCQkoKEJvdW5kVGVtcGxhdGVSZWZlcmVuY2UpcmVmZXJlbmNlKS5Cb3VuZFJlZmVyZW5jZS5TZXRUYXJnZXQodGFyZ2V0KTsNCgkJCQkJCQkJCX0NCgkJCQkJCQkJCXJlZmVyZW5jZVNlcnZpY2UuQWRkKHJlZmVyZW5jZSwgc3RhdGUpOw0KCQkJCQkJCQl9DQoNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCQljYXRjaCAoRXhjZXB0aW9uIGUpDQoJCQl7DQoJCQkJRXJyb3JIZWxwZXIuU2hvdyhHZXRTZXJ2aWNlPElVSVNlcnZpY2U+KCksIGUpOw0KCQkJfQ0KCQl9DQoNCiAgICAgICAgdm9pZCBSZW1vdmVQcm9qZWN0UmVmZXJlbmNlcyhQcm9qZWN0IHByb2plY3QpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vQ2hlY2sgcmVmZXJlbmNlcyBpbiB0aGUgaXRlbXMgb2YgdGhlIHByb2plY3QgZmlyc3QgYW4gZGVsZXRlIHRob3NlDQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3JlYWNoIChvYmplY3Qgb2JqIGluIHRoaXMuQ29tcG9uZW50cykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChvYmogaXMgVnNHdWlkYW5jZVBhY2thZ2UpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFByYWN0aWNlcy5Db21wb25lbnRNb2RlbC5TZXJ2aWNlQ29udGFpbmVyIHZzUGFja2FnZSA9IChQcmFjdGljZXMuQ29tcG9uZW50TW9kZWwuU2VydmljZUNvbnRhaW5lcilvYmo7DQogICAgICAgICAgICAgICAgICAgICAgICBJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlIHJlZmVyZW5jZVNlcnZpY2UgPSB2c1BhY2thZ2UuR2V0U2VydmljZTxJQXNzZXRSZWZlcmVuY2VTZXJ2aWNlPih0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VTZXJ2aWNlID09IG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBJQXNzZXRSZWZlcmVuY2VbXSByZWZlcmVuY2VzID0gcmVmZXJlbmNlU2VydmljZS5GaW5kKHR5cGVvZihJbmRleGVyQm91bmRBc3NldFBhcmVudCksIHByb2plY3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZmVyZW5jZXMgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIChJQXNzZXRSZWZlcmVuY2UgcmVmZXJlbmNlIGluIHJlZmVyZW5jZXMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VTZXJ2aWNlLlJlbW92ZShyZWZlcmVuY2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2UuRGlzcG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkNCiAgICAgICAgICAgIHsNCgkJCQlFcnJvckhlbHBlci5TaG93KEdldFNlcnZpY2U8SVVJU2VydmljZT4oKSwgZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIFVwZGF0ZVByb2plY3RSZWZlcmVuY2VzKFByb2plY3QgcHJvamVjdCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy9DaGVjayByZWZlcmVuY2VzIGluIHRoZSBpdGVtcyBvZiB0aGUgcHJvamVjdCB1cGRhdGUgdGhvc2UNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKG9iamVjdCBvYmogaW4gdGhpcy5Db21wb25lbnRzKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9iaiBpcyBWc0d1aWRhbmNlUGFja2FnZSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgUHJhY3RpY2VzLkNvbXBvbmVudE1vZGVsLlNlcnZpY2VDb250YWluZXIgdnNQYWNrYWdlID0gKFByYWN0aWNlcy5Db21wb25lbnRNb2RlbC5TZXJ2aWNlQ29udGFpbmVyKW9iajsNCiAgICAgICAgICAgICAgICAgICAgICAgIElBc3NldFJlZmVyZW5jZVNlcnZpY2UgcmVmZXJlbmNlU2VydmljZSA9IHZzUGFja2FnZS5HZXRTZXJ2aWNlPElBc3NldFJlZmVyZW5jZVNlcnZpY2U+KHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZmVyZW5jZVNlcnZpY2UgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIElBc3NldFJlZmVyZW5jZVtdIHJlZmVyZW5jZXMgPSByZWZlcmVuY2VTZXJ2aWNlLkZpbmQodHlwZW9mKEluZGV4ZXJCb3VuZEFzc2V0UGFyZW50KSwgcHJvamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVmZXJlbmNlcyAhPSBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKElCb3VuZEFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSBpbiByZWZlcmVuY2VzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IHRhcmdldCA9IHJlZmVyZW5jZS5UYXJnZXQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElEaWN0aW9uYXJ5IHN0YXRlID0gcmVmZXJlbmNlU2VydmljZS5SZW1vdmUocmVmZXJlbmNlKTsNCgkJCQkJCQkJaWYgKHJlZmVyZW5jZSBpcyBWc0JvdW5kUmVmZXJlbmNlKQ0KCQkJCQkJCQl7DQoJCQkJCQkJCQkoKFZzQm91bmRSZWZlcmVuY2UpcmVmZXJlbmNlKS5TZXRUYXJnZXQodGFyZ2V0KTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQllbHNlIGlmIChyZWZlcmVuY2UgaXMgQm91bmRUZW1wbGF0ZVJlZmVyZW5jZSkNCgkJCQkJCQkJew0KCQkJCQkJCQkJKChCb3VuZFRlbXBsYXRlUmVmZXJlbmNlKXJlZmVyZW5jZSkuQm91bmRSZWZlcmVuY2UuU2V0VGFyZ2V0KHRhcmdldCk7DQoJCQkJCQkJCX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlU2VydmljZS5BZGQocmVmZXJlbmNlLCBzdGF0ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKQ0KICAgICAgICAgICAgew0KCQkJCUVycm9ySGVscGVyLlNob3coR2V0U2VydmljZTxJVUlTZXJ2aWNlPigpLCBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoJCWludGVybmFsIHZvaWQgUmVmcmVzaFJlZmVyZW5jZXMoKQ0KCQl7DQoJCQlmb3JlYWNoIChvYmplY3Qgb2JqIGluIHRoaXMuQ29tcG9uZW50cykNCgkJCXsNCgkJCQlpZiAob2JqIGlzIFZzR3VpZGFuY2VQYWNrYWdlKQ0KCQkJCXsNCgkJCQkJUHJhY3RpY2VzLkNvbXBvbmVudE1vZGVsLlNlcnZpY2VDb250YWluZXIgdnNQYWNrYWdlID0gKFByYWN0aWNlcy5Db21wb25lbnRNb2RlbC5TZXJ2aWNlQ29udGFpbmVyKW9iajsNCgkJCQkJSUFzc2V0UmVmZXJlbmNlU2VydmljZSByZWZlcmVuY2VTZXJ2aWNlID0gdnNQYWNrYWdlLkdldFNlcnZpY2U8SUFzc2V0UmVmZXJlbmNlU2VydmljZT4odHJ1ZSk7DQoJCQkJCUlDb25maWd1cmF0aW9uU2VydmljZSBjb25maWdzZXJ2aWNlID0gdnNQYWNrYWdlLkdldFNlcnZpY2U8SUNvbmZpZ3VyYXRpb25TZXJ2aWNlPih0cnVlKTsNCgkJCQkJaWYgKHJlZmVyZW5jZVNlcnZpY2UgPT0gbnVsbCkNCgkJCQkJew0KCQkJCQkJY29udGludWU7DQoJCQkJCX0NCgkJCQkJaW50IG5SZWZzID0gMDsNCgkJCQkJZm9yZWFjaCAoSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSBpbiByZWZlcmVuY2VTZXJ2aWNlLkdldEFsbCgpKQ0KCQkJCQl7DQoJCQkJCQlpZiAocmVmZXJlbmNlIGlzIElCb3VuZEFzc2V0UmVmZXJlbmNlKQ0KCQkJCQkJew0KCQkJCQkJCWlmICgoKElCb3VuZEFzc2V0UmVmZXJlbmNlKXJlZmVyZW5jZSkuVGFyZ2V0ICE9IG51bGwpDQoJCQkJCQkJew0KCQkJCQkJCQluUmVmcysrOw0KCQkJCQkJCQlvYmplY3QgdGFyZ2V0ID0gKChJQm91bmRBc3NldFJlZmVyZW5jZSlyZWZlcmVuY2UpLlRhcmdldDsNCgkJCQkJCQkJSURpY3Rpb25hcnkgc3RhdGUgPSByZWZlcmVuY2VTZXJ2aWNlLlJlbW92ZShyZWZlcmVuY2UpOw0KCQkJCQkJCQlpZiAocmVmZXJlbmNlIGlzIFZzQm91bmRSZWZlcmVuY2UpDQoJCQkJCQkJCXsNCgkJCQkJCQkJCSgoVnNCb3VuZFJlZmVyZW5jZSlyZWZlcmVuY2UpLlNldFRhcmdldCh0YXJnZXQpOw0KCQkJCQkJCQl9DQoJCQkJCQkJCWVsc2UgaWYgKHJlZmVyZW5jZSBpcyBCb3VuZFRlbXBsYXRlUmVmZXJlbmNlKQ0KCQkJCQkJCQl7DQoJCQkJCQkJCQkoKEJvdW5kVGVtcGxhdGVSZWZlcmVuY2UpcmVmZXJlbmNlKS5Cb3VuZFJlZmVyZW5jZS5TZXRUYXJnZXQodGFyZ2V0KTsNCgkJCQkJCQkJfQ0KCQkJCQkJCQlyZWZlcmVuY2VTZXJ2aWNlLkFkZChyZWZlcmVuY2UsIHN0YXRlKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQkJaWYgKG5SZWZzID09IDApDQoJCQkJCXsNCgkJCQkJCUlQZXJzaXN0ZW5jZVNlcnZpY2UgcGVyc2lzdGVuY2UgPSBHZXRTZXJ2aWNlPElQZXJzaXN0ZW5jZVNlcnZpY2U+KHRydWUpOw0KCQkJCQkJcGVyc2lzdGVuY2UuU2F2ZVJlZmVyZW5jZXMoY29uZmlnc2VydmljZS5DdXJyZW50UGFja2FnZS5HdWlkLCByZWZlcmVuY2VTZXJ2aWNlLkdldEFsbCgpKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCgkJfQ0KDQoJCXZvaWQgT25Qcm9qZWN0SXRlbVJlbW92ZWQoUHJvamVjdEl0ZW0gcHJvamVjdEl0ZW0pDQoJCXsNCgkJCXRyeQ0KCQkJew0KCQkJCWlmIChwcm9qZWN0SXRlbS5PYmplY3QgIT0gbnVsbCAmJiBwcm9qZWN0SXRlbS5PYmplY3QgaXMgUHJvamVjdCkNCgkJCQl7DQoJCQkJCVJlbW92ZVByb2plY3RSZWZlcmVuY2VzKChQcm9qZWN0KXByb2plY3RJdGVtLk9iamVjdCk7DQoJCQkJfQ0KCQkJCS8vIFByb2Nlc3MgdGhlIGNoaWxkcyBlbGVtZW50cywgZS5nOiBGb3JtMS5EZXNpZ25lci5jcw0KCQkJCVByb2plY3RJdGVtcyBjaGlsZEl0ZW1zID0gcHJvamVjdEl0ZW0uUHJvamVjdEl0ZW1zOw0KCQkJCWlmIChjaGlsZEl0ZW1zICE9IG51bGwpDQoJCQkJew0KCQkJCQlmb3JlYWNoIChQcm9qZWN0SXRlbSBzdWJJdGVtIGluIGNoaWxkSXRlbXMpDQoJCQkJCXsNCgkJCQkJCU9uUHJvamVjdEl0ZW1SZW1vdmVkKHN1Ykl0ZW0pOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQkJY2F0Y2goRXhjZXB0aW9uIGV4KQ0KCQkJew0KCQkJCS8vIFRoaXMgaXMgbWVhbnQgdG8gY2F0Y2ggIlByb2plY3QgdW5hdmFpbGFibGUiIGV4Y2VwdGlvbg0KCQkJCVRyYWNlLlRyYWNlRXJyb3IoZXguVG9TdHJpbmcoKSk7DQoJCQl9DQoJCQlmaW5hbGx5DQoJCQl7DQoJCQkJT25SZWZlcmVuY2VSZW1vdmVkKHByb2plY3RJdGVtKTsNCgkJCX0NCgkJfQ0KDQogICAgICAgIHZvaWQgT25Qcm9qZWN0SXRlbVJlbmFtZWQoUHJvamVjdEl0ZW0gcHJvamVjdEl0ZW0sIHN0cmluZyBvbGRuYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICBPblByb2plY3RJdGVtUmVuYW1lZChwcm9qZWN0SXRlbSk7DQogICAgICAgIH0NCg0KCQl2b2lkIE9uUHJvamVjdEl0ZW1SZW5hbWVkKFByb2plY3RJdGVtIHByb2plY3RJdGVtKQ0KCQl7DQoJCQlPblJlZmVyZW5jZVJlbmFtZWQocHJvamVjdEl0ZW0pOw0KICAgICAgICAgICAgaWYgKHByb2plY3RJdGVtLk9iamVjdCAhPSBudWxsICYmIHByb2plY3RJdGVtLk9iamVjdCBpcyBQcm9qZWN0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFVwZGF0ZVByb2plY3RSZWZlcmVuY2VzKChQcm9qZWN0KXByb2plY3RJdGVtLk9iamVjdCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBQcm9jZXNzIHRoZSBjaGlsZHMgZWxlbWVudHMsIGUuZzogRm9ybTEuRGVzaWduZXIuY3MNCiAgICAgICAgICAgIFByb2plY3RJdGVtcyBjaGlsZEl0ZW1zID0gcHJvamVjdEl0ZW0uUHJvamVjdEl0ZW1zOw0KICAgICAgICAgICAgaWYgKGNoaWxkSXRlbXMgIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3JlYWNoIChQcm9qZWN0SXRlbSBzdWJJdGVtIGluIGNoaWxkSXRlbXMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBPblByb2plY3RJdGVtUmVuYW1lZChzdWJJdGVtKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoJCX0NCg0KCQl2b2lkIE9uUHJvamVjdFJlbW92ZWQoUHJvamVjdCBwcm9qZWN0KQ0KCQl7DQoJCQl0cnkNCgkJCXsNCgkJCQlSZW1vdmVQcm9qZWN0UmVmZXJlbmNlcyhwcm9qZWN0KTsNCgkJCX0NCgkJCWNhdGNoIChFeGNlcHRpb24gZXgpDQoJCQl7DQoJCQkJLy8gVGhpcyBpcyBtZWFudCB0byBjYXRjaCAiUHJvamVjdCB1bmF2YWlsYWJsZSIgZXhjZXB0aW9uDQoJCQkJVHJhY2UuVHJhY2VFcnJvcihleC5Ub1N0cmluZygpKTsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkgICAgICAgICAgICBPblJlZmVyZW5jZVJlbW92ZWQocHJvamVjdCk7DQoJCQl9DQoJCX0NCg0KICAgICAgICB2b2lkIE9uUHJvamVjdFJlbmFtZWQoUHJvamVjdCBwcm9qZWN0LCBzdHJpbmcgb2xkbmFtZSkNCiAgICAgICAgew0KICAgICAgICAgICAgT25Qcm9qZWN0UmVuYW1lZChwcm9qZWN0KTsNCiAgICAgICAgfQ0KDQoJCXZvaWQgT25Qcm9qZWN0UmVuYW1lZChQcm9qZWN0IHByb2plY3QpDQoJCXsNCgkJCU9uUmVmZXJlbmNlUmVuYW1lZChwcm9qZWN0KTsNCiAgICAgICAgICAgIFVwZGF0ZVByb2plY3RSZWZlcmVuY2VzKHByb2plY3QpOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBPblByb2plY3RBZGRlZChQcm9qZWN0IFByb2plY3QpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vVHJhY2UuV3JpdGVMaW5lKFByb2plY3QuTmFtZSk7DQogICAgICAgIH0NCg0KCQl2b2lkIE9uQXNzZXRSZW1vdmVkKG9iamVjdCBhc3NldCkNCgkJew0KCQkJaWYgKGFzc2V0IGlzIFByb2plY3QpDQoJCQl7DQoJCQkJT25Qcm9qZWN0UmVtb3ZlZCgoUHJvamVjdClhc3NldCk7DQoJCQl9DQoJCQllbHNlIGlmIChhc3NldCBpcyBQcm9qZWN0SXRlbSkNCgkJCXsNCgkJCQlPblByb2plY3RJdGVtUmVtb3ZlZCgoUHJvamVjdEl0ZW0pYXNzZXQpOw0KCQkJfQ0KCQl9DQoNCgkJdm9pZCBPbkFzc2V0UmVuYW1lZChvYmplY3QgYXNzZXQpDQoJCXsNCgkJCWlmIChhc3NldCBpcyBQcm9qZWN0KQ0KCQkJew0KCQkJCU9uUHJvamVjdFJlbmFtZWQoKFByb2plY3QpYXNzZXQpOw0KCQkJfQ0KCQkJZWxzZSBpZiAoYXNzZXQgaXMgUHJvamVjdEl0ZW0pDQoJCQl7DQoJCQkJT25Qcm9qZWN0SXRlbVJlbmFtZWQoKFByb2plY3RJdGVtKWFzc2V0KTsNCgkJCX0NCgkJfQ0KICAgICAgICANCiAgICAgICAgI2VuZHJlZ2lvbg0KDQogICAgICAgICNyZWdpb24gSVBlcnNpc3RlbmNlU2VydmljZSBNZW1iZXJzDQoNCiAgICAgICAgRGljdGlvbmFyeTxzdHJpbmcsUGFja2FnZVN0YXRlPiBwYWNrYWdlUGVyc2lzdGVuY2VEYXRhOw0KCQlBcnJheUxpc3QgcGFja2FnZXNUb1ByZXNlcnZlOw0KDQogICAgICAgIHByaXZhdGUgSURpY3Rpb25hcnkgQ29weURpY3Rpb25hcnkoSURpY3Rpb25hcnkgc3RhdGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRoZSBvbmx5IHJlYWwgd2F5IG9mIGdldHRpbmcgYSBmdWxsIGNvcHkgb2YgdGhlIGVudGlyZSBzdGF0ZSBpcyB0byBzZXJpYWxpemUgaXQuDQogICAgICAgICAgICAvLyBXZSBrbm93IGl0J3Mgc2VyaWFsaXphYmxlIGJlY2F1c2Ugb3RoZXJ3aXNlIGl0IHdpbGwgbmV2ZXIgbWFrZSBpdCBpbnRvIHRoZSANCiAgICAgICAgICAgIC8vIHBlcnNpc3RlZCBmb3JtYXQuDQogICAgICAgICAgICBNZW1vcnlTdHJlYW0gbWVtID0gbmV3IE1lbW9yeVN0cmVhbSgpOw0KICAgICAgICAgICAgQmluYXJ5Rm9ybWF0dGVyIGZvcm1hdHRlciA9IG5ldyBCaW5hcnlGb3JtYXR0ZXIoKTsNCiAgICAgICAgICAgIGZvcm1hdHRlci5TZXJpYWxpemUobWVtLCBzdGF0ZSk7DQogICAgICAgICAgICBtZW0uUG9zaXRpb24gPSAwOw0KICAgICAgICAgICAgcmV0dXJuIChJRGljdGlvbmFyeSlmb3JtYXR0ZXIuRGVzZXJpYWxpemUobWVtKTsNCiAgICAgICAgfQ0KDQogICAgICAgIElEaWN0aW9uYXJ5IElQZXJzaXN0ZW5jZVNlcnZpY2UuTG9hZFN0YXRlKHN0cmluZyBwYWNrYWdlTmFtZSwgSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHBhY2thZ2VOYW1lID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicGFja2FnZU5hbWUiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChyZWZlcmVuY2UgPT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJyZWZlcmVuY2UiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFBhY2thZ2VTdGF0ZSBzdGF0ZSA9IEdldFBhY2thZ2VTdGF0ZShwYWNrYWdlTmFtZSk7DQogICAgICAgICAgICBpZiAoIXN0YXRlLlN0YXRlcy5Db250YWlucyhyZWZlcmVuY2UuS2V5KSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIGRpY3Rpb25hcnkuDQogICAgICAgICAgICByZXR1cm4gQ29weURpY3Rpb25hcnkoKElEaWN0aW9uYXJ5KXN0YXRlLlN0YXRlc1tyZWZlcmVuY2UuS2V5XSk7DQogICAgICAgIH0NCg0KICAgICAgICBJRGljdGlvbmFyeSBJUGVyc2lzdGVuY2VTZXJ2aWNlLlJlbW92ZVN0YXRlKHN0cmluZyBwYWNrYWdlTmFtZSwgSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHBhY2thZ2VOYW1lID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicGFja2FnZU5hbWUiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChyZWZlcmVuY2UgPT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJyZWZlcmVuY2UiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFBhY2thZ2VTdGF0ZSBzdGF0ZSA9IEdldFBhY2thZ2VTdGF0ZShwYWNrYWdlTmFtZSk7DQogICAgICAgICAgICBpZiAoIXN0YXRlLlN0YXRlcy5Db250YWlucyhyZWZlcmVuY2UuS2V5KSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIElEaWN0aW9uYXJ5IHN0YXRlZGF0YSA9IChJRGljdGlvbmFyeSlzdGF0ZS5TdGF0ZXNbcmVmZXJlbmNlLktleV07DQogICAgICAgICAgICBzdGF0ZS5TdGF0ZXMuUmVtb3ZlKHJlZmVyZW5jZS5LZXkpOw0KICAgICAgICAgICAgLy8gRG9uJ3QgY29weSBhcyB3ZSBkb24ndCBjYXJlIGFib3V0IGl0IGFueW1vcmUuDQogICAgICAgICAgICByZXR1cm4gc3RhdGVkYXRhOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBJUGVyc2lzdGVuY2VTZXJ2aWNlLkNsZWFyU3RhdGUoc3RyaW5nIHBhY2thZ2VOYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICBwYWNrYWdlUGVyc2lzdGVuY2VEYXRhLlJlbW92ZShwYWNrYWdlTmFtZSk7DQogICAgICAgIH0NCg0KICAgICAgICBQYWNrYWdlU3RhdGUgR2V0UGFja2FnZVN0YXRlKHN0cmluZyBwYWNrYWdlTmFtZSkNCiAgICAgICAgew0KICAgICAgICAgICAgUGFja2FnZVN0YXRlIHBhY2thZ2VzdGF0ZSA9IG51bGw7DQogICAgICAgICAgICBpZiAoIXBhY2thZ2VQZXJzaXN0ZW5jZURhdGEuQ29udGFpbnNLZXkocGFja2FnZU5hbWUpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBhY2thZ2VzdGF0ZSA9IG5ldyBQYWNrYWdlU3RhdGUoKTsNCiAgICAgICAgICAgICAgICBwYWNrYWdlUGVyc2lzdGVuY2VEYXRhW3BhY2thZ2VOYW1lXSA9IHBhY2thZ2VzdGF0ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwYWNrYWdlc3RhdGUgPSBwYWNrYWdlUGVyc2lzdGVuY2VEYXRhW3BhY2thZ2VOYW1lXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBwYWNrYWdlc3RhdGU7DQogICAgICAgIH0NCg0KICAgICAgICB2b2lkIElQZXJzaXN0ZW5jZVNlcnZpY2UuU2F2ZVN0YXRlKHN0cmluZyBwYWNrYWdlTmFtZSwgSUFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSwgSURpY3Rpb25hcnkgc3RhdGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChwYWNrYWdlTmFtZSA9PSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oInBhY2thZ2VOYW1lIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocmVmZXJlbmNlID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicmVmZXJlbmNlIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoc3RhdGUgPT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJzdGF0ZSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUGFja2FnZVN0YXRlIHBhY2thZ2VzdGF0ZSA9IEdldFBhY2thZ2VTdGF0ZShwYWNrYWdlTmFtZSk7DQogICAgICAgICAgICAvLyBDb3B5IHRoZSBkaWN0aW9uYXJ5Lg0KICAgICAgICAgICAgcGFja2FnZXN0YXRlLlN0YXRlc1tyZWZlcmVuY2UuS2V5XSA9IENvcHlEaWN0aW9uYXJ5KHN0YXRlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIElBc3NldFJlZmVyZW5jZVtdIElQZXJzaXN0ZW5jZVNlcnZpY2UuTG9hZFJlZmVyZW5jZXMoc3RyaW5nIHBhY2thZ2VOYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocGFja2FnZU5hbWUgPT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJwYWNrYWdlTmFtZSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUGFja2FnZVN0YXRlIHN0YXRlID0gR2V0UGFja2FnZVN0YXRlKHBhY2thZ2VOYW1lKTsNCiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5SZWZlcmVuY2VzOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBJUGVyc2lzdGVuY2VTZXJ2aWNlLlJlbW92ZVJlZmVyZW5jZXMoc3RyaW5nIHBhY2thZ2VOYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocGFja2FnZU5hbWUgPT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCJwYWNrYWdlTmFtZSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFwYWNrYWdlUGVyc2lzdGVuY2VEYXRhLkNvbnRhaW5zS2V5KHBhY2thZ2VOYW1lKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHZXRQYWNrYWdlU3RhdGUocGFja2FnZU5hbWUpLlJlZmVyZW5jZXMgPSBuZXcgSUFzc2V0UmVmZXJlbmNlWzBdOw0KICAgICAgICB9DQoNCiAgICAgICAgdm9pZCBJUGVyc2lzdGVuY2VTZXJ2aWNlLlNhdmVSZWZlcmVuY2VzKHN0cmluZyBwYWNrYWdlTmFtZSwgSUFzc2V0UmVmZXJlbmNlW10gcmVmZXJlbmNlcykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHBhY2thZ2VOYW1lID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicGFja2FnZU5hbWUiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChyZWZlcmVuY2VzID09IG51bGwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbigicmVmZXJlbmNlcyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgUGFja2FnZVN0YXRlIHN0YXRlID0gR2V0UGFja2FnZVN0YXRlKHBhY2thZ2VOYW1lKTsNCiAgICAgICAgICAgIHN0YXRlLlJlZmVyZW5jZXMgPSByZWZlcmVuY2VzOw0KICAgICAgICB9DQoNCiAgICAgICAgI2VuZHJlZ2lvbg0KDQogICAgICAgICNyZWdpb24gUGFja2FnZVN0YXRlIGNsYXNzDQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gSG9sZHMgdGhlIHN0YXRlIG9mIGVhY2ggcGFja2FnZSBpbiB0aGUgaW4tbWVtb3J5IHBlcnNpc3RlbmNlIGRhdGEuIA0KICAgICAgICAvLy8gVGhpcyBpcyB0aGUgcmVwcmVzZW50YXRpb24gdXNlZCBhdCBydW50aW1lLCBvbmNlIGRlc2VyaWFsaXphdGlvbiANCiAgICAgICAgLy8vIGhhcyBiZWVuIHBlcmZvcm1lZC4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgW1NlcmlhbGl6YWJsZV0NCiAgICAgICAgcHJpdmF0ZSBjbGFzcyBQYWNrYWdlU3RhdGUNCiAgICAgICAgew0KICAgICAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAgICAgLy8vIEZsYWcgdGhhdCBzcGVjaWZpZXMgd2hldGhlciBhIHNvbHV0aW9uIHVzZXIgb3B0aW9ucyBmaWxlICguc3VvKSBjb250YWluZWQgcGFja2FnZS1yZWxhdGVkIA0KICAgICAgICAgICAgLy8vIGluZm9ybWF0aW9uIHdoZW4gdGhlIHNvbHV0aW9uIHdhcyBmaXJzdCBvcGVuZWQuIFRoaXMgd2lsbCBzaWduYWwgdGhhdCBhbGwgcGFja2FnZXMgbXVzdCANCiAgICAgICAgICAgIC8vLyBiZSByZS1ib3VuZCAoYnkgZXhlY3V0aW5nIHRoZWlyIGJpbmRpbmcgcmVjaXBlcykgYXMgcGFydCBvZiB0aGUgU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lci5PbkVuYWJsaW5nUGFja2FnZSANCiAgICAgICAgICAgIC8vLyBldmVudCBoYW5kbGVyLCBhbmQgdGhhdCBhbnkgYm91bmQgcmVmZXJlbmNlcyBmcm9tIHRlbXBsYXRlcyBzaG91bGQgYmUgcmVzdG9yZWQsIGFzIHBhcnQgb2YgdGhlIA0KICAgICAgICAgICAgLy8vIElWc1NvbHV0aW9uRXZlbnRzLk9uQWZ0ZXJPcGVuU29sdXRpb24gZXZlbnQgaW4gU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lciAoYXJvdW5kIGxpbmUgNDAwKS4NCiAgICAgICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgICAgICBwdWJsaWMgYm9vbCBCaW5kaW5nUmVjaXBlUnVuID0gZmFsc2U7DQoNCgkJCS8vLyA8c3VtbWFyeT4NCgkJCS8vLyBWZXJzaW9uIHN0cmluZyB0aGF0IHNwZWNpZmllcyB0aGUgdmVyc2lvbiB1c2VkIGZvciB0aGUgcGFja2FnZSB3aGVuIGl0IHdhcyBhdHRhY2hlZCB0byB0aGUgY3VycmVudA0KCQkJLy8vIHNvbHV0aW9uIGZpbGUuIEl0IGlzIHVzZWQgdG8gY2hlY2sgZGlmZmVyZW5jaWVzIGluIHZlcnNpb24gd2hlbiB0aGUgdXNlciBvcGVucyB0aGUgc29sdXRpb24gYWdhaW4uDQoJCQkvLy8gPC9zdW1tYXJ5Pg0KCQkJcHVibGljIHN0cmluZyBWZXJzaW9uID0gc3RyaW5nLkVtcHR5Ow0KICAgICAgICAgICAgcHVibGljIElEaWN0aW9uYXJ5IFN0YXRlcyA9IG5ldyBIYXNodGFibGUoKTsNCgkJCXB1YmxpYyBJQXNzZXRSZWZlcmVuY2VbXSBSZWZlcmVuY2VzID0gbmV3IElBc3NldFJlZmVyZW5jZVswXTsNCiAgICAgICAgfQ0KDQogICAgICAgICNlbmRyZWdpb24gUGFja2FnZVN0YXRlIGNsYXNzDQoNCiAgICAgICAgI3JlZ2lvbiBQYWNrYWdlIFN0YXRlIExvYWQvU2F2ZQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIEhvbGRzIHNlcmlhbGl6YXRpb24gaW5mb3JtYXRpb24gZm9yIGEgcGFja2FnZSwgc3VjaCBhcw0KICAgICAgICAvLy8gdGhlIHJlZmVyZW5jZXMgYW5kIHRoZWlyIGluaXRpYWwgc3RhdGUuIFRoaXMgY2xhc3MgaXMgDQogICAgICAgIC8vLyBub3RoaW5nIG1vcmUgdGhhbiBhIGJ1Y2tldCBvZiBiaW5hcnkgZGF0YSBmb3IgdGhlIHBhY2thZ2UsIA0KICAgICAgICAvLy8gd2hpY2ggdWx0aW1hdGVseSB3aWxsIGJlIGRlc2VyaWFsaXplZCBpbnRvIGEgUGFja2FnZVN0YXRlIGNsYXNzLg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICBbU2VyaWFsaXphYmxlXQ0KICAgICAgICBwcml2YXRlIGNsYXNzIFBhY2thZ2VEYXRhDQogICAgICAgIHsNCiAgICAgICAgICAgIHB1YmxpYyBQYWNrYWdlRGF0YShzdHJpbmcgbmFtZSwgYnl0ZVtdIGRhdGEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwcml2YXRlIHN0cmluZyBuYW1lOw0KDQogICAgICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gbmFtZTsgfQ0KICAgICAgICAgICAgICAgIHNldCB7IG5hbWUgPSB2YWx1ZTsgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwcml2YXRlIGJ5dGVbXSBkYXRhOw0KDQogICAgICAgICAgICBwdWJsaWMgYnl0ZVtdIERhdGENCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gZGF0YTsgfQ0KICAgICAgICAgICAgICAgIHNldCB7IGRhdGEgPSB2YWx1ZTsgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaW50ZXJuYWwgdm9pZCBMb2FkUGFja2FnZXNEYXRhKFN5c3RlbS5JTy5TdHJlYW0gc3RyZWFtKQ0KICAgICAgICB7DQoJCQlwYWNrYWdlc1RvUHJlc2VydmUgPSBuZXcgQXJyYXlMaXN0KCk7DQoJCQlpZiAoc3RyZWFtLkxlbmd0aCA9PSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgZW1wdHkgZGF0YSBzbyB0aGF0IG90aGVyIG1ldGhvZHMgZG9uJ3QgZmFpbC4NCiAgICAgICAgICAgICAgICBwYWNrYWdlUGVyc2lzdGVuY2VEYXRhID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLFBhY2thZ2VTdGF0ZT4oKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBBcnJheUxpc3Qgc2VyaWFsaXplZGF0YSA9IChBcnJheUxpc3QpKG5ldyBCaW5hcnlGb3JtYXR0ZXIoKS5EZXNlcmlhbGl6ZShzdHJlYW0pKTsNCgkJCXBhY2thZ2VQZXJzaXN0ZW5jZURhdGEgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIFBhY2thZ2VTdGF0ZT4oc2VyaWFsaXplZGF0YS5Db3VudCk7DQogICAgICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgdG9wLW1vc3QgcmVzb2x1dGlvbiBzZXJ2aWNlIHRoYXQgbGl2ZXMgaW4gdGhlIG1hbmFnZXIuDQogICAgICAgICAgICBvYmplY3QgbWFuYWdlciA9IEdldFNlcnZpY2U8SVJlY2lwZU1hbmFnZXJTZXJ2aWNlPigpOw0KICAgICAgICAgICAgLy8gVGhlIG1hbmFnZXIgaXMgdGhlIHNlcnZpY2UgcHJvdmlkZXIgaXRzZWxmIHRoYXQgaG9zdHMgdGhlIHJlc29sdXRpb24gc2VydmljZS4NCiAgICAgICAgICAgIElUeXBlUmVzb2x1dGlvblNlcnZpY2UgbWFpbnJlc29sdXRpb24gPSAoSVR5cGVSZXNvbHV0aW9uU2VydmljZSkNCiAgICAgICAgICAgICAgICBTZXJ2aWNlSGVscGVyLkdldFNlcnZpY2UoKFN5c3RlbS5JU2VydmljZVByb3ZpZGVyKW1hbmFnZXIsDQogICAgICAgICAgICAgICAgICAgIHR5cGVvZihJVHlwZVJlc29sdXRpb25TZXJ2aWNlKSwgdGhpcyk7DQoNCiAgICAgICAgICAgIGZvcmVhY2ggKFBhY2thZ2VEYXRhIGNkYXRhIGluIHNlcmlhbGl6ZWRhdGEpDQogICAgICAgICAgICB7DQoJCQkJWG1sUmVhZGVyIGNyZWFkZXIgPSBudWxsOw0KCQkJCXRyeQ0KCQkJCXsNCgkJCQkJLy8gUmV0cmlldmUgcGFja2FnZSBiYXNlIHBhdGguDQoJCQkJCWNyZWFkZXIgPSBSZWNpcGVNYW5hZ2VyLkdldENvbmZpZ3VyYXRpb25SZWFkZXIoY2RhdGEuTmFtZSk7DQoJCQkJCXN0cmluZyBjb25maWdmaWxlID0gbmV3IFVyaShjcmVhZGVyLkJhc2VVUkkpLkxvY2FsUGF0aDsNCgkJCQkJY3JlYWRlci5DbG9zZSgpOw0KCQkJCQl1c2luZyAoVHlwZVJlc29sdXRpb25SZXNvbHZlciByZXNvbHZlciA9IG5ldyBUeXBlUmVzb2x1dGlvblJlc29sdmVyKA0KCQkJCQkJbmV3IFR5cGVSZXNvbHV0aW9uU2VydmljZShQYXRoLkdldERpcmVjdG9yeU5hbWUoY29uZmlnZmlsZSksIG1haW5yZXNvbHV0aW9uKSkpDQoJCQkJCXsNCgkJCQkJCU1lbW9yeVN0cmVhbSBtZW0gPSBuZXcgTWVtb3J5U3RyZWFtKGNkYXRhLkRhdGEpOw0KCQkJCQkJdHJ5DQoJCQkJCQl7DQoJCQkJCQkJcGFja2FnZVBlcnNpc3RlbmNlRGF0YVtjZGF0YS5OYW1lXSA9DQoJCQkJCQkJCShQYWNrYWdlU3RhdGUpKG5ldyBCaW5hcnlGb3JtYXR0ZXIoKS5EZXNlcmlhbGl6ZShtZW0pKTsNCgkJCQkJCX0NCgkJCQkJCWNhdGNoIChFeGNlcHRpb24gZSkNCgkJCQkJCXsNCgkJCQkJCQl0aHJvdyBuZXcgU2VyaWFsaXphdGlvbkV4Y2VwdGlvbigNCgkJCQkJCQkJc3RyaW5nLkZvcm1hdChDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwgDQoJCQkJCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5Tb2x1dGlvblBhY2thZ2VzQ29udGFpbmVyX1NlcmlhbGl6YXRpb25FcnJvciwgDQoJCQkJCQkJCQljZGF0YS5OYW1lKSwNCgkJCQkJCQkJZSk7DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoJCQkJLy8gV2hlbiB0aGUgcGFja2FnZSB3YXMgdW5pbnN0YWxsZWQgYnkgdGhlIHVzZXIsIG9yIGl0IHdhcyBhbiBlcnJvciBsb2FkaW5nIHRoZSB4bWwNCgkJCQkvLyBhc2sgaWYgc2hvdWxkIHdlIHJlbW92ZSB0aGUgZGF0YSBmcm9tIHRoZSBzdW8gZmlsZQ0KCQkJCWNhdGNoIChFeGNlcHRpb24gZXgpDQoJCQkJew0KCQkJCQlEaWFsb2dSZXN1bHQgcmVzdWx0ID0gRXJyb3JIZWxwZXIuU2hvdyh0aGlzLCBleCwgc3RyaW5nLkZvcm1hdChDdWx0dXJlSW5mby5DdXJyZW50VUlDdWx0dXJlLA0KCQkJCQkJCQlQcm9wZXJ0aWVzLlJlc291cmNlcy5Tb2x1dGlvblBhY2thZ2VzQ29udGFpbmVyX1BhY2thZ2VSZW1vdmVQZXJzaXN0ZW5jZSwNCgkJCQkJCQkJZXguTWVzc2FnZSksIE1lc3NhZ2VCb3hCdXR0b25zLlllc05vKTsNCgkJCQkJaWYgKHJlc3VsdCA9PSBEaWFsb2dSZXN1bHQuTm8pDQoJCQkJCXsNCgkJCQkJCXBhY2thZ2VzVG9QcmVzZXJ2ZS5BZGQoY2RhdGEpOw0KCQkJCQl9DQoJCQkJCWlmIChjcmVhZGVyICE9IG51bGwpDQoJCQkJCXsNCgkJCQkJCWNyZWFkZXIuQ2xvc2UoKTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0NCiAgICAgICAgfQ0KDQogICAgICAgIGludGVybmFsIHZvaWQgU2F2ZVBhY2thZ2VzRGF0YShTeXN0ZW0uSU8uU3RyZWFtIHN0cmVhbSkNCiAgICAgICAgew0KICAgICAgICAgICAgb2JqZWN0IGhvc3RzZXJ2aWNlID0gR2V0U2VydmljZSh0eXBlb2YoSUhvc3RTZXJ2aWNlKSk7DQogICAgICAgICAgICBEZWJ1Zy5Bc3NlcnQoaG9zdHNlcnZpY2UgaXMgU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lciwgIldyb25nIGltcGxlbWVudGF0aW9uIG9mIElIb3N0U2VydmljZSBmb3VuZCIpOw0KCQkJUmVmcmVzaFJlZmVyZW5jZXMoKTsNCiAgICAgICAgICAgIEFycmF5TGlzdCBkYXRhID0gbmV3IEFycmF5TGlzdChwYWNrYWdlUGVyc2lzdGVuY2VEYXRhLkNvdW50ICsNCgkJCQlwYWNrYWdlc1RvUHJlc2VydmUuQ291bnQpOw0KICAgICAgICAgICAgZm9yZWFjaCAoS2V5VmFsdWVQYWlyPHN0cmluZyxQYWNrYWdlU3RhdGU+IGVudHJ5IGluIHBhY2thZ2VQZXJzaXN0ZW5jZURhdGEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgTWVtb3J5U3RyZWFtIG1lbSA9IG5ldyBNZW1vcnlTdHJlYW0oKTsNCiAgICAgICAgICAgICAgICBuZXcgQmluYXJ5Rm9ybWF0dGVyKCkuU2VyaWFsaXplKG1lbSwgZW50cnkuVmFsdWUpOw0KICAgICAgICAgICAgICAgIGRhdGEuQWRkKG5ldyBQYWNrYWdlRGF0YSgoc3RyaW5nKWVudHJ5LktleSwgbWVtLlRvQXJyYXkoKSkpOw0KICAgICAgICAgICAgfQ0KCQkJZm9yZWFjaCAoUGFja2FnZURhdGEgY2RhdGEgaW4gcGFja2FnZXNUb1ByZXNlcnZlKQ0KCQkJew0KCQkJCWRhdGEuQWRkKGNkYXRhKTsNCgkJCX0NCg0KICAgICAgICAgICAgbmV3IEJpbmFyeUZvcm1hdHRlcigpLlNlcmlhbGl6ZShzdHJlYW0sIGRhdGEpOw0KICAgICAgICB9DQoNCiAgICAgICAgI2VuZHJlZ2lvbg0KDQoJCSNyZWdpb24gSU9sZUNvbXBvbmVudCBNZW1iZXJzDQoNCgkJaW50IElPbGVDb21wb25lbnQuRkNvbnRpbnVlTWVzc2FnZUxvb3AodWludCB1UmVhc29uLCBJbnRQdHIgcHZMb29wRGF0YSwgTVNHW10gcE1zZ1BlZWtlZCkNCgkJew0KCQkJcmV0dXJuIFZTQ29uc3RhbnRzRXguRkFMU0U7DQoJCX0NCg0KCQlJRW51bWVyYXRvcjxLZXlWYWx1ZVBhaXI8c3RyaW5nLFBhY2thZ2VTdGF0ZT4+IHBhY2thZ2VFbnVtZXJhdG9yID0gbnVsbDsNCgkJSUVudW1lcmF0b3IgcmVmZXJlbmNlRW51bWVyYXRvciA9IG51bGw7DQoNCgkJcHJpdmF0ZSBib29sIENoZWNrUmVmZXJlbmNlKHN0cmluZyBwYWNrYWdlTmFtZSxJQm91bmRBc3NldFJlZmVyZW5jZSByZWZlcmVuY2UpDQoJCXsNCgkJCW9iamVjdCBhY3R1YWxUYXJnZXQgPSByZWZlcmVuY2UuVGFyZ2V0Ow0KCQkJc3RyaW5nIHNlcmlhbGl6ZWREYXRhID0gcmVmZXJlbmNlLlN1YlBhdGg7DQoJCQlvYmplY3QgdGVzdGVkVGFyZ2V0ID0gcmVmZXJlbmNlLlN0cmF0ZWd5LkxvY2F0ZVRhcmdldCh0aGlzLCBzZXJpYWxpemVkRGF0YSk7DQoJCQlpZiAodGVzdGVkVGFyZ2V0ICE9IGFjdHVhbFRhcmdldCkNCgkJCXsNCgkJCQlEVEUgZHRlID0gR2V0U2VydmljZTxEVEU+KCk7DQoJCQkJdHJ5DQoJCQkJew0KCQkJCQlkdGUuU3RhdHVzQmFyLlRleHQgPSBTdHJpbmcuRm9ybWF0KEN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLA0KCQkJCQkJUHJvcGVydGllcy5SZXNvdXJjZXMuU29sdXRpb25QYWNrYWdlc0NvbnRhaW5lcl9VcGRhdGluZ1JlZmVyZW5jZSwNCgkJCQkJCXJlZmVyZW5jZS5TdWJQYXRoLA0KCQkJCQkJcGFja2FnZU5hbWUpOw0KCQkJCQlzdHJpbmcgbmV3U2VyaWFsaXphdGlvbkRhdGEgPSBzdHJpbmcuRW1wdHk7DQoJCQkJCXRyeQ0KCQkJCQl7DQoJCQkJCQluZXdTZXJpYWxpemF0aW9uRGF0YSA9IHJlZmVyZW5jZS5TdHJhdGVneS5HZXRTZXJpYWxpemF0aW9uRGF0YShhY3R1YWxUYXJnZXQpOw0KCQkJCQl9DQoJCQkJCWNhdGNoDQoJCQkJCXsNCgkJCQkJCS8vIFRoaXMgd2lsbCBjYXRjaCAiUHJvamVjdCB1bmF2YWlsaWJsZSBleGNlcHRpb24NCgkJCQkJCW5ld1NlcmlhbGl6YXRpb25EYXRhID0gc3RyaW5nLkVtcHR5Ow0KCQkJCQl9DQoJCQkJCWlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShuZXdTZXJpYWxpemF0aW9uRGF0YSkpDQoJCQkJCXsNCgkJCQkJCU9uQXNzZXRSZW1vdmVkKGFjdHVhbFRhcmdldCk7DQoJCQkJCX0NCgkJCQkJZWxzZQ0KCQkJCQl7DQoJCQkJCQlPbkFzc2V0UmVuYW1lZChhY3R1YWxUYXJnZXQpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJCWZpbmFsbHkNCgkJCQl7DQoJCQkJCWR0ZS5TdGF0dXNCYXIuQ2xlYXIoKTsNCgkJCQkJcmVmZXJlbmNlID0gbnVsbDsNCgkJCQkJcmVmZXJlbmNlRW51bWVyYXRvciA9IG51bGw7DQoJCQkJCXBhY2thZ2VFbnVtZXJhdG9yID0gbnVsbDsNCgkJCQl9DQoJCQkJcmV0dXJuIHRydWU7DQoJCQl9DQoJCQlyZXR1cm4gZmFsc2U7DQoJCX0NCg0KCQlwcml2YXRlIGludCBSZWZlcmVuY2VMb29wKHN0cmluZyBwYWNrYWdlTmFtZSkNCgkJew0KCQkJaWYgKHJlZmVyZW5jZUVudW1lcmF0b3IgPT0gbnVsbCkNCgkJCXsNCgkJCQlyZXR1cm4gVlNDb25zdGFudHNFeC5GQUxTRTsNCgkJCX0NCgkJCXdoaWxlIChyZWZlcmVuY2VFbnVtZXJhdG9yLk1vdmVOZXh0KCkpDQoJCQl7DQoJCQkJaWYgKHJlZmVyZW5jZUVudW1lcmF0b3IuQ3VycmVudCBpcyBJQm91bmRBc3NldFJlZmVyZW5jZSkNCgkJCQl7DQoJCQkJCUlCb3VuZEFzc2V0UmVmZXJlbmNlIHJlZmVyZW5jZSA9IHJlZmVyZW5jZUVudW1lcmF0b3IuQ3VycmVudCBhcyBJQm91bmRBc3NldFJlZmVyZW5jZTsNCgkJCQkJaWYgKHJlZmVyZW5jZSAhPSBudWxsICYmIENoZWNrUmVmZXJlbmNlKHBhY2thZ2VOYW1lLHJlZmVyZW5jZSkpDQoJCQkJCXsNCgkJCQkJCXJlZmVyZW5jZUVudW1lcmF0b3IgPSBudWxsOw0KCQkJCQkJcGFja2FnZUVudW1lcmF0b3IgPSBudWxsOw0KCQkJCQkJcmV0dXJuIFZTQ29uc3RhbnRzRXguVFJVRTsNCgkJCQkJfQ0KCQkJCX0NCgkJCQlpZiAob2xlQ29tcG9uZW50TWFuYWdlci5GQ29udGludWVJZGxlKCkgPT0gVlNDb25zdGFudHNFeC5GQUxTRSkNCgkJCQl7DQoJCQkJCXJldHVybiBWU0NvbnN0YW50c0V4LlRSVUU7DQoJCQkJfQ0KCQkJfQ0KCQkJcmVmZXJlbmNlRW51bWVyYXRvciA9IG51bGw7DQoJCQlyZXR1cm4gVlNDb25zdGFudHNFeC5GQUxTRTsNCgkJfQ0KDQoJCWludCBJT2xlQ29tcG9uZW50LkZEb0lkbGUodWludCBfZ3JmaWRsZWYpDQoJCXsNCgkJCV9PTEVJRExFRiBncmZpZGxlZiA9IChfT0xFSURMRUYpX2dyZmlkbGVmOw0KCQkJaWYgKHJlZmVyZW5jZUVudW1lcmF0b3IgIT0gbnVsbCAmJiBwYWNrYWdlRW51bWVyYXRvciE9bnVsbCkNCgkJCXsNCgkJCQlpZiAoUmVmZXJlbmNlTG9vcChwYWNrYWdlRW51bWVyYXRvci5DdXJyZW50LktleSkgPT0gVlNDb25zdGFudHNFeC5UUlVFKQ0KCQkJCXsNCgkJCQkJcmV0dXJuIFZTQ29uc3RhbnRzRXguVFJVRTsNCgkJCQl9DQoJCQl9DQoJCQlpZiAocGFja2FnZUVudW1lcmF0b3IgPT0gbnVsbCkNCgkJCXsNCgkJCQlwYWNrYWdlRW51bWVyYXRvciA9IHRoaXMucGFja2FnZVBlcnNpc3RlbmNlRGF0YS5HZXRFbnVtZXJhdG9yKCk7DQoJCQl9DQoJCQl3aGlsZSAoIHBhY2thZ2VFbnVtZXJhdG9yLk1vdmVOZXh0KCkpDQoJCQl7DQoJCQkJcmVmZXJlbmNlRW51bWVyYXRvciA9IA0KCQkJCQlwYWNrYWdlRW51bWVyYXRvci5DdXJyZW50LlZhbHVlLlJlZmVyZW5jZXMuR2V0RW51bWVyYXRvcigpOw0KCQkJCWlmIChSZWZlcmVuY2VMb29wKHBhY2thZ2VFbnVtZXJhdG9yLkN1cnJlbnQuS2V5KSA9PSBWU0NvbnN0YW50c0V4LlRSVUUgfHwgb2xlQ29tcG9uZW50TWFuYWdlci5GQ29udGludWVJZGxlKCkgPT0gVlNDb25zdGFudHNFeC5GQUxTRSkNCgkJCQl7DQoJCQkJCXJldHVybiBWU0NvbnN0YW50c0V4LlRSVUU7DQoJCQkJfQ0KCQkJfQ0KCQkJcmVmZXJlbmNlRW51bWVyYXRvciA9IG51bGw7DQoJCQlwYWNrYWdlRW51bWVyYXRvciA9IG51bGw7DQoJCQlyZXR1cm4gVlNDb25zdGFudHNFeC5GQUxTRTsNCgkJfQ0KDQoJCWludCBJT2xlQ29tcG9uZW50LkZQcmVUcmFuc2xhdGVNZXNzYWdlKE1TR1tdIHBNc2cpDQoJCXsNCgkJCXJldHVybiBWU0NvbnN0YW50c0V4LkZBTFNFOw0KCQl9DQoNCgkJaW50IElPbGVDb21wb25lbnQuRlF1ZXJ5VGVybWluYXRlKGludCBmUHJvbXB0VXNlcikNCgkJew0KCQkJcmV0dXJuIFZTQ29uc3RhbnRzRXguVFJVRTsNCgkJfQ0KDQoJCWludCBJT2xlQ29tcG9uZW50LkZSZXNlcnZlZDEodWludCBkd1Jlc2VydmVkLCB1aW50IG1lc3NhZ2UsIEludFB0ciB3UGFyYW0sIEludFB0ciBsUGFyYW0pDQoJCXsNCgkJCXJldHVybiBWU0NvbnN0YW50c0V4LlRSVUU7DQoJCX0NCg0KCQlJbnRQdHIgSU9sZUNvbXBvbmVudC5Id25kR2V0V2luZG93KHVpbnQgZHdXaGljaCwgdWludCBkd1Jlc2VydmVkKQ0KCQl7DQoJCQlyZXR1cm4gSW50UHRyLlplcm87DQoJCX0NCg0KCQl2b2lkIElPbGVDb21wb25lbnQuT25BY3RpdmF0aW9uQ2hhbmdlKElPbGVDb21wb25lbnQgcGljLCBpbnQgZlNhbWVDb21wb25lbnQsIE9MRUNSSU5GT1tdIHBjcmluZm8sIGludCBmSG9zdElzQWN0aXZhdGluZywgT0xFQ0hPU1RJTkZPW10gcGNob3N0aW5mbywgdWludCBkd1Jlc2VydmVkKQ0KCQl7DQoJCX0NCg0KCQl2b2lkIElPbGVDb21wb25lbnQuT25BcHBBY3RpdmF0ZShpbnQgZkFjdGl2ZSwgdWludCBkd090aGVyVGhyZWFkSUQpDQoJCXsNCgkJfQ0KDQoJCXZvaWQgSU9sZUNvbXBvbmVudC5PbkVudGVyU3RhdGUodWludCB1U3RhdGVJRCwgaW50IGZFbnRlcikNCgkJew0KCQl9DQoNCgkJdm9pZCBJT2xlQ29tcG9uZW50Lk9uTG9zZUFjdGl2YXRpb24oKQ0KCQl7DQoJCX0NCg0KCQl2b2lkIElPbGVDb21wb25lbnQuVGVybWluYXRlKCkNCgkJew0KCQl9DQoNCgkJI2VuZHJlZ2lvbg0KCX0NCn0NCg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>32</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/src/VisualStudio/Package/Templates/VSTemplateInfo.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">I3JlZ2lvbiBVc2luZyBEaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5UZXh0Ow0KdXNpbmcgTWljcm9zb2Z0LldpbjMyOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb247DQp1c2luZyBNaWNyb3NvZnQuVmlzdWFsU3R1ZGlvLlNoZWxsOw0KdXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbjsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuQ29tcG9uZW50TW9kZWw7DQp1c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlNlcnZpY2VzOw0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlNlcnZpY2VzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLkNvbW1vbjsNCg0KI2VuZHJlZ2lvbg0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlRlbXBsYXRlcw0Kew0KICAgIGludGVybmFsIHNlYWxlZCBjbGFzcyBWU1RlbXBsYXRlc1NlcnZpY2UgOiBDb250YWluZXJDb21wb25lbnQsIElWc1RlbXBsYXRlc1NlcnZpY2UNCiAgICB7DQogICAgICAgICNyZWdpb24gRmllbGRzICYgQ29uc3RydWN0b3INCg0KICAgICAgICBIYXNodGFibGUgcmVnaXN0cnlEYXRhOw0KDQogICAgICAgIHByaXZhdGUgY2xhc3MgUmVnaXN0cnlEYXRhDQogICAgICAgIHsNCiAgICAgICAgICAgIHB1YmxpYyBpbnQgQ29tbWFuZDsNCiAgICAgICAgICAgIHB1YmxpYyBHdWlkIFBhY2thZ2VHdWlkOw0KICAgICAgICAgICAgcHVibGljIENvbW1hbmRJRCBDb21tYW5kSUQNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gbmV3IENvbW1hbmRJRChQYWNrYWdlR3VpZCxDb21tYW5kKTsgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcHVibGljIHN0cmluZyBQYWNrYWdlTmFtZTsNCiAgICAgICAgICAgIHB1YmxpYyBSZWdpc3RyeURhdGEoaW50IGNvbW1hbmQsIHN0cmluZyBQYWNrYWdlTmFtZSwgR3VpZCBQYWNrYWdlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuQ29tbWFuZCA9IGNvbW1hbmQ7DQogICAgICAgICAgICAgICAgdGhpcy5QYWNrYWdlR3VpZCA9IFBhY2thZ2U7DQogICAgICAgICAgICAgICAgdGhpcy5QYWNrYWdlTmFtZSA9IFBhY2thZ2VOYW1lOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIFZTVGVtcGxhdGVzU2VydmljZSgpDQoJCXsNCgkJCXJlZ2lzdHJ5RGF0YSA9IG5ldyBIYXNodGFibGUoNywgQ2FzZUluc2Vuc2l0aXZlSGFzaENvZGVQcm92aWRlci5EZWZhdWx0LA0KCQkJCUNhc2VJbnNlbnNpdGl2ZUNvbXBhcmVyLkRlZmF1bHQpOw0KICAgICAgICAgICAgUmVhZFJlZ2lzdHJ5RGF0YSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgI2VuZHJlZ2lvbg0KDQogICAgICAgICNyZWdpb24gUHJpdmF0ZSBpbXBsbWVudGF0aW9uDQoNCiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc3RyaW5nIEdldFJlZ2lzdHJ5S2V5TmFtZShHdWlkIFBhY2thZ2VHdWlkKQ0KCQl7DQogICAgICAgICAgICBpZiAoIFBhY2thZ2VHdWlkLkVxdWFscyhHdWlkLkVtcHR5KSApDQogICAgICAgICAgICB7DQoJCQkgICAgcmV0dXJuIFN0cmluZy5Gb3JtYXQoQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsIEAiUGFja2FnZXNcezB9XFRlbXBsYXRlcyIsDQoJCQkJICAgIHR5cGVvZihSZWNpcGVNYW5hZ2VyUGFja2FnZSkuR1VJRC5Ub1N0cmluZygiQiIpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCgkJCSAgICByZXR1cm4gU3RyaW5nLkZvcm1hdChDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwgQCJQYWNrYWdlc1x7MH1cVGVtcGxhdGVzXHsxfSIsDQoJCQkJICAgIHR5cGVvZihSZWNpcGVNYW5hZ2VyUGFja2FnZSkuR1VJRC5Ub1N0cmluZygiQiIpLA0KICAgICAgICAgICAgICAgICAgICBQYWNrYWdlR3VpZC5Ub1N0cmluZygiQiIpKTsNCiAgICAgICAgICAgIH0NCgkJfQ0KDQogICAgICAgIHByaXZhdGUgUmVnaXN0cnlLZXkgR2V0UmVnaXN0cnlLZXkoR3VpZCBQYWNrYWdlR3VpZCwgYm9vbCByZWdpc3RlcmluZykNCgkJew0KCQkJRGVmYXVsdFJlZ2lzdHJ5Um9vdEF0dHJpYnV0ZSByb290QXR0cmliID0gKERlZmF1bHRSZWdpc3RyeVJvb3RBdHRyaWJ1dGUpDQoJCQkJQXR0cmlidXRlLkdldEN1c3RvbUF0dHJpYnV0ZSgNCgkJCQkJdHlwZW9mKFJlY2lwZU1hbmFnZXJQYWNrYWdlKSwgDQoJCQkJCXR5cGVvZihEZWZhdWx0UmVnaXN0cnlSb290QXR0cmlidXRlKSk7DQoJCQlpZiAocm9vdEF0dHJpYiA9PSBudWxsKQ0KCQkJew0KCQkJCXRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFByb3BlcnRpZXMuUmVzb3VyY2VzLk1pc3NpbmdfUmVnUm9vdCk7DQoJCQl9DQoJCQl1c2luZyAoUmVnaXN0cnlLZXkgcm9vdCA9IFJlZ2lzdHJ5LkxvY2FsTWFjaGluZS5PcGVuU3ViS2V5KHJvb3RBdHRyaWIuUm9vdCwgcmVnaXN0ZXJpbmcpKQ0KCQkJew0KCQkJCWlmIChyZWdpc3RlcmluZykNCgkJCQl7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByb290LkNyZWF0ZVN1YktleShHZXRSZWdpc3RyeUtleU5hbWUoUGFja2FnZUd1aWQpKTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3QuT3BlblN1YktleShHZXRSZWdpc3RyeUtleU5hbWUoUGFja2FnZUd1aWQpLCBmYWxzZSk7DQoJCQkJfQ0KCQkJfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSB2b2lkIEdldFRlbXBsYXRlKHN0cmluZyB0ZW1wbGF0ZUZpbGUsIEFycmF5TGlzdCB0ZW1wbGF0ZXMsIENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIGd1aWRhbmNlUGFja2FnZSkNCiAgICAgICAgew0KICAgICAgICAgICAgSVZzVGVtcGxhdGUgdGVtcGxhdGUgPSBudWxsOw0KICAgICAgICAgICAgaWYgKGd1aWRhbmNlUGFja2FnZSAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIFJlZ2lzdGVyVGVtcGxhdGUodGVtcGxhdGVGaWxlLCBndWlkYW5jZVBhY2thZ2UuR3VpZCwgbmV3IEd1aWQoZ3VpZGFuY2VQYWNrYWdlLkd1aWQpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRlbXBsYXRlID0gKChJVnNUZW1wbGF0ZXNTZXJ2aWNlKXRoaXMpLkdldFRlbXBsYXRlKHRlbXBsYXRlRmlsZSk7DQogICAgICAgICAgICBpZiAodGVtcGxhdGUgIT0gbnVsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuQWRkKHRlbXBsYXRlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgdm9pZCBQb3B1bGF0ZVRlbXBsYXRlcyhzdHJpbmcgYmFzZVBhdGgsQXJyYXlMaXN0IHRlbXBsYXRlcyxDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBndWlkYW5jZVBhY2thZ2UpDQogICAgICAgIHsNCiAgICAgICAgICAgIEdldFRlbXBsYXRlcyhiYXNlUGF0aCArIEAiXFRlbXBsYXRlc1xJdGVtcyIsIHRlbXBsYXRlcywgZ3VpZGFuY2VQYWNrYWdlKTsNCiAgICAgICAgICAgIEdldFRlbXBsYXRlcyhiYXNlUGF0aCArIEAiXFRlbXBsYXRlc1xQcm9qZWN0cyIsIHRlbXBsYXRlcywgZ3VpZGFuY2VQYWNrYWdlKTsNCiAgICAgICAgICAgIEdldFRlbXBsYXRlcyhiYXNlUGF0aCArIEAiXFRlbXBsYXRlc1xTb2x1dGlvbnMiLCB0ZW1wbGF0ZXMsIGd1aWRhbmNlUGFja2FnZSk7DQogICAgICAgICAgICBHZXRUZW1wbGF0ZXMoYmFzZVBhdGggKyBAIlxUZW1wbGF0ZXNcU29sdXRpb25zXFByb2plY3RzIiwgdGVtcGxhdGVzLCBndWlkYW5jZVBhY2thZ2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSB2b2lkIEdldFRlbXBsYXRlcyhzdHJpbmcgZGlyZWN0b3J5LCBBcnJheUxpc3QgdGVtcGxhdGVzLENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIGd1aWRhbmNlUGFja2FnZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFEaXJlY3RvcnkuRXhpc3RzKGRpcmVjdG9yeSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yZWFjaCAoc3RyaW5nIHRlbXBsYXRlRmlsZSBpbiBEaXJlY3RvcnkuR2V0RmlsZXMoZGlyZWN0b3J5LCAiKi52c3RlbXBsYXRlIikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgR2V0VGVtcGxhdGUodGVtcGxhdGVGaWxlLCB0ZW1wbGF0ZXMsIGd1aWRhbmNlUGFja2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3JlYWNoIChzdHJpbmcgc3ViRGlyZWN0b3J5IGluIERpcmVjdG9yeS5HZXREaXJlY3RvcmllcyhkaXJlY3RvcnkpKQ0KCQkJew0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyB0ZW1wbGF0ZUZpbGUgaW4gRGlyZWN0b3J5LkdldEZpbGVzKHN1YkRpcmVjdG9yeSwgIioudnN0ZW1wbGF0ZSIpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgR2V0VGVtcGxhdGUodGVtcGxhdGVGaWxlLCB0ZW1wbGF0ZXMsIGd1aWRhbmNlUGFja2FnZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSBSZWdpc3RyeURhdGEgR2V0VGVtcGxhdGVSZWdpc3RyeURhdGEoc3RyaW5nIHRlbXBsYXRlRmlsZU5hbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICggIXJlZ2lzdHJ5RGF0YS5Db250YWluc0tleSh0ZW1wbGF0ZUZpbGVOYW1lKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oU3RyaW5nLkZvcm1hdCgNCiAgICAgICAgICAgICAgICAgICAgQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsDQogICAgICAgICAgICAgICAgICAgIFByb3BlcnRpZXMuUmVzb3VyY2VzLlRlbXBsYXRlc19Ob3RSZWdpc3RlcmVkLA0KICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZpbGVOYW1lKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gKFJlZ2lzdHJ5RGF0YSlyZWdpc3RyeURhdGFbdGVtcGxhdGVGaWxlTmFtZV07DQogICAgICAgIH0NCg0KICAgICAgICAjZW5kcmVnaW9uDQoNCiAgICAgICAgI3JlZ2lvbiBJVnNUZW1wbGF0ZXNTZXJ2aWNlIE1lbWJlcnMNCg0KICAgICAgICBwcml2YXRlIHZvaWQgUmVhZFJlZ2lzdHJ5RGF0YSgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHVzaW5nIChSZWdpc3RyeUtleSB0ZW1wbGF0ZXNLZXkgPSB0aGlzLkdldFJlZ2lzdHJ5S2V5KEd1aWQuRW1wdHksIGZhbHNlKSkNCiAgICAgICAgICAgIHsNCgkJCQlpZiAodGVtcGxhdGVzS2V5ID09IG51bGwpDQoJCQkJew0KCQkJCQlyZXR1cm47DQoJCQkJfQ0KCQkJCWZvcmVhY2ggKHN0cmluZyBQYWNrYWdlS2V5TmFtZSBpbiB0ZW1wbGF0ZXNLZXkuR2V0U3ViS2V5TmFtZXMoKSkNCgkJCQl7DQoJCQkJCWlmIChTdHJpbmcuSXNOdWxsT3JFbXB0eShQYWNrYWdlS2V5TmFtZSkpDQoJCQkJCXsNCgkJCQkJCWNvbnRpbnVlOw0KCQkJCQl9DQoJCQkJCUd1aWQgUGFja2FnZUd1aWQgPSBuZXcgR3VpZChQYWNrYWdlS2V5TmFtZSk7DQoJCQkJCXVzaW5nIChSZWdpc3RyeUtleSB0ZW1wbGF0ZUtleSA9IHRoaXMuR2V0UmVnaXN0cnlLZXkoUGFja2FnZUd1aWQsIGZhbHNlKSkNCgkJCQkJew0KCQkJCQkJaWYgKHRlbXBsYXRlS2V5ID09IG51bGwgKQ0KCQkJCQkJew0KCQkJCQkJCWNvbnRpbnVlOw0KCQkJCQkJfQ0KCQkJCQkJc3RyaW5nIFBhY2thZ2VOYW1lID0gKHN0cmluZyl0ZW1wbGF0ZUtleS5HZXRWYWx1ZSgiUGFja2FnZU5hbWUiKTsNCgkJCQkJCWludCBuID0gKGludCl0ZW1wbGF0ZUtleS5HZXRWYWx1ZSgiTGFzdFRlbXBsYXRlIiwwKTsNCgkJCQkJCWlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShQYWNrYWdlTmFtZSkgfHwgbj09MCkNCgkJCQkJCXsNCgkJCQkJCQljb250aW51ZTsNCgkJCQkJCX0NCgkJCQkJCWZvciAoaW50IGk9MTtpPD1uO2krKykNCgkJCQkJCXsNCgkJCQkJCQlzdHJpbmcgdGVtcGxhdGVGaWxlTmFtZSA9IChzdHJpbmcpdGVtcGxhdGVLZXkuR2V0VmFsdWUoaS5Ub1N0cmluZygpKTsNCgkJCQkJCQlpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KHRlbXBsYXRlRmlsZU5hbWUpKQ0KCQkJCQkJCXsNCgkJCQkJCQkJcmVnaXN0cnlEYXRhLkFkZCh0ZW1wbGF0ZUZpbGVOYW1lLCBuZXcgUmVnaXN0cnlEYXRhKGksIFBhY2thZ2VOYW1lLCBuZXcgR3VpZChQYWNrYWdlS2V5TmFtZSkpKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIGludCBSZWdpc3RlclRlbXBsYXRlKHN0cmluZyB0ZW1wbGF0ZUZpbGVOYW1lLCBzdHJpbmcgZ3VpZGFuY2VQYWNrYWdlLEd1aWQgUGFja2FnZSkNCgkJew0KICAgICAgICAgICAgdXNpbmcgKFJlZ2lzdHJ5S2V5IGtleVBhY2thZ2UgPSB0aGlzLkdldFJlZ2lzdHJ5S2V5KFBhY2thZ2UsIHRydWUgKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpbnQgdGVtcGxhdGVDb3VudGVyID0gKGludClrZXlQYWNrYWdlLkdldFZhbHVlKCJMYXN0VGVtcGxhdGUiKTsNCiAgICAgICAgICAgICAgICBpZiAodGVtcGxhdGVDb3VudGVyID49IDI1NSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFByb3BlcnRpZXMuUmVzb3VyY2VzLlRlbXBsYXRlc19NYXhpbXVtRXhjZWVkZWQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICArK3RlbXBsYXRlQ291bnRlcjsNCiAgICAgICAgICAgICAgICBrZXlQYWNrYWdlLlNldFZhbHVlKHRlbXBsYXRlQ291bnRlci5Ub1N0cmluZygpLCB0ZW1wbGF0ZUZpbGVOYW1lKTsNCiAgICAgICAgICAgICAgICBpZiAocmVnaXN0cnlEYXRhLkNvbnRhaW5zS2V5KHRlbXBsYXRlRmlsZU5hbWUpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cnlEYXRhLlJlbW92ZSh0ZW1wbGF0ZUZpbGVOYW1lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVnaXN0cnlEYXRhLkFkZCh0ZW1wbGF0ZUZpbGVOYW1lLCBuZXcgUmVnaXN0cnlEYXRhKHRlbXBsYXRlQ291bnRlcixndWlkYW5jZVBhY2thZ2UsUGFja2FnZSkpOw0KICAgICAgICAgICAgICAgIGtleVBhY2thZ2UuU2V0VmFsdWUoIkxhc3RUZW1wbGF0ZSIsIHRlbXBsYXRlQ291bnRlcik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlQ291bnRlcjsNCiAgICAgICAgICAgIH0NCgkJfQ0KDQogICAgICAgIElBc3NldERlc2NyaXB0aW9uW10gSVZzVGVtcGxhdGVzU2VydmljZS5SZWdpc3RlclRlbXBsYXRlcyhzdHJpbmcgYmFzZVBhdGgsQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgZ3VpZGFuY2VQYWNrYWdlKQ0KICAgICAgICB7DQogICAgICAgICAgICBHdWlkIFBhY2thZ2VHdWlkID0gbmV3IEd1aWQoZ3VpZGFuY2VQYWNrYWdlLkd1aWQpOw0KICAgICAgICAgICAgdXNpbmcgKFJlZ2lzdHJ5S2V5IHRlbXBsYXRlc0tleSA9IHRoaXMuR2V0UmVnaXN0cnlLZXkoUGFja2FnZUd1aWQsIHRydWUpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRlbXBsYXRlc0tleS5TZXRWYWx1ZSgiTGFzdFRlbXBsYXRlIiwwKTsNCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNLZXkuU2V0VmFsdWUoIlBhY2thZ2VOYW1lIiwgZ3VpZGFuY2VQYWNrYWdlLkd1aWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgQXJyYXlMaXN0IHRlbXBsYXRlcyA9IG5ldyBBcnJheUxpc3QoKTsNCiAgICAgICAgICAgIFBvcHVsYXRlVGVtcGxhdGVzKGJhc2VQYXRoLCB0ZW1wbGF0ZXMsIGd1aWRhbmNlUGFja2FnZSk7DQogICAgICAgICAgICBmb3JlYWNoIChJVnNUZW1wbGF0ZSB0ZW1wbGF0ZSBpbiB0ZW1wbGF0ZXMpDQogICAgICAgICAgICB7DQoJCQkJKChUZW1wbGF0ZU1ldGFEYXRhKXRlbXBsYXRlKS5SZWdpc3Rlcih0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAoSUFzc2V0RGVzY3JpcHRpb25bXSl0ZW1wbGF0ZXMuVG9BcnJheSh0eXBlb2YoSUFzc2V0RGVzY3JpcHRpb24pKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZvaWQgSVZzVGVtcGxhdGVzU2VydmljZS5VbnJlZ2lzdGVyVGVtcGxhdGVzKHN0cmluZyBiYXNlUGF0aCwgQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgZ3VpZGFuY2VQYWNrYWdlKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3JlYWNoIChUZW1wbGF0ZU1ldGFEYXRhIHRlbXBsYXRlIGluIENvbXBvbmVudHMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGVtcGxhdGUuUmVnaXN0ZXIoZmFsc2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc3RyaW5nIGRpckl0ZW1zQ2FjaGUgPSBQYXRoLkNvbWJpbmUoYmFzZVBhdGgsIEAiVGVtcGxhdGVzXEl0ZW1zLkNhY2hlIik7DQogICAgICAgICAgICBpZiAoRGlyZWN0b3J5LkV4aXN0cyhkaXJJdGVtc0NhY2hlKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBEaXJlY3RvcnkuRGVsZXRlKGRpckl0ZW1zQ2FjaGUsIHRydWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc3RyaW5nIGRpclByb2plY3RzQ2FjaGUgPSBQYXRoLkNvbWJpbmUoYmFzZVBhdGgsIEAiVGVtcGxhdGVzXFByb2plY3RzLkNhY2hlIik7DQogICAgICAgICAgICBpZiAoRGlyZWN0b3J5LkV4aXN0cyhkaXJQcm9qZWN0c0NhY2hlKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBEaXJlY3RvcnkuRGVsZXRlKGRpclByb2plY3RzQ2FjaGUsIHRydWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdXNpbmcgKFJlZ2lzdHJ5S2V5IHRlbXBsYXRlc0tleSA9IHRoaXMuR2V0UmVnaXN0cnlLZXkoR3VpZC5FbXB0eSwgdHJ1ZSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGVtcGxhdGVzS2V5LkRlbGV0ZVN1YktleShuZXcgR3VpZChndWlkYW5jZVBhY2thZ2UuR3VpZCkuVG9TdHJpbmcoIkIiKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBJVnNUZW1wbGF0ZSBJVnNUZW1wbGF0ZXNTZXJ2aWNlLkdldEN1cnJlbnRUZW1wbGF0ZSgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChVbmZvbGRUZW1wbGF0ZS5VbmZvbGRpbmdUZW1wbGF0ZXMuQ291bnQgPiAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiAoSVZzVGVtcGxhdGUpVW5mb2xkVGVtcGxhdGUuVW5mb2xkaW5nVGVtcGxhdGVzLlBlZWsoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQoNCiAgICAgICAgSVZzVGVtcGxhdGUgSVZzVGVtcGxhdGVzU2VydmljZS5HZXRUZW1wbGF0ZShHdWlkIFBhY2thZ2UsIGludCBpVGVtcGxhdGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHVzaW5nIChSZWdpc3RyeUtleSBrZXlQYWNrYWdlID0gdGhpcy5HZXRSZWdpc3RyeUtleShQYWNrYWdlLCBmYWxzZSkpDQogICAgICAgICAgICB7DQoJCQkJaWYgKGtleVBhY2thZ2UgIT0gbnVsbCkNCgkJCQl7DQoJCQkJCXN0cmluZyB0ZW1wbGF0ZUZpbGVOYW1lID0gKHN0cmluZylrZXlQYWNrYWdlLkdldFZhbHVlKGlUZW1wbGF0ZS5Ub1N0cmluZygpKTsNCgkJCQkJcmV0dXJuICgoSVZzVGVtcGxhdGVzU2VydmljZSl0aGlzKS5HZXRUZW1wbGF0ZSh0ZW1wbGF0ZUZpbGVOYW1lKTsNCgkJCQl9DQogICAgICAgICAgICB9DQoJCQlyZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KDQogICAgICAgIElWc1RlbXBsYXRlIElWc1RlbXBsYXRlc1NlcnZpY2UuR2V0VGVtcGxhdGUoc3RyaW5nIHRlbXBsYXRlRmlsZU5hbWUpDQogICAgICAgIHsNCgkJCWlmICh0aGlzLkNvbXBvbmVudHNbdGVtcGxhdGVGaWxlTmFtZV09PW51bGwpDQoJCQl7DQogICAgICAgICAgICAgICAgUmVnaXN0cnlEYXRhIHJlZ0RhdGEgPSBHZXRUZW1wbGF0ZVJlZ2lzdHJ5RGF0YSh0ZW1wbGF0ZUZpbGVOYW1lKTsNCgkJCQl0aGlzLkFkZCgNCgkJCQkJbmV3IFRlbXBsYXRlTWV0YURhdGEoDQoJCQkJCQl0ZW1wbGF0ZUZpbGVOYW1lLA0KCQkJCQkJcmVnRGF0YS5Db21tYW5kSUQsDQoJCQkJCQlyZWdEYXRhLlBhY2thZ2VOYW1lKSwNCgkJCQkJCXRlbXBsYXRlRmlsZU5hbWUpOw0KCQkJfQ0KICAgICAgICAgICAgcmV0dXJuIChJVnNUZW1wbGF0ZSl0aGlzLkNvbXBvbmVudHNbdGVtcGxhdGVGaWxlTmFtZV07DQogICAgICAgIH0NCg0KICAgICAgICBJQXNzZXREZXNjcmlwdGlvbltdIElWc1RlbXBsYXRlc1NlcnZpY2UuR2V0SG9zdEFzc2V0cyhzdHJpbmcgYmFzZVBhdGgpDQogICAgICAgIHsNCiAgICAgICAgICAgIEFycmF5TGlzdCB0ZW1wbGF0ZXMgPSBuZXcgQXJyYXlMaXN0KCk7DQogICAgICAgICAgICBQb3B1bGF0ZVRlbXBsYXRlcyhiYXNlUGF0aCwgdGVtcGxhdGVzLCBudWxsKTsNCiAgICAgICAgICAgIHJldHVybiAoSUFzc2V0RGVzY3JpcHRpb25bXSl0ZW1wbGF0ZXMuVG9BcnJheSh0eXBlb2YoSUFzc2V0RGVzY3JpcHRpb24pKTsNCiAgICAgICAgfQ0KDQoJCSNlbmRyZWdpb24NCiAgICB9DQp9DQo=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>37</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/Configuration/mainconfig.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSINCiAgICBHdWlkPSIyM0ZDMjlDOS1GQUZFLTQ3ZjEtQjYzMy1CNTQ4RTc4OEREREEiIA0KICAgIENhcHRpb249IlBhY2thZ2UgQ2FwdGlvbiIgDQogICAgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgk8UmVjaXBlcz4NCgkJPCEtLSBJbmNsdWRlIHRoZSByZXVzYWJsZSByZWNpcGUgZnJvbSByZWNpcGUueG1sIC0tPg0KICAgIDx4aTppbmNsdWRlIGhyZWY9InJlY2lwZS54bWwiIHhtbG5zOnhpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hJbmNsdWRlIiAvPg0KCQk8UmVjaXBlIE5hbWU9IlRlc3RSZWNpcGVGcm9tQ29uZmlnIj4NCgkJCTxUeXBlcz4NCgkJCQk8VHlwZUFsaWFzIE5hbWU9IkFkZFJlbW90aW5nVG9Qcm9qZWN0IiBUeXBlPSIgYXNzZW1ibHkgKyBjbGFzcyArIHZlcnNpb24gKyAuLi4iLz4NCgkJCQk8VHlwZUFsaWFzIE5hbWU9IkZvbGRlck5hbWVQcm92aWRlciIgVHlwZT0iYXNzZW1ibHkgKyBjbGFzcyArIHZlcnNpb24gKyAuLi4iLz4NCgkJCTwvVHlwZXM+DQoJCQk8Q2FwdGlvbj5UZXN0IFJlY2lwZSBmcm9tIENvbmZpZzwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj5UaGlzIGlzIGEgcmVjaXBlIGRlZmluZWQgaW4gU2hhZG93RmF4LmNvbmZpZzwvRGVzY3JpcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJQcm9qZWN0TmFtZSIgVHlwZT0iRFRFLlByb2plY3QiIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkZvbGRlck5hbWUiIFR5cGU9IkRURS5Gb2xkZXIiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJGb2xkZXJOYW1lUHJvdmlkZXIiIC8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQm9vbEFyZ3VtZW50MSIgVHlwZT0iQm9vbGVhbiIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQm9vbEFyZ3VtZW50MiIgVHlwZT0iQm9vbGVhbiIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQm9vbEFyZ3VtZW50MyIgVHlwZT0iQm9vbGVhbiIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQ29sb3JBcmd1bWVudDEiIFR5cGU9IlN5c3RlbS5EcmF3aW5nLkNvbG9yIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJDb2xvckFyZ3VtZW50MiIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuQ29sb3IiIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkNvbG9yQXJndW1lbnQzIiBUeXBlPSJTeXN0ZW0uRHJhd2luZy5Db2xvciIgLz4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiIA0KICAgICAgICAgICAgICAgIE5hbWU9Ik15V2l6YXJkIj4NCgkJCQkJPCEtLSBJbmNsdWRlIHRoZSBjb21tb24gdHlwZXMgLS0+DQogICAgICAgICAgPHhpOmluY2x1ZGUgaHJlZj0id2l6YXJkdHlwZXMueG1sIiB4bWxuczp4aT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YSW5jbHVkZSIgLz4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPk15V2l6YXJkIFRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPk15V2l6YXJkIFN1YnRpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IlByb2plY3ROYW1lIiBMYWJlbD0iUHJvamVjdE5hbWUiPiANCiAgICAgICAgICAgICAgICAgIDxUb29sdGlwPiIuLi4iPC9Ub29sdGlwPg0KICAgICAgICAgICAgICAgICAgPCEtLSBJbmNsdWRlIGhlbHAgZnJvbSBleHRlcm5hbCBmaWxlLiAtLT4NCiAgICAgICAgICAgICAgICAgIDx4aTppbmNsdWRlIGhyZWY9ImhlbHAueG1sIiB4bWxuczp4aT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YSW5jbHVkZSIgLz4NCiAgICAgICAgICAgICAgICAgIDxFZGl0b3IgVHlwZT0iUHJvamVjdE5hbWVTZWxlY3RvciIgLz4NCiAgICAgICAgICAgICAgICA8L0ZpZWxkPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iTXlBY3Rpb24iIFR5cGU9IkFkZFJlbW90aW5nVG9Qcm9qZWN0Ij4NCgkJCQkJPElucHV0IE5hbWU9IlBhcmFtZXRlcjAxIiBSZWNpcGVBcmd1bWVudD0iUHJvamVjdE5hbWUiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPEFjdGlvbiBUeXBlPSJEaXNwbGF5TWVzc2FnZSIgTmFtZT0iQW4gb3B0aW9uYWwgZnJpZW5kbHkgTmFtZSBkbyBkaXNwbGF5IGluIHNvbWUgVW5kby9SZWRvIGZhY2lsaXR5Ij4NCgkJCQkJPCEtLSBUaGVyZSBtYXkgYmUgbm8gYXJndW1lbnRzIHdoYXRzb2V2ZXIuIC0tPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJUZXN0UmVjaXBlV2l0aEluY2x1ZGVkV2l6YXJkIj4NCgkJCTxUeXBlcz4NCgkJCQk8VHlwZUFsaWFzIE5hbWU9IkFkZFJlbW90aW5nVG9Qcm9qZWN0IiBUeXBlPSIgYXNzZW1ibHkgKyBjbGFzcyArIHZlcnNpb24gKyAuLi4iLz4NCgkJCQk8VHlwZUFsaWFzIE5hbWU9IkZvbGRlck5hbWVQcm92aWRlciIgVHlwZT0iYXNzZW1ibHkgKyBjbGFzcyArIHZlcnNpb24gKyAuLi4iLz4NCgkJCTwvVHlwZXM+DQoJCQk8Q2FwdGlvbj5UZXN0IFJlY2lwZSBmcm9tIENvbmZpZzwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj5UaGlzIGlzIGEgcmVjaXBlIGRlZmluZWQgaW4gU2hhZG93RmF4LmNvbmZpZzwvRGVzY3JpcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJQcm9qZWN0TmFtZSIgVHlwZT0iRFRFLlByb2plY3QiIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkZvbGRlck5hbWUiIFR5cGU9IkRURS5Gb2xkZXIiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJGb2xkZXJOYW1lUHJvdmlkZXIiIC8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTwhLS0gSW5jbHVkZSB0aGUgcmV1c2FibGUgd2l6YXJkIGZyb20gd2l6YXJkLnhtbCAtLT4NCiAgICAgICAgPHhpOmluY2x1ZGUgaHJlZj0id2l6YXJkLnhtbCIgeG1sbnM6eGk9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWEluY2x1ZGUiIC8+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJNeUFjdGlvbiIgVHlwZT0iSGVsbG9Xb3JsZEFjdGlvbiI+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCTwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>21</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/Configuration/smallconfig.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIgDQogICAgR3VpZD0iMUU0QTFCRUItRkY5Ni00ZmEyLUExODEtNDg5RjYxMUIwMkVDIiANCiAgICBDYXB0aW9uPSJQYWNrYWdlIENhcHRpb24iDQogICAgU2NoZW1hVmVyc2lvbj0iMS4wIiA+DQoJPFJlY2lwZXM+DQoJCTxSZWNpcGUgTmFtZT0iVGVzdFJlY2lwZUZyb21Db25maWciPg0KCQkJPENhcHRpb24+VGVzdCBSZWNpcGUgZnJvbSBDb25maWc8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+VGVzdCBEZXNjcmlwdGlvbjwvRGVzY3JpcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJYU0QiIFR5cGU9IlN0cmluZyIgLz4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiIA0KICAgICAgICAgICAgICAgIE5hbWU9Ik15V2l6YXJkIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPk15V2l6YXJkIFRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPk15V2l6YXJkIFN1YnRpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IlhTRCIgTGFiZWw9IlhTRCI+DQogICAgICAgICAgICAgICAgICA8VG9vbHRpcD4iLi4uIjwvVG9vbHRpcD4NCiAgICAgICAgICAgICAgICAgIDxFZGl0b3IgVHlwZT0iUHJvamVjdE5hbWVTZWxlY3RvciIgLz4NCiAgICAgICAgICAgICAgICA8L0ZpZWxkPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iTXlBY3Rpb24iIFR5cGU9IkFkZFhzZFRvUHJvamVjdCI+DQoJCQkJCTxJbnB1dCBOYW1lPSJYc2RGaWxlIiBSZWNpcGVBcmd1bWVudD0iWFNEIiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgk8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>5</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/Library/ExpressionEvaluator.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIEd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFQyIgQ2FwdGlvbj0iVGVzdGluZyBQYWNrYWdlIiBIb3N0PSJWaXN1YWxTdHVkaW8iIFNjaGVtYVZlcnNpb249IjEuMCIgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIj4NCiAgPFJlY2lwZXM+DQogICAgPFJlY2lwZSBOYW1lPSJEZWZhdWx0Q29sb3JzIiBSZWN1cnJlbnQ9ImZhbHNlIj4NCiAgICAgIDxDYXB0aW9uPkV4ZWN1dGVzIGFuIGFjdGlvbiBwYXNzaW5nIGRlZmF1bHQgdmFsdWVzIGZyb20gdmFsdWUgcHJvdmlkZXIgZGVmYXVsdCBleHByZXNzaW9uPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkJsdWUiIFR5cGU9IlN5c3RlbS5EcmF3aW5nLkNvbG9yLCBTeXN0ZW0uRHJhd2luZywgVmVyc2lvbj0yLjAuMzYwMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWIwM2Y1ZjdmMTFkNTBhM2EiPg0KICAgICAgICAgIDxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiDQogICAgICAgICAgICAgICAgICAgICAgICAgRXhwcmVzc2lvbj0iQmx1ZSIvPg0KICAgICAgICA8L0FyZ3VtZW50Pg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iR3JlZW4iIFR5cGU9IlN5c3RlbS5EcmF3aW5nLkNvbG9yLCBTeXN0ZW0uRHJhd2luZywgVmVyc2lvbj0yLjAuMzYwMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWIwM2Y1ZjdmMTFkNTBhM2EiPg0KICAgICAgICAgIDxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiDQogICAgICAgICAgICAgICAgICAgICAgICAgRXhwcmVzc2lvbj0iR3JlZW4iLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlJlZCIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuQ29sb3IsIFN5c3RlbS5EcmF3aW5nLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSI+DQogICAgICAgICAgPFZhbHVlUHJvdmlkZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5WYWx1ZVByb3ZpZGVycy5FeHByZXNzaW9uRXZhbHVhdG9yVmFsdWVQcm92aWRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSINCiAgICAgICAgICAgICAgICAgICAgICAgICBFeHByZXNzaW9uPSJSZWQiLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iQ2hlY2tDb2xvcnMiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVGVzdC5FeHByZXNzaW9uRXZhbHVhdG9yVGVzdCtDaGVja0NvbG9yc0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0Ij4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iQmx1ZSIgUmVjaXBlQXJndW1lbnQ9IkJsdWUiLz4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iR3JlZW4iIFJlY2lwZUFyZ3VtZW50PSJHcmVlbiIvPg0KICAgICAgICAgIDxJbnB1dCBOYW1lPSJSZWQiIFJlY2lwZUFyZ3VtZW50PSJSZWQiLz4NCiAgICAgICAgPC9BY3Rpb24+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJEZWZhdWx0RGF0ZSIgUmVjdXJyZW50PSJmYWxzZSI+DQogICAgICA8Q2FwdGlvbj5FeGVjdXRlcyBhbiBhY3Rpb24gcGFzc2luZyBkZWZhdWx0IHZhbHVlcyBmcm9tIHZhbHVlIHByb3ZpZGVyIGRlZmF1bHQgZXhwcmVzc2lvbjwvQ2FwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJEYXRlIiBUeXBlPSJTeXN0ZW0uRGF0ZVRpbWUiPg0KICAgICAgICAgIDxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiDQogICAgICAgICAgICAgICAgICAgICAgICAgRXhwcmVzc2lvbj0iMTUgTm92ZW1iZXIgMjAwNCIvPg0KICAgICAgICA8L0FyZ3VtZW50Pg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJDaGVja0RhdGUiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVGVzdC5FeHByZXNzaW9uRXZhbHVhdG9yVGVzdCtDaGVja0RhdGUsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVGVzdCI+DQogICAgICAgICAgPElucHV0IE5hbWU9IkRhdGUiIFJlY2lwZUFyZ3VtZW50PSJEYXRlIi8+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iRXhwcmVzc2lvbk1pc3NpbmciPg0KICAgICAgPENhcHRpb24+Q29uZmlnPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkIiPg0KICAgICAgICAgIDxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IkV4cHJlc3Npb25WYWx1ZUVkaXRvcjEiPg0KICAgICAgPENhcHRpb24+Q29uZmlnPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkEiPg0KICAgICAgICAgIDxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiDQogICAgICAgICAgICAgICAgICAgICAgICAgRXhwcmVzc2lvbj0iQVZhbHVlIi8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJCIj4NCiAgICAgICAgICA8VmFsdWVQcm92aWRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlZhbHVlUHJvdmlkZXJzLkV4cHJlc3Npb25FdmFsdWF0b3JWYWx1ZVByb3ZpZGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ig0KICAgICAgICAgICAgICAgICAgICAgICAgIEV4cHJlc3Npb249IiQoQSlCIi8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0LkVuc3VyZVZhbHVlQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlRlc3QiDQogICAgICAgICAgICAgICAgVmFsdWU9IkFWYWx1ZUIiPg0KICAgICAgICAgIDxJbnB1dCBOYW1lPSJWYWx1ZSIgUmVjaXBlQXJndW1lbnQ9IkIiLz4NCiAgICAgICAgPC9BY3Rpb24+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJFeHByZXNzaW9uVmFsdWVFZGl0b3IyIj4NCiAgICAgIDxDYXB0aW9uPkNvbmZpZzwvQ2FwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJCIj4NCiAgICAgICAgICA8VmFsdWVQcm92aWRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlZhbHVlUHJvdmlkZXJzLkV4cHJlc3Npb25FdmFsdWF0b3JWYWx1ZVByb3ZpZGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ig0KICAgICAgICAgICAgICAgICAgICAgICAgIEV4cHJlc3Npb249IiQoQSktQiI+DQogICAgICAgICAgICA8TW9uaXRvckFyZ3VtZW50IE5hbWU9IkEiIC8+DQogICAgICAgICAgPC9WYWx1ZVByb3ZpZGVyPg0KICAgICAgICA8L0FyZ3VtZW50Pg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQSIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQogICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIiANCiAgICAgICAgICAgICAgICBOYW1lPSJDaGFuZ2VNb25pdG9yaW5nV2l6YXJkIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZSBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlRlc3QuRXhwcmVzc2lvbkV2YWx1YXRvclRlc3QrQ2hhbmdlVmFsdWVTdGVwLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlRlc3QiPg0KICAgICAgICAgICAgICA8VGl0bGU+TW9uaXRvciBhbmQgZmluaXNoPC9UaXRsZT4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJBIiBMYWJlbD0iRHVtbXlBIiAvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJEb05vdGhpbmciIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVGVzdC5FbnN1cmVWYWx1ZUFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0Ig0KICAgICAgICAgICAgICAgIFZhbHVlPSJBIG5ldyB2YWx1ZS1CIj4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iVmFsdWUiIFJlY2lwZUFyZ3VtZW50PSJCIi8+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICA8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>11</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/Library/LibraryTests.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIEd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFQyIgQ2FwdGlvbj0iVGVzdGluZyBQYWNrYWdlIiBIb3N0PSJWaXN1YWxTdHVkaW8iIFNjaGVtYVZlcnNpb249IjEuMCIgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIj4NCiAgPFJlY2lwZXM+DQogICAgPFJlY2lwZSBOYW1lPSJUZXN0SWRlbnRpZmllciI+DQogICAgICA8Q2FwdGlvbj5UZXN0cyBjb2RlIGlkZW50aWZpZXI8L0NhcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iSWRlbnRpZmllciI+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuQ29kZUlkZW50aWZpZXJTdHJpbmdDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZSBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlRlc3QuTGlicmFyeVRlc3RzK0NvZGVJZGVudGlmaWVyU3RlcCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0Ij4NCiAgICAgICAgICAgICAgPFRpdGxlPlRlc3QgSWRlbnRpZmllcjwvVGl0bGU+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iSWRlbnRpZmllciIgTGFiZWw9IklkZW50aWZpZXIiIEludmFsaWRWYWx1ZU1lc3NhZ2U9IkludmFsaWQgaWRlbnRpZmllciIgLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iTmFtZXNwYWNlQ29udmVydGVyIj4NCiAgICAgIDxDYXB0aW9uPlRlc3RzIC5ORVQgbmFtZXNwYWNlPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9Ik5hbWVzcGFjZSI+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuTmFtZXNwYWNlU3RyaW5nQ29udmVydGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ii8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIFNjaGVtYVZlcnNpb249IjEuMCI+DQogICAgICAgICAgPFBhZ2VzPg0KICAgICAgICAgICAgPFBhZ2UgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0LkxpYnJhcnlUZXN0cytOYW1lc3BhY2VTdGVwLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlRlc3QiPg0KICAgICAgICAgICAgICA8VGl0bGU+VGVzdCBJZGVudGlmaWVyPC9UaXRsZT4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJOYW1lc3BhY2UiIExhYmVsPSJOYW1lc3BhY2UiIEludmFsaWRWYWx1ZU1lc3NhZ2U9IkludmFsaWQgbmFtZXNwYWNlIiAvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJSZWdleENvbnZlcnRlckZhaWxlZEd1aWQiPg0KICAgICAgPFR5cGVzPg0KICAgICAgICA8VHlwZUFsaWFzIE5hbWU9IlJlZ2V4IiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuUmVnZXhNYXRjaFN0cmluZ0NvbnZlcnRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgICAgPFR5cGVBbGlhcyBOYW1lPSJFdmFsdWF0b3IiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVmFsdWVQcm92aWRlcnMuRXhwcmVzc2lvbkV2YWx1YXRvclZhbHVlUHJvdmlkZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQogICAgICA8L1R5cGVzPg0KICAgICAgPENhcHRpb24+VGVzdHMgcmVndWxhciBleHByZXNzaW9uIGNvbnZlcnRlcjwvQ2FwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJHVUlEIj4NCiAgICAgICAgICA8Q29udmVydGVyIFR5cGU9IlJlZ2V4IiBFeHByZXNzaW9uPSJeWzAtOWEtZkEtRl17OH0tKFswLTlhLWZBLUZdezR9LSl7M31bMC05YS1mQS1GXXsxMn0kIiAvPg0KICAgICAgICAgIDwhLS0gU2V0cyB0aGUgdmFsdWUgdG8gYW4gaW52YWxpZCBHVUlELiBXaWxsIHRocm93IGFuIGV4Y2VwdGlvbiAtLT4NCiAgICAgICAgICA8VmFsdWVQcm92aWRlciBUeXBlPSJFdmFsdWF0b3IiIEV4cHJlc3Npb249IkFuIGludmFsaWQgZ3VpZCIgLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iRG9Ob3RoaW5nIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuRG9Ob3RoaW5nQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iUmVnZXhDb252ZXJ0ZXJNYWlsIj4NCiAgICAgIDxUeXBlcz4NCiAgICAgICAgPFR5cGVBbGlhcyBOYW1lPSJSZWdleCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5Db252ZXJ0ZXJzLlJlZ2V4TWF0Y2hTdHJpbmdDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQogICAgICA8L1R5cGVzPg0KICAgICAgPENhcHRpb24+VGVzdHMgcmVndWxhciBleHByZXNzaW9uIGNvbnZlcnRlcjwvQ2FwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJNYWlsIj4NCiAgICAgICAgICA8IS0tIFNpbXBsZSBleHByZXNzaW9uIGZvciBlbWFpbHMuLi4uIG5vdCBhbiBSRkMgMjgyMiBjb21wbGlhbnQgb25lLiANCiAgICAgICAgICBGb3Igc3VjaCBhIGJlYXN0LCB3ZSdkIGhhdmUgdG8gdXNlIHRoaXM6IGh0dHA6Ly9yZWdleHBsaWIuY29tL1JFRGV0YWlscy5hc3B4P3JlZ2V4cF9pZD03MTEgLS0+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJSZWdleCIgRXhwcmVzc2lvbj0iXlx3Wy0uX1x3XSpcd0Bcd1stLl9cd10qXHdcLlx3ezIsM30kIiAvPg0KICAgICAgICA8L0FyZ3VtZW50Pg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8R2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICAgIDxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVGVzdC5MaWJyYXJ5VGVzdHMrUmVnZXhDb252ZXJ0ZXJNYWlsU3RlcCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0Ij4NCiAgICAgICAgICAgICAgPFRpdGxlPlRlc3QgSWRlbnRpZmllcjwvVGl0bGU+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iTWFpbCIgTGFiZWw9Ik1haWwiIEludmFsaWRWYWx1ZU1lc3NhZ2U9IkludmFsaWQgbWFpbCIgLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iRG9Ob3RoaW5nIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuRG9Ob3RoaW5nQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iT3V0cHV0QXR0cmlidXRlTWlzc2luZyI+DQogICAgICA8Q2FwdGlvbj5UZXN0cyB0aGF0IGFuIG91dHB1dCBhdHRyaWJ1dGUgbXVzdCBiZSBwcmVzZW50IHdoZW4gaXQgaXMgdXNlZCBhcyBhY3Rpb25vdXRwdXQgb2YgYW4gaW5wdXQgYWN0aW9uPC9DYXB0aW9uPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iQ2hlY2tJc01hcmtlZE91dHB1dCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0LkVuc3VyZVZhbHVlQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LlRlc3QiDQogICAgICAgICAgICAgICAgVmFsdWU9IkhlbGxvIFdvcmxkISI+DQogICAgICAgICAgPElucHV0IE5hbWU9IlZhbHVlIiBBY3Rpb25PdXRwdXQ9IklucHV0VmFsdWUuVmFsdWUiIC8+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IklucHV0VmFsdWUiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuVGVzdC5FbnN1cmVWYWx1ZUFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5UZXN0Ig0KICAgICAgICAgICAgICAgIFZhbHVlPSJIZWxsbyBXb3JsZCEiPg0KICAgICAgICAgIDxJbnB1dCBOYW1lPSJWYWx1ZSIgLz4NCiAgICAgICAgPC9BY3Rpb24+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogIDwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>9</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/Action-DuplicateParam.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+IA0KPEd1aWRhbmNlUGFja2FnZSAgeG1sbnM9J2h0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlJw0KCUd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFRCIgDQoJQ2FwdGlvbj0nUGFja2FnZSB0aGF0IHRlc3RzIGFjdGlvbnMgZXhlY3V0aW9uJw0KCVNjaGVtYVZlcnNpb249JzEuMCc+DQogIDxSZWNpcGVzPg0KICAgIDxSZWNpcGUgTmFtZT0nRmFpbEFjdGlvbic+DQogICAgICA8Q2FwdGlvbj5GYWlsQWN0aW9uPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9J0EnIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9J0ZhaWwnIFR5cGU9J01pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkZhaWxBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QnPg0KICAgICAgICAgIDxJbnB1dCBOYW1lPSdBJyBSZWNpcGVBcmd1bWVudD0nQScgLz4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0nQScgUmVjaXBlQXJndW1lbnQ9J0EnLz4NCiAgICAgICAgPC9BY3Rpb24+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogIDwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>9</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/ActionExecutionTests.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+IA0KPEd1aWRhbmNlUGFja2FnZSAgeG1sbnM9J2h0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlJw0KCUd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFRCIgDQoJQ2FwdGlvbj0nUGFja2FnZSB0aGF0IHRlc3RzIGFjdGlvbnMgZXhlY3V0aW9uJw0KCVNjaGVtYVZlcnNpb249JzEuMCc+DQogIDxSZWNpcGVzPg0KICAgIDxSZWNpcGUgTmFtZT0nU3VjY2Vzc2Z1bGxBY3Rpb24nPg0KICAgICAgPENhcHRpb24+U3VjY2Vzc2Z1bGxBY3Rpb248L0NhcHRpb24+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSdTdWNjZXNzQWN0aW9uJyBUeXBlPSdNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5TdWNjZXNzQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0JyAvPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0nRmFpbEFjdGlvbic+DQogICAgICA8Q2FwdGlvbj5GYWlsQWN0aW9uPC9DYXB0aW9uPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0nRmFpbCcgVHlwZT0nTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuRmFpbEFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCcgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9J1N1Y2Nlc3NBbmRGYWlsQWN0aW9ucyc+DQogICAgICA8Q2FwdGlvbj5TdWNjZXNzQW5kRmFpbEFjdGlvbnM8L0NhcHRpb24+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSdTdWNjZXNzQWN0aW9uJyBUeXBlPSdNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5TdWNjZXNzQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0JyAvPg0KICAgICAgICA8QWN0aW9uIE5hbWU9J0ZhaWxBY3Rpb24nIFR5cGU9J01pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkZhaWxBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QnIC8+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogIDwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>18</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/ManifestInstallerTest.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5Db25maWd1cmF0aW9uOw0KdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOw0KdXNpbmcgU3lzdGVtLklPOw0KdXNpbmcgU3lzdGVtLlhtbDsNCnVzaW5nIFN5c3RlbS5YbWwuWFBhdGg7DQoNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkludGVybmFsOw0KdXNpbmcgTlVuaXQuRnJhbWV3b3JrOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb247DQp1c2luZyBNdnAuWG1sLkNvbW1vbi5YUGF0aDsNCg0KI2VuZHJlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCm5hbWVzcGFjZSBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yaw0Kew0KCVtUZXN0Rml4dHVyZV0NCglwdWJsaWMgY2xhc3MgTWFuaWZlc3RJbnN0YWxsZXJUZXN0DQoJew0KCQlzdGF0aWMgcmVhZG9ubHkgc3RyaW5nIEluc3RhbGxVdGlsID0gUGF0aC5Db21iaW5lKFV0aWxzLkdldENsckluc3RhbGxhdGlvbkRpcmVjdG9yeSgpLCAiSW5zdGFsbFV0aWwuZXhlIik7DQoNCgkJW1Rlc3RdDQoJCXB1YmxpYyB2b2lkIFRlc3RCYWRJbnN0YWxsZXIoKQ0KCQl7DQoJCQkvL1VuaW5zdGFsbEhvc3QoIlRlc3RpbmdIb3N0Iik7DQoNCgkJCVByb2Nlc3NTdGFydEluZm8gaW5mbyA9IG5ldyBQcm9jZXNzU3RhcnRJbmZvKEluc3RhbGxVdGlsLCAiL2kgL1Nob3dDYWxsU3RhY2sgL0hvc3Q9VGVzdGluZ0hvc3QgL0luc3RhbGxlcj1cIiIgKw0KCQkJCXRoaXMuR2V0VHlwZSgpLkFzc2VtYmx5UXVhbGlmaWVkTmFtZSArICJcIiAiICsNCgkJCQlSZWZsZWN0aW9uSGVscGVyLkdldEFzc2VtYmx5UGF0aCh0eXBlb2YoTWFuaWZlc3RJbnN0YWxsZXJUZXN0KS5Bc3NlbWJseSkpOw0KCQkJaW5mby5DcmVhdGVOb1dpbmRvdyA9IHRydWU7DQoJCQlpbmZvLlJlZGlyZWN0U3RhbmRhcmRPdXRwdXQgPSB0cnVlOw0KCQkJaW5mby5Vc2VTaGVsbEV4ZWN1dGUgPSBmYWxzZTsNCgkJCVByb2Nlc3MgaW5zdGFsbCA9IFByb2Nlc3MuU3RhcnQoaW5mbyk7DQoJCQlzdHJpbmcgb3V0cHV0ID0gaW5zdGFsbC5TdGFuZGFyZE91dHB1dC5SZWFkVG9FbmQoKTsNCgkJCWluc3RhbGwuV2FpdEZvckV4aXQoKTsNCg0KCQkJaWYgKChvdXRwdXQuSW5kZXhPZigiU3lzdGVtLkFyZ3VtZW50RXhjZXB0aW9uIikgPT0gLTEpICYmIChvdXRwdXQuSW5kZXhPZigiTm8gcHVibGljIGluc3RhbGxlcnMgd2l0aCB0aGUgUnVuSW5zdGFsbGVyQXR0cmlidXRlLlllcyBhdHRyaWJ1dGUgY291bGQgYmUgZm91bmQiKSA9PSAtMSkpDQoJCQl7DQoJCQkJQ29uc29sZS5Xcml0ZUxpbmUob3V0cHV0KTsNCgkJCQlBc3NlcnQuRmFpbCgiSW5zdGFsbGF0aW9uIGRpZG4ndCB0aHJvdyBhbiBBcmd1bWVudEV4Y2VwdGlvbiIpOw0KCQkJfQ0KDQoJCQlYUGF0aERvY3VtZW50IGRvYyA9IG5ldyBYUGF0aERvY3VtZW50KFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkJhc2VVUkkpOw0KCQkJc3RyaW5nIHBhdGggPSAiZ2F4OlJlY2lwZUZyYW1ld29yay9nYXg6SG9zdHMvZ2F4Okhvc3RbQE5hbWU9JG5hbWVdIjsNCgkJCVhtbE5hbWVzcGFjZU1hbmFnZXIgY29udGV4dCA9IG5ldyBYbWxOYW1lc3BhY2VNYW5hZ2VyKGRvYy5DcmVhdGVOYXZpZ2F0b3IoKS5OYW1lVGFibGUpOw0KCQkJY29udGV4dC5BZGROYW1lc3BhY2UoQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLlByZWZpeCwgQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLk1hbmlmZXN0TmFtZXNwYWNlKTsNCgkJCVhQYXRoTm9kZUl0ZXJhdG9yIGl0ID0gWFBhdGhDYWNoZS5TZWxlY3QocGF0aCwgZG9jLkNyZWF0ZU5hdmlnYXRvcigpLCBjb250ZXh0LA0KCQkJCW5ldyBYUGF0aFZhcmlhYmxlW10geyBuZXcgWFBhdGhWYXJpYWJsZSgibmFtZSIsICJUZXN0aW5nSG9zdCIpIH0pOw0KDQoJCQlBc3NlcnQuSXNGYWxzZShpdC5Nb3ZlTmV4dCgpKTsNCgkJfQ0KDQoJCVtUZXN0XQ0KCQlwdWJsaWMgdm9pZCBUZXN0R29vZEluc3RhbGxlcigpDQoJCXsNCgkJCXRyeQ0KCQkJew0KCQkJCUluc3RhbGxIb3N0KCJUZXN0R29vZEluc3RhbGxlciIsIHR5cGVvZihUZXN0SW5zdGFsbGVyKSwgZmFsc2UpOw0KDQoJCQkJWFBhdGhEb2N1bWVudCBkb2MgPSBuZXcgWFBhdGhEb2N1bWVudChSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdC5CYXNlVVJJKTsNCgkJCQlzdHJpbmcgcGF0aCA9ICJnYXg6UmVjaXBlRnJhbWV3b3JrL2dheDpIb3N0cy9nYXg6SG9zdFtATmFtZT0kbmFtZV0iOw0KCQkJCVhtbE5hbWVzcGFjZU1hbmFnZXIgY29udGV4dCA9IG5ldyBYbWxOYW1lc3BhY2VNYW5hZ2VyKGRvYy5DcmVhdGVOYXZpZ2F0b3IoKS5OYW1lVGFibGUpOw0KCQkJCWNvbnRleHQuQWRkTmFtZXNwYWNlKENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5QcmVmaXgsIENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5NYW5pZmVzdE5hbWVzcGFjZSk7DQoJCQkJWFBhdGhOb2RlSXRlcmF0b3IgaXQgPSBYUGF0aENhY2hlLlNlbGVjdChwYXRoLCBkb2MuQ3JlYXRlTmF2aWdhdG9yKCksIGNvbnRleHQsDQoJCQkJCW5ldyBYUGF0aFZhcmlhYmxlW10geyBuZXcgWFBhdGhWYXJpYWJsZSgibmFtZSIsICJUZXN0R29vZEluc3RhbGxlciIpIH0pOw0KDQoJCQkJQXNzZXJ0LklzVHJ1ZShpdC5Nb3ZlTmV4dCgpLCAiRGlkbid0IGZpbmQgdGhlIG5vZGUgdGhhdCBzaG91bGQgaGF2ZSBiZWVuIGFkZGVkIGZvciB0aGUgaG9zdC4iKTsNCgkJCQlBc3NlcnQuQXJlRXF1YWwoIlRlc3RHb29kSW5zdGFsbGVyIiwgaXQuQ3VycmVudC5HZXRBdHRyaWJ1dGUoQ29uZmlndXJhdGlvbi5BdHRyaWJ1dGVOYW1lcy5HdWlkLCBTdHJpbmcuRW1wdHkpKTsNCgkJCQlBc3NlcnQuQXJlRXF1YWwodHlwZW9mKFRlc3RJbnN0YWxsZXIpLkFzc2VtYmx5UXVhbGlmaWVkTmFtZSwgaXQuQ3VycmVudC5HZXRBdHRyaWJ1dGUoQ29uZmlndXJhdGlvbi5BdHRyaWJ1dGVOYW1lcy5JbnN0YWxsZXJUeXBlLCBTdHJpbmcuRW1wdHkpKTsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlVbmluc3RhbGxIb3N0KCJUZXN0R29vZEluc3RhbGxlciIpOw0KCQkJfQ0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gVW5pbnN0YWxscyBhIGhvc3QgYnkgbmFtZSwgYW5kIHJldHVybnMgdGhlIG91dHB1dCBvZiB0aGUgSW5zdGFsbFV0aWwuZXhlIHRvb2wuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iaG9zdCI+PC9wYXJhbT4NCgkJLy8vIDxyZXR1cm5zPjwvcmV0dXJucz4NCgkJaW50ZXJuYWwgc3RhdGljIHN0cmluZyBVbmluc3RhbGxIb3N0KHN0cmluZyBob3N0KQ0KCQl7DQoJCQlzdHJpbmcgc3RyID0gIi91IC9Ib3N0PSIgKyBob3N0ICsgIiAiICsNCgkJCQlSZWZsZWN0aW9uSGVscGVyLkdldEFzc2VtYmx5UGF0aCh0eXBlb2YoUmVjaXBlTWFuYWdlcikuQXNzZW1ibHkpOw0KCQkJQ29uc29sZS5Xcml0ZSgiXG5Vbmluc3RhbGwgaG9zdCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpbezB9XVxuIiwgc3RyKTsNCg0KCQkJUHJvY2Vzc1N0YXJ0SW5mbyB1bmluc3RpbmZvID0gbmV3IFByb2Nlc3NTdGFydEluZm8oSW5zdGFsbFV0aWwsIHN0cik7DQoNCgkJCXVuaW5zdGluZm8uQ3JlYXRlTm9XaW5kb3cgPSB0cnVlOw0KCQkJdW5pbnN0aW5mby5SZWRpcmVjdFN0YW5kYXJkT3V0cHV0ID0gdHJ1ZTsNCgkJCXVuaW5zdGluZm8uVXNlU2hlbGxFeGVjdXRlID0gZmFsc2U7DQoJCQlQcm9jZXNzIHVuaW5zdGFsbCA9IFByb2Nlc3MuU3RhcnQodW5pbnN0aW5mbyk7DQoJCQlzdHJpbmcgb3V0cHV0ID0gdW5pbnN0YWxsLlN0YW5kYXJkT3V0cHV0LlJlYWRUb0VuZCgpOw0KCQkJdW5pbnN0YWxsLldhaXRGb3JFeGl0KCk7DQoNCgkJCWlmIChvdXRwdXQuSW5kZXhPZigiQW4gZXhjZXB0aW9uIG9jY3VycmVkIHdoaWxlIHVuaW5zdGFsbGluZy4iKSAhPSAtMSkNCgkJCXsNCgkJCQlDb25zb2xlLldyaXRlKG91dHB1dCk7DQoJCQkJQXNzZXJ0LkZhaWwoIlRoZSB1bmluc3RhbGxhdGlvbiBkaWRuJ3Qgc3VjY2VlZC4iKTsNCgkJCX0NCg0KCQkJcmV0dXJuIG91dHB1dDsNCgkJfQ0KDQoJCS8vLyA8c3VtbWFyeT4NCgkJLy8vIFVuaW5zdGFsbHMgYW5kIHRoZW4gaW5zdGFsbHMgdGhlIGhvc3QuIFJldHVybnMgdGhlIG91dHB1dCBvZiB0aGUgSW5zdGFsbFV0aWwuZXhlIHRvb2wuDQoJCS8vLyA8L3N1bW1hcnk+DQoJCS8vLyA8cGFyYW0gbmFtZT0iaG9zdCI+PC9wYXJhbT4NCgkJLy8vIDxwYXJhbSBuYW1lPSJpbnN0YWxsZXIiPjwvcGFyYW0+DQoJCS8vLyA8cGFyYW0gbmFtZT0iZGVidWciPldoZXRoZXIgdG8gbGF1bmNoIGEgZGVidWdnZXIgZnJvbSBpbnNpZGUgdGhlIGluc3RhbGxlciBjbGFzcy48L3BhcmFtPg0KCQlpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIEluc3RhbGxIb3N0KHN0cmluZyBob3N0LCBUeXBlIGluc3RhbGxlciwgYm9vbCBkZWJ1ZykNCgkJew0KCQkJLy9Vbmluc3RhbGxIb3N0KGhvc3QpOw0KDQoJCQlQcm9jZXNzU3RhcnRJbmZvIGluZm8gPSBuZXcgUHJvY2Vzc1N0YXJ0SW5mbyhJbnN0YWxsVXRpbCwgU3RyaW5nLkZvcm1hdCgNCgkJCQkiL2kgL1Nob3dDYWxsU3RhY2sgezB9IC9Ib3N0PXsxfSAvSW5zdGFsbGVyPVwiezJ9XCIgezN9IiwNCgkJCQlkZWJ1ZyA/ICIvRGVidWdJbnN0YWxsZXI9dHJ1ZSIgOiAiIiwNCgkJCQlob3N0LCBpbnN0YWxsZXIuQXNzZW1ibHlRdWFsaWZpZWROYW1lLA0KCQkJCVJlZmxlY3Rpb25IZWxwZXIuR2V0QXNzZW1ibHlQYXRoKHR5cGVvZihSZWNpcGVNYW5hZ2VyKS5Bc3NlbWJseSkpKTsNCgkJCWluZm8uQ3JlYXRlTm9XaW5kb3cgPSB0cnVlOw0KCQkJaW5mby5SZWRpcmVjdFN0YW5kYXJkT3V0cHV0ID0gdHJ1ZTsNCgkJCWluZm8uVXNlU2hlbGxFeGVjdXRlID0gZmFsc2U7DQoJCQlQcm9jZXNzIGluc3RhbGwgPSBQcm9jZXNzLlN0YXJ0KGluZm8pOw0KCQkJc3RyaW5nIG91dHB1dCA9IGluc3RhbGwuU3RhbmRhcmRPdXRwdXQuUmVhZFRvRW5kKCk7DQoJCQlpbnN0YWxsLldhaXRGb3JFeGl0KCk7DQoNCgkJCS8vIFRlc3QgdGhhdCBubyByb2xsYmFjayBoYXBwZW5lZC4NCgkJCWlmIChvdXRwdXQuSW5kZXhPZigiVGhlIFJvbGxiYWNrIHBoYXNlIG9mIHRoZSBpbnN0YWxsYXRpb24gaXMgYmVnaW5uaW5nLiIpICE9IC0xKQ0KCQkJew0KCQkJCUNvbnNvbGUuV3JpdGUob3V0cHV0KTsNCgkJCQlBc3NlcnQuRmFpbCgiVGhlIGluc3RhbGxhdGlvbiBkaWRuJ3Qgc3VjY2VlZCwgYXMgdGhlcmUncyBhIHJvbGxiYWNrIG1lc3NhZ2UgaW4gSW5zdGFsbFV0aWwgb3V0cHV0LiIpOw0KCQkJfQ0KDQoJCQlyZXR1cm4gb3V0cHV0Ow0KCQl9DQoNCgkJLy8vIDxzdW1tYXJ5Pg0KCQkvLy8gSW5zdGFsbHMgYSBwYWNrYWdlIGFuZCByZXR1cm5zIHRoZSBvdXRwdXQgb2YgdGhlIEluc3RhbGxVdGlsLmV4ZSB0b29sLg0KCQkvLy8gPC9zdW1tYXJ5Pg0KCQlpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIEluc3RhbGxQYWNrYWdlKHN0cmluZyBjb25maWd1cmF0aW9uLCBib29sIGRlYnVnSW5zdGFsbCkNCgkJew0KCQkJUHJvY2Vzc1N0YXJ0SW5mbyBpbmZvID0gbmV3IFByb2Nlc3NTdGFydEluZm8oSW5zdGFsbFV0aWwsIFN0cmluZy5Gb3JtYXQoDQoJCQkJIi9pIC9TaG93Q2FsbFN0YWNrIHswfSAvQ29uZmlndXJhdGlvbj1cInsxfVwiIHsyfSIsDQoJCQkJZGVidWdJbnN0YWxsID8gIi9EZWJ1Z0luc3RhbGxlcj10cnVlIiA6ICIiLA0KCQkJCWNvbmZpZ3VyYXRpb24sDQoJCQkJUmVmbGVjdGlvbkhlbHBlci5HZXRBc3NlbWJseVBhdGgodHlwZW9mKFJlY2lwZU1hbmFnZXIpLkFzc2VtYmx5KSkpOw0KCQkJaW5mby5DcmVhdGVOb1dpbmRvdyA9IHRydWU7DQoJCQlpbmZvLlJlZGlyZWN0U3RhbmRhcmRPdXRwdXQgPSB0cnVlOw0KCQkJaW5mby5Vc2VTaGVsbEV4ZWN1dGUgPSBmYWxzZTsNCgkJCVByb2Nlc3MgaW5zdGFsbCA9IFByb2Nlc3MuU3RhcnQoaW5mbyk7DQoJCQlzdHJpbmcgb3V0cHV0ID0gaW5zdGFsbC5TdGFuZGFyZE91dHB1dC5SZWFkVG9FbmQoKTsNCgkJCWluc3RhbGwuV2FpdEZvckV4aXQoKTsNCg0KCQkJLy8gVGVzdCB0aGF0IG5vIHJvbGxiYWNrIGhhcHBlbmVkLg0KCQkJaWYgKG91dHB1dC5JbmRleE9mKCJUaGUgUm9sbGJhY2sgcGhhc2Ugb2YgdGhlIGluc3RhbGxhdGlvbiBpcyBiZWdpbm5pbmcuIikgIT0gLTEpDQoJCQl7DQoJCQkJQ29uc29sZS5Xcml0ZShvdXRwdXQpOw0KCQkJCUFzc2VydC5GYWlsKCJUaGUgaW5zdGFsbGF0aW9uIGRpZG4ndCBzdWNjZWVkLCBhcyB0aGVyZSdzIGEgcm9sbGJhY2sgbWVzc2FnZSBpbiBJbnN0YWxsVXRpbCBvdXRwdXQuIik7DQoJCQl9DQoNCgkJCXJldHVybiBvdXRwdXQ7DQoJCX0NCg0KCQkvLy8gPHN1bW1hcnk+DQoJCS8vLyBVbmluc3RhbGxzIGEgcGFja2FnZSBhbmQgcmV0dXJucyB0aGUgb3V0cHV0IG9mIHRoZSBJbnN0YWxsVXRpbC5leGUgdG9vbC4NCgkJLy8vIDwvc3VtbWFyeT4NCgkJaW50ZXJuYWwgc3RhdGljIHN0cmluZyBVbmluc3RhbGxQYWNrYWdlKHN0cmluZyBjb25maWd1cmF0aW9uLCBib29sIGRlYnVnSW5zdGFsbCkNCgkJew0KCQkJc3RyaW5nIHN0ciA9IFN0cmluZy5Gb3JtYXQoDQoJCQkJIi91IC9TaG93Q2FsbFN0YWNrIHswfSAvQ29uZmlndXJhdGlvbj1cInsxfVwiIHsyfSIsDQoJCQkJZGVidWdJbnN0YWxsID8gIi9EZWJ1Z0luc3RhbGxlcj10cnVlIiA6ICIiLA0KCQkJCWNvbmZpZ3VyYXRpb24sDQoJCQkJUmVmbGVjdGlvbkhlbHBlci5HZXRBc3NlbWJseVBhdGgodHlwZW9mKFJlY2lwZU1hbmFnZXIpLkFzc2VtYmx5KSk7DQoNCgkJCUNvbnNvbGUuV3JpdGUoIlxuVW5pbnN0YWxsIFBhY2thZ2Ugd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6W3swfV1cbiIsIHN0cik7DQoJCQkvLyBVbmluc3RhbGxpbmcgYSBub24tZXhpc3Rpbmcgb25lIHNob3VsZCBub3QgY2F1c2UgZXJyb3JzLg0KCQkJUHJvY2Vzc1N0YXJ0SW5mbyBpbmZvID0gbmV3IFByb2Nlc3NTdGFydEluZm8oSW5zdGFsbFV0aWwsIHN0cik7DQoJCQlpbmZvLkNyZWF0ZU5vV2luZG93ID0gdHJ1ZTsNCgkJCWluZm8uUmVkaXJlY3RTdGFuZGFyZE91dHB1dCA9IHRydWU7DQoJCQlpbmZvLlVzZVNoZWxsRXhlY3V0ZSA9IGZhbHNlOw0KCQkJUHJvY2VzcyBpbnN0YWxsID0gUHJvY2Vzcy5TdGFydChpbmZvKTsNCgkJCXN0cmluZyBvdXRwdXQgPSBpbnN0YWxsLlN0YW5kYXJkT3V0cHV0LlJlYWRUb0VuZCgpOw0KCQkJaW5zdGFsbC5XYWl0Rm9yRXhpdCgpOw0KDQoJCQkvLyBUZXN0IHRoYXQgbm8gcm9sbGJhY2sgaGFwcGVuZWQuDQoJCQlpZiAob3V0cHV0LkluZGV4T2YoIlRoZSBSb2xsYmFjayBwaGFzZSBvZiB0aGUgaW5zdGFsbGF0aW9uIGlzIGJlZ2lubmluZy4iKSAhPSAtMSkNCgkJCXsNCgkJCQlDb25zb2xlLldyaXRlKG91dHB1dCk7DQoJCQkJQXNzZXJ0LkZhaWwoIlRoZSB1bmluc3RhbGxhdGlvbiBkaWRuJ3Qgc3VjY2VlZCwgYXMgdGhlcmUncyBhIHJvbGxiYWNrIG1lc3NhZ2UgaW4gSW5zdGFsbFV0aWwgb3V0cHV0LiIpOw0KCQkJfQ0KDQoJCQlyZXR1cm4gb3V0cHV0Ow0KCQl9DQoNCgkJW1Rlc3RdDQoJCXB1YmxpYyB2b2lkIEluc3RhbGxQYWNrYWdlVGVzdCgpDQoJCXsNCgkJCUNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSBHdWlkYW5jZVBhY2thZ2UuUmVhZENvbmZpZ3VyYXRpb24oVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIikpOw0KCQkJYm9vbCBkZWJ1ZyA9IGZhbHNlOw0KDQoJCQkvLyBFbnN1cmUgaG9zdA0KCQkJSW5zdGFsbEhvc3QocGFja2FnZS5Ib3N0LCB0eXBlb2YoVGVzdEluc3RhbGxlciksIGZhbHNlKTsNCgkJCXRyeQ0KCQkJew0KCQkJCVVuaW5zdGFsbFBhY2thZ2UoVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIiksIGRlYnVnKTsNCg0KCQkJCS8vIE5vdyBpbnN0YWxsIGl0Lg0KCQkJCXN0cmluZyBvdXRwdXQgPSBJbnN0YWxsUGFja2FnZShVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSwgZGVidWcpOw0KDQoJCQkJLy8gQ2hlY2sgdGhhdCB0aGUgaW5zdGFsbGVyIGNsYXNzIHdhcyBjYWxsZWQuDQoJCQkJaWYgKG91dHB1dC5JbmRleE9mKHR5cGVvZihUZXN0SW5zdGFsbGVyKS5Bc3NlbWJseVF1YWxpZmllZE5hbWUpID09IC0xKQ0KCQkJCXsNCgkJCQkJQ29uc29sZS5Xcml0ZShvdXRwdXQpOw0KCQkJCQlBc3NlcnQuRmFpbCgiSW5zdGFsbGVyIGZvciBwYWNrYWdlIHdhcyBub3QgcnVuLiIpOw0KCQkJCX0NCg0KCQkJCVhQYXRoRG9jdW1lbnQgZG9jID0gbmV3IFhQYXRoRG9jdW1lbnQoUmVjaXBlTWFuYWdlci5NYWluTWFuaWZlc3QuQmFzZVVSSSk7DQoJCQkJc3RyaW5nIHBhdGggPSAiZ2F4OlJlY2lwZUZyYW1ld29yay9nYXg6R3VpZGFuY2VQYWNrYWdlcy9nYXg6R3VpZGFuY2VQYWNrYWdlW0BOYW1lPSRuYW1lXSI7DQoJCQkJWG1sTmFtZXNwYWNlTWFuYWdlciBjb250ZXh0ID0gbmV3IFhtbE5hbWVzcGFjZU1hbmFnZXIoZG9jLkNyZWF0ZU5hdmlnYXRvcigpLk5hbWVUYWJsZSk7DQoJCQkJY29udGV4dC5BZGROYW1lc3BhY2UoQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLlByZWZpeCwgQ29uZmlndXJhdGlvbi5TY2hlbWFJbmZvLk1hbmlmZXN0TmFtZXNwYWNlKTsNCgkJCQlYUGF0aE5vZGVJdGVyYXRvciBpdCA9IFhQYXRoQ2FjaGUuU2VsZWN0KHBhdGgsIGRvYy5DcmVhdGVOYXZpZ2F0b3IoKSwgY29udGV4dCwNCgkJCQkJbmV3IFhQYXRoVmFyaWFibGVbXSB7IG5ldyBYUGF0aFZhcmlhYmxlKCJndWlkIiwgcGFja2FnZS5HdWlkKSB9KTsNCgkJCQlBc3NlcnQuSXNUcnVlKGl0Lk1vdmVOZXh0KCksICJEaWRuJ3QgZmluZCB0aGUgcGFja2FnZSBub2RlIHRoYXQgc2hvdWxkIGhhdmUgYmVlbiBhZGRlZC4iKTsNCgkJCQlBc3NlcnQuQXJlRXF1YWwocGFja2FnZS5DYXB0aW9uLCBpdC5DdXJyZW50LkdldEF0dHJpYnV0ZShDb25maWd1cmF0aW9uLkF0dHJpYnV0ZU5hbWVzLkNhcHRpb24sIFN0cmluZy5FbXB0eSkpOw0KCQkJfQ0KCQkJZmluYWxseQ0KCQkJew0KCQkJCU1hbmlmZXN0SW5zdGFsbGVyVGVzdC5Vbmluc3RhbGxQYWNrYWdlKFV0aWxzLk1ha2VUZXN0UmVsYXRpdmVQYXRoKCJSZWNpcGVUZXN0LnhtbCIpLCBmYWxzZSk7DQoJCQkJVW5pbnN0YWxsSG9zdChwYWNrYWdlLkhvc3QpOw0KCQkJfQ0KCQl9DQoNCgkJW1Rlc3RdDQoJCXB1YmxpYyB2b2lkIFVuaW5zdGFsbEhvc3RBbmRQYWNrYWdlcygpDQoJCXsNCgkJCUNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSBHdWlkYW5jZVBhY2thZ2UuUmVhZENvbmZpZ3VyYXRpb24oDQoJCQkJVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIikpOw0KCQkJYm9vbCBkZWJ1ZyA9IGZhbHNlOw0KDQoJCQkvLyBJbnN0YWxsIGhvc3QNCgkJCUluc3RhbGxIb3N0KHBhY2thZ2UuSG9zdCwgdHlwZW9mKFRlc3RJbnN0YWxsZXIpLCBmYWxzZSk7DQoJCQl0cnkNCgkJCXsNCgkJCQlVbmluc3RhbGxQYWNrYWdlKFV0aWxzLk1ha2VUZXN0UmVsYXRpdmVQYXRoKCJSZWNpcGVUZXN0LnhtbCIpLCBkZWJ1Zyk7DQoNCgkJCQkvLyBOb3cgaW5zdGFsbCBpdC4NCgkJCQlzdHJpbmcgb3V0cHV0ID0gSW5zdGFsbFBhY2thZ2UoVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIiksIGRlYnVnKTsNCg0KCQkJCS8vIENoZWNrIHRoYXQgdGhlIGluc3RhbGxlciBjbGFzcyB3YXMgY2FsbGVkLg0KCQkJCWlmIChvdXRwdXQuSW5kZXhPZih0eXBlb2YoVGVzdEluc3RhbGxlcikuQXNzZW1ibHlRdWFsaWZpZWROYW1lKSA9PSAtMSkNCgkJCQl7DQoJCQkJCUNvbnNvbGUuV3JpdGUob3V0cHV0KTsNCgkJCQkJQXNzZXJ0LkZhaWwoIkluc3RhbGxlciBmb3IgcGFja2FnZSB3YXMgbm90IHJ1bi4iKTsNCgkJCQl9DQoNCgkJCQlVbmluc3RhbGxQYWNrYWdlKFV0aWxzLk1ha2VUZXN0UmVsYXRpdmVQYXRoKCJSZWNpcGVUZXN0LnhtbCIpLCBkZWJ1Zyk7DQoJCQkJVW5pbnN0YWxsSG9zdChwYWNrYWdlLkhvc3QpOw0KDQoJCQkJWFBhdGhEb2N1bWVudCBkb2MgPSBuZXcgWFBhdGhEb2N1bWVudChSZWNpcGVNYW5hZ2VyLk1haW5NYW5pZmVzdC5CYXNlVVJJKTsNCgkJCQlzdHJpbmcgcGF0aCA9ICJnYXg6UmVjaXBlRnJhbWV3b3JrL2dheDpHdWlkYW5jZVBhY2thZ2VzL2dheDpHdWlkYW5jZVBhY2thZ2VbQE5hbWU9JG5hbWVdIjsNCgkJCQlYbWxOYW1lc3BhY2VNYW5hZ2VyIGNvbnRleHQgPSBuZXcgWG1sTmFtZXNwYWNlTWFuYWdlcihkb2MuQ3JlYXRlTmF2aWdhdG9yKCkuTmFtZVRhYmxlKTsNCgkJCQljb250ZXh0LkFkZE5hbWVzcGFjZShDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uUHJlZml4LCBDb25maWd1cmF0aW9uLlNjaGVtYUluZm8uTWFuaWZlc3ROYW1lc3BhY2UpOw0KCQkJCVhQYXRoTm9kZUl0ZXJhdG9yIGl0ID0gWFBhdGhDYWNoZS5TZWxlY3QocGF0aCwgZG9jLkNyZWF0ZU5hdmlnYXRvcigpLCBjb250ZXh0LA0KCQkJCQluZXcgWFBhdGhWYXJpYWJsZVtdIHsgbmV3IFhQYXRoVmFyaWFibGUoImd1aWQiLCBwYWNrYWdlLkd1aWQpIH0pOw0KDQoJCQkJQXNzZXJ0LklzRmFsc2UoaXQuTW92ZU5leHQoKSwgIlBhY2thZ2Ugbm9kZSB3YXMgbm90IHJlbW92ZWQgYnkgdW5pbnN0YWxsaW5nIHRoZSBob3N0LiIpOw0KCQkJfQ0KCQkJZmluYWxseQ0KCQkJew0KCQkJCVVuaW5zdGFsbEhvc3QocGFja2FnZS5Ib3N0KTsNCgkJCX0NCgkJfQ0KDQoJCVtUZXN0XQ0KCQlwdWJsaWMgdm9pZCBVbmluc3RhbGxQYWNrYWdlVGVzdCgpDQoJCXsNCgkJCUNvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSBHdWlkYW5jZVBhY2thZ2UuUmVhZENvbmZpZ3VyYXRpb24oVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIikpOw0KCQkJYm9vbCBkZWJ1ZyA9IGZhbHNlOw0KDQoJCQkvLyBFbnN1cmUgaG9zdA0KCQkJSW5zdGFsbEhvc3QocGFja2FnZS5Ib3N0LCB0eXBlb2YoVGVzdEluc3RhbGxlciksIGZhbHNlKTsNCgkJCXRyeQ0KCQkJew0KCQkJCVVuaW5zdGFsbFBhY2thZ2UoVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIiksIGRlYnVnKTsNCg0KCQkJCS8vIE5vdyBpbnN0YWxsIGl0Lg0KCQkJCXN0cmluZyBvdXRwdXQgPSBJbnN0YWxsUGFja2FnZShVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSwgZGVidWcpOw0KCQkJCS8vIENoZWNrIHRoYXQgdGhlIGluc3RhbGxlciB3YXMgY2FsbGVkLg0KCQkJCWlmIChvdXRwdXQuSW5kZXhPZih0eXBlb2YoVGVzdEluc3RhbGxlcikuQXNzZW1ibHlRdWFsaWZpZWROYW1lKSA9PSAtMSkNCgkJCQl7DQoJCQkJCUNvbnNvbGUuV3JpdGUob3V0cHV0KTsNCgkJCQkJQXNzZXJ0LkZhaWwoIkluc3RhbGxlciBmb3IgcGFja2FnZSB3YXMgbm90IHJ1bi4iKTsNCgkJCQl9DQoNCgkJCQkvLyBOb3cgdW5pbnN0YWxsIGFnYWluLg0KCQkJCW91dHB1dCA9IFVuaW5zdGFsbFBhY2thZ2UoVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIiksIGRlYnVnKTsNCgkJCQkvLyBDaGVjayB0aGF0IHRoZSB1bmluc3RhbGxlciB3YXMgY2FsbGVkLg0KCQkJCWlmIChvdXRwdXQuSW5kZXhPZih0eXBlb2YoVGVzdEluc3RhbGxlcikuQXNzZW1ibHlRdWFsaWZpZWROYW1lKSA9PSAtMSkNCgkJCQl7DQoJCQkJCUNvbnNvbGUuV3JpdGUob3V0cHV0KTsNCgkJCQkJQXNzZXJ0LkZhaWwoIkluc3RhbGxlciBmb3IgcGFja2FnZSB3YXMgbm90IHJ1bi4iKTsNCgkJCQl9DQoNCgkJCQlYUGF0aERvY3VtZW50IGRvYyA9IG5ldyBYUGF0aERvY3VtZW50KFJlY2lwZU1hbmFnZXIuTWFpbk1hbmlmZXN0LkJhc2VVUkkpOw0KCQkJCXN0cmluZyBwYXRoID0gImdheDpSZWNpcGVGcmFtZXdvcmsvZ2F4Okd1aWRhbmNlUGFja2FnZXMvZ2F4Okd1aWRhbmNlUGFja2FnZVtATmFtZT0kbmFtZV0iOw0KCQkJCVhtbE5hbWVzcGFjZU1hbmFnZXIgY29udGV4dCA9IG5ldyBYbWxOYW1lc3BhY2VNYW5hZ2VyKGRvYy5DcmVhdGVOYXZpZ2F0b3IoKS5OYW1lVGFibGUpOw0KCQkJCWNvbnRleHQuQWRkTmFtZXNwYWNlKENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5QcmVmaXgsIENvbmZpZ3VyYXRpb24uU2NoZW1hSW5mby5NYW5pZmVzdE5hbWVzcGFjZSk7DQoJCQkJWFBhdGhOb2RlSXRlcmF0b3IgaXQgPSBYUGF0aENhY2hlLlNlbGVjdChwYXRoLCBkb2MuQ3JlYXRlTmF2aWdhdG9yKCksIGNvbnRleHQsDQoJCQkJCW5ldyBYUGF0aFZhcmlhYmxlW10geyBuZXcgWFBhdGhWYXJpYWJsZSgiZ3VpZCIsIHBhY2thZ2UuR3VpZCkgfSk7DQoNCgkJCQlBc3NlcnQuSXNGYWxzZShpdC5Nb3ZlTmV4dCgpLCAiUGFja2FnZSB3YXMgbm90IHJlbW92ZWQgZnJvbSBtYW5pZmVzdC4iKTsNCgkJCX0NCgkJCWZpbmFsbHkNCgkJCXsNCgkJCQlVbmluc3RhbGxIb3N0KHBhY2thZ2UuSG9zdCk7DQoJCQl9DQoJCX0NCg0KCQlwdWJsaWMgY2xhc3MgVGVzdEluc3RhbGxlciA6IElIb3N0SW5zdGFsbGVyDQoJCXsNCgkJCSNyZWdpb24gSUhvc3RJbnN0YWxsZXIgTWVtYmVycw0KDQoJCQlwdWJsaWMgdm9pZCBJbnN0YWxsUGFja2FnZShTeXN0ZW0uQ29uZmlndXJhdGlvbi5JbnN0YWxsLkluc3RhbGxDb250ZXh0IGNvbnRleHQsIENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2VDb25maWcpDQoJCQl7DQoJCQkJY29udGV4dC5Mb2dNZXNzYWdlKHRoaXMuR2V0VHlwZSgpLkFzc2VtYmx5UXVhbGlmaWVkTmFtZSk7DQoJCQl9DQoNCgkJCXB1YmxpYyB2b2lkIFVuaW5zdGFsbFBhY2thZ2UoU3lzdGVtLkNvbmZpZ3VyYXRpb24uSW5zdGFsbC5JbnN0YWxsQ29udGV4dCBjb250ZXh0LCBDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlQ29uZmlnKQ0KCQkJew0KCQkJCWNvbnRleHQuTG9nTWVzc2FnZSh0aGlzLkdldFR5cGUoKS5Bc3NlbWJseVF1YWxpZmllZE5hbWUpOw0KCQkJfQ0KDQoJCQlwdWJsaWMgdm9pZCBJbnN0YWxsSG9zdChTeXN0ZW0uQ29uZmlndXJhdGlvbi5JbnN0YWxsLkluc3RhbGxDb250ZXh0IGNvbnRleHQpDQoJCQl7DQoJCQl9DQoNCgkJCXB1YmxpYyB2b2lkIFVuaW5zdGFsbEhvc3QoU3lzdGVtLkNvbmZpZ3VyYXRpb24uSW5zdGFsbC5JbnN0YWxsQ29udGV4dCBjb250ZXh0KQ0KCQkJew0KCQkJfQ0KDQoJCQkjZW5kcmVnaW9uDQoJCX0NCgl9DQp9DQo=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>5</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/PackageManagementTest.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+IA0KPEd1aWRhbmNlUGFja2FnZSBHdWlkPSIxRTRBMUJFQi1GRjk2LTRmYTItQTE4MS00ODlGNjExQjAyRUQiIEJpbmRpbmdSZWNpcGU9Ikhvc3RCaW5kaW5nIiBDYXB0aW9uPSJUZXN0aW5nIFBhY2thZ2UiIERlc2NyaXB0aW9uPSJTYW1wbGUgcGFja2FnZSBmb3IgbWFuYWdlbWVudCB0ZXN0cyIgSG9zdD0iUGFja2FnZU1hbmFnZW1lbnRIb3N0IiBTY2hlbWFWZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSI+DQoJPFJlY2lwZXM+DQoJCTxSZWNpcGUgTmFtZT0iVmFsaWRhdGVTb2x1dGlvbiI+DQoJCQk8Q2FwdGlvbj5WYWxpZGF0ZSBTb2x1dGlvbiBTdHJ1Y3R1cmU8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+VmFsaWRhdGVzIHRoYXQgdGhlIGN1cnJlbnQgc29sdXRpb24gaXMgdmFsaWQgYWNjb3JkaW5nIHRvIGl0cyBraW5kIGFuZCBzb21lIG90aGVyIGFyZ3VtZW50IHZhbHVlcy48L0Rlc2NyaXB0aW9uPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iU29sdXRpb25LaW5kIiBUeXBlPSJTeXN0ZW0uQm9vbGVhbiIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iU29tT3RoZXJBcmd1bWVudCIgVHlwZT0iU3lzdGVtLlN0cmluZyIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkRvTm90aGluZ0F0VGhpc1RpbWUiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Eb05vdGhpbmdBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IlB1Ymxpc2hTZXJ2aWNlcyI+DQoJCQk8Q2FwdGlvbj5QdWJsaXNoIENvbmZpZ3VyZWQgU2VydmljZXM8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+UHVibGlzaGVzIHRoZSBjb25maWd1cmVkIHNlcnZpY2VzIGluIHRoZSBzb2x1dGlvbiBvbiBhIGNlbnRyYWwgZGVwbG95bWVudCBzZXJ2ZXIuPC9EZXNjcmlwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlNlcnZlckxvY2F0aW9uIiBUeXBlPSJTeXN0ZW0uQm9vbGVhbiIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkNvcHlUb1NlcnZlciIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuUGFja2FnZU1hbmFnZW1lbnRUZXN0K1Rlc3RBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9Ikhvc3RCaW5kaW5nIj4NCgkJCTxDYXB0aW9uPlBhY2thZ2UgQmluZGluZyBSZWNpcGU8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+Q3JlYXRlcyB0aGUgcmVmZXJlbmNlcyByZXF1aXJlZCBmb3IgdGhpcyBwYWNrYWdlLjwvRGVzY3JpcHRpb24+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkRvQmluZGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuUGFja2FnZU1hbmFnZW1lbnRUZXN0K0JpbmRpbmdBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCTwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>31</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/RecipeManagerTest.cs</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/I3JlZ2lvbiBVc2luZyBkaXJlY3RpdmVzDQoNCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9uczsNCnVzaW5nIFN5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ247DQp1c2luZyBTeXN0ZW0uRHJhd2luZzsNCnVzaW5nIFN5c3RlbS5JTzsNCnVzaW5nIFN5c3RlbS5YbWw7DQp1c2luZyBTeXN0ZW0uWG1sLlhQYXRoOw0KDQp1c2luZyBNaWNyb3NvZnQuUHJhY3RpY2VzLkNvbW1vbjsNCnVzaW5nIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlNlcnZpY2VzOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTW9ja1NlcnZpY2VzOw0KdXNpbmcgTlVuaXQuRnJhbWV3b3JrOw0KdXNpbmcgTWljcm9zb2Z0LlByYWN0aWNlcy5Db21tb24uU2VydmljZXM7DQp1c2luZyBTeXN0ZW0uV2luZG93cy5Gb3JtczsNCg0KI2VuZHJlZ2lvbg0KDQpuYW1lc3BhY2UgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsNCnsNCglbVGVzdEZpeHR1cmVdDQoJcHVibGljIGNsYXNzIFJlY2lwZU1hbmFnZXJUZXN0DQoJew0KCQlSZWNpcGVNYW5hZ2VyIE1hbmFnZXI7DQoJCS8vIEEgc2V0IG9mIGZsYWdzIHRvIHVzZSBkdXJpbmcgZXhlY3V0aW9uIGZvciBzZXZlcmFsIHRlc3RzLg0KCQlpbnRlcm5hbCBzdGF0aWMgYm9vbFtdIEZsYWdzID0gbmV3IGJvb2xbMTBdOw0KDQoJCXN0YXRpYyByZWFkb25seSBzdHJpbmcgSW5zdGFsbFV0aWwgPSBQYXRoLkNvbWJpbmUoVXRpbHMuR2V0Q2xySW5zdGFsbGF0aW9uRGlyZWN0b3J5KCksICJJbnN0YWxsVXRpbC5leGUiKTsNCg0KCQkjcmVnaW9uIFNldFVwDQoNCgkJW1NldFVwXQ0KCQlwdWJsaWMgdm9pZCBTZXRVcCgpDQoJCXsNCgkJCU1hbmFnZXIgPSBuZXcgUmVjaXBlTWFuYWdlcigpOw0KCQkJTWFuYWdlci5BZGRTZXJ2aWNlKHR5cGVvZihJUGVyc2lzdGVuY2VTZXJ2aWNlKSwgbmV3IE1vY2tQZXJzaXN0ZW5jZVNlcnZpY2UoKSk7DQoJCQlNYW5hZ2VyLkFkZFNlcnZpY2UodHlwZW9mKEVudkRURS5fRFRFKSwgbmV3IE1vY2tTZXJ2aWNlcy5Nb2NrRHRlKCkpOw0KICAgICAgICAgICAgTWFuYWdlci5BZGRTZXJ2aWNlKHR5cGVvZihJVmFsdWVHYXRoZXJpbmdTZXJ2aWNlKSwgbmV3IFdpemFyZEZyYW1ld29yay5XaXphcmRHYXRoZXJpbmdTZXJ2aWNlKCkpOw0KCQkJRmxhZ3MgPSBuZXcgYm9vbFsxMF07DQoJCX0NCg0KCQkjZW5kcmVnaW9uIFNldFVwDQoNCgkJW1Rlc3RdDQoJCXB1YmxpYyB2b2lkIExvYWRQYWNrYWdlKCkNCgkJew0KCQkJUmVjaXBlTWFuYWdlciBtZ3IgPSBuZXcgUmVjaXBlTWFuYWdlcigpOw0KCQkJLy8gU2V0dXAgZGVwZW5kZW50IHNlcnZpY2VzLg0KCQkJbWdyLlJlbW92ZVNlcnZpY2UodHlwZW9mKFN5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ24uSVR5cGVSZXNvbHV0aW9uU2VydmljZSkpOw0KCQkJbWdyLkFkZFNlcnZpY2UodHlwZW9mKFN5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ24uSVR5cGVSZXNvbHV0aW9uU2VydmljZSksIG5ldyBNb2NrU2VydmljZXMuTW9ja1R5cGVSZXNvbHV0aW9uU2VydmljZSgpKTsNCgkJCW1nci5BZGRTZXJ2aWNlKHR5cGVvZihTZXJ2aWNlcy5JUGVyc2lzdGVuY2VTZXJ2aWNlKSwgbmV3IE1vY2tTZXJ2aWNlcy5Nb2NrUGVyc2lzdGVuY2VTZXJ2aWNlKCkpOw0KCQkJQ29uZmlndXJhdGlvbi5HdWlkYW5jZVBhY2thZ2UgY29uZmlnID0gbmV3IENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlKCk7DQoJCQljb25maWcuR3VpZCA9IEd1aWQuTmV3R3VpZCgpLlRvU3RyaW5nKCk7DQogICAgICAgICAgICBjb25maWcuU2NoZW1hVmVyc2lvbiA9ICIxLjAiOw0KCQkJY29uZmlnLkNhcHRpb24gPSAiVGVzdCBwYWNrYWdlIGNhcHRpb24iOw0KCQkJR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSBuZXcgR3VpZGFuY2VQYWNrYWdlKGNvbmZpZyk7DQoJCQltZ3IuQWRkKHBhY2thZ2UpOw0KCQl9DQoNCgkJW1Rlc3RdDQoJCXB1YmxpYyB2b2lkIEFkZFBhY2thZ2UoKQ0KCQl7DQoJCQkvLyBMb2FkIHRoZSBwYWNrYWdlIGZyb20gdGhlIGNvbmZpZy4NCgkJCUd1aWRhbmNlUGFja2FnZSBwYWNrYWdlID0gbmV3IEd1aWRhbmNlUGFja2FnZShuZXcgWG1sVGV4dFJlYWRlcihVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSkpOw0KDQoJCQlNYW5hZ2VyLkFkZChwYWNrYWdlKTsNCgkJCUFzc2VydC5Jc05vdE51bGwoTWFuYWdlci5HZXRQYWNrYWdlKHBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKSk7DQoJCX0NCg0KCQlbVGVzdF0NCgkJcHVibGljIHZvaWQgRW5hYmxlUGFja2FnZSgpDQoJCXsNCgkJCS8vIExvYWQgdGhlIHBhY2thZ2UgZnJvbSB0aGUgY29uZmlnLg0KCQkJR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2UgPSBuZXcgR3VpZGFuY2VQYWNrYWdlKG5ldyBYbWxUZXh0UmVhZGVyKFV0aWxzLk1ha2VUZXN0UmVsYXRpdmVQYXRoKCJSZWNpcGVUZXN0LnhtbCIpKSk7DQoNCgkJCU1hbmFnZXIuRW5hYmxlUGFja2FnZShwYWNrYWdlKTsNCgkJCUFzc2VydC5Jc05vdE51bGwoTWFuYWdlci5HZXRQYWNrYWdlKHBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKSk7DQoJCX0NCg0KCQlbVGVzdF0NCgkJcHVibGljIHZvaWQgSW5zdGFsbEFuZEVuYWJsZVBhY2thZ2UoKQ0KCQl7DQoJCQlDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlID0gR3VpZGFuY2VQYWNrYWdlLlJlYWRDb25maWd1cmF0aW9uKA0KCQkJCVV0aWxzLk1ha2VUZXN0UmVsYXRpdmVQYXRoKCJSZWNpcGVUZXN0LnhtbCIpKTsNCg0KCQkJLy8gRW5zdXJlIGhvc3QNCgkJCU1hbmlmZXN0SW5zdGFsbGVyVGVzdC5JbnN0YWxsSG9zdChwYWNrYWdlLkhvc3QsIHR5cGVvZihUZXN0SW5zdGFsbGVyKSwgZmFsc2UpOw0KCQkJdHJ5DQoJCQl7DQoJCQkJLy8gSW5zdGFsbCBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgcGFja2FnZS4NCgkJCQlNYW5pZmVzdEluc3RhbGxlclRlc3QuVW5pbnN0YWxsUGFja2FnZShVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSwgZmFsc2UpOw0KDQoJCQkJLy8gTm93IGluc3RhbGwgaXQuDQoJCQkJc3RyaW5nIG91dHB1dCA9IE1hbmlmZXN0SW5zdGFsbGVyVGVzdC5JbnN0YWxsUGFja2FnZShVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSwgZmFsc2UpOw0KDQoJCQkJLy8gQ2hlY2sgdGhhdCB0aGUgaW5zdGFsbGVyIGNsYXNzIHdhcyBjYWxsZWQuDQoJCQkJaWYgKG91dHB1dC5JbmRleE9mKHR5cGVvZihUZXN0SW5zdGFsbGVyKS5Bc3NlbWJseVF1YWxpZmllZE5hbWUpID09IC0xKQ0KCQkJCXsNCgkJCQkJQ29uc29sZS5Xcml0ZShvdXRwdXQpOw0KCQkJCQlBc3NlcnQuRmFpbChzdHJpbmcuRm9ybWF0KCJJbnN0YWxsZXIgZm9yIHBhY2thZ2Ugd2FzIG5vdCBydW4uIFdoZW4gdHJ5IHRvIGZpbmQgXCJ7MH1cIiIsIHR5cGVvZihUZXN0SW5zdGFsbGVyKS5Bc3NlbWJseVF1YWxpZmllZE5hbWUpKTsNCgkJCQl9DQoJCQkJUmVjaXBlTWFuYWdlci5SZXNldE1haW5NYW5pZmVzdCgpOw0KCQkJCU1hbmFnZXIuRW5hYmxlUGFja2FnZShwYWNrYWdlLkd1aWQpOw0KCQkJfQ0KCQkJZmluYWxseQ0KCQkJew0KCQkJCU1hbmlmZXN0SW5zdGFsbGVyVGVzdC5Vbmluc3RhbGxQYWNrYWdlKFV0aWxzLk1ha2VUZXN0UmVsYXRpdmVQYXRoKCJSZWNpcGVUZXN0LnhtbCIpLCBmYWxzZSk7DQoJCQkJTWFuaWZlc3RJbnN0YWxsZXJUZXN0LlVuaW5zdGFsbEhvc3QocGFja2FnZS5Ib3N0KTsNCgkJCX0NCg0KCQl9DQoNCgkJW1Rlc3RdDQoJCXB1YmxpYyB2b2lkIEVuYWJsZURpc2FibGVQYWNrYWdlKCkNCgkJew0KCQkJLy8gTG9hZCB0aGUgcGFja2FnZSBmcm9tIHRoZSBjb25maWcuDQoJCQlHdWlkYW5jZVBhY2thZ2UgcGFja2FnZSA9IG5ldyBHdWlkYW5jZVBhY2thZ2UobmV3IFhtbFRleHRSZWFkZXIoVXRpbHMuTWFrZVRlc3RSZWxhdGl2ZVBhdGgoIlJlY2lwZVRlc3QueG1sIikpKTsNCg0KCQkJTWFuYWdlci5FbmFibGVQYWNrYWdlKHBhY2thZ2UpOw0KCQkJcGFja2FnZS5EaXNwb3NlZCArPSBuZXcgRXZlbnRIYW5kbGVyKE9uUGFja2FnZURpc3Bvc2VkKTsNCgkJCU1hbmFnZXIuRGlzYWJsZVBhY2thZ2UocGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpOw0KDQoJCQlBc3NlcnQuSXNUcnVlKEZsYWdzWzBdLCAiUGFja2FnZSB3YXMgbm90IGRpc3Bvc2VkIik7DQoJCX0NCg0KCQlbVGVzdF0NCgkJcHVibGljIHZvaWQgRXhlY3V0ZUhvc3QoKQ0KCQl7DQoJCQkvLyBMb2FkIHRoZSBwYWNrYWdlIGZyb20gdGhlIGNvbmZpZy4NCgkJCUd1aWRhbmNlUGFja2FnZSBwYWNrYWdlID0gbmV3IEd1aWRhbmNlUGFja2FnZShuZXcgWG1sVGV4dFJlYWRlcihVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSkpOw0KDQoJCQlNYW5hZ2VyLkFkZFNlcnZpY2UodHlwZW9mKFNlcnZpY2VzLklIb3N0U2VydmljZSksDQoJCQkJbmV3IFRlc3RIb3N0KE1hbmFnZXIsIGZhbHNlLCBmYWxzZSwgZmFsc2UpKTsNCg0KCQkJTWFuYWdlci5FbmFibGVQYWNrYWdlKHBhY2thZ2UpOw0KCQkJQXNzZXJ0LklzVHJ1ZShGbGFnc1swXSwgIkhvc3Qgd2FzIG5vdCBjYWxsZWQgYXQgcGFja2FnZSBlbmFibGluZyB0aW1lIik7DQoJCQlNYW5hZ2VyLkRpc2FibGVQYWNrYWdlKHBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKTsNCgkJCUFzc2VydC5Jc1RydWUoRmxhZ3NbMV0sICJIb3N0IHdhcyBub3QgY2FsbGVkIGF0IHBhY2thZ2UgZGlzYWJsaW5nIHRpbWUiKTsNCgkJfQ0KDQoJCVtUZXN0XQ0KCQlwdWJsaWMgdm9pZCBFbmFibGVDYW5jZWwoKQ0KCQl7DQoJCQkvLyBMb2FkIHRoZSBwYWNrYWdlIGZyb20gdGhlIGNvbmZpZy4NCgkJCUd1aWRhbmNlUGFja2FnZSBwYWNrYWdlID0gbmV3IEd1aWRhbmNlUGFja2FnZShVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSk7DQoNCgkJCU1hbmFnZXIuQWRkU2VydmljZSh0eXBlb2YoU2VydmljZXMuSUhvc3RTZXJ2aWNlKSwNCgkJCQluZXcgVGVzdEhvc3QoTWFuYWdlciwgdHJ1ZSwgZmFsc2UsIGZhbHNlKSk7DQoNCgkJCU1hbmFnZXIuRW5hYmxlUGFja2FnZShwYWNrYWdlKTsNCgkJCUFzc2VydC5Jc051bGwoTWFuYWdlci5HZXRQYWNrYWdlKHBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKSwNCgkJCQkiSG9zdCBzaG91bGRuJ3QgaGF2ZSBsZXQgcGFja2FnZSB0byBnZXQgZW5hYmxlZCIpOw0KCQl9DQoNCgkJW1Rlc3RdDQoJCXB1YmxpYyB2b2lkIERpc2FibGVDYW5jZWwoKQ0KCQl7DQoJCQkvLyBMb2FkIHRoZSBwYWNrYWdlIGZyb20gdGhlIGNvbmZpZy4NCgkJCUd1aWRhbmNlUGFja2FnZSBwYWNrYWdlID0gbmV3IEd1aWRhbmNlUGFja2FnZShVdGlscy5NYWtlVGVzdFJlbGF0aXZlUGF0aCgiUmVjaXBlVGVzdC54bWwiKSk7DQoNCgkJCU1hbmFnZXIuQWRkU2VydmljZSh0eXBlb2YoU2VydmljZXMuSUhvc3RTZXJ2aWNlKSwNCgkJCQluZXcgVGVzdEhvc3QoTWFuYWdlciwgZmFsc2UsIHRydWUsIGZhbHNlKSk7DQoNCgkJCU1hbmFnZXIuRW5hYmxlUGFja2FnZShwYWNrYWdlKTsNCgkJCUFzc2VydC5Jc05vdE51bGwoTWFuYWdlci5HZXRQYWNrYWdlKHBhY2thZ2UuQ29uZmlndXJhdGlvbi5HdWlkKSwNCgkJCQkiUGFja2FnZSB3YXMgbm90IGVuYWJsZWQiKTsNCgkJCU1hbmFnZXIuRGlzYWJsZVBhY2thZ2UocGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpOw0KCQkJQXNzZXJ0LklzTm90TnVsbChNYW5hZ2VyLkdldFBhY2thZ2UocGFja2FnZS5Db25maWd1cmF0aW9uLkd1aWQpLA0KCQkJCSJIb3N0IHNob3VsZG4ndCBoYXZlIGxldCBwYWNrYWdlIHRvIGdldCBkaXNhYmxlZCIpOw0KCQl9DQoNCgkJdm9pZCBPblBhY2thZ2VEaXNwb3NlZChvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkNCgkJew0KCQkJRmxhZ3NbMF0gPSB0cnVlOw0KCQl9DQoNCgkJcHVibGljIGNsYXNzIEV4ZWN1dGVkQnlOYW1lQWN0aW9uIDogSUFjdGlvbg0KCQl7DQoJCQkjcmVnaW9uIElBY3Rpb24gTWVtYmVycw0KDQoJCQlwdWJsaWMgdm9pZCBFeGVjdXRlKCkNCgkJCXsNCgkJCQlGbGFnc1swXSA9IHRydWU7DQoJCQl9DQoNCgkJCXB1YmxpYyB2b2lkIFVuZG8oKQ0KCQkJew0KCQkJCUZsYWdzWzFdID0gdHJ1ZTsNCgkJCX0NCg0KCQkJI2VuZHJlZ2lvbg0KCQl9DQoNCgkJcHJpdmF0ZSBjbGFzcyBUZXN0SG9zdCA6IFNlcnZpY2VzLklIb3N0U2VydmljZQ0KCQl7DQoJCQlib29sIGNhbmNlbEVuYWJsZTsNCgkJCWJvb2wgY2FuY2VsRGlzYWJsZTsNCgkJCWJvb2wgY2FuY2VsRXhlY3V0ZTsNCg0KCQkJcHVibGljIFRlc3RIb3N0KFJlY2lwZU1hbmFnZXIgbWFuYWdlciwgYm9vbCBjYW5jZWxFbmFibGUsIGJvb2wgY2FuY2VsRGlzYWJsZSwgYm9vbCBjYW5jZWxFeGVjdXRlKQ0KCQkJew0KCQkJCXRoaXMuY2FuY2VsRGlzYWJsZSA9IGNhbmNlbERpc2FibGU7DQoJCQkJdGhpcy5jYW5jZWxFbmFibGUgPSBjYW5jZWxFbmFibGU7DQoJCQkJdGhpcy5jYW5jZWxFeGVjdXRlID0gY2FuY2VsRXhlY3V0ZTsNCgkJCQltYW5hZ2VyLkVuYWJsaW5nUGFja2FnZSArPSBuZXcgQ2FuY2VsUGFja2FnZUV2ZW50SGFuZGxlcihFbmFibGluZ1BhY2thZ2UpOw0KCQkJCW1hbmFnZXIuRGlzYWJsaW5nUGFja2FnZSArPSBuZXcgQ2FuY2VsUGFja2FnZUV2ZW50SGFuZGxlcihEaXNhYmxpbmdQYWNrYWdlKTsNCgkJCX0NCg0KCQkJcHVibGljIHZvaWQgRW5hYmxpbmdQYWNrYWdlKG9iamVjdCBzZW5kZXIsIENhbmNlbFBhY2thZ2VFdmVudEFyZ3MgYXJncykNCgkJCXsNCgkJCQlGbGFnc1swXSA9IHRydWU7DQoJCQkJYXJncy5DYW5jZWwgPSBjYW5jZWxFbmFibGU7DQoJCQl9DQoNCgkJCXB1YmxpYyB2b2lkIERpc2FibGluZ1BhY2thZ2Uob2JqZWN0IHNlbmRlciwgQ2FuY2VsUGFja2FnZUV2ZW50QXJncyBhcmdzKQ0KCQkJew0KCQkJCUZsYWdzWzFdID0gdHJ1ZTsNCgkJCQlhcmdzLkNhbmNlbCA9IGNhbmNlbERpc2FibGU7DQoJCQl9DQoNCgkJCSNyZWdpb24gSUhvc3RTZXJ2aWNlIE1lbWJlcnMNCg0KCQkJcHVibGljIHN0cmluZyBIb3N0TmFtZQ0KCQkJew0KCQkJCWdldCB7IHJldHVybiAiVGVzdEhvc3QiOyB9DQoJCQl9DQoNCgkJCXB1YmxpYyBJQXNzZXREZXNjcmlwdGlvbltdIEdldEhvc3RBc3NldHMoc3RyaW5nIHBhY2thZ2VQYXRoLCANCgkJCQlNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5Db25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlQ29uZmlndXJhdGlvbikNCgkJCXsNCgkJCQlyZXR1cm4gbnVsbDsNCgkJCX0NCg0KICAgICAgICAgICAgcHVibGljIGJvb2wgU2VsZWN0VGFyZ2V0KG9iamVjdCB0YXJnZXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHB1YmxpYyBib29sIFNlbGVjdFRhcmdldChJV2luMzJXaW5kb3cgb3duZXJXaW5kb3csIElVbmJvdW5kQXNzZXRSZWZlcmVuY2UgZm9yUmVmZXJlbmNlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KDQoJCQkjZW5kcmVnaW9uDQoJCX0NCg0KCQlwdWJsaWMgY2xhc3MgVGVzdEluc3RhbGxlciA6IElIb3N0SW5zdGFsbGVyDQoJCXsNCgkJCSNyZWdpb24gSUhvc3RJbnN0YWxsZXIgTWVtYmVycw0KDQoJCQlwdWJsaWMgdm9pZCBJbnN0YWxsUGFja2FnZShTeXN0ZW0uQ29uZmlndXJhdGlvbi5JbnN0YWxsLkluc3RhbGxDb250ZXh0IGNvbnRleHQsIENvbmZpZ3VyYXRpb24uR3VpZGFuY2VQYWNrYWdlIHBhY2thZ2VDb25maWcpDQoJCQl7DQoJCQkJY29udGV4dC5Mb2dNZXNzYWdlKHRoaXMuR2V0VHlwZSgpLkFzc2VtYmx5UXVhbGlmaWVkTmFtZSk7DQoJCQl9DQoNCgkJCXB1YmxpYyB2b2lkIFVuaW5zdGFsbFBhY2thZ2UoU3lzdGVtLkNvbmZpZ3VyYXRpb24uSW5zdGFsbC5JbnN0YWxsQ29udGV4dCBjb250ZXh0LCBDb25maWd1cmF0aW9uLkd1aWRhbmNlUGFja2FnZSBwYWNrYWdlQ29uZmlnKQ0KCQkJew0KCQkJCWNvbnRleHQuTG9nTWVzc2FnZSh0aGlzLkdldFR5cGUoKS5Bc3NlbWJseVF1YWxpZmllZE5hbWUpOw0KCQkJfQ0KDQoJCQlwdWJsaWMgdm9pZCBJbnN0YWxsSG9zdChTeXN0ZW0uQ29uZmlndXJhdGlvbi5JbnN0YWxsLkluc3RhbGxDb250ZXh0IGNvbnRleHQpDQoJCQl7DQoJCQl9DQoNCgkJCXB1YmxpYyB2b2lkIFVuaW5zdGFsbEhvc3QoU3lzdGVtLkNvbmZpZ3VyYXRpb24uSW5zdGFsbC5JbnN0YWxsQ29udGV4dCBjb250ZXh0KQ0KCQkJew0KCQkJfQ0KDQoJCQkjZW5kcmVnaW9uDQoJCX0NCgl9DQp9DQo=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>8</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/RecipeTest-Binding.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIA0KICBHdWlkPSIxRTRBMUJFQi1GRjk2LTRmYTItQTE4MS00ODlGNjExQjAyRUQiIA0KCUhvc3Q9IlRlc3RIb3N0IiANCiAgQ2FwdGlvbj0iVGVzdGluZyBQYWNrYWdlIiANCiAgQmluZGluZ1JlY2lwZT0iQmluZGluZyIgDQogIFNjaGVtYVZlcnNpb249IjEuMCIgDQogIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSI+DQogIDxSZWNpcGVzPg0KICAgIDxSZWNpcGUgTmFtZT0iQmluZGluZyI+DQogICAgICA8Q2FwdGlvbj5DYXB0aW9uPC9DYXB0aW9uPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iRXhlY3V0ZUJpbmRpbmciIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlJlY2lwZVRlc3RzK0V4ZWN1dGVCaW5kaW5nQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0IiAvPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICA8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>11</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/RecipeTest-BindingInvalid.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIA0KICBHdWlkPSIxRTRBMUJFQi1GRjk2LTRmYTItQTE4MS00ODlGNjExQjAyRUQiIA0KCUhvc3Q9IlRlc3RIb3N0IiANCiAgQ2FwdGlvbj0iVGVzdGluZyBQYWNrYWdlIiANCiAgU2NoZW1hVmVyc2lvbj0iMS4wIiANCiAgQmluZGluZ1JlY2lwZT0ia3p1IiANCiAgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIj4NCiAgPFJlY2lwZXM+DQogICAgPFJlY2lwZSBOYW1lPSJUZXN0UmVjaXBlIj4NCiAgICAgIDxDYXB0aW9uPkRpY3Rpb25hcnkgc2VydmljZSB0ZXN0czwvQ2FwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJBVmFsdWUiIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIA0KICAgICAgICAgICAgICAgIFNjaGVtYVZlcnNpb249IjEuMCIgDQogICAgICAgICAgICAgICAgTmFtZT0iRGljdGlvbmFyeVdpemFyZCI+DQogICAgICAgICAgPFBhZ2VzPg0KICAgICAgICAgICAgPFBhZ2UgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuUmVjaXBlVGVzdFN0ZXAsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiPg0KICAgICAgICAgICAgICA8VGl0bGU+UmVjaXBlIFRlc3Q8L1RpdGxlPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFWYWx1ZSIgTGFiZWw9IkEgdmFsdWUiIC8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgIDwvUGFnZXM+DQogICAgICAgIDwvV2l6YXJkPg0KICAgICAgPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iSGVsbG9Xb3JsZCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuSGVsbG9Xb3JsZEFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCIgLz4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJPC9SZWNpcGVzPg0KPC9HdWlkYW5jZVBhY2thZ2U+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>22</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/RecipeTest.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIA0KCUd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFRCIgDQoJQ2FwdGlvbj0iVGVzdGluZyBQYWNrYWdlIiANCglIb3N0PSJUZXN0SG9zdCIgDQoJU2NoZW1hVmVyc2lvbj0iMS4wIiANCgl4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiPg0KICA8UmVjaXBlcz4NCiAgICA8UmVjaXBlIE5hbWU9IlRlc3RSZWNpcGUiPg0KICAgICAgPENhcHRpb24+RGljdGlvbmFyeSBzZXJ2aWNlIHRlc3RzPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFWYWx1ZSIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQogICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIiANCiAgICAgICAgICAgICAgICBOYW1lPSJEaWN0aW9uYXJ5V2l6YXJkIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZSBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5SZWNpcGVUZXN0cytSZWNpcGVUZXN0U3RlcCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCI+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWNpcGUgVGVzdDwvVGl0bGU+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQVZhbHVlIiBMYWJlbD0iQSB2YWx1ZSIgLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iSGVsbG9Xb3JsZCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuSGVsbG9Xb3JsZEFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IlR5cGVBbGlhc0FyZ3VtZW50Ij4NCiAgICAgIDxUeXBlcz4NCiAgICAgICAgPFR5cGVBbGlhcyBOYW1lPSJpbnQiIFR5cGU9IlN5c3RlbS5JbnQzMiIvPg0KICAgICAgICA8VHlwZUFsaWFzIE5hbWU9ImludDY0IiBUeXBlPSJTeXN0ZW0uSW50NjQiLz4NCiAgICAgIDwvVHlwZXM+DQogICAgICA8Q2FwdGlvbj5UeXBlcyB3aXRoIGFsaWFzZXM8L0NhcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQW5JbnQiIFR5cGU9ImludCIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFCaWdJbnQiIFR5cGU9ImludDY0IiAvPg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8R2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICAgIDxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlJlY2lwZVRlc3RzK0V4ZWN1dGVSZWNpcGVUeXBlQWxpYXNTdGVwLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0Ij4NCiAgICAgICAgICAgICAgPFRpdGxlPlJlY2lwZSBUZXN0PC9UaXRsZT4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJBbkludCIgTGFiZWw9IkEgdmFsdWUiIC8+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQUJpZ0ludCIgTGFiZWw9IkEgdmFsdWUiIC8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgIDwvUGFnZXM+DQogICAgICAgIDwvV2l6YXJkPg0KICAgICAgPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9Ik51bGxOb1dpemFyZCI+DQogICAgICA8Q2FwdGlvbj5DYXB0aW9uPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFWYWx1ZSIgVHlwZT0iU3lzdGVtLkJvb2xlYW4iIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9Ikluc3RhbGxFeGVjdXRlQnlOYW1lIj4NCiAgICAgIDxDYXB0aW9uPkNhcHRpb248L0NhcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQVZhbHVlIiBUeXBlPSJTeXN0ZW0uQm9vbGVhbiIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iRXhlY3V0ZWRCeU5hbWUiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlJlY2lwZU1hbmFnZXJUZXN0K0V4ZWN1dGVkQnlOYW1lQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0IiAvPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICA8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>9</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/SampleManifest.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8UmVjaXBlRnJhbWV3b3JrIFNjaGVtYVZlcnNpb249IjEuMCIgVHJhY2VMZXZlbD0iSW5mbyIgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1tYW5pZmVzdCI+DQoJPEhvc3RzPg0KCQk8SG9zdCBOYW1lPSJWaXN1YWxTdHVkaW8iIEluc3RhbGxlclR5cGU9IlRoZVR5cGUsIFRoZUFzc2VtYmx5IiAvPg0KCTwvSG9zdHM+DQoJPEd1aWRhbmNlUGFja2FnZXM+DQogICAgICA8R3VpZGFuY2VQYWNrYWdlDQogICAgICAgIEd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFQyIgDQogICAgICAgIFZlcnNpb249IjEuMCIgDQogICAgICAgIENhcHRpb249IlRoaXMgaXMgYSBzYW1wbGUgbWFuaWZlc3QgZm9yIGEgcGFja2FnZSIgDQogICAgICAgIERlc2NyaXB0aW9uPSJGdWxsIGxlbmd0aCBkZXNjcmlwdGlvbiINCiAgICAgICAgSG9zdD0iVmlzdWFsU3R1ZGlvIg0KICAgICAgICBUaW1lc3RhbXA9IjQzMjI0MzQyMzI0MyIgDQogICAgICAgIENvbmZpZ3VyYXRpb25GaWxlPSJDOlxCbGFoLnhtbCIgLz4NCgk8L0d1aWRhbmNlUGFja2FnZXM+DQo8L1JlY2lwZUZyYW1ld29yaz4=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>5</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/Services/AssetReferenceServiceTests.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSINCiAgICAgICAgICAgICAgIEd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFRCINCiAgICAgICAgICAgICAgIENhcHRpb249IlRlc3RzIg0KICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCiAgPFJlY2lwZXM+DQogICAgPFJlY2lwZSBOYW1lPSJBZGRTZXJ2aWNlIj4NCiAgICAgIDxDYXB0aW9uPkFkZFNlcnZpY2U8L0NhcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iYWFhIiAvPg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJiYmIiIFR5cGU9InR0dCIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IkFkZEJ1c2luZXNzQWN0aW9uIj4NCiAgICAgIDxDYXB0aW9uPkFkZEJ1c2luZXNzQWN0aW9uPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9ImFhYSIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iYmJiIiBUeXBlPSJ0dHQiIC8+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogIDwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>20</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/Services/DictionaryServiceTest.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+IA0KPEd1aWRhbmNlUGFja2FnZSB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiDQogICAgR3VpZD0iMUU0QTFCRUItRkY5Ni00ZmEyLUExODEtNDg5RjYxMUIwMkVEIiANCiAgICBDYXB0aW9uPSJUZXN0IFBhY2thZ2UgQ2FwdGlvbiINCiAgICBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KCTxSZWNpcGVzPg0KCQk8UmVjaXBlIE5hbWU9IlRlc3REaWN0aW9uYXJ5Ij4NCgkJCTxDYXB0aW9uPkRpY3Rpb25hcnkgc2VydmljZSB0ZXN0czwvQ2FwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkFDb2xvciIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuQ29sb3IsIFN5c3RlbS5EcmF3aW5nLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQUJvb2xlYW4iIFR5cGU9IlN5c3RlbS5Cb29sZWFuIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBbkVudW0iIFR5cGU9IlN5c3RlbS5QbGF0Zm9ybUlEIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQURhdGUiIFR5cGU9IlN5c3RlbS5EYXRlVGltZSI+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGF0ZVRpbWVDb252ZXJ0ZXIsIFN5c3RlbSwgVmVyc2lvbj0yLjAuMzYwMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWI3N2E1YzU2MTkzNGUwODkiIC8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICA8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQogICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIiANCiAgICAgICAgICAgICAgICBOYW1lPSJEaWN0aW9uYXJ5V2l6YXJkIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2UgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuU2VydmljZXMuRGljdGlvbmFyeVRlc3RTdGVwLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0Ij4NCgkJCQkJCQk8VGl0bGU+RGljdGlvbmFyeSB0ZXN0IHN0ZXA8L1RpdGxlPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFDb2xvciIgTGFiZWw9IkEgY29sb3IiIC8+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFCb29sZWFuIiBMYWJlbD0iQSBib29sZWFuIiAvPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBbkVudW0iIExhYmVsPSJBbiBlbnVtZXJhdGlvbiIgLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgIFZhbHVlTmFtZT0iQURhdGUiIExhYmVsPSJBIGRhdGUiPg0KICAgICAgICAgICAgICAgICAgPEVkaXRvciBUeXBlPSJTeXN0ZW0uQ29tcG9uZW50TW9kZWwuRGVzaWduLkRhdGVUaW1lRWRpdG9yLCBTeXN0ZW0uRGVzaWduLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSIgLz4NCiAgICAgICAgICAgICAgICA8L0ZpZWxkPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iSGVsbG9Xb3JsZCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuSGVsbG9Xb3JsZEFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCIgLz4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJUZXN0Q29udmVydGVycyI+DQogICAgICA8Q2FwdGlvbj5Db252ZXJ0ZXJzIHRlc3RzPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFDb2xvciIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuQ29sb3IsIFN5c3RlbS5EcmF3aW5nLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFCb29sZWFuIiBUeXBlPSJTeXN0ZW0uQm9vbGVhbiIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFuRW51bSIgVHlwZT0iU3lzdGVtLlBsYXRmb3JtSUQiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJBRGF0ZSIgVHlwZT0iU3lzdGVtLkRhdGVUaW1lIj4NCiAgICAgICAgICA8Q29udmVydGVyIFR5cGU9IlN5c3RlbS5Db21wb25lbnRNb2RlbC5EYXRlVGltZUNvbnZlcnRlciwgU3lzdGVtLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49Yjc3YTVjNTYxOTM0ZTA4OSIgLz4NCiAgICAgICAgPC9Bcmd1bWVudD4gDQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkhlbGxvV29ybGQiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkhlbGxvV29ybGRBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiIC8+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogIDwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>14</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/Services/ReadOnlyDictionaryServiceTests.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+IA0KPEd1aWRhbmNlUGFja2FnZSAgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIg0KCUhvc3Q9IlZpc3VhbFN0dWRpbyIgDQogIEd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFRCIgDQoJQ2FwdGlvbj0iVGVzdFBhY2thZ2UgQ2FwdGlvbiINCglTY2hlbWFWZXJzaW9uPSIxLjAiPg0KCTxSZWNpcGVzPg0KCQk8UmVjaXBlIE5hbWU9IlRyeUNoYW5nZVZhbHVlUHJvdmlkZXJCZWZvcmUiPg0KCQkJPENhcHRpb24+VHJ5Q2hhbmdlVmFsdWVQcm92aWRlckJlZm9yZTwvQ2FwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkEiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5SZWFkT25seURpY3Rpb25hcnlTZXJ2aWNlVGVzdHMrVHJ5Q2hhbmdlRGljdGlvbmFyeVZhbHVlUHJvdmlkZXJCZWZvcmUsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiIC8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJEb05vdGhpbmciIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Eb05vdGhpbmdBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IlRyeUNoYW5nZVZhbHVlUHJvdmlkZXJBZnRlciI+DQoJCQk8Q2FwdGlvbj5UcnlDaGFuZ2VWYWx1ZVByb3ZpZGVyQWZ0ZXI8L0NhcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBIj4NCgkJCQkJPFZhbHVlUHJvdmlkZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuUmVhZE9ubHlEaWN0aW9uYXJ5U2VydmljZVRlc3RzK1RyeUNoYW5nZURpY3Rpb25hcnlWYWx1ZVByb3ZpZGVyQWZ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiIC8+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiIA0KICAgICAgICAgICAgICAgIE5hbWU9IkZpbmlzaFdpemFyZCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkZpbmlzaFdpemFyZFN0ZXAsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiPg0KCQkJCQkJCTxUaXRsZT5GaW5pc2ggYXV0b21hdGljYWxseTwvVGl0bGU+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQSIgTGFiZWw9IkR1bW15IiAvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iRG9Ob3RoaW5nIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuRG9Ob3RoaW5nQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJUcnlDaGFuZ2VWYWx1ZVByb3ZpZGVyT25DaGFuZ2UiPg0KCQkJPENhcHRpb24+VHJ5Q2hhbmdlVmFsdWVQcm92aWRlck9uQ2hhbmdlPC9DYXB0aW9uPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQSIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJCIiBSZXF1aXJlZD0iZmFsc2UiID4NCgkJCQkJPFZhbHVlUHJvdmlkZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuUmVhZE9ubHlEaWN0aW9uYXJ5U2VydmljZVRlc3RzK1RyeUNoYW5nZURpY3Rpb25hcnlWYWx1ZVByb3ZpZGVyT25DaGFuZ2UsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiPg0KCQkJCQkJPE1vbml0b3JBcmd1bWVudCBOYW1lPSJBIiAvPgkJCQkJCQ0KCQkJCQk8L1ZhbHVlUHJvdmlkZXI+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiIA0KICAgICAgICAgICAgICAgIE5hbWU9IlRyeUNoYW5nZVZhbHVlUHJvdmlkZXJPbkNoYW5nZVdpemFyZCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxQYWdlIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlJlYWRPbmx5RGljdGlvbmFyeVNlcnZpY2VUZXN0cytDaGFuZ2VWYWx1ZVdpemFyZCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCI+DQoJCQkJCQkJPFRpdGxlPk1vbml0b3IgYW5kIGZpbmlzaDwvVGl0bGU+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQSIgTGFiZWw9IkR1bW15QSIgLz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQiIgTGFiZWw9IkR1bW15QiIgLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJCTxSZWNpcGUgTmFtZT0iVHJ5Q2hhbmdlQWN0aW9uIj4NCgkJCTxDYXB0aW9uPlRyeUNoYW5nZUFjdGlvbjwvQ2FwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkEiIFJlcXVpcmVkPSJmYWxzZSIgLz4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJUcnlDaGFuZ2VBY3Rpb24iIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlJlYWRPbmx5RGljdGlvbmFyeVNlcnZpY2VUZXN0cytDaGFuZ2VBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiIC8+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCTwvUmVjaXBlcz4NCjwvR3VpZGFuY2VQYWNrYWdlPg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>7</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/Services/TypeResolutionServiceTests.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+IA0KPEd1aWRhbmNlUGFja2FnZSAgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIg0KCUd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFRCIgDQoJQ2FwdGlvbj0iVGVzdFBhY2thZ2UgQ2FwdGlvbiINCglTY2hlbWFWZXJzaW9uPSIxLjAiPg0KCTxSZWNpcGVzPg0KCQk8UmVjaXBlIE5hbWU9IlJlc29sdmVUeXBlIj4NCgkJCTxDYXB0aW9uPlJlc29sdmUgdHlwZTwvQ2FwdGlvbj4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkEiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJNeUNsYXNzLCBNeVRlc3RGaWxlIiAvPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iRG9Ob3RoaW5nIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuRG9Ob3RoaW5nQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgk8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4=</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>9</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/ValueProviderTests-Circular.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+IA0KPEd1aWRhbmNlUGFja2FnZSAgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC1jb3JlIg0KCUd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFRCIgDQoJQ2FwdGlvbj0iVGVzdFBhY2thZ2UgQ2FwdGlvbiINCglTY2hlbWFWZXJzaW9uPSIxLjAiPg0KCTxSZWNpcGVzPg0KCQk8UmVjaXBlIE5hbWU9IkNpcmN1bGFyRGVwZW5kZW5jaWVzIj4NCgkJCTxDYXB0aW9uPkNpcmN1bGFyRGVwZW5kZW5jaWVzPC9DYXB0aW9uPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQSI+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IldoYXRldmVyIj4NCgkJCQkJCTxNb25pdG9yQXJndW1lbnQgTmFtZT0iQiIgLz4NCgkJCQkJPC9WYWx1ZVByb3ZpZGVyPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkIiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJXaGF0ZXZlciI+DQoJCQkJCQk8TW9uaXRvckFyZ3VtZW50IE5hbWU9IkMiIC8+DQoJCQkJCQk8TW9uaXRvckFyZ3VtZW50IE5hbWU9IkQiIC8+DQoJCQkJCTwvVmFsdWVQcm92aWRlcj4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJCTxBcmd1bWVudCBOYW1lPSJDIj4NCgkJCQkJPFZhbHVlUHJvdmlkZXIgVHlwZT0iV2hhdGV2ZXIiPg0KCQkJCQkJPE1vbml0b3JBcmd1bWVudCBOYW1lPSJFIiAvPg0KCQkJCQk8L1ZhbHVlUHJvdmlkZXI+DQoJCQkJPC9Bcmd1bWVudD4NCgkJCQk8QXJndW1lbnQgTmFtZT0iRCI+DQoJCQkJCTxWYWx1ZVByb3ZpZGVyIFR5cGU9IldoYXRldmVyIj4NCgkJCQkJCTxNb25pdG9yQXJndW1lbnQgTmFtZT0iQSIgLz4NCgkJCQkJCTxNb25pdG9yQXJndW1lbnQgTmFtZT0iQiIgLz4NCgkJCQkJPC9WYWx1ZVByb3ZpZGVyPg0KCQkJCTwvQXJndW1lbnQ+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkUiPg0KCQkJCQk8VmFsdWVQcm92aWRlciBUeXBlPSJXaGF0ZXZlciI+DQoJCQkJCQk8TW9uaXRvckFyZ3VtZW50IE5hbWU9IkMiIC8+DQoJCQkJCTwvVmFsdWVQcm92aWRlcj4NCgkJCQk8L0FyZ3VtZW50Pg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJPC9SZWNpcGVzPg0KPC9HdWlkYW5jZVBhY2thZ2U+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>20</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/RecipeFramework/ValueProviderTests.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlICB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LWNvcmUiDQoJR3VpZD0iMUU0QTFCRUItRkY5Ni00ZmEyLUExODEtNDg5RjYxMUIwMkVEIiANCglDYXB0aW9uPSJUZXN0UGFja2FnZSBDYXB0aW9uIg0KCVNjaGVtYVZlcnNpb249IjEuMCI+DQogIDxSZWNpcGVzPg0KICAgIDxSZWNpcGUgTmFtZT0iVGVzdExpZmVDeWNsZSI+DQogICAgICA8Q2FwdGlvbj5Qcm92aWRlcnM8L0NhcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iRm9yRmluaXNoV2l6YXJkIiBSZXF1aXJlZD0iZmFsc2UiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJGaXJzdCI+DQogICAgICAgICAgPFZhbHVlUHJvdmlkZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmFsdWVQcm92aWRlclRlc3RzK0xpZmVDeWNsZVByb3ZpZGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0IiAvPg0KICAgICAgICA8L0FyZ3VtZW50Pg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8R2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICAgIDxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiIA0KICAgICAgICAgICAgICAgIE5hbWU9IkZpbmlzaFdpemFyZCI+DQogICAgICAgICAgPFBhZ2VzPg0KICAgICAgICAgICAgPFBhZ2UgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuRmluaXNoV2l6YXJkU3RlcCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCI+DQogICAgICAgICAgICAgIDxUaXRsZT5GaW5pc2ggYXV0b21hdGljYWxseTwvVGl0bGU+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iRm9yRmluaXNoV2l6YXJkIiBMYWJlbD0iRHVtbXkiIC8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgIDwvUGFnZXM+DQogICAgICAgIDwvV2l6YXJkPg0KICAgICAgPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IlZhbHVlRWRpdG9yQ2hhbmdlTW9uaXRvcmluZyI+DQogICAgICA8Q2FwdGlvbj5DaGFuZ2U8L0NhcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQSI+DQogICAgICAgICAgPFZhbHVlUHJvdmlkZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmFsdWVQcm92aWRlclRlc3RzK0ZpcnN0VmFsdWVQcm92aWRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCIgLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkIiPg0KICAgICAgICAgIDxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZhbHVlUHJvdmlkZXJUZXN0cytDb25jYXRWYWx1ZVByb3ZpZGVyLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5UZXN0Ij4NCiAgICAgICAgICAgIDxNb25pdG9yQXJndW1lbnQgTmFtZT0iQSIgLz4NCiAgICAgICAgICA8L1ZhbHVlUHJvdmlkZXI+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICAgIDwhLS0gQSBudWxsIGFyZ3VtZW50IHNvIHRoZSB3aXphcmQgc2hvd3MgdXAuIC0tPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQU51bGwiIFJlcXVpcmVkPSJmYWxzZSIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQogICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIiANCiAgICAgICAgICAgICAgICBOYW1lPSJWYWx1ZUVkaXRvckNoYW5nZU1vbml0b3JpbmdXaXphcmQiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZhbHVlUHJvdmlkZXJUZXN0cytWYWx1ZUVkaXRvckNoYW5nZU1vbml0b3JpbmdXaXphcmQsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlRlc3QiPg0KICAgICAgICAgICAgICA8VGl0bGU+TW9uaXRvciBhbmQgZmluaXNoPC9UaXRsZT4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJBIiBMYWJlbD0iRHVtbXlBIiAvPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkIiIExhYmVsPSJEdW1teUIiIC8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgIDwvUGFnZXM+DQogICAgICAgIDwvV2l6YXJkPg0KICAgICAgPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IlRlc3RDaGFuZ2VOb3RpZmljYXRpb24iPg0KICAgICAgPENhcHRpb24+Q2hhbmdlPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkEiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJCIiAvPg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8R2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICAgIDxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiIA0KICAgICAgICAgICAgICAgIE5hbWU9IkNoYW5nZU1vbml0b3JpbmdXaXphcmQiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZhbHVlUHJvdmlkZXJUZXN0cytDaGFuZ2VNb25pdG9yaW5nU3RlcCwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCI+DQogICAgICAgICAgICAgIDxUaXRsZT5Nb25pdG9yIGFuZCBmaW5pc2g8L1RpdGxlPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkEiIExhYmVsPSJEdW1teUEiIC8+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQiIgTGFiZWw9IkR1bW15QiIgLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iRG9Ob3RoaW5nIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuRG9Ob3RoaW5nQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iVmFsdWVFZGl0b3JDb25maWciPg0KICAgICAgPENhcHRpb24+Q29uZmlnPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkEiPg0KICAgICAgICAgIDxWYWx1ZVByb3ZpZGVyIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZhbHVlUHJvdmlkZXJUZXN0cytWYWx1ZUVkaXRvckNvbmZpZ3VyYWJsZSwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVGVzdCINCiAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZTE9IlRoZVZhbHVlIi8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkRvTm90aGluZyIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkRvTm90aGluZ0FjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgPC9SZWNpcGVzPg0KPC9HdWlkYW5jZVBhY2thZ2U+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>14</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/VisualStudio/CTC/CTC.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIgDQogICAgQ2FwdGlvbj0iVGVzdCBTYW1wbGUgUGFja2FnZSINCiAgICBEZXNjcmlwdGlvbj0iVGhlIERlc2NyaXB0aW9uIGZvciB0aGUgU2FtcGxlIFBhY2thZ2UiDQoJCUd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFQyIgDQoJCUJpbmRpbmdSZWNpcGU9IkJpbmRpbmdSZWNpcGUiDQogICAgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCgk8SG9zdERhdGE+DQoJCTxNZW51IE5hbWU9IlNsbk1lbnUiIFRleHQ9Ik1lbnVUZXh0Ij4NCgkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIi8+DQoJCTwvTWVudT4NCgk8L0hvc3REYXRhPg0KCTxSZWNpcGVzPg0KCQk8UmVjaXBlIE5hbWU9IlNpbXBsZVJlY2lwZSI+DQoJCQk8Q2FwdGlvbj5UaGlzIGlzIGEgc2ltcGxlIHJlY2lwZTwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj5UaGlzIGlzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgc2ltcGxlIHJlY2lwZS48L0Rlc2NyaXB0aW9uPg0KCQkJPEhvc3REYXRhPg0KCQkJCTxJY29uIElEPSIzNDYiLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJTb2x1dGlvbiIvPg0KCQkJCTxDb21tYW5kQmFyIEd1aWQ9IkZGRkZGRkZGLUZGRkYtRkZGRi1GRkZGLUZGRkZGRkZGRkZGRiIgSUQ9IjMzMyIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9Ik5hbWUiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiIA0KCQkJCQkJTmFtZT0iU2ltcGxlV2l6YXJkIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlRoaXMgdGl0bGUgc2hvd3MgYSBzaW1wbGUgd2l6YXJkPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlRoaXMgc2ltcGxlIHdpemFyZCBkZXNjcmlwdGlvbiB3aWxsIGNvbGxlY3QgYW4gYXJndW1lbnQuPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+WW91IHNob3VsZG4ndCBuZWVkIGEgbG90IG9mIGhlbHAhPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9Ik5hbWUiIExhYmVsPSJOYW1lIHRvIHNhbHV0ZSIgLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkhlbGxvV29ybGQiIFR5cGU9IkhlbGxvV29ybGRBY3Rpb24iPg0KCQkJCQk8SW5wdXQgTmFtZT0iU2F5TmFtZSIgUmVjaXBlQXJndW1lbnQ9Ik5hbWUiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IlNpbXBsZVJlY2lwZVNsbiI+DQoJCQk8Q2FwdGlvbj5UaGlzIGlzIGEgc2ltcGxlIHJlY2lwZTwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj5UaGlzIGlzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgc2ltcGxlIHJlY2lwZS48L0Rlc2NyaXB0aW9uPg0KCQkJPEhvc3REYXRhPg0KCQkJCTxJY29uIElEPSIzNDYiLz4NCgkJCQk8Q29tbWFuZEJhciBOYW1lPSJTb2x1dGlvbiIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9Ik5hbWUiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiIA0KCQkJCQkJTmFtZT0iU2ltcGxlV2l6YXJkIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlRoaXMgdGl0bGUgc2hvd3MgYSBzaW1wbGUgd2l6YXJkPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlRoaXMgc2ltcGxlIHdpemFyZCBkZXNjcmlwdGlvbiB3aWxsIGNvbGxlY3QgYW4gYXJndW1lbnQuPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+WW91IHNob3VsZG4ndCBuZWVkIGEgbG90IG9mIGhlbHAhPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9Ik5hbWUiIExhYmVsPSJOYW1lIHRvIHNhbHV0ZSIgLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkhlbGxvV29ybGQiIFR5cGU9IkhlbGxvV29ybGRBY3Rpb24iPg0KCQkJCQk8SW5wdXQgTmFtZT0iU2F5TmFtZSIgUmVjaXBlQXJndW1lbnQ9Ik5hbWUiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IlNpbXBsZVJlY2lwZVNsblN1Yk1lbnUiPg0KCQkJPENhcHRpb24+VGhpcyBpcyBhIHNpbXBsZSByZWNpcGU8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+VGhpcyBpcyB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIHNpbXBsZSByZWNpcGUuPC9EZXNjcmlwdGlvbj4NCgkJCTxIb3N0RGF0YT4NCgkJCQk8SWNvbiBJRD0iMzQ2Ii8+DQoJCQkJPENvbW1hbmRCYXIgTWVudT0iU2xuTWVudSIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWU9Ik5hbWUiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQoJCQk8L0FyZ3VtZW50cz4NCgkJCTxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCQk8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiIA0KCQkJCQkJTmFtZT0iU2ltcGxlV2l6YXJkIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlRoaXMgdGl0bGUgc2hvd3MgYSBzaW1wbGUgd2l6YXJkPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlRoaXMgc2ltcGxlIHdpemFyZCBkZXNjcmlwdGlvbiB3aWxsIGNvbGxlY3QgYW4gYXJndW1lbnQuPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+WW91IHNob3VsZG4ndCBuZWVkIGEgbG90IG9mIGhlbHAhPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9Ik5hbWUiIExhYmVsPSJOYW1lIHRvIHNhbHV0ZSIgLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJPC9QYWdlcz4NCgkJCQk8L1dpemFyZD4NCgkJCTwvR2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQk8QWN0aW9ucz4NCgkJCQk8QWN0aW9uIE5hbWU9IkhlbGxvV29ybGQiIFR5cGU9IkhlbGxvV29ybGRBY3Rpb24iPg0KCQkJCQk8SW5wdXQgTmFtZT0iU2F5TmFtZSIgUmVjaXBlQXJndW1lbnQ9Ik5hbWUiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkFDbGFzc1JlY2lwZSI+DQoJCQk8Q2FwdGlvbj5NYWtlIHNlcmlhbGl6YWJsZTwvQ2FwdGlvbj4NCgkJCTxEZXNjcmlwdGlvbj5UaGlzIGlzIGFuIG9tbmlwcmVzZW50IHJlY2lwZS48L0Rlc2NyaXB0aW9uPg0KCQkJPEhvc3REYXRhPg0KCQkJCTxJY29uIElEPSIxMDMyIi8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iSXRlbSIvPg0KCQkJPC9Ib3N0RGF0YT4NCgkJCTxBcmd1bWVudHM+DQoJCQkJPEFyZ3VtZW50IE5hbWUgPSJBcmd1bWVudDEiIFR5cGUgPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIA0KCQkJCQkJU2NoZW1hVmVyc2lvbj0iMS4wIiANCgkJCQkJCU5hbWU9IlNpbXBsZVdpemFyZCI+DQoJCQkJCTxQYWdlcz4NCgkJCQkJCTxTdGVwPg0KCQkJCQkJCTxUaXRsZT5UaGlzIHRpdGxlIHNob3dzIGEgc2ltcGxlIHdpemFyZDwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5UaGlzIHNpbXBsZSB3aXphcmQgZGVzY3JpcHRpb24gd2lsbCBjb2xsZWN0IGFuIGFyZ3VtZW50LjwvTGlua1RpdGxlPg0KCQkJCQkJCTxIZWxwPllvdSBzaG91bGRuJ3QgbmVlZCBhIGxvdCBvZiBoZWxwITwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJOYW1lIiBMYWJlbD0iTmFtZSB0byBzYWx1dGUiIC8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1N0ZXA+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJIZWxsb1dvcmxkIiBUeXBlPSJIZWxsb1dvcmxkQWN0aW9uIj4NCgkJCQkJPElucHV0IE5hbWU9IlNheU5hbWUiIFJlY2lwZUFyZ3VtZW50PSJBcmd1bWVudDEiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IlRlc3RSZWNpcGVCYXNpY0RhdGFUeXBlcyIgUmVjdXJyZW50PSJ0cnVlIj4NCgkJCTxDYXB0aW9uPlRlc3QgUmVjaXBlIGZvciBCYXNpYyBEYXRhIFR5cGVzPC9DYXB0aW9uPg0KCQkJPERlc2NyaXB0aW9uPlRoaXMgaXMgYSByZWNpcGUgZGVmaW5lZCBpbiBTaGFkb3dGYXguY29uZmlnPC9EZXNjcmlwdGlvbj4NCgkJCTxIb3N0RGF0YSA+DQoJCQkJPEljb24gSUQ9IjM0NiIvPg0KCQkJCTxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIi8+DQoJCQk8L0hvc3REYXRhPg0KCQkJPEFyZ3VtZW50cz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQXJnV2l0aFdyb25nVHlwZSIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCgkJCTwvQXJndW1lbnRzPg0KCQkJPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJCTxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIg0KCQkJCQkJU2NoZW1hVmVyc2lvbj0iMS4wIiANCgkJCQkJCU5hbWU9Ik15V2l6YXJkIj4NCgkJCQkJPFBhZ2VzPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPk15V2l6YXJkIFRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPk15V2l6YXJkIHRpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmdXaXRoV3JvbmdUeXBlIiBMYWJlbD0iQXJndW1lbnQgd2l0aCBXcm9uZyBUeXBlIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJNeUFjdGlvbiIgVHlwZT0iQWRkUmVtb3RpbmdUb1Byb2plY3QiPg0KCQkJCQk8SW5wdXQgTmFtZT0iUGFyYW1ldGVyMDgiIFJlY2lwZUFyZ3VtZW50PSJBcmdXaXRoV3JvbmdUeXBlIiAvPg0KCQkJCTwvQWN0aW9uPg0KCQkJPC9BY3Rpb25zPg0KCQk8L1JlY2lwZT4NCgkJPFJlY2lwZSBOYW1lPSJSZWNpcGVXaXRoSHVnZVRpdGxlcyIgUmVjdXJyZW50PSJ0cnVlIj4NCgkJCTxDYXB0aW9uPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L0NhcHRpb24+DQoJCQk8RGVzY3JpcHRpb24+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgZGVzY3JpdHBpb248L0Rlc2NyaXB0aW9uPg0KCQkJPEhvc3REYXRhID4NCgkJCQk8SWNvbiBJRD0iMzQ2Ii8+DQoJCQkJPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24iLz4NCgkJCTwvSG9zdERhdGE+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDEiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50MiIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQzIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDQiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50NSIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ2IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDciIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50OCIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ5IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDEwIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDExIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDEyIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDEzIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE0IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE1IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE2IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE3IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE4IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE5IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDIwIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiIA0KCQkJCQkJTmFtZT0iTXlXaXphcmQiPg0KCQkJCQk8UGFnZXM+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDEiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KCQkJCQkJCTxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQyIiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MyIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDQiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KCQkJCQkJCTxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQ1IiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50NiIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDciIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KCQkJCQkJCTxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQ4IiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50OSIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDEwIiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTEiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KCQkJCQkJCTxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQxMiIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDEzIiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTQiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KCQkJCQkJCTxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQxNSIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDE2IiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTciIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQoJCQkJCQkJPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KCQkJCQkJCTxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQxOCIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCgkJCQkJCQk8L0ZpZWxkcz4NCgkJCQkJCTwvUGFnZT4NCgkJCQkJCTxQYWdlPg0KCQkJCQkJCTxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCgkJCQkJCQk8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQoJCQkJCQkJPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCgkJCQkJCQk8RmllbGRzPg0KCQkJCQkJCQk8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDE5IiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQkJPFBhZ2U+DQoJCQkJCQkJPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KCQkJCQkJCTxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCgkJCQkJCQk8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KCQkJCQkJCTxGaWVsZHM+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MjAiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQoJCQkJCQkJPC9GaWVsZHM+DQoJCQkJCQk8L1BhZ2U+DQoJCQkJCTwvUGFnZXM+DQoJCQkJPC9XaXphcmQ+DQoJCQk8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KCQkJPEFjdGlvbnM+DQoJCQkJPEFjdGlvbiBOYW1lPSJNeUFjdGlvbiIgVHlwZT0iQWRkUmVtb3RpbmdUb1Byb2plY3QiPg0KCQkJCQk8SW5wdXQgTmFtZT0iUGFyYW1ldGVyMDEiIFJlY2lwZUFyZ3VtZW50PSJBcmd1bWVudDEiIC8+DQoJCQkJPC9BY3Rpb24+DQoJCQk8L0FjdGlvbnM+DQoJCTwvUmVjaXBlPg0KCQk8UmVjaXBlIE5hbWU9IkJpbmRpbmdSZWNpcGUiPg0KCQkJPENhcHRpb24+QmluZGluZyBSZWNpcGU8L0NhcHRpb24+DQoJCQk8QXJndW1lbnRzPg0KCQkJCTxBcmd1bWVudCBOYW1lPSJSZWNpcGUiIFR5cGU9IlN5c3RlbS5TdHJpbmciIFJlcXVpcmVkPSJmYWxzZSIgLz4NCgkJCQk8QXJndW1lbnQgTmFtZT0iQXNzZXQiICBUeXBlPSJTeXN0ZW0uU3RyaW5nIiBSZXF1aXJlZD0iZmFsc2UiIC8+DQoJCQkJPEFyZ3VtZW50IE5hbWU9IlRhcmdldCIgVHlwZT0iU3lzdGVtLlN0cmluZyIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KCQkJPC9Bcmd1bWVudHM+DQoJCQk8R2F0aGVyaW5nU2VydmljZURhdGE+DQoJCQkJPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiDQoJCQkJCQlTY2hlbWFWZXJzaW9uPSIxLjAiIA0KCQkJCQkJTmFtZT0iV2l6YXJkQnVpbGRSZWZlcmVuY2UiPg0KCQkJCQk8UGFnZXM+DQoJCQkJCQk8UGFnZT4NCgkJCQkJCQk8VGl0bGU+U2V0IFJlZmVyZW5jZTwvVGl0bGU+DQoJCQkJCQkJPEZpZWxkcz4NCgkJCQkJCQkJPEZpZWxkIFZhbHVlTmFtZT0iUmVjaXBlIiBMYWJlbD0iUmVjaXBlIi8+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IkFzc2V0IiAgTGFiZWw9IkFzc2V0Ii8+DQoJCQkJCQkJCTxGaWVsZCBWYWx1ZU5hbWU9IlRhcmdldCIgTGFiZWw9IlRhcmdldCIvPg0KCQkJCQkJCTwvRmllbGRzPg0KCQkJCQkJPC9QYWdlPg0KCQkJCQk8L1BhZ2VzPg0KCQkJCTwvV2l6YXJkPg0KCQkJPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCgkJCTxBY3Rpb25zPg0KCQkJCTxBY3Rpb24gTmFtZT0iQmluZFJlY2lwZSIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkJpbmRSZWNpcGVBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiPg0KCQkJCQk8SW5wdXQgTmFtZT0iUmVjaXBlIiBSZWNpcGVBcmd1bWVudD0iUmVjaXBlIi8+DQoJCQkJPC9BY3Rpb24+DQoJCQkJPCEtLQ0KICAgICAgICA8QWN0aW9uIE5hbWU9IkNyZWF0ZVVuYm91bmRSZWZlcmVuY2UiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5DcmVhdGVVbmJvdW5kUmVmZXJlbmNlQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ij4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iQXNzZXQiIFJlY2lwZUFyZ3VtZW50PSJBc3NldCIgLz4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iVGFyZ2V0IiBSZWNpcGVBcmd1bWVudD0iVGFyZ2V0Ii8+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgICAtLT4NCgkJCTwvQWN0aW9ucz4NCgkJPC9SZWNpcGU+DQoJPC9SZWNpcGVzPg0KPC9HdWlkYW5jZVBhY2thZ2U+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>22</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/VisualStudio/CTC/ExpectedFromConfig.ctc</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">Q01EU19TRUNUSU9OIHsgMHg3N0Q5M0E4MCwgMHg3M0ZDLCAweDQwRjgsIHsgMHg4NywgMHhEQiwgMHhBQywgMHhEMywgMHg0OCwgMHgyOSwgMHg2NCwgMHhCMiB9IH0NCiAgTUVOVVNfQkVHSU4NCiAgICB7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MjAwMDAseyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDEwMDAxLDB4NjAwLDB4MDAwMDA0MDAsIlNsbk1lbnUiLCJNZW51VGV4dCI7DQogIE1FTlVTX0VORA0KICBORVdHUk9VUFNfQkVHSU4NCiAgICB7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MTAwMDAseyAweEQzMDlGNzkxLCAweDkwM0YsIDB4MTFEMCwgeyAweDlFLCAweEZDLCAweDAwLCAweEEwLCAweEM5LCAweDExLCAweDAwLCAweDRGIH0gfToweDAwODUsMHgwMDA7DQogICAgeyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDEwMDAxLHsgMHhEMzA5Rjc5MSwgMHg5MDNGLCAweDExRDAsIHsgMHg5RSwgMHhGQywgMHgwMCwgMHhBMCwgMHhDOSwgMHgxMSwgMHgwMCwgMHg0RiB9IH06MHgwNDEzLDB4NjAwOw0KICAgIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMix7IDB4RDMwOUY3OTEsIDB4OTAzRiwgMHgxMUQwLCB7IDB4OUUsIDB4RkMsIDB4MDAsIDB4QTAsIDB4QzksIDB4MTEsIDB4MDAsIDB4NEYgfSB9OjB4MDM1MiwweDYwMDsNCiAgICB7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MTAwMDMseyAweEQzMDlGNzkxLCAweDkwM0YsIDB4MTFEMCwgeyAweDlFLCAweEZDLCAweDAwLCAweEEwLCAweEM5LCAweDExLCAweDAwLCAweDRGIH0gfToweDAzNTcsMHg2MDA7DQogICAgeyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDEwMDA0LHsgMHhEMzA5Rjc5MSwgMHg5MDNGLCAweDExRDAsIHsgMHg5RSwgMHhGQywgMHgwMCwgMHhBMCwgMHhDOSwgMHgxMSwgMHgwMCwgMHg0RiB9IH06MHgwMzUwLDB4NjAwOw0KICAgIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwNSx7IDB4RkZGRkZGRkYsIDB4RkZGRiwgMHhGRkZGLCB7IDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYgfSB9OjB4MDE0RCwweDYwMDsNCiAgICB7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MTAwMDYseyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDIwMDAwLDB4NjAwOw0KICAgIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwNyx7IDB4RDMwOUY3OTEsIDB4OTAzRiwgMHgxMUQwLCB7IDB4OUUsIDB4RkMsIDB4MDAsIDB4QTAsIDB4QzksIDB4MTEsIDB4MDAsIDB4NEYgfSB9OjB4MDQzMCwweDYwMDsNCiAgTkVXR1JPVVBTX0VORA0KICBCVVRUT05TX0JFR0lODQogICAgeyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDAwMDEseyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDEwMDAwLDB4MDYwMCx7IDB4RkFFMDRFQzEsIDB4MzAxRiwgMHgxMUQzLCB7IDB4QkYsIDB4NEIsIDB4MDAsIDB4QzAsIDB4NEYsIDB4NzksIDB4RUYsIDB4QkMgfSB9OjB4MDAxRSwweDAwMDAwMDAxLDB4MDAwMDAyN0MsIlRlc3QgU2FtcGxlIFBhY2thZ2UuQ3VzdG9tQ29udHJvbFRlbXBsYXRlIjsNCiAgICB7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MDAwMix7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MTAwMDAsMHgwNjAwLHsgMHhGQUUwNEVDMSwgMHgzMDFGLCAweDExRDMsIHsgMHhCRiwgMHg0QiwgMHgwMCwgMHhDMCwgMHg0RiwgMHg3OSwgMHhFRiwgMHhCQyB9IH06MHgwMDMxLDB4MDAwMDAwMDEsMHgwMDAwMDI3QywiVGVzdCBTYW1wbGUgUGFja2FnZS5TZXJ2aWNlIEFnZW50IjsNCiAgICB7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MDEwMCx7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MTAwMDAsMHgwNjAwLHsgMHhEMzA5Rjc5NCwgMHg5MDNGLCAweDExRDAsIHsgMHg5RSwgMHhGQywgMHgwMCwgMHhBMCwgMHhDOSwgMHgxMSwgMHgwMCwgMHg0RiB9IH06MHgwMTVBLDB4MDAwMDAwMDEsMHgwMDAwMDI3QywiVGVzdCBTYW1wbGUgUGFja2FnZS5TaW1wbGVSZWNpcGUiOw0KICAgIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMjAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMCwweDA2MDAseyAweEQzMDlGNzk0LCAweDkwM0YsIDB4MTFEMCwgeyAweDlFLCAweEZDLCAweDAwLCAweEEwLCAweEM5LCAweDExLCAweDAwLCAweDRGIH0gfToweDAxNUEsMHgwMDAwMDAwMSwweDAwMDAwMjdDLCJUZXN0IFNhbXBsZSBQYWNrYWdlLlNpbXBsZVJlY2lwZVNsbiI7DQogICAgeyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDAzMDAseyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDEwMDAwLDB4MDYwMCx7IDB4RDMwOUY3OTQsIDB4OTAzRiwgMHgxMUQwLCB7IDB4OUUsIDB4RkMsIDB4MDAsIDB4QTAsIDB4QzksIDB4MTEsIDB4MDAsIDB4NEYgfSB9OjB4MDE1QSwweDAwMDAwMDAxLDB4MDAwMDAyN0MsIlRlc3QgU2FtcGxlIFBhY2thZ2UuU2ltcGxlUmVjaXBlU2xuU3ViTWVudSI7DQogICAgeyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDA0MDAseyAweDFFNEExQkVCLCAweEZGOTYsIDB4NEZBMiwgeyAweEExLCAweDgxLCAweDQ4LCAweDlGLCAweDYxLCAweDFCLCAweDAyLCAweEVDIH0gfToweDEwMDAwLDB4MDYwMCx7IDB4RDMwOUY3OTQsIDB4OTAzRiwgMHgxMUQwLCB7IDB4OUUsIDB4RkMsIDB4MDAsIDB4QTAsIDB4QzksIDB4MTEsIDB4MDAsIDB4NEYgfSB9OjB4MDQwOCwweDAwMDAwMDAxLDB4MDAwMDAyN0MsIlRlc3QgU2FtcGxlIFBhY2thZ2UuQUNsYXNzUmVjaXBlIjsNCiAgICB7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MDUwMCx7IDB4MUU0QTFCRUIsIDB4RkY5NiwgMHg0RkEyLCB7IDB4QTEsIDB4ODEsIDB4NDgsIDB4OUYsIDB4NjEsIDB4MUIsIDB4MDIsIDB4RUMgfSB9OjB4MTAwMDAsMHgwNjAwLHsgMHhEMzA5Rjc5NCwgMHg5MDNGLCAweDExRDAsIHsgMHg5RSwgMHhGQywgMHgwMCwgMHhBMCwgMHhDOSwgMHgxMSwgMHgwMCwgMHg0RiB9IH06MHgwMTVBLDB4MDAwMDAwMDEsMHgwMDAwMDI3QywiVGVzdCBTYW1wbGUgUGFja2FnZS5UZXN0UmVjaXBlQmFzaWNEYXRhVHlwZXMiOw0KICAgIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwNjAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMCwweDA2MDAseyAweEQzMDlGNzk0LCAweDkwM0YsIDB4MTFEMCwgeyAweDlFLCAweEZDLCAweDAwLCAweEEwLCAweEM5LCAweDExLCAweDAwLCAweDRGIH0gfToweDAxNUEsMHgwMDAwMDAwMSwweDAwMDAwMjdDLCJUZXN0IFNhbXBsZSBQYWNrYWdlLlJlY2lwZVdpdGhIdWdlVGl0bGVzIjsNCiAgQlVUVE9OU19FTkQNCiAgQklUTUFQU19CRUdJTg0KICBCSVRNQVBTX0VORA0KQ01EU19FTkQNCkNNRFVTRURfU0VDVElPTg0KQ01EVVNFRF9FTkQNCkNNRFBMQUNFTUVOVF9TRUNUSU9ODQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMDAyLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwNCwweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMzAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwNiwweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMDAxLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMywweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMTAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwNSwweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMjAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMSwweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMDAxLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMiwweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMDAyLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMywweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwNTAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMSwweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwMTAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMSwweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwNDAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwNywweDA2MDA7DQogIHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgwNjAwLHsgMHgxRTRBMUJFQiwgMHhGRjk2LCAweDRGQTIsIHsgMHhBMSwgMHg4MSwgMHg0OCwgMHg5RiwgMHg2MSwgMHgxQiwgMHgwMiwgMHhFQyB9IH06MHgxMDAwMSwweDA2MDA7DQpDTURQTEFDRU1FTlRfRU5EDQpWSVNJQklMSVRZX1NFQ1RJT04NClZJU0lCSUxJVFlfRU5EDQpLRVlCSU5ESU5HU19TRUNUSU9ODQpLRVlCSU5ESU5HU19FTkQNCg==</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>43</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/RecipeFramework/VisualStudio/Microsoft.Practices.RecipeFramework.VisualStudio.Test.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSIgDQogICAgQ2FwdGlvbj0iVGVzdCBTYW1wbGUgUGFja2FnZSINCiAgICBEZXNjcmlwdGlvbj0iVGhlIERlc2NyaXB0aW9uIGZvciB0aGUgU2FtcGxlIFBhY2thZ2UiDQoJICBHdWlkPSIxRTRBMUJFQi1GRjk2LTRmYTItQTE4MS00ODlGNjExQjAyRUMiIA0KCSAgQmluZGluZ1JlY2lwZT0iQmluZGluZ1JlY2lwZSINCiAgICBTY2hlbWFWZXJzaW9uPSIxLjAiDQogICAgVHJhY2VMZXZlbD0iV2FybmluZyI+DQogIDxSZWNpcGVzPg0KICAgIDxSZWNpcGUgTmFtZT0iU2ltcGxlUmVjaXBlIj4NCiAgICAgIDxDYXB0aW9uPlRoaXMgaXMgYSBzaW1wbGUgcmVjaXBlPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlRoaXMgaXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBzaW1wbGUgcmVjaXBlLjwvRGVzY3JpcHRpb24+DQogICAgICA8SG9zdERhdGE+DQogICAgICAgIDxJY29uIElEPSIzNDYiLz4NCiAgICAgICAgPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24iLz4NCiAgICAgIDwvSG9zdERhdGE+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iTmFtZSIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgTmFtZT0iU2ltcGxlV2l6YXJkIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlPg0KICAgICAgICAgICAgICA8VGl0bGU+VGhpcyB0aXRsZSBzaG93cyBhIHNpbXBsZSB3aXphcmQ8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPlRoaXMgc2ltcGxlIHdpemFyZCBkZXNjcmlwdGlvbiB3aWxsIGNvbGxlY3QgYW4gYXJndW1lbnQuPC9MaW5rVGl0bGU+DQogICAgICAgICAgICAgIDxIZWxwPllvdSBzaG91bGRuJ3QgbmVlZCBhIGxvdCBvZiBoZWxwITwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJOYW1lIiBMYWJlbD0iTmFtZSB0byBzYWx1dGUiIC8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgIDwvUGFnZXM+DQogICAgICAgIDwvV2l6YXJkPg0KICAgICAgPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgIDwhLS0NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkhlbGxvV29ybGQiIFR5cGU9IkhlbGxvV29ybGRBY3Rpb24iPg0KICAgICAgICAgIDxJbnB1dCBOYW1lPSJTYXlOYW1lIiBSZWNpcGVBcmd1bWVudD0iTmFtZSIgLz4NCiAgICAgICAgPC9BY3Rpb24+DQogICAgICA8L0FjdGlvbnM+DQogICAgICAtLT4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IlVuYm91bmRTaW1wbGVSZWNpcGUiIEJvdW5kPSJmYWxzZSIgUmVjdXJyZW50PSJ0cnVlIj4NCiAgICAgIDxDYXB0aW9uPlRoaXMgaXMgYSBzaW1wbGUgcmVjaXBlPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlRoaXMgaXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBzaW1wbGUgcmVjaXBlLjwvRGVzY3JpcHRpb24+DQogICAgICA8SG9zdERhdGE+DQogICAgICAgIDxJY29uIElEPSIzNDYiLz4NCiAgICAgICAgPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24iLz4NCiAgICAgIDwvSG9zdERhdGE+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iTmFtZSIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgTmFtZT0iU2ltcGxlV2l6YXJkIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlPg0KICAgICAgICAgICAgICA8VGl0bGU+VGhpcyB0aXRsZSBzaG93cyBhIHNpbXBsZSB3aXphcmQ8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPlRoaXMgc2ltcGxlIHdpemFyZCBkZXNjcmlwdGlvbiB3aWxsIGNvbGxlY3QgYW4gYXJndW1lbnQuPC9MaW5rVGl0bGU+DQogICAgICAgICAgICAgIDxIZWxwPllvdSBzaG91bGRuJ3QgbmVlZCBhIGxvdCBvZiBoZWxwITwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJOYW1lIiBMYWJlbD0iTmFtZSB0byBzYWx1dGUiIC8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgIDwvUGFnZXM+DQogICAgICAgIDwvV2l6YXJkPg0KICAgICAgPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIA0KICAgICAgICAgIE5hbWU9IkVuc3VyZUMjIg0KICAgICAgICAgIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZXN0LkVuc3VyZUNTaGFycEFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlRlc3QiIC8+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJVbmJvdW5kU2ltcGxlUmVjaXBlMiIgQm91bmQ9ImZhbHNlIiBSZWN1cnJlbnQ9InRydWUiPg0KICAgICAgPENhcHRpb24+VGhpcyBpcyBhIHNpbXBsZSByZWNpcGUyPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlRoaXMgaXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBzaW1wbGUgcmVjaXBlMi48L0Rlc2NyaXB0aW9uPg0KICAgICAgPEhvc3REYXRhPg0KICAgICAgICA8SWNvbiBJRD0iMzQ2Ii8+DQogICAgICAgIDxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIi8+DQogICAgICA8L0hvc3REYXRhPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9Ik5hbWUiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIE5hbWU9IlNpbXBsZVdpemFyZCIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPlRoaXMgdGl0bGUgc2hvd3MgYSBzaW1wbGUgd2l6YXJkPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5UaGlzIHNpbXBsZSB3aXphcmQgZGVzY3JpcHRpb24gd2lsbCBjb2xsZWN0IGFuIGFyZ3VtZW50LjwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5Zb3Ugc2hvdWxkbid0IG5lZWQgYSBsb3Qgb2YgaGVscCE8L0hlbHA+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iTmFtZSIgTGFiZWw9Ik5hbWUgdG8gc2FsdXRlIiAvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJIZWxsb1dvcmxkIiBUeXBlPSJIZWxsb1dvcmxkQWN0aW9uIj4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iU2F5TmFtZSIgUmVjaXBlQXJndW1lbnQ9Ik5hbWUiIC8+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iQUNsYXNzUmVjaXBlIj4NCiAgICAgIDxDYXB0aW9uPk1ha2Ugc2VyaWFsaXphYmxlPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlRoaXMgaXMgYW4gb21uaXByZXNlbnQgcmVjaXBlLjwvRGVzY3JpcHRpb24+DQogICAgICA8SG9zdERhdGE+DQogICAgICAgIDxJY29uIElEPSIxMDMyIi8+DQogICAgICAgIDxDb21tYW5kQmFyIE5hbWU9Ikl0ZW0iLz4NCiAgICAgIDwvSG9zdERhdGE+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZSA9IkFyZ3VtZW50MSIgVHlwZSA9IlN5c3RlbS5TdHJpbmciIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIE5hbWU9IlNpbXBsZVdpemFyZCIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPlRoaXMgdGl0bGUgc2hvd3MgYSBzaW1wbGUgd2l6YXJkPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5UaGlzIHNpbXBsZSB3aXphcmQgZGVzY3JpcHRpb24gd2lsbCBjb2xsZWN0IGFuIGFyZ3VtZW50LjwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5Zb3Ugc2hvdWxkbid0IG5lZWQgYSBsb3Qgb2YgaGVscCE8L0hlbHA+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iTmFtZSIgTGFiZWw9Ik5hbWUgdG8gc2FsdXRlIiAvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJIZWxsb1dvcmxkIiBUeXBlPSJIZWxsb1dvcmxkQWN0aW9uIj4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iU2F5TmFtZSIgUmVjaXBlQXJndW1lbnQ9IkFyZ3VtZW50MSIgLz4NCiAgICAgICAgPC9BY3Rpb24+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJUZXN0UmVjaXBlQmFzaWNEYXRhVHlwZXMiIFJlY3VycmVudD0idHJ1ZSI+DQogICAgICA8Q2FwdGlvbj5UZXN0IFJlY2lwZSBmb3IgQmFzaWMgRGF0YSBUeXBlczwvQ2FwdGlvbj4NCiAgICAgIDxEZXNjcmlwdGlvbj5UaGlzIGlzIGEgcmVjaXBlIGRlZmluZWQgaW4gU2hhZG93RmF4LmNvbmZpZzwvRGVzY3JpcHRpb24+DQogICAgICA8SG9zdERhdGEgPg0KICAgICAgICA8SWNvbiBJRD0iMzQ2Ii8+DQogICAgICAgIDxDb21tYW5kQmFyIE5hbWU9IlNvbHV0aW9uIi8+DQogICAgICA8L0hvc3REYXRhPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFyZ1dpdGhXcm9uZ1R5cGUiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIE5hbWU9Ik15V2l6YXJkIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlPg0KICAgICAgICAgICAgICA8VGl0bGU+TXlXaXphcmQgVGl0bGU8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPk15V2l6YXJkIHRpdGxlPC9MaW5rVGl0bGU+DQogICAgICAgICAgICAgIDxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQXJnV2l0aFdyb25nVHlwZSIgTGFiZWw9IkFyZ3VtZW50IHdpdGggV3JvbmcgVHlwZSIvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJBZGRSZW1vdGluZyIgVHlwZT0iQWRkUmVtb3RpbmdUb1Byb2plY3QiPg0KICAgICAgICAgIDxJbnB1dCBOYW1lPSJQYXJhbWV0ZXIwOCIgUmVjaXBlQXJndW1lbnQ9IkFyZ1dpdGhXcm9uZ1R5cGUiIC8+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iUmVjaXBlV2l0aEh1Z2VUaXRsZXMiIFJlY3VycmVudD0idHJ1ZSI+DQogICAgICA8Q2FwdGlvbj5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGRlc2NyaXRwaW9uPC9EZXNjcmlwdGlvbj4NCiAgICAgIDxIb3N0RGF0YSA+DQogICAgICAgIDxJY29uIElEPSIzNDYiLz4NCiAgICAgICAgPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24iLz4NCiAgICAgIDwvSG9zdERhdGE+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQxIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQyIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQzIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ0IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ1IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ2IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ3IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ4IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQ5IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQxMCIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50MTEiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDEyIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQxMyIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50MTQiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE1IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQxNiIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50MTciIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJBcmd1bWVudDE4IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQXJndW1lbnQxOSIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkFyZ3VtZW50MjAiIFR5cGU9IlN5c3RlbS5TdHJpbmciIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIE5hbWU9Ik15V2l6YXJkIiBTY2hlbWFWZXJzaW9uPSIxLjAiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlPg0KICAgICAgICAgICAgICA8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHlyZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5cmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseXJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MSIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQogICAgICAgICAgICAgIDxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQyIiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICAgIDxQYWdlPg0KICAgICAgICAgICAgICA8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQogICAgICAgICAgICAgIDxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDMiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50NCIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQogICAgICAgICAgICAgIDxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQ1IiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICAgIDxQYWdlPg0KICAgICAgICAgICAgICA8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQogICAgICAgICAgICAgIDxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDYiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50NyIgTGFiZWw9IlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGFiZWwiLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgdGl0bGU8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPlJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IGxvbmcgbGlua3RpdGxlPC9MaW5rVGl0bGU+DQogICAgICAgICAgICAgIDxIZWxwPk15V2l6YXJkIEhlbHA8L0hlbHA+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQXJndW1lbnQ4IiBMYWJlbD0iUmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsYWJlbCIvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICAgIDxQYWdlPg0KICAgICAgICAgICAgICA8VGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyB0aXRsZTwvVGl0bGU+DQogICAgICAgICAgICAgIDxMaW5rVGl0bGU+UmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgbG9uZyBsaW5rdGl0bGU8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJBcmd1bWVudDkiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTAiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTEiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTIiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTMiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTQiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTUiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTYiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTciIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTgiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MTkiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIHRpdGxlPC9UaXRsZT4NCiAgICAgICAgICAgICAgPExpbmtUaXRsZT5SZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxpbmt0aXRsZTwvTGlua1RpdGxlPg0KICAgICAgICAgICAgICA8SGVscD5NeVdpemFyZCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkFyZ3VtZW50MjAiIExhYmVsPSJSZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSByZWFsbHkgcmVhbGx5IHJlYWxseSBsb25nIGxhYmVsIi8+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgIDwvUGFnZXM+DQogICAgICAgIDwvV2l6YXJkPg0KICAgICAgPC9HYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkFkZFJlbW90aW5nIiBUeXBlPSJBZGRSZW1vdGluZ1RvUHJvamVjdCI+DQogICAgICAgICAgPElucHV0IE5hbWU9IlBhcmFtZXRlcjAxIiBSZWNpcGVBcmd1bWVudD0iQXJndW1lbnQxIiAvPg0KICAgICAgICA8L0FjdGlvbj4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IlNvbHV0aW9uUGlja2VyVGVzdCIgQm91bmQ9ImZhbHNlIj4NCiAgICAgIDxDYXB0aW9uPlNob3cgd2l6YXJkIHdpdGggU29sdXRpb24gUGlja2VyPC9DYXB0aW9uPg0KICAgICAgPEhvc3REYXRhPg0KICAgICAgICA8SWNvbiBJRD0iNDgwIi8+DQogICAgICAgIDxDb21tYW5kQmFyIE5hbWU9Ikl0ZW0iIC8+DQogICAgICA8L0hvc3REYXRhPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlByb2plY3QiIFR5cGU9IkVudkRURS5Qcm9qZWN0LCBFbnZEVEUiPg0KICAgICAgICAgIDxDb252ZXJ0ZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5Db252ZXJ0ZXJzLkR0ZUVsZW1lbnRDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJQcm9qZWN0MiIgVHlwZT0iRW52RFRFLlByb2plY3QsIEVudkRURSI+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuRHRlRWxlbWVudENvbnZlcnRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlByb2plY3RJdGVtIiBUeXBlPSJFbnZEVEUuUHJvamVjdEl0ZW0sIEVudkRURSI+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuRHRlRWxlbWVudENvbnZlcnRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlNvbHV0aW9uRm9sZGVyIiBUeXBlPSJFbnZEVEU4MC5Tb2x1dGlvbkZvbGRlciwgRW52RFRFODAiPg0KICAgICAgICAgIDxDb252ZXJ0ZXIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5Db252ZXJ0ZXJzLkR0ZUVsZW1lbnRDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJTb2x1dGlvbkZvbGRlcjIiIFR5cGU9IkVudkRURTgwLlNvbHV0aW9uRm9sZGVyLCBFbnZEVEU4MCI+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkNvbnZlcnRlcnMuRHRlRWxlbWVudENvbnZlcnRlciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgICAgPC9Bcmd1bWVudD4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlNhbXBsZUFyZ3VtZW50IiAvPg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8R2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICAgIDxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiBOYW1lPSJTaW1wbGVXaXphcmQiIFNjaGVtYVZlcnNpb249IjEuMCI+DQogICAgICAgICAgPFBhZ2VzPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5TZWxlY3QgdGFyZ2V0PC9UaXRsZT4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJQcm9qZWN0IiBMYWJlbD0iVGFyZ2V0IFByb2plY3QiPg0KICAgICAgICAgICAgICAgICAgPEVkaXRvciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkVkaXRvcnMuU29sdXRpb25QaWNrZXJFZGl0b3IsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIA0KICAgICAgICAgICAgICAgICAgICAgICAgICBVbmJvdW5kUmVmZXJlbmNlVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlRlc3QuTXlQcm9qZWN0UmVmZXJlbmNlLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdCIvPg0KICAgICAgICAgICAgICAgIDwvRmllbGQ+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iUHJvamVjdDIiIExhYmVsPSJUYXJnZXQgUHJvamVjdCAobm8gcmVmKSI+DQogICAgICAgICAgICAgICAgICA8RWRpdG9yIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuRWRpdG9ycy5Tb2x1dGlvblBpY2tlckVkaXRvciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgLz4NCiAgICAgICAgICAgICAgICA8L0ZpZWxkPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IlByb2plY3RJdGVtIiBMYWJlbD0iVGFyZ2V0IFByb2plY3RJdGVtIj4NCiAgICAgICAgICAgICAgICAgIDxFZGl0b3IgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5FZGl0b3JzLlNvbHV0aW9uUGlja2VyRWRpdG9yLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgVW5ib3VuZFJlZmVyZW5jZVR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZXN0Lk15UHJvamVjdEl0ZW1SZWZlcmVuY2UsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZXN0Ii8+DQogICAgICAgICAgICAgICAgPC9GaWVsZD4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJTb2x1dGlvbkZvbGRlciIgTGFiZWw9IlRhcmdldCBTb2x1dGlvbkZvbGRlciI+DQogICAgICAgICAgICAgICAgICA8RWRpdG9yIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuRWRpdG9ycy5Tb2x1dGlvblBpY2tlckVkaXRvciwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSIgDQogICAgICAgICAgICAgICAgICAgICAgICAgIFVuYm91bmRSZWZlcmVuY2VUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdC5NeVNvbHV0aW9uRm9sZGVyUmVmZXJlbmNlLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdCIvPg0KICAgICAgICAgICAgICAgIDwvRmllbGQ+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iU29sdXRpb25Gb2xkZXIyIiBMYWJlbD0iVGFyZ2V0IFNvbHV0aW9uRm9sZGVyIChubyByZWYpIj4NCiAgICAgICAgICAgICAgICAgIDxFZGl0b3IgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5FZGl0b3JzLlNvbHV0aW9uUGlja2VyRWRpdG9yLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5IiAvPg0KICAgICAgICAgICAgICAgIDwvRmllbGQ+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iU2FtcGxlQXJndW1lbnQiIExhYmVsPSJTYW1wbGUgRWRpdG9yIj4NCiAgICAgICAgICAgICAgICAgIDxFZGl0b3IgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlRlc3QuU2FtcGxlRWRpdG9yLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdCIgLz4NCiAgICAgICAgICAgICAgICA8L0ZpZWxkPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJNaXNjZWxhbmVvdXNUZXN0cyIgQm91bmQ9ImZhbHNlIj4NCiAgICAgIDxDYXB0aW9uPlNob3djYXNlcyBtaXNjZWxhbmVvdXMgZmVhdHVyZXM8L0NhcHRpb24+DQogICAgICA8SG9zdERhdGE+DQogICAgICAgIDxJY29uIElEPSI3MjAiLz4NCiAgICAgICAgPENvbW1hbmRCYXIgTmFtZT0iSXRlbSIgLz4NCiAgICAgIDwvSG9zdERhdGE+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iRGF0ZSIgVHlwZT0iU3lzdGVtLkRhdGVUaW1lIiAvPg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8R2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICAgIDxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiBOYW1lPSJTaW1wbGVXaXphcmQiIFNjaGVtYVZlcnNpb249IjEuMCI+DQogICAgICAgICAgPFBhZ2VzPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5TZWxlY3QgdGFyZ2V0PC9UaXRsZT4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJEYXRlIiBMYWJlbD0iQSBkYXRlIj4NCiAgICAgICAgICAgICAgICAgIDxFZGl0b3IgVHlwZT0iU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRlc2lnbi5EYXRlVGltZUVkaXRvciwgU3lzdGVtLkRlc2lnbiwgVmVyc2lvbj0yLjAuMzYwMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWIwM2Y1ZjdmMTFkNTBhM2EiIC8+DQogICAgICAgICAgICAgICAgPC9GaWVsZD4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iTm9uUmVjdXJyZW50VGVzdCIgUmVjdXJyZW50PSJmYWxzZSI+DQogICAgICA8Q2FwdGlvbj5UZXN0cyBub24tcmVjdXJyZW50IHJlY2lwZSBiZWhhdmlvcjwvQ2FwdGlvbj4NCiAgICAgIDxIb3N0RGF0YT4NCiAgICAgICAgPEljb24gSUQ9IjkzOCIvPg0KICAgICAgICA8Q29tbWFuZEJhciBOYW1lPSJTb2x1dGlvbiIvPg0KICAgICAgPC9Ib3N0RGF0YT4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIE5hbWU9Ik5vdGhpbmciIA0KICAgICAgICAgICAgICAgIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5Eb05vdGhpbmdBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiIC8+DQogICAgICA8L0FjdGlvbnM+DQogICAgPC9SZWNpcGU+DQogICAgPFJlY2lwZSBOYW1lPSJFeGVjdXRlUmVjaXBlIj4NCiAgICAgIDxDYXB0aW9uPkV4ZWN1dGUgYSBSZWNpcGU8L0NhcHRpb24+DQogICAgICA8SG9zdERhdGE+DQogICAgICAgIDxJY29uIElEPSIzNDYiLz4NCiAgICAgICAgPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24iIC8+DQogICAgICA8L0hvc3REYXRhPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlJlY2lwZSI+DQogICAgICAgICAgPENvbnZlcnRlciBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdC5SZWNpcGVDb252ZXJ0ZXIsIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZXN0Ii8+DQogICAgICAgIDwvQXJndW1lbnQ+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIE5hbWU9IlNpbXBsZVdpemFyZCIgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPlNlbGVjdCByZWNpcGUgdG8gZXhlY3V0ZTwvVGl0bGU+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iUmVjaXBlIiBMYWJlbD0iUmVjaXBlIiAvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJFeGVjdXRlUmVjaXBlIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdC5FeGVjdXRlUmVjaXBlQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdCI+DQogICAgICAgICAgPElucHV0IE5hbWU9IlJlY2lwZSIgUmVjaXBlQXJndW1lbnQ9IlJlY2lwZSIvPg0KICAgICAgICA8L0FjdGlvbj4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IlZhbHVlVHlwZU9wdGlvbmFsIj4NCiAgICAgIDxDYXB0aW9uPlZhbHVlIHR5cGVzIHRoYXQgYXJlIG9wdGlvbmFsPC9DYXB0aW9uPg0KICAgICAgPEFyZ3VtZW50cz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkRhdGUiIFR5cGU9IlN5c3RlbS5EYXRlVGltZSIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQm9vbCIgVHlwZT0iU3lzdGVtLkJvb2xlYW4iIFJlcXVpcmVkPSJmYWxzZSIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iVmFsdWVUeXBlT3B0aW9uYWxOdWxsYWJsZSI+DQogICAgICA8Q2FwdGlvbj5WYWx1ZSB0eXBlcyB0aGF0IGFyZSBvcHRpb25hbDwvQ2FwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJCb29sIiBUeXBlPSJTeXN0ZW0uTnVsbGFibGVgMVtbU3lzdGVtLkJvb2xlYW5dXSIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iRGF0ZSIgVHlwZT0iU3lzdGVtLk51bGxhYmxlYDFbW1N5c3RlbS5EYXRlVGltZV1dIiBSZXF1aXJlZD0iZmFsc2UiIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IkluaXRpYWxTdGF0ZVRlc3QiIFJlY3VycmVudD0idHJ1ZSI+DQogICAgICA8Q2FwdGlvbj5UZXN0cyBpbml0aWFsIHN0YXRlPC9DYXB0aW9uPg0KICAgICAgPEhvc3REYXRhPg0KICAgICAgICA8SWNvbiBJRD0iMTE1MCIvPg0KICAgICAgICA8Q29tbWFuZEJhciBOYW1lPSJTb2x1dGlvbiIvPg0KICAgICAgPC9Ib3N0RGF0YT4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJJbml0aWFsVmFsdWUiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJOb1ZhbHVlIi8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIFNjaGVtYVZlcnNpb249IjEuMCI+DQogICAgICAgICAgPFBhZ2VzPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5FZGl0IHZhbHVlczwvVGl0bGU+DQogICAgICAgICAgICAgIDxGaWVsZHM+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iSW5pdGlhbFZhbHVlIiBMYWJlbD0iVmFsdWUgd2l0aCBzdGF0ZSIgLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJOb1ZhbHVlIiBMYWJlbD0iVmFsdWUgd2l0aCBubyBzdGF0ZSIgLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iQmluZGluZ1JlY2lwZSI+DQogICAgICA8Q2FwdGlvbj5CaW5kaW5nIFJlY2lwZTwvQ2FwdGlvbj4NCiAgICAgIDxBY3Rpb25zPg0KICAgICAgICA8QWN0aW9uIA0KICAgICAgICAgIE5hbWU9IkxvZ1Rlc3QiIA0KICAgICAgICAgIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZXN0LkxvZ2dpbmdUZXN0QWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdCIgLz4NCiAgICAgICAgPEFjdGlvbiANCiAgICAgICAgICBOYW1lPSJCaW5kIiANCiAgICAgICAgICBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdC5CaW5kQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdCIgLz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJCaW5kUmVjaXBlIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuQmluZFJlY2lwZUFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSI+DQogICAgICAgICAgPCEtLQ0KICAgICAgICAgIDxJbnB1dCBOYW1lPSJSZWNpcGUiIFJlY2lwZUFyZ3VtZW50PSJSZWNpcGUiLz4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iVGFyZ2V0IiBSZWNpcGVBcmd1bWVudD0iVGFyZ2V0Ii8+DQogICAgICAgICAgLS0+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgICA8QWN0aW9uIE5hbWU9IkNyZWF0ZVNvbFBpY2tlclJlZiIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeS5BY3Rpb25zLkNyZWF0ZVVuYm91bmRSZWZlcmVuY2VBY3Rpb24sIE1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkiDQogICAgICAgICAgICAgICAgQXNzZXROYW1lPSJTb2x1dGlvblBpY2tlclRlc3QiIFJlZmVyZW5jZVR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZXN0Lk15VW5ib3VuZFJlZmVyZW5jZSwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlRlc3QiPg0KICAgICAgICA8L0FjdGlvbj4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJDcmVhdGVNaXNjZWxhbmVvdXNSZWYiIFR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLkxpYnJhcnkuQWN0aW9ucy5DcmVhdGVVbmJvdW5kUmVmZXJlbmNlQWN0aW9uLCBNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5Ig0KICAgICAgICAgICAgICAgIEFzc2V0TmFtZT0iTWlzY2VsYW5lb3VzVGVzdHMiIFJlZmVyZW5jZVR5cGU9Ik1pY3Jvc29mdC5QcmFjdGljZXMuUmVjaXBlRnJhbWV3b3JrLlZpc3VhbFN0dWRpby5UZXN0Lk15VW5ib3VuZFJlZmVyZW5jZSwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlRlc3QiPg0KICAgICAgICA8L0FjdGlvbj4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJDcmVhdGVNaXNjZWxhbmVvdXNSZWYyIiBUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5MaWJyYXJ5LkFjdGlvbnMuQ3JlYXRlVW5ib3VuZFJlZmVyZW5jZUFjdGlvbiwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuTGlicmFyeSINCiAgICAgICAgICAgICAgICBBc3NldE5hbWU9Ik1pc2NlbGFuZW91c1Rlc3RzIiBSZWZlcmVuY2VUeXBlPSJNaWNyb3NvZnQuUHJhY3RpY2VzLlJlY2lwZUZyYW1ld29yay5WaXN1YWxTdHVkaW8uVGVzdC5UaHJvd2luZ1JlZmVyZW5jZSwgTWljcm9zb2Z0LlByYWN0aWNlcy5SZWNpcGVGcmFtZXdvcmsuVmlzdWFsU3R1ZGlvLlRlc3QiPg0KICAgICAgICA8L0FjdGlvbj4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgPC9SZWNpcGVzPg0KPC9HdWlkYW5jZVBhY2thZ2U+</FileContents>
        </FILE>
        <FILE>
          <NameValueCollection>
            <change>default</change>
            <rev>26</rev>
            <type>text</type>
            <depotFile>//depot/Microsoft/IPG/suites/src/WizardFramework/Wizards.xml</depotFile>
            <action>edit</action>
          </NameValueCollection>
          <FileContents encoding="base64">77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiID8+DQo8R3VpZGFuY2VQYWNrYWdlIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtY29yZSINCiAgICAgICAgICAgICAgIEd1aWQ9IjFFNEExQkVCLUZGOTYtNGZhMi1BMTgxLTQ4OUY2MTFCMDJFQyIgDQogICAgICAgICAgICAgICBDYXB0aW9uPSJQYWNrYWdlIENhcHRpb24iIA0KICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIj4NCiAgPFJlY2lwZXM+DQogICAgPFJlY2lwZSBOYW1lPSJSZWNpcGVXaXRoQm9vbEFyZ3VtZW50cyI+DQogICAgICA8Q2FwdGlvbj5SZWNpcGVXaXRoQm9vbEFyZ3VtZW50cyBDYXB0aW9uPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlJlY2lwZVdpdGhCb29sQXJndW1lbnRzIERlc2NyaXB0aW9uPC9EZXNjcmlwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJCb29sQXJndW1lbnQxIiBUeXBlPSJTeXN0ZW0uQm9vbGVhbiIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkJvb2xBcmd1bWVudDIiIFR5cGU9IlN5c3RlbS5Cb29sZWFuIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQm9vbEFyZ3VtZW50MyIgVHlwZT0iU3lzdGVtLkJvb2xlYW4iIC8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIA0KICAgICAgICAgICAgICAgIFNjaGVtYVZlcnNpb249IjEuMCIgDQogICAgICAgICAgICAgICAgTmFtZT0iTXlXaXphcmRXaXRoQm9vbEFyZ3VtZW50Ij4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPk15V2l6YXJkIFN0ZXAgVGl0bGU8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPk15V2l6YXJkIFN0ZXAgU3VidGl0bGU8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgU3RlcCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkJvb2xBcmd1bWVudDEiIExhYmVsPSJMYWJlbCBmb3IgQm9vbCBBcmd1bWVudCAxIiAvPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkJvb2xBcmd1bWVudDIiIExhYmVsPSJMYWJlbCBmb3IgQm9vbCBBcmd1bWVudCAyIiAvPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkJvb2xBcmd1bWVudDMiIExhYmVsPSJMYWJlbCBmb3IgQm9vbCBBcmd1bWVudCAzIiAvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lID0iSGVsbG9Xb3JsZEFjdGlvbiIgVHlwZT0iSGVsbG9Xb3JsZEFjdGlvbiI+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iUmVjaXBlV2l0aENvbG9yQXJndW1lbnRzIj4NCiAgICAgIDxDYXB0aW9uPlJlY2lwZVdpdGhDb2xvckFyZ3VtZW50cyBDYXB0aW9uPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlJlY2lwZVdpdGhDb2xvckFyZ3VtZW50cyBEZXNjcmlwdGlvbjwvRGVzY3JpcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQ29sb3JBcmd1bWVudDEiIFR5cGU9IlN5c3RlbS5EcmF3aW5nLkNvbG9yLFN5c3RlbS5EcmF3aW5nLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkNvbG9yQXJndW1lbnQyIiBUeXBlPSJTeXN0ZW0uRHJhd2luZy5Db2xvcixTeXN0ZW0uRHJhd2luZywgVmVyc2lvbj0yLjAuMzYwMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWIwM2Y1ZjdmMTFkNTBhM2EiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJDb2xvckFyZ3VtZW50MyIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuQ29sb3IsU3lzdGVtLkRyYXdpbmcsIFZlcnNpb249Mi4wLjM2MDAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhIiAvPg0KICAgICAgPC9Bcmd1bWVudHM+DQogICAgICA8R2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICAgIDxXaXphcmQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vcGFnL2dheC13aXphcmRzIiANCiAgICAgICAgICAgICAgICBTY2hlbWFWZXJzaW9uPSIxLjAiIA0KICAgICAgICAgICAgICAgIE5hbWU9Ik15V2l6YXJkV2l0aENvbG9yRWRpdG9yIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZT4NCiAgICAgICAgICAgICAgPFRpdGxlPk15V2l6YXJkIFN0ZXAgVGl0bGU8L1RpdGxlPg0KICAgICAgICAgICAgICA8TGlua1RpdGxlPk15V2l6YXJkIFN0ZXAgU3VidGl0bGU8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgU3RlcCBIZWxwPC9IZWxwPg0KICAgICAgICAgICAgICA8RmllbGRzPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkNvbG9yQXJndW1lbnQxIiBMYWJlbD0iTGFiZWwgZm9yIENvbG9yIEFyZ3VtZW50IDEiIC8+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQ29sb3JBcmd1bWVudDIiIExhYmVsPSJMYWJlbCBmb3IgQ29sb3IgQXJndW1lbnQgMiIgLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJDb2xvckFyZ3VtZW50MyIgTGFiZWw9IkxhYmVsIGZvciBDb2xvciBBcmd1bWVudCAzIiAvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lID0iSGVsbG9Xb3JsZEFjdGlvbiIgVHlwZT0iSGVsbG9Xb3JsZEFjdGlvbiI+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iUmVjaXBlTXVsdGlwbGVUeXBlcyI+DQogICAgICA8Q2FwdGlvbj5UZXN0UmVjaXBlTXVsdGlwbGVUeXBlcyBDYXB0aW9uPC9DYXB0aW9uPg0KICAgICAgPERlc2NyaXB0aW9uPlRlc3RSZWNpcGVNdWx0aXBsZVR5cGVzIERlc2NyaXB0aW9uPC9EZXNjcmlwdGlvbj4NCiAgICAgIDxBcmd1bWVudHM+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJDb2xvckFyZ3VtZW50IiBUeXBlPSJTeXN0ZW0uRHJhd2luZy5Db2xvciwgU3lzdGVtLkRyYXdpbmcsIFZlcnNpb249Mi4wLjM2MDAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iRm9udEFyZ3VtZW50IiBUeXBlPSJTeXN0ZW0uRHJhd2luZy5Gb250LCBTeXN0ZW0uRHJhd2luZywgVmVyc2lvbj0yLjAuMzYwMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWIwM2Y1ZjdmMTFkNTBhM2EiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJFbnVtQXJndW1lbnQiIFR5cGU9IlN5c3RlbS5QbGF0Zm9ybUlEIiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQm9vbGVhbkFyZ3VtZW50IiBUeXBlPSJTeXN0ZW0uQm9vbGVhbiIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlN0cmluZ0FyZ3VtZW50IiBUeXBlPSJTeXN0ZW0uU3RyaW5nIi8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJJbnRBcmd1bWVudCIgVHlwZT0iU3lzdGVtLkludDMyIiBSZXF1aXJlZD0idHJ1ZSIvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iRmxvYXRBcmd1bWVudCIgVHlwZT0iU3lzdGVtLkRvdWJsZSIgUmVxdWlyZWQ9ImZhbHNlIiAgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkNvbXBsZXhBcmd1bWVudCIgVHlwZT0iU3lzdGVtLldpbmRvd3MuRm9ybXMuRm9ybSwgU3lzdGVtLldpbmRvd3MuRm9ybXMsIFZlcnNpb249Mi4wLjM2MDAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5IiBSZXF1aXJlZD0iZmFsc2UiICAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iRGF0ZUFyZ3VtZW50IiBUeXBlPSJTeXN0ZW0uRGF0ZVRpbWUiIFJlcXVpcmVkPSJmYWxzZSIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9Ik15Q2xhc3NBcmd1bWVudCIgVHlwZT0iTWljcm9zb2Z0LlByYWN0aWNlcy5XaXphcmRGcmFtZXdvcmsuVGVzdC5NeUNsYXNzLCBNaWNyb3NvZnQuUHJhY3RpY2VzLldpemFyZEZyYW1ld29yay5UZXN0IiBSZXF1aXJlZD0iZmFsc2UiICAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQnV0dG9uQXJndW1lbnQiIFR5cGU9IlN5c3RlbS5XaW5kb3dzLkZvcm1zLkJ1dHRvbiwgU3lzdGVtLldpbmRvd3MuRm9ybXMsIFZlcnNpb249Mi4wLjM2MDAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5IiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iSW50NjRBcmd1bWVudCIgVHlwZT0iU3lzdGVtLkludDY0IiAvPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iQ09NQXJndW1lbnQxIiBUeXBlPSJFbnZEVEUuU29sdXRpb24sIEVudkRURSIgUmVxdWlyZWQ9ImZhbHNlIiAvPg0KCTxBcmd1bWVudCBOYW1lPSJDT01Bcmd1bWVudDIiIFR5cGU9IkVudkRURS5Qcm9qZWN0LCBFbnZEVEUiIFJlcXVpcmVkPSJmYWxzZSIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQogICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIiANCiAgICAgICAgICAgICAgICBOYW1lPSJNeVdpemFyZFdpdGhNdWx0aXBsZVR5cGVzIj4NCiAgICAgICAgICA8UGFnZXM+DQogICAgICAgICAgICA8UGFnZSBXaWR0aD0iODAwIiBIZWlnaHQ9IjYwMCI+DQogICAgICAgICAgICAgIDxUaXRsZT5NeVdpemFyZCBTdGVwIFRpdGxlMTwvVGl0bGU+DQogICAgICAgICAgICAgIDxMaW5rVGl0bGU+TXlXaXphcmQgU3RlcCBTdWJ0aXRsZTE8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgU3RlcCBIZWxwMTwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJDb2xvckFyZ3VtZW50IiBMYWJlbD0iTGFiZWwgZm9yIENvbG9yIEFyZ3VtZW50Ij4NCiAgICAgICAgICAgICAgICAgIDxUb29sdGlwPlRvb2wgdGlwIGZvciBjb2xvciBhcmd1bWVudDwvVG9vbHRpcD4NCiAgICAgICAgICAgICAgICAgIDxIZWxwPkhlbHAgZm9yIGNvbG9yIGFyZ3VtZW50PC9IZWxwPg0KICAgICAgICAgICAgICAgIDwvRmllbGQ+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iRm9udEFyZ3VtZW50IiBMYWJlbD0iTGFiZWwgZm9yIEZvbnQgQXJndW1lbnQiIFJlYWRPbmx5PSJmYWxzZSIgLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJFbnVtQXJndW1lbnQiIExhYmVsPSJMYWJlbCBmb3IgRW51bSBBcmd1bWVudCIgLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJCb29sZWFuQXJndW1lbnQiIExhYmVsPSJMYWJlbCBmb3IgQm9vbGVhbiBBcmd1bWVudCIgUmVhZE9ubHk9InRydWUiID4NCiAgICAgICAgICAgICAgICAgIDxUb29sdGlwPlRvb2wgdGlwIGZvciBib29sZWFuIGFyZ3VtZW50PC9Ub29sdGlwPg0KICAgICAgICAgICAgICAgICAgPEhlbHA+SGVscCBmb3IgYm9vbGVhbiBhcmd1bWVudDwvSGVscD4NCiAgICAgICAgICAgICAgICA8L0ZpZWxkPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IlN0cmluZ0FyZ3VtZW50IiBMYWJlbD0iTGFiZWwgZm9yIFN0cmluZyBBcmd1bWVudCIgLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJJbnRBcmd1bWVudCIgTGFiZWw9IkxhYmVsIGZvciBJbnQgQXJndW1lbnQiIC8+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iRmxvYXRBcmd1bWVudCIgTGFiZWw9IkxhYmVsIGZvciBGbG9hdCBBcmd1bWVudCIgLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJEYXRlQXJndW1lbnQiIExhYmVsPSJMYWJlbCBmb3IgRGF0ZSBBcmd1bWVudCI+DQogICAgICAgICAgICAgICAgICA8RWRpdG9yIFR5cGU9IlN5c3RlbS5Db21wb25lbnRNb2RlbC5EZXNpZ24uRGF0ZVRpbWVFZGl0b3IsIFN5c3RlbS5EZXNpZ24sIFZlcnNpb249Mi4wLjM2MDAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhIiAvPg0KICAgICAgICAgICAgICAgIDwvRmllbGQ+DQogICAgICAgICAgICAgIDwvRmllbGRzPg0KICAgICAgICAgICAgPC9QYWdlPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5NeVdpemFyZCBTdGVwIFRpdGxlMjwvVGl0bGU+DQogICAgICAgICAgICAgIDxMaW5rVGl0bGU+TXlXaXphcmQgU3RlcCBTdWJ0aXRsZTI8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgU3RlcCBIZWxwMjwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJCdXR0b25Bcmd1bWVudCIgTGFiZWw9IkxhYmVsIGZvciBNeSBCdXR0b24iIC8+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQ29tcGxleEFyZ3VtZW50IiBMYWJlbD0iTGFiZWwgZm9yIENvbXBsZXggQXJndW1lbnQiIC8+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iTXlDbGFzc0FyZ3VtZW50IiBMYWJlbD0iTGFiZWwgZm9yIE15IENsYXNzIiAvPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IkludDY0QXJndW1lbnQiIExhYmVsPSJMYWJlbCBmb3IgSW50NjQgVmFsdWUiIC8+DQoJCTxGaWVsZCBWYWx1ZU5hbWU9IkNPTUFyZ3VtZW50MSIgTGFiZWw9IkxhYmVsIGZvciBDT00oRW52RFRFLlNvbHV0aW9uKSIgUmVhZE9ubHk9InRydWUiIC8+DQoJCTxGaWVsZCBWYWx1ZU5hbWU9IkNPTUFyZ3VtZW50MiIgTGFiZWw9IkxhYmVsIGZvciBDT00oRW52RFRFLlByb2plY3QpIiBSZWFkT25seT0idHJ1ZSIvPg0KICAgICAgICAgICAgICA8L0ZpZWxkcz4NCiAgICAgICAgICAgIDwvUGFnZT4NCiAgICAgICAgICA8L1BhZ2VzPg0KICAgICAgICA8L1dpemFyZD4NCiAgICAgIDwvR2F0aGVyaW5nU2VydmljZURhdGE+DQogICAgICA8QWN0aW9ucz4NCiAgICAgICAgPEFjdGlvbiBOYW1lPSJNeUFjdGlvbiIgVHlwZT0iSGVsbG9Xb3JsZEFjdGlvbiI+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICAgIDxSZWNpcGUgTmFtZT0iUmVjaXBlQ3VzdG9tUGFnZXMiPg0KICAgICAgPENhcHRpb24+VGVzdFJlY2lwZU11bHRpcGxlVHlwZXMgQ2FwdGlvbjwvQ2FwdGlvbj4NCiAgICAgIDxEZXNjcmlwdGlvbj5UZXN0UmVjaXBlTXVsdGlwbGVUeXBlcyBEZXNjcmlwdGlvbjwvRGVzY3JpcHRpb24+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iUmVjaXBlQXJndW1lbnQxIiBUeXBlPSJTeXN0ZW0uU3RyaW5nIiBSZXF1aXJlZD0idHJ1ZSIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlJlY2lwZUFyZ3VtZW50MiIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuRm9udCwgU3lzdGVtLkRyYXdpbmcsIFZlcnNpb249Mi4wLjM2MDAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhIi8+DQogICAgICA8L0FyZ3VtZW50cz4NCiAgICAgIDxHYXRoZXJpbmdTZXJ2aWNlRGF0YT4NCiAgICAgICAgPFdpemFyZCB4bWxucz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9wYWcvZ2F4LXdpemFyZHMiIA0KICAgICAgICAgICAgICAgIFNjaGVtYVZlcnNpb249IjEuMCIgDQogICAgICAgICAgICAgICAgTmFtZT0iV2l6YXJkQ3VzdG9tUGFnZXMiPg0KICAgICAgICAgIDxQYWdlcz4NCiAgICAgICAgICAgIDxQYWdlIFR5cGU9IkN1c3RvbVBhZ2UxIi8+DQogICAgICAgICAgICA8UGFnZSBUeXBlPSJDdXN0b21QYWdlMiI+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iTXlBY3Rpb24iIFR5cGU9IkhlbGxvV29ybGRBY3Rpb24iPg0KICAgICAgICA8L0FjdGlvbj4NCiAgICAgIDwvQWN0aW9ucz4NCiAgICA8L1JlY2lwZT4NCiAgICA8UmVjaXBlIE5hbWU9IlRlc3RSZWNpcGVCYXNpY0RhdGFUeXBlcyI+DQogICAgICA8Q2FwdGlvbj5UZXN0IFJlY2lwZSBmb3IgQmFzaWMgRGF0YSBUeXBlczwvQ2FwdGlvbj4NCiAgICAgIDxEZXNjcmlwdGlvbj5UaGlzIGlzIGEgcmVjaXBlIGRlZmluZWQgaW4gU2hhZG93RmF4LmNvbmZpZzwvRGVzY3JpcHRpb24+DQogICAgICA8SG9zdERhdGE+DQogICAgICAgIDxJY29uIElEPSIzNDYiLz4NCiAgICAgICAgPENvbW1hbmRCYXIgTmFtZT0iU29sdXRpb24iLz4NCiAgICAgIDwvSG9zdERhdGE+DQogICAgICA8QXJndW1lbnRzPg0KICAgICAgICA8QXJndW1lbnQgTmFtZT0iSW50QXJnIiBUeXBlPSJTeXN0ZW0uSW50MzIiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJEb3VibGVBcmciIFR5cGU9IlN5c3RlbS5Eb3VibGUiIC8+DQogICAgICAgIDxBcmd1bWVudCBOYW1lPSJDb2xvckFyZyIgVHlwZT0iU3lzdGVtLkRyYXdpbmcuQ29sb3IsIFN5c3RlbS5EcmF3aW5nLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IkZvbnRBcmciIFR5cGU9IlN5c3RlbS5EcmF3aW5nLkZvbnQsIFN5c3RlbS5EcmF3aW5nLCBWZXJzaW9uPTIuMC4zNjAwLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYSIgLz4NCiAgICAgICAgPEFyZ3VtZW50IE5hbWU9IlN0cmluZ0FyZyIgVHlwZT0iU3lzdGVtLlN0cmluZyIgLz4NCiAgICAgIDwvQXJndW1lbnRzPg0KICAgICAgPEdhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgICA8V2l6YXJkIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3BhZy9nYXgtd2l6YXJkcyIgDQogICAgICAgICAgICAgICAgU2NoZW1hVmVyc2lvbj0iMS4wIiANCiAgICAgICAgICAgICAgICBOYW1lPSJNeVdpemFyZCI+DQogICAgICAgICAgPFBhZ2VzPg0KICAgICAgICAgICAgPFBhZ2U+DQogICAgICAgICAgICAgIDxUaXRsZT5NeVdpemFyZCBUaXRsZTwvVGl0bGU+DQogICAgICAgICAgICAgIDxMaW5rVGl0bGU+TXlXaXphcmQgU3VidGl0bGU8L0xpbmtUaXRsZT4NCiAgICAgICAgICAgICAgPEhlbHA+TXlXaXphcmQgSGVscDwvSGVscD4NCiAgICAgICAgICAgICAgPEZpZWxkcz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJJbnRBcmciIExhYmVsPSJJbnRlZ2VyIEFyZyIvPg0KICAgICAgICAgICAgICAgIDxGaWVsZCBWYWx1ZU5hbWU9IlN0cmluZ0FyZyIgTGFiZWw9IlN0cmluZyBBcmciLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJEb3VibGVBcmciIExhYmVsPSJEb3VibGUgQXJnIi8+DQogICAgICAgICAgICAgICAgPEZpZWxkIFZhbHVlTmFtZT0iQ29sb3JBcmciIExhYmVsPSJDb2xvciBBcmciLz4NCiAgICAgICAgICAgICAgICA8RmllbGQgVmFsdWVOYW1lPSJGb250QXJnIiBMYWJlbD0iRm9udCBBcmciLz4NCiAgICAgICAgICAgICAgPC9GaWVsZHM+DQogICAgICAgICAgICA8L1BhZ2U+DQogICAgICAgICAgPC9QYWdlcz4NCiAgICAgICAgPC9XaXphcmQ+DQogICAgICA8L0dhdGhlcmluZ1NlcnZpY2VEYXRhPg0KICAgICAgPEFjdGlvbnM+DQogICAgICAgIDxBY3Rpb24gTmFtZT0iTXlBY3Rpb24iIFR5cGU9IkFkZFJlbW90aW5nVG9Qcm9qZWN0Ij4NCiAgICAgICAgICA8SW5wdXQgTmFtZT0iUGFyYW1ldGVyMDEiIFJlY2lwZUFyZ3VtZW50PSJJbnRBcmciIC8+DQogICAgICAgIDwvQWN0aW9uPg0KICAgICAgPC9BY3Rpb25zPg0KICAgIDwvUmVjaXBlPg0KICA8L1JlY2lwZXM+DQo8L0d1aWRhbmNlUGFja2FnZT4NCg==</FileContents>
        </FILE>
      </Files>
    </CHANGE>
  </CHANGES>
  <SDCLIENT>v-oscca-vpc</SDCLIENT>
  <SDUSER>REDMOND\v-oscca</SDUSER>
</jjpack>